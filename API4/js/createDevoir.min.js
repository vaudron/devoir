function setdropUIParameter(e){$("#eMasque").on("change",function(e){$(this).prop("checked")?$(maPage.selection.objets[0]).removeClass("zoneDepot").removeAttr("titre"):$(maPage.selection.objets[0]).addClass("zoneDepot").attr("titre","")}),$(e).hasClass("zoneDepot")?$("#eMasque").prop("checked",!1):$("#eMasque").prop("checked",!0),"unique"==$(e).attr("mode")?$("#ebaucheParamUnique").click():$("#ebaucheParamMultiple").click(),$("#ebaucheTentative").val($(e).attr("tentative")),$("#ebaucheParamUnique").on("change",function(e){$(this).is(":checked")&&$(maPage.selection.objets).filter("[mode]").attr("mode","unique")}),$("#ebaucheParamMultiple").on("change",function(e){$(this).is(":checked")&&$(maPage.selection.objets).filter("[mode]").attr("mode","Multiple")}),$("#ebaucheTentative").on("change",function(e){var t=$(this).val();$(maPage.selection.objets[0]).each(function(e){$(this).attr("tentative",t),0>!t?$(this).attr("titre","plus que "+t+" dépôt(s) possible(s)"):$(this).removeAttr("titre")})})}function dropDrop(e,t){var i=$("#"+e.target.id).attr("mode");if("Multiple"==i){var s=!1,a=$(t.draggable[0]).attr("id"),o=new RegExp(a,"i"),n=$("#"+e.target.id).attr("depot"),l=$("#drop"+e.target.id.substring(5)).val();if(o.test(n)){s=!0;for(var r=n.split(";"),p=r,c=0;c<r.length;c++){var d=r[c].split(":");if(d[0]==a){p.splice(c,1);break}}l=p.join(";")}if(""!=l&&(l+=";"),l+=$(t.draggable[0]).attr("id")+":"+$(t.draggable[0]).css("left")+":"+$(t.draggable[0]).css("top"),$("#drop"+e.target.id.substring(5)).val(l),$("#"+e.target.id).attr("depot",l),dv.revert=!1,$(e.target).hasClass("zoneDepot")){var h=parseInt($("#"+e.target.id).attr("tentative"));h>0&&!s&&(h-=1,$("#"+e.target.id).attr("tentative",h),$("#"+e.target.id).attr("titre","plus que "+$("#"+e.target.id).attr("tentative")+" dépôt(s) possible(s)"),$("#"+e.target.id).trigger("mouseover"),setTimeout(function(){$("#"+e.target.id).trigger("mouseleave")},1e3))}0==h&&($("#"+e.target.id).droppable("disable"),$(t.draggable[0]).draggable("disable"))}else if(""==$("#"+e.target.id).attr("depot")){$("#"+e.target.id).attr("depot",$(t.draggable[0]).attr("id")),dv.revert=!1;var l=$(t.draggable[0]).attr("id")+":"+$(t.draggable[0]).css("left")+":"+$(t.draggable[0]).css("top");if($("#drop"+e.target.id.substring(5)).val(l),$(e.target).hasClass("zoneDepot")){var h=parseInt($("#"+e.target.id).attr("tentative"));h>0&&(h-=1,$("#"+e.target.id).attr("tentative",h),$("#"+e.target.id).attr("titre","plus que "+$("#"+e.target.id).attr("tentative")+" dépôt(s) possible(s)"),$("#"+e.target.id).trigger("mouseover"),setTimeout(function(){$("#"+e.target.id).trigger("mouseleave")},1e3))}0==h&&($("#"+e.target.id).droppable("disable"),$(t.draggable[0]).draggable("disable"))}else $("#"+e.target.id).attr("depot")==$(t.draggable[0]).attr("id")&&(dv.revert=!1)}function dropOut(e,t){var i=$(t.draggable[0]).attr("id"),s=new RegExp(i,"i"),a=$("#"+e.target.id).attr("depot");if(s.test(a)){for(var o=a.split(";"),n=o,l=0;l<o.length;l++){var r=o[l].split(":");if(r[0]==i){n.splice(l,1);break}}var p=n.join(";");$("#"+e.target.id).attr("depot",p),$("#drop"+e.target.id.substring(5)).val(p),"cible"==$(t.draggable[0]).attr("mode")&&(dv.revert=!0)}}function dropChange(e){if(revoirDs||"prof"==statu){var t=$("#"+e.target.id).val();";"==t.substring(0,1)&&(t=t.substring(1)),$("#"+$(e.target).parent().attr("id")).attr("depot",t);for(var i=t.split(";"),s=0;s<i.length;s++){var a=i[s].split(":");$("#"+a[0]).css("left",a[1]).css("top",a[2])}return!0}return!1}function addDragStart(e){$(e.target).addClass("partiel"),"cible"==$(this).attr("mode")?dv.revert=!0:dv.revert=!1}function addDragStop(e){"cible"==$(e.target).attr("mode")&&dv.revert&&$(e.target).css("left","0px").css("top","0px"),$(e.target).css("width","100%").css("height","100%"),$(e.target).removeClass("partiel")}var selected=function(){"use strict";this.objets=[],this.returnIds=function(e){if("string"===e){var t="";for(var i in this.objets)t+=" "+$(i).attr("id");return t}},this.isInObjets=function(e){for(var t=this.objets.length,i=$(e).attr("id"),s=0;t>s;s++)if($(this.objets[s]).attr("id")==i)return!0;return!1},this.addObjet=function(e){this.isInObjets(e)||(this.objets.push(e),$(e).addClass("selected"))},this.removeObjet=function(e){for(var t=this.objets.length,i=$(e).attr("id"),s=0;t>s;s++){if($(this.objets[t-1]).attr("id")==i){this.objets.pop();break}this.objets.unshift(this.objets[t-1]),this.objets.pop()}0==this.objets.length&&($("#menuEbauche").html(maPage.removeUIEbauche()),$("#menuCorrection").html(corrige.removeUI()))},this.removeAll=function(){this.objets=[],$(".selected").removeClass("selected"),$("#menuEbauche").html(maPage.removeUIEbauche()),$("#menuCorrection").html(corrige.removeUI())},this.setOriginalPosition=function(e){for(var t=this.objets.length,i=0;t>i;i++){var s=$(this.objets[i]),a=/(.*)px/.test(s.css("top")),o=parseInt(RegExp.$1);a=/(.*)px/.test(s.css("left"));var n=parseInt(RegExp.$1);s.data("originalPosition",{top:o,left:n})}},this.setDimension=function(e){for(var t=this.objets.length,i=0;t>i;i++){var s=$(this.objets[i]);$("#"+s.attr("id")).css("width",e.width),$("#"+s.attr("id")).css("height",e.height)}},this.align=function(e){for(var t=$(this.objets[0]).parent().attr("id"),i=0;i<this.objets.length;i++)$(this.objets[i]).parent().attr("id")!=t&&($(this.objets[i]).removeClass("selected"),this.removeObjet(this.objets[i]));switch(e){case"left":var s=this.objets.length;if(1==s)$(this.objets[0]).css("left","0px");else for(var a=$(this.objets[0]).css("left"),i=1;s>i;i++)$(this.objets[i]).css("left",a);break;case"right":var s=this.objets.length;if(1==s){var o=parseInt($(this.objets[0]).parent().css("width").replace(/px/,"")),n=parseInt($(this.objets[0]).css("width").replace(/px/,""));$(this.objets[0]).css("left",o-n+"px")}else for(var l=parseInt($(this.objets[0]).css("left").replace(/px/,""))+parseInt($(this.objets[0]).css("width").replace(/px/,"")),i=1;s>i;i++){var r=parseInt($(this.objets[i]).css("left").replace(/px/,"")),p=parseInt($(this.objets[i]).css("width").replace(/px/,"")),c=l-(r+p);$(this.objets[i]).css("left",r+c+"px")}break;case"bottom":var s=this.objets.length;if(1==s){var d=parseInt($(this.objets[0]).parent().css("height").replace(/px/,"")),h=parseInt($(this.objets[0]).css("height").replace(/px/,""));$(this.objets[0]).css("top",d-h+"px")}else for(var u=parseInt($(this.objets[0]).css("top").replace(/px/,""))+parseInt($(this.objets[0]).css("height").replace(/px/,"")),i=1;s>i;i++){var m=parseInt($(this.objets[i]).css("top").replace(/px/,"")),g=parseInt($(this.objets[i]).css("height").replace(/px/,"")),c=u-(m+g);$(this.objets[i]).css("top",m+c+"px")}break;case"top":var s=this.objets.length;if(1==s)$(this.objets[0]).css("top","0px");else for(var b=$(this.objets[0]).css("top"),i=1;s>i;i++)$(this.objets[i]).css("top",b)}},this.ajust=function(e){for(var t=$(this.objets[0]).parent().attr("id"),i=0;i<this.objets.length;i++)$(this.objets[i]).parent().attr("id")!=t&&($(this.objets[i]).removeClass("selected"),this.removeObjet(this.objets[i]));var s=this.objets.length;if(s>1)switch(e){case"vertical":for(var a=0,o=0,n=0,i=1;s>i;i++)if(parseInt($(this.objets[i]).css("top").replace(/px/,""))<parseInt($(this.objets[i-1]).css("top").replace(/px/,"")))for(var l=parseInt($(this.objets[i]).css("top").replace(/px/,"")),r=0;i>r;r++)if(parseInt($(this.objets[r]).css("top").replace(/px/,""))>l){if(0==r)this.objets.unshift(this.objets[i]),this.objets.splice(i+1,1);else{var p=this.objets.slice(0,r);p.push(this.objets[i]);var c=this.objets.slice(r,i);p=p.concat(c),s-1-i>0&&(c=this.objets.slice(i+1,s),p=p.concat(c)),this.objets=p}break}for(var i=0;s>i;i++)a+=parseInt($(this.objets[i]).css("height").replace(/px/,""));o=parseInt($(this.objets[s-1]).css("height").replace(/px/,""))+parseInt($(this.objets[s-1]).css("top").replace(/px/,""))-parseInt($(this.objets[0]).css("top").replace(/px/,"")),n=Math.round((o-a)/(s-1));for(var d=parseInt($(this.objets[0]).css("top").replace(/px/,""))+parseInt($(this.objets[0]).css("height").replace(/px/,"")),i=1;s-1>i;i++){var h=d+n;$(this.objets[i]).css("top",h+"px"),d=h+parseInt($(this.objets[i]).css("height").replace(/px/,""))}break;case"horizontal":for(var u=0,m=0,n=0,i=1;s>i;i++)if(parseInt($(this.objets[i]).css("left").replace(/px/,""))<parseInt($(this.objets[i-1]).css("left").replace(/px/,"")))for(var l=parseInt($(this.objets[i]).css("left").replace(/px/,"")),r=0;i>r;r++)if(parseInt($(this.objets[r]).css("left").replace(/px/,""))>l){if(0==r)this.objets.unshift(this.objets[i]),this.objets.splice(i+1,1);else{var p=this.objets.slice(0,r);p.push(this.objets[i]);var c=this.objets.slice(r,i);p=p.concat(c),s-1-i>0&&(c=this.objets.slice(i+1,s),p=p.concat(c)),this.objets=p}break}for(var g=0;s>g;g++)u+=parseInt($(this.objets[g]).css("width").replace(/px/,""));m=parseInt($(this.objets[s-1]).css("width").replace(/px/,""))+parseInt($(this.objets[s-1]).css("left").replace(/px/,""))-parseInt($(this.objets[0]).css("left").replace(/px/,"")),n=Math.round((m-u)/(s-1));for(var d=parseInt($(this.objets[0]).css("left").replace(/px/,""))+parseInt($(this.objets[0]).css("width").replace(/px/,"")),i=1;s-1>i;i++){var b=d+n;$(this.objets[i]).css("left",b+"px"),d=b+parseInt($(this.objets[i]).css("width").replace(/px/,""))}}}},selecteur=function(){this.initialX=0,this.initialY=0,this.openSelector=function(e){$(".ghost-select").addClass("ghost-active");var t=Math.abs(this.initialX-e.pageX),i=Math.abs(this.initialY-e.pageY);e.pageX<=this.initialX&&e.pageY<=this.initialY?$(".ghost-select").css({left:e.pageX-37,top:e.pageY-197,width:t-3,height:i-3}):e.pageX<=this.initialX&&e.pageY>=this.initialY?$(".ghost-select").css({left:e.pageX-37,height:i-3,width:t-3,top:this.initialY-200}):e.pageX>=this.initialX&&e.pageY>=this.initialY?$(".ghost-select").css({width:t-3,height:i-3}):e.pageX>=this.initialX&&e.pageY<=this.initialY&&$(".ghost-select").css({width:t-3,top:e.pageY-197,height:i-3})},this.doObjectsCollide=function(e,t){var i=e.offset().top,s=e.offset().left,a=t.offset().top,o=t.offset().left,n=1*$(e).css("width").replace(/px/,""),l=1*$(e).css("height").replace(/px/,""),r=1*$(t).css("width").replace(/px/,""),p=1*$(t).css("height").replace(/px/,"");return!(a>i+l||i>a+p||o>s+n||s>o+r)},this.selectElements=function(e){e.stopPropagation();var t=e.data.objCreatePage,i=t.selection,s=t.selecteur;$("#page").off("mouseup mousemove"),$("#page [id*=boite]").each(function(){var e=$(".ghost-select"),t=$(this),a=s.doObjectsCollide(e,t);1==a&&i.addObjet(this)}),$(".ghost-select").removeClass("ghost-active"),$(".ghost-select").width(0).height(0),i.objets.length>0&&maPage.setUIParameters(i.objets[0]),dv.noDeselected=!0}},CreatePage=function(){function e(e,i){t.each(function(){$this=$(this);var t=$this.parent().width(),s=$this.parent().height(),a=$this.data("originalPosition").left,o=$this.data("originalPosition").top,n=a+e,l=o+i,r=s-2-(l+$this.height()),p=t-2-(n+$this.width());n=0>n?0:n,n=0>=p?t-2-$this.width():n,l=0>l?0:l,l=0>=r?s-2-$this.height():l,$this.css("left",n),$this.css("top",l)})}this.index=1,this.firstParent="",this.selection=new selected,this.copy={},this.selecteur=new selecteur;var t,i={containment:"#page",snap:"#regleH,#regleV",snapMode:"outer",zIndex:1e3,delay:200,start:$.proxy(function(e,i){var s=$(e.target).parent().attr("id");$(e.target).addClass("modif"),t=$(".selected").filter("[id!="+$(e.target).attr("id")+"]");for(var a=0;a<t.length;a++)$(t[a]).parent().attr("id")!=s&&($(t[a]).removeClass("selected"),this.selection.removeObjet(t[a]));t=$(".selected").filter("[id!="+$(e.target).attr("id")+"]");for(var a=0;a<t.length;a++)$(t[a]).data("originalPosition",$(t[a]).position())},this),drag:function(t,i){var s=$(this).position(),a=i.originalPosition,o=s.left-a.left,n=s.top-a.top;e(o,n)},stop:$.proxy(function(e,t){this.selection.removeAll(),$(e.target).removeClass("modif")},this)};this.init=function(e){this.firstParent=e,this.index=this.returnMaxNumBoite(),$.ajax({url:site+API+"/prof/css.html",dataType:"html",success:function(e){""!=e&&(dv.htmlCss=e)}}),$("#menu").sortable({axis:"x",helper:"clone",containment:"#menu",cursor:"eo-resize",revert:!0,cancel:"#bouton0",stop:function(e,t){var i=$("#menu").sortable("toArray"),s=pageActuelle;if("bouton0"==i[0])for(var a=1;a<$("#questions [id*=question]").length;a++)if(i[a]!="bouton"+a){s=a;var o=i[a].substring(6);$("#question"+(a-1)).after($("#question"+o)),$("#bouton"+(o-1)).after($("#bouton"+o)),$("#questions [id*=question]").each(function(e){$(this).attr("id","question"+e)})}$("#bouton"+s).trigger("click")}}),$("#baliseDiv").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" hiding="yes" type="random" ordre="n" class="unselectable  construction" style="position:absolute;left:0px;top:0px;width:150px;height:100px;overflow:visible;"><span></span><input id="maskindice" type="text" style="display:none"><script>dvOnreload("boiteindice")</script></div>'},$.proxy(this.addDiv,this)),$("#deselected").on("click",$.proxy(function(e){$(".selected").removeClass("selected"),this.selection.removeAll()},this)),$("#addChekbox").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="case" hiding="yes" groupe="" note="" penalite="" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:150px"><div class="case"> <input id="caseindice" autocomplete="off" type="checkbox"><label for="caseindice"> </label></div><span style="margin-left: 28px; display: inline-block;">contenu à définir</span><correction><boite></boite><if>nc</if><penalite>0.3</penalite><note>0</note><view></view><comment></comment><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addRadio").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="radio" hiding="yes" class="unselectable construction" type="radio" style="position:absolute;left:0px;top:0px;width:150px"><div class="case"> <input id="caseindice" name="groupe" autocomplete="off" type="radio"><label for="caseindice"> </label></div><span style="margin-left: 28px; display: inline-block;">contenu à définir</span><correction><boite></boite><if>nc</if><bareme>0</bareme><note>0</note><view></view><comment></comment><manuel></manuel><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addInputText").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="text" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:150px;height:24px" title=""> <input id="Textindice" class="text_eleve" style="width: 85%;text-align:left; height: 70%;" autocomplete="off" type="text"><span style="margin-left: 28px; display: inline-block;"></span><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addTextarea").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="text" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:200px;height:50px" title=""><textarea class="text_eleve" id="Textindice" autocomplete="off" style="width: 85%; height: 90%;"></textarea> <span style="margin-left: 28px; display: inline-block;"></span><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addManuel").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="manuelle" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:24px;height:100px"><div id="evalProfindice"><div class="manuel"> <input value="100" name="manuelindice" id="manuelindicea" autocomplete="off" type="radio"> <label for="manuelindicea"> </label></div><div class="manuel"> <input value="75" name="manuelindice" id="manuelindiceb" autocomplete="off" type="radio"> <label for="manuelindiceb"> </label></div><div class="manuel"> <input value="50" name="manuelindice" id="manuelindicec" autocomplete="off" type="radio"> <label for="manuelindicec"> </label></div><div class="manuel"> <input value="25" name="manuelindice" id="manuelindiced" autocomplete="off" type="radio"> <label for="manuelindiced"> </label></div><div class="manuel"> <input value="0" name="manuelindice" id="manuelindicee" autocomplete="off"  type="radio"> <label for="manuelindicee"> </label></div></div><span style="margin-left: 28px; display: inline-block;"></span><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction><script>$("[id*=manuelindice]").change(eventEvaluateManuel);</script></div>'},$.proxy(this.addDiv,this)),$("#addZoneNote").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable construction" style="position:absolute;left:0px;top:0px;width: 75px;height: 61px;"><div id="noteqindice" class="noteExercice"><div class="noteExo"><span id="qindice">0</span></div><div class="noteExoMax"><span id="qindicemax">0</span></div><span class="noteExerciceBarre">/</span></div> <span style="margin-left: 28px; display: inline-block;"></span></div>'},$.proxy(this.addDiv,this)),$("#addImage").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" hiding="yes" type="image" class=" dvimage unselectable  construction" style="position:absolute;left:0px;top:0px;width: 150px;height:150px; right: auto; bottom: auto;"><span></span><input id="clickImgindice" type="hidden" value="none"><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction><script>$("#boiteindice").on("click",function(ev){$("#clickImgindice").val("ok");});$("#boiteindice").on("boiteImg",function(evt){$(this).find("img").removeAttr("style").removeAttr("width").removeAttr("height").removeAttr("onload").removeAttr("data-cke-pa-onload").removeAttr("id");});</script></div>'},$.proxy(this.addDiv,this)),$("#addCommentaire").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="commentaire" class="commentaire unselectable  construction" style="position:absolute;left:0px;top:0px;width:150px;height:18px"><span>contenu à définir</span></div>'},$.proxy(this.addDiv,this)),$("#addDrop").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" hiding="yes" class="unselectable construction zoneDepot" type="drop" mode="unique" tentative="-1" style="position:absolute;left:0px;top:0px;width:150px;height:150px;" depot=""><span></span><input style="display:none" id="dropindice" type="text"><correction><boite></boite><if></if><bareme>0</bareme><note>0</note><view></view><comment></comment><manuel></manuel><code></code></correction><script class="interactivite">$("#boiteindice").droppable({tolerance: "fit", drop: dropDrop ,out: dropOut});$("#dropindice").on("change",null,null,dropChange);</script></div>'},$.proxy(this.addDiv,this)),$("#addDrag").on("click",null,{element:"boite",type:"drag",codeHtml:'<div id="boiteindice" class="unselectable construction" type="drag" style="position:absolute;left:0px;top:0px;width:150px;height:100px;"><div id="dragindice" class="unselectable dvDrag" mode="cible" style="position:absolute;left:0px;top:0px;width:100%;height:100%;cursor:pointer;z-index:10"><span></span></div><script class="interactivite">$("#dragindice").draggable({containment:"#page", cursor: "pointer",   revert: false, zIndex: 1000,stop:addDragStop,start:addDragStart,scroll:false});</script></div>'},$.proxy(this.addDiv,this)),$("#addTextSelectable").on("click",null,{element:"boite",codeHtml:'<div hiding="yes" class="unselectable textSelectable construction savable" type="text_selectable" id="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;"><span class="text_selectable" mode="modif"><div select="0" maxselect="0" class="dv" style="text-align: justify;"><span> </span></div></span><input id="Textindice" type="text" style="display:none"><correction><iff></iff><note></note><penalite>0</penalite><code>boiteindice()</code></correction><script class = "action">$("#boiteindice>span").on("click","span.txtSelectable",function (event) {    var dvTemp=$("#boiteindice>span").attr("mode");var maxSelect=parseInt($(this).parent().attr("maxSelect"));var select=parseInt($(this).parent().attr("select")); console.log(maxSelect+" : "+select); if ($(this).hasClass("textSelected")) {                select -= 1;                if (((maxSelect - select) > 0) || (maxSelect == 0)) {                    $(this).parent().attr("select", select);                   $(this).removeClass("textSelected");                    if (dvTemp == "modif") {                        $(this).children().last().remove();                    }                }            } else {                if (((maxSelect - select) > 0) || (maxSelect == 0)) {                    select += 1;                    $(this).parent().attr("select", select);                    $(this).addClass("textSelected");                    if (dvTemp == "modif") {                        $(this).append(\' <input type="text" class="text_eleve" style="width:7em">\');                    }                }            }});$("#boiteindice span").on("click", "input", function (evt) {evt.stopPropagation()});</script><script>$("#Textindice").on("change", function (event) {    $("#boiteindice>span").html($(this).val());    $("#boiteindice>span").find("input").each(function () {        $(this).val($(this).attr("val"))    });});function boiteindice() {    var bareme = parseFloat($("#boiteindice note").text());    var mode = $("#boiteindice>span").attr("mode");    var max = $("#boiteindice iff").find(".textSelected").length; var nbPenalite=0;            var penalite=parseFloat($("#boiteindice penalite").text());   if (mode == "modif") {        max += max    }    var note = 0;    var $reponse = $("#boiteindice span").find("span");    $("#boiteindice iff").find("span").each(function (i) {        if ($($reponse).eq(i).hasClass("textSelected")) {            if ($(this).hasClass("textSelected")) {                $($reponse).eq(i).addClass("correct");                note += 1;                if (mode == "modif") {                    var myReg = new RegExp($(this).children().last().attr("val"), "i");                    var rep = $($reponse).eq(i).children().last().val();                    if (myReg.test(rep)) {                        $($reponse).eq(i).children().last().addClass("correct");                        note += 1;                    } else {                        $($reponse).eq(i).children().last().addClass("incorrect").attr("titre", $(this).children().last().attr("val"));                    }                }            } else {                $($reponse).eq(i).addClass("incorrect");nbPenalite+=1;            }        }    });    note_max += bareme;var noteFin=(note / max * bareme)-(penalite*nbPenalite);            notefin =(noteFin<0)?0:noteFin;            note_globale += noteFin;            var affiche_note = $("#boiteindice").parentsUntil("#questions", ".question").find(".noteExo span").attr("id");            afficheNote(affiche_note, noteFin);            afficheNote(affiche_note + "max", bareme);}$("#boiteindice iff").on("boiteindicecorrige", function (evt) {    $("#boiteindice iff").html($("#mccorrige").html());});$("#boiteindice>span").on("changeContenu", function (evt) {    $(this).find("div.dv").html($("#meCorrige").html());$(this).parent().find("iff").html(""); $("#mccorrige").trigger("change")});$("#boiteindice").on("save", function (evt) {    $(this).children("span").find("input").each(function () {        $(this).attr("val", $(this).val())    });    $("#Textindice").val($("#boiteindice>span").html());});</script></div>'},$.proxy(this.addDiv,this)),$("#addMathAnswer").on("click",null,{element:"boite",codeHtml:'<div statu="non-modifiable" hiding="yes" class="unselectable dvScience savable dvFocused ui-droppable ui-draggable ui-draggable-handle ui-resizable construction" type="scientifique" id="boiteindice" style="width: 377px; height: 243px; z-index: 20; right: auto; bottom: auto; font-size: 14px; position: absolute; top: 91px; left: 76px;"> <div style="position: absolute; width: 100%; z-index: 100; height: 0px;"> <img style="display: block;" title="Liste des commandes" src="'+site+API+'/img/aide.png" class="aide"><img style="display: block;" title="initialiser ou réinitialiser l\'interactivité" src="'+site+API+'/img/refresh.png" class="refresh"><img title="ajouter une ligne au début" src="'+site+API+'/img/newLine.png" class="firstAdd" style="display: block;"></div> <div id="dvMathindice" style="position: absolute; overflow: auto; width: 100%; height: 95%; margin-top: 10px;"><span style="font-size: 0px;"></span></div> <input id="scienceindice" style="display: none;" type="text"> <script class="scriptScience"> interActAddMathAnswer("indice"); </script> </div>'},$.proxy(this.addDiv,this)),$("#addDialog").on("click",null,{element:"boite",type:"dialog",codeHtml:'<div class="unselectable construction dvdialog" id="boiteindice" title="boiteindice" titre="titre" style="position: relative; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;overflow: hidden;" origine="#questionX .page"><span></span></div><script class="dvDialog"> $("#boiteindice").dialog({appendTo:"body",resizable:false,width:parseInt($("#boiteindice").prop("scrollWidth")),height:parseInt($("#boiteindice").prop("scrollHeight")+34),autoOpen: false,title:$("#boiteindice").attr("titre")});$("#boiteindice").css({top:"0px",left:"0px"}); $("#boiteindice script").each(function(){eval($(this).text())});</script>'},$.proxy(this.addDiv,this)),$("#addMath").on("click",null,{element:"boite",codeHtml:'<div class="unselectable construction" id="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;"><span style="display:none" class="math"></span><div id="renduMathindice"></div><script> $("#boiteindice .math").on("changeMath",function(event){katex.render($("#boiteindice .math").text(), $("#renduMathindice")[0]);});</script></div>'},$.proxy(this.addDiv,this)),$("#addTabConv").on("click",null,{element:"boite",codeHtml:'<div style="background-color: #ffffcc; margin: 0px; width: 670px; height: 200px;box-shadow: 3px 3px 3px 3px rgb(153, 153, 153);border-radius: 10px;" id="boiteindice" class="unselectable" title="Tableau de conversion"><style type="text/css">span.convEntete {padding-top: 10px;padding-left: 0px;padding-right: 0px;padding-bottom: 10px;background-color: rgb(204, 204, 204);margin: 0px;border: 1px dashed grey;width: 50px;height: 28px;display: inline-block;color: rgba(255, 0, 0, 1);position: relative;text-align: center;vertical-align: middle;font-size: 0.8em;}span.convEntete input {width: 46px;text-align: center;font-size: 0.8em;}.convEntete:hover {      cursor: pointer;} </style><div id="tabConvindice" style="font-size: xx-large;position:relative;top: 10px;"><img style="left: 50px; position: relative;" src="'+site+API+'/outils/img/tab_conv.png"> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="top: 150px; left: 170px; position: absolute;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 350px;" class="move">,</span> <div style="float: right; margin-right: 10px;"><span class="convEntete"></span><span class="convEntete"></span><span class="convEntete"></span><span class="convEntete"></span></div></div><textarea id="inputHtmlindice" class="savable" style="display:none"></textarea><script class="boiteindice">$("#inputHtmlindice").on("change",function(event){var t=this.id.substring(9);$("#tabConv"+t).html($(this).val());var ddtemp=\'<input class="convEnteteInput" type="text"></input>\';eval(\'$("#tabConvindice .convEntete").draggable({containment: "#boiteindice",cursor: "pointer"});$("#tabConvindice [class*=move]").draggable({containment: "#boiteindice",        cursor:"pointer"}).hover(function () {$(this).css("cursor", "pointer")});$("#tabConvindice .convEntete").on("click", function (event) {var text = $(this).text();      $(this).html(ddtemp).children().on("click", function (event) {event.stopPropagation();}).on("focusout", function (event) {$(this).parent().html($(this).val());}).val(text).focus();});\')}).on("save",function(event){var t=this.id.substring(9);$(this).val($("#tabConv"+t).html());});$("#tabConvindice .convEntete").draggable({containment: "#boiteindice",cursor: "pointer"});$("#tabConvindice [class*=move]").draggable({containment: "#boiteindice",        cursor:"pointer"}).hover(function () {$(this).css("cursor", "pointer")});$("#tabConvindice .convEntete").on("click", function (event) {var text = $(this).text();      $(this).html(\'<input class="convEnteteInput" type="text"></input>\').children().on("click", function (event) {event.stopPropagation();}).on("focusout", function (event) {$(this).parent().html($(this).val());}).val(text).focus();});</script></div>'
},$.proxy(this.addDiv,this)),$("#addVolet").on("click",null,{element:"boite",codeHtml:'<div class="unselectable hiding="yes" construction" id="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 85px;"><span></span><div id="voletindice" style="height:100%;width:100%;background-color:rgba(206,206,206,0.7)"></div> <textarea id="inputHtmlindice" class="savable" style="display:none"></textarea><script class="ebauche">$("#voletindice").css("height", "100%").css("width", "100%").css("left","0px").css("top","0px");</script>    <script class="boiteindice interactivite">        $("#voletindice").resizable({handles: "e"});</script><script>$("#inputHtmlindice").change(function (event) {$("#voletindice").attr("style",$("#inputHtmlindice").val()); eval($("script.boiteindice").text());}).on("save", function (event) { $("#inputHtmlindice").val($("#voletindice").attr("style"));});</script></div>'},$.proxy(this.addDiv,this)),$("#addCloze").on("click",null,{element:"boite",codeHtml:'<div class="unselectable hiding="yes" construction" id="boiteindice" type="cloze"  style="position: absolute; left: 0px; top: 0px; width: 400px;height:200px; z-indice: auto; right: auto; bottom: auto;"><span id="clozeindice" class="cloze" style="display:none;"></span> <div id="renduClozeindice"></div> <textarea id="inputHtmlindice" class="savable" style="display:none"></textarea><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code>question_cloze["clozeindice"].correction()</code></correction><script> question_cloze["clozeindice"] = new cloze("#clozeindice", "#renduClozeindice");  question_cloze["clozeindice"].init(); $("#clozeindice").on("changeCloze", function (event) { $("#renduClozeindice").html(""); question_cloze["clozeindice"].init();});$("#inputHtmlindice").change(function (event) {            $("#renduClozeindice").html($("#inputHtmlindice").val()); question_cloze["clozeindice"].setInteractivite();$("#renduClozeindice .clozeInput").each(function(ev){$(this).val($(this).attr("depot").replace(/&apos;/g, "\'"));});}).on("save", function (event) { $("#renduClozeindice .clozeInput").each(function(ev){ $(this).attr("depot",$(this).val().replace(/\'/g, "&apos;")); });$("#inputHtmlindice").val($("#renduClozeindice").html());});</script></div>'},$.proxy(this.addDiv,this)),$("#layerUp").on("click",$.proxy(function(e){var t=this.selection.objets[0];$(t).insertAfter($(t).next()),$(t).parent().children().each(function(e){$(this).css("z-index",e)})},this)),$("#layerDown").on("click",$.proxy(function(e){var t=this.selection.objets[0];$(t).insertBefore($(t).prev()),$(t).parent().children().each(function(e){$(this).css("z-index",e)})},this)),$("#leftAlign").on("click",null,{},$.proxy(function(e){this.selection.align("left")},this)),$("#topAlign").on("click",null,{},$.proxy(function(e){this.selection.align("top")},this)),$("#rightAlign").on("click",null,{},$.proxy(function(e){this.selection.align("right")},this)),$("#bottomAlign").on("click",null,{},$.proxy(function(e){this.selection.align("bottom")},this)),$("#verticalAjust").on("click",null,{},$.proxy(function(e){this.selection.ajust("vertical")},this)),$("#horizontalAjust").on("click",null,{},$.proxy(function(e){this.selection.ajust("horizontal")},this)),$("body").append('<div id="regleH" class="regle"></div><div id="regleV" class="regle"></div>'),$("#regleV").css("height",$(window).height()),$("#regleH").css("width",$(window).width()),$("#regleH").draggable({axis:"y"}).droppable({tolerance:"touch"}),$("#regleV").draggable({axis:"x"}).droppable({tolerance:"touch"}),$("#repere").on("click",null,{},function(e){$("#regleH,#regleV").toggleClass("regle")}),$("#addQuestion").on("click",$.proxy(this.createPartie,this)),$("#save").on("click",$.proxy(this.saveAllQuestions,this)),$("#save2").on("click",$.proxy(this.saveAllQuestions,this)),$("#open").on("click",$.proxy(this.openHtml,this)),$("#textModif").dialog({appendTo:"body",autoOpen:!1,closeOnEscape:!0,draggable:!0,height:"auto",hide:!0,modal:!0,resizable:!0,show:!0,width:"500px"}),CKEDITOR.replace("modifTextarea",{enterMode:CKEDITOR.ENTER_BR,entities:!1,entities_additional:"",entities_greek:!1,extraPlugins:"dynamicinsertmenu,ckeditor_wiris,itslimageprop,previewmedia,longtouchcontextmenu,editextension,collapsetoolbar,fakemedia",font_names:"Arial;Comic Sans MS;Courier New;Helvetica;Tahoma;Times New Roman;Verdana;Palatino Linotype",fontSize_sizes:"smaller/smaller;larger/larger;xx-small/xx-small;x-small/x-small;small/small;medium/medium;large/large;x-large/x-large;xx-large/xx-large",height:"300",htmlEncodeOutput:!0,language:"fr-fr",removePlugins:"",smiley_columns:14,smiley_descriptions:["smile","sad","wink","big smile","confused","cheeky","embaressed","surprised","speechless","angry","angel","cool","devil","cry","lightbulb","thumbs down","thumbs up","broken heart","kiss","envelope","airplane","alarm","apple","banana","basketball","bookmark","boxing gloves blue","boxing gloves red","bull","candle","certificate","check","chest","clock","cloud","cloud dark","cow","delete","die","die gold","dog","error","extinguisher","eye","fish","flashlight","flower blue","flower red","flower white","flower yellow","goblet bronze","goblet gold","goblet silver","guitar","hand red card","hand yellow card","hat green","hat red","heart","icecream","lemon","lifebelt","lightbulb","magic-wand","medal","moon","palm","pig","pin green","pin red","pineapple","rubberstamp","ship","snowflake","soccer ball","spider","spider","star blue","star green","star red","star yellow","step","stop","stopwatch","sun","sun and cloud","target","target","trafficlight green","trafficlight red","tree","view","violin"],smiley_images:["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","broken_heart.gif","kiss.gif","envelope.gif","airplane.png","alarm.png","apple.png","banana.png","basketball.png","bookmark.png","boxing_gloves_blue.png","boxing_gloves_red.png","bull.png","candle.png","certificate.png","check2.png","chest.png","clock.png","cloud.png","cloud_dark.png","cow.png","delete2.png","die.png","die_gold.png","dog.png","error.png","extinguisher.png","eye.png","fish.png","flashlight.png","flower_blue.png","flower_red.png","flower_white.png","flower_yellow.png","goblet_bronze.png","goblet_gold.png","goblet_silver.png","guitar.png","hand_red_card.png","hand_yellow_card.png","hat_green.png","hat_red.png","heart.png","icecream.png","lemon.png","lifebelt.png","lightbulb.png","magic-wand.png","medal.png","moon.png","palm.png","pig.png","pin_green.png","pin_red.png","pineapple.png","rubberstamp.png","ship2.png","snowflake.png","soccer_ball.png","spider.png","spider2.png","star_blue.png","star_green.png","star_red.png","star_yellow.png","step.png","stop.png","stopwatch.png","sun.png","sun_and_cloud.png","target2.png","target3.png","trafficlight_green.png","trafficlight_red.png","tree.png","view.png","violin.png"],smiley_path:"/ui/controls/editor/FCK/editor/images/smiley/itslearning/",toolbar:[["Font","FontSize",""],["Bold","Italic","Underline",""],["Undo","Redo","-","Cut","Copy","Paste","PasteText","PasteFromWord",""],["dynamicinsertmenu",""],["Link",""],["TextColor","BGColor","SpecialChar","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock",""],["Subscript","Superscript","-","Outdent","Indent","-","NumberedList","BulletedList","-","Table",""],["Source",""],["ckeditor_wiris_formulaEditor",""],["Smiley",""],["Maximize",""],["collapsetoolbar"],["image","forms",""]],toolbarCanCollapse:!1,uiColor:"#ffffff",allowedContent:!0,dynamicinsertmenu:{Items:[{DialogSrc:"/FileExplorer/ViewFiles.aspx?Function=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:670,DialogWidth:615,Text:"Image",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/image16.png",IframeCssClass:null,Id:"itslimage"},{DialogSrc:"/Editor/InsertRecording.aspx?PageTab=0&RecordingType=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:665,DialogWidth:600,Text:"Enregistrement vidéo",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/videorecorder16.png",IframeCssClass:null,Id:"itslvideorecorder"},{DialogSrc:"/Editor/InsertRecording.aspx?PageTab=0&RecordingType=2",Command:null,IsEditorDialogTransparent:!1,DialogHeight:530,DialogWidth:600,Text:"Enregistrement audio",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/audiorecorder16.png",IframeCssClass:null,Id:"itslaudiorecorder"},{DialogSrc:"/Editor/treelink.aspx",Command:null,IsEditorDialogTransparent:!1,DialogHeight:320,DialogWidth:600,Text:"Lien vers l'arborescence",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/treelink16.png",IframeCssClass:null,Id:"treelink"},{DialogSrc:"/FileExplorer/BrowseFiles.aspx?Type=2&Function=2&PopUp=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:570,DialogWidth:750,Text:"Fichier du répertoire 'Vos fichiers Web'",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/element_resource16.png",IframeCssClass:null,Id:"itslfile"},{DialogSrc:"/Editor/Web2Content.aspx",Command:null,IsEditorDialogTransparent:!1,DialogHeight:660,DialogWidth:760,Text:"Contenu Web 2.0",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/web2content16.png",IframeCssClass:null,Id:"web2cont"},{DialogSrc:"/Editor/Extensions/BrowseExtensions.aspx?ItslExtensionPlacementArea=1&DisableExpandInLibrary=False",Command:null,IsEditorDialogTransparent:!0,DialogHeight:595,DialogWidth:892,Text:"Parcourir la bibliothèque d'application",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/tools16.png",IframeCssClass:null,Id:"itslbrowseextensions"}],LabelText:"Insérer",TitleText:"Insérer du contenu",Id:"dynamicinsertmenu"},fakemedia:{PluginSettings:{supportedVideoFormats:["mp4","m4v","ogv","webm","webmv","flv"],mediaContentAttribute:"mediacontent",mediaTypes:{auto:0,forceAudio:1,forceVideo:2},dataMemberNames:{mediaType:"mediaType",fileName:"fileName"},cssClasses:{audio:"cke_fakemedia_audio",video:"cke_fakemedia_video"}},Id:"fakemedia"},previewmedia:{ExtraSettings:{mediaContentAttribute:"mediacontent",cssClasses:{fakeAudio:"cke_fakemedia_audio",fakeVideo:"cke_fakemedia_video"}},DialogSrc:"/FileExplorer/PreviewMediaFile.aspx?ViewOnly=True&Type=2&File={filePath}&FileName={fileName}&PlayerMediaType={playerMediaType}",Command:null,IsEditorDialogTransparent:!1,DialogHeight:470,DialogWidth:550,Text:"Prévisualisation",EditText:"Prévisualisation",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/url_preview16.png",IframeCssClass:null,Id:"previewmedia"},collapsetoolbar:{DialogSrc:null,Command:null,IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:null,EditText:null,IconSrc:null,IframeCssClass:null,Id:"collapsetoolbar"},itslimageprop:{DialogSrc:"/FileExplorer/InsertImageUrl.aspx?Function=1&imageurl={src}&alt={alt}&border={border}&align={align}&className={class}&width={width}&height={height}",Command:null,IsEditorDialogTransparent:!1,DialogHeight:355,DialogWidth:400,Text:"Propriétés de l'image",EditText:"Propriétés de l'image",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/image16.png",IframeCssClass:null,Id:"itslimageprop"},ckeditor_wiris:{DialogSrc:"https://leducdenormandie.itslearning.com/Services/CommonService.asmx/MeasureKpi?measureSection=kpiMeasureSection&measurement=kpiMeasurement&measureContext=kpiMeasureContext",Command:null,IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:"Éditeur WIRIS",EditText:"Modifier l'équation",IconSrc:null,IframeCssClass:null,Id:"ckeditor_wiris"},editextension:{DialogSrc:null,Command:"window.open( 'https://leducdenormandie.itslearning.com/editor/PluginHandler.aspx?ExtensionId=-1&EditorClientInstanceId={editorId}', '__extensionPopup_-1', 'resizable=yes,scrollbars=yes,status=yes'); ",IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:"Remplacer un plug-in",EditText:"Modifier un plug-in",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/tools16.png",IframeCssClass:null,Id:"editextension"},title:!1,longtouchcontextmenu:{Delay:1e3,DistanceThreshold:5,Id:"longtouchcontextmenu"},entities_processNumerical:!1})},this.addDiv=function(e){var t=!1,i=e.data.element,s=e.data.codeHtml;0==this.selection.objets.length&&(this.selection.objets.push($("#"+this.firstParent+" [id=page]").get(0)),t=!0);for(var a=this.selection.objets.length,o=0;a>o;o++){var n=$(this.selection.objets[o]),l=s.replace(/indice/g,this.index);e.data.dvData&&(l=l.replace(/dvData/g,$("#"+e.data.dvData).val())),"dialog"==e.data.type&&(l=l.replace(/questionX/g,"question"+pageActuelle)),$("#"+this.firstParent+" [id="+$(n).attr("id")+"]").append(l),"dialog"==e.data.type&&$("[aria-describedby=boite"+this.index+"]").remove(),"drag"==e.data.type&&($("#drag"+this.index).draggable("destroy"),this.setInteractivite("#drag"+this.index)),this.setInteractivite("#"+i+this.index),this.index++}t&&this.selection.removeAll()},this.createPartie=function(e){var t=$(".question").length,i='<div id="question'+t+'" class="question choices-border"><div class="page questionid"></div></div>';$("#questions").append(i);var s='<span class="bouton" id="bouton'+t+'"> </span>';$("#menu").append(s),$("#bouton"+t).click(),$("#addZoneNote").click(),$("#boite"+(maPage.index-1)).css("left","623px")},this.createHtml=function(e){this.selection.removeAll(),$("[id*=boite]").resizable("destroy").draggable("destroy").off("click").removeClass("construction");var t=dv.enteteHtml+$("#page").html()+dv.piedHtml,i=document.createElement("a");i.href="data:attachment/html,"+encodeURIComponent(t),i.target="_blank",i.download="question.html",document.body.appendChild(i),i.click(),$.proxy(this.setInteractivite("[id*=boite]"),this),$("[id*=boite]").addClass("construction")},this.openHtml=function(e){$.ajax({url:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/devoir/API4/prof/findAllVersion.php",type:"POST",dataType:"json",data:"&path="+window.location.pathname,success:$.proxy(function(e){},this)})},this.openHtmlOld=function(e){var t=$("#fichier").val();$.get(t,$.proxy(function(e){var t=$("<div/>").append(e),i=t.find("[class*=question]");$("[id*=question]").html(i),$("[class*=question]").attr("id","page"),$.proxy(this.setInteractivite("[id*=boite]"),this),$("[id*=boite]").addClass("construction"),this.index=this.returnMaxNumBoite()+1,$("#"+this.firstParent+" #page").droppable({hoverClass:"hoverDroppable",tolerance:"fit",greedy:!0,addClass:!1,drop:$.proxy(function(e,t){e.stopPropagation(),this.selection.addObjet(t.draggable[0]);for(var i=0;i<this.selection.objets.length;i++){var s=$(this.selection.objets[i]),a=$(e.target),o=a.offset(),n=s.offset(),l={};for(var r in o)l[r]=n[r]-o[r];s.css(l),a.append(s[0])}},this)})},this),"html")},this.returnMaxNumBoite=function(){for(var e=$("[id*=boite]"),t=1,i=0;i<e.length;i++){var s=parseInt($(e[i]).attr("id").replace(/boite/g,""));s>t&&(t=s)}return t+1},this.setInteractivite=function(e){$(e).each(function(){var e=$(this).attr("type");"random"!=e&&"case"!=e&&"radio"!=e&&"commentaire"!=e&&"drag"!=e||$(this).droppable({hoverClass:"hoverDroppable",tolerance:"fit",greedy:!0,addClass:!1,drop:$.proxy(function(e,t){e.stopPropagation(),this.selection.addObjet(t.draggable[0]);for(var i=0;i<this.selection.objets.length;i++){var s=$(this.selection.objets[i]),a=$(e.target),o=a.attr("type");if(("boite"==a.attr("id").substring(0,5)||"drag"==a.attr("id").substring(0,4))&&"DIV"==s[0].tagName){var n=a.offset(),l=s.offset(),r={};for(var p in n)r[p]=l[p]-n[p];s.css(r),"drag"==o?a.find("[id*=drag]").append(s[0]):a.append(s[0]),"random"==o&&(void 0===a.attr("alignement")?s.css("position","absolute"):"v"==a.attr("alignement")?s.css({position:"",left:"",top:"",display:""}):s.css({position:"",left:"",top:"",display:"inline-block"}))}}},maPage)})}),$(e).filter("[type!=text_selectable][type!=scientifique]").on("dblclick",function(e){e.stopPropagation(),dv.boiteID=this.id;var t=$(this).find("span")[0].innerHTML;"contenu à définir"==t?CKEDITOR.instances.modifTextarea.document.$.body.innerHTML="":CKEDITOR.instances.modifTextarea.document.$.body.innerHTML=t,$("#textModif").dialog("option","position",{my:"center center",at:"center center",of:document}),$("#textModif").dialog("option","buttons",[{text:"Ok",click:function(){var e=$("#"+dv.boiteID+" span");e[0].innerHTML=CKEDITOR.instances.modifTextarea.document.$.body.innerHTML,$("#"+dv.boiteID+" span.math").trigger("changeMath"),$("#"+dv.boiteID+" span.cloze").trigger("changeCloze"),$("#"+dv.boiteID+" span.text_selectable").trigger("changeText_selectable"),$("#"+dv.boiteID).trigger("boiteImg"),$(this).dialog("close");var t=dv.boiteID,i="30px";$("#"+t).first().find("img").length>0?i=$("#"+t).children(":first").find("img").css("height"):(i="0px"==$("#"+t).children("span:first").css("height")?$("#"+t).children("span:first").children(":first").css("height"):$("#"+t).children("span:first").css("height"),i="0px"==i?"30px":i),$("#"+t).css("height",i)}}]).dialog("open")});var t=e;t=t.substring(1,5),"drag"!=t&&$(e).draggable(i).resizable({alsoResize:".selected",handles:"all",autoHide:!1,resize:$.proxy(function(e,t){e.stopPropagation();var i=(e.target,t.size.width),s=t.size.height;this.selection.setDimension({width:i,height:s})},this),stop:$.proxy(function(e,t){$(e.target).removeClass("modif"),this.selection.removeAll()},this),start:function(e,t){$(e.target).addClass("modif")}}).on("click",{obj:this.selection,firstParent:this.firstParent},function(e){e.stopPropagation(),dv.modeEbauche&&(e.stopPropagation(),$(this).hasClass("selected")?($(this).removeClass("selected"),e.data.obj.removeObjet(this),e.ctrlKey&&$(this).remove()):($(".selected").not($(this).siblings(".selected")).removeClass("selected"),$(this).addClass("selected"),$(".selected").each(function(t,i){0==t&&e.data.obj.removeAll(),e.data.obj.addObjet(this),maPage.setUIParameters(e.data.obj.objets[0])})),$("#questions").focus())}).on("mousedown",function(e){e.stopPropagation()})},this.setUIParameters=function(e){var t=$(e).attr("type");switch(t){case"random":var i=$(e).children("[id*=boite][hiding!=no]").length,s='<h1>Boite texte ou de tri</h1><div style="border: 1px solid rgb(153, 153, 153); padding: 20px; border-radius: 10px; position: relative; min-height: 100px;"><div style="position: absolute; top: -10px; background-color: white; left: 120px; padding: 0px 20px;">Placement des boites enfants</div> <div style="margin-bottom: 10px;">Affichage du contenu :</div><div class="case" style="margin-left: 20px;"><input id="eOverflowAuto" name="egrp0" autocomplete="off" type="radio"><label for="eOverflowAuto"></label></div><span style="margin-left: 48px; display: inline-block; margin-bottom: 10px;"> afficher le contenu en débordant de la boite mère si nécessaire.</span><div class="case" style="margin-left: 20px;"><input id="eOverflowHidden" name="egrp0" autocomplete="off" type="radio"><label for="eOverflowHidden"></label></div><span style="margin-left: 48px; display: inline-block; margin-bottom: 10px;">ne pas afficher le contenu qui déborde de la boite mère.</span><div class="case" style="margin-left: 20px;"><input id="eOverflowScroll" name="egrp0" autocomplete="off" type="radio"><label for="eOverflowScroll"></label></div><span style="margin-left: 48px; display: inline-block; margin-bottom: 10px;"> afficher le contenu en ajoutant des barres de défilement si nécessaire. Rien ne déborde de la boite mère.</span><div class="case"><input id="eRandom" name="grEbauche1" autocomplete="off" type="radio" disabled=""><label for="eRandom"></label></div><span style="margin-left: 28px; display: inline-block;">Ordre aléatoire des boites enfants</span><div id="eAlignement" style="margin: 10px 10px 10px 50px;"><div class="case"> <input id="eVertical" name="grEbauche2" autocomplete="off" type="radio"><label for="eVertical"></label></div><span style="margin-left: 28px; display: inline-block;margin-bottom: 10px;">alignement vertical</span><div class="case"> <input id="eHorizontal" name="grEbauche2" autocomplete="off" type="radio"><label for="eHorizontal"></label></div><span style="margin-left: 28px; display: inline-block;margin-bottom: 10px;">alignement horizontal</span></div></div>    <div style="border: 1px solid rgb(153, 153, 153); padding: 20px; border-radius: 10px; position: relative; min-height: 100px; margin-top: 30px;"><div style="position: absolute; top: -10px; background-color: white; left: 120px; padding: 0px 20px;">Visibilité des boites enfants</div>    <div class="case"><input id="eAllVisible" name="grEbauche3" autocomplete="off" type="radio"><label for="eAllVisible"></label></div><span style="margin-left: 28px; display: inline-block;margin-bottom:10px;">Toutes les boites enfants sont visibles</span>    <div class="case"><input id="eVisible" name="grEbauche3" autocomplete="off" type="radio"><label for="eVisible"></label></div><span style="margin-left: 28px; display: inline-block;">Une partie seulement des boites enfants sont visibles</span>   <div id="eNbVisible" style="margin: 10px 10px 10px 50px; display: block;"><input id="eNb" class="text_eleve" style="width: 3em;text-align:center;" type="number" min="1" max="'+(i-1)+'"> boites visibles sur <span>'+i+'</span> choisies aléatoirement</div></div><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s);$(e).attr("id");switch(dv.temp=$(e).css("overflow"),dv.temp){case"hidden":$("#eOverflowHidden").prop("checked",!0);break;case"auto":$("#eOverflowScroll").prop("checked",!0);break;case"visible":$("#eOverflowAuto").prop("checked",!0)}$("#eOverflowAuto, #eOverflowHidden, #eOverflowScroll").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];$("#eOverflowAuto").prop("checked")&&$(t).css("overflow","visible"),$("#eOverflowHidden").prop("checked")&&$(t).css("overflow","hidden"),$("#eOverflowScroll").prop("checked")&&$(t).css("overflow","auto")}),$(e).find("[id*=order]").length>0?($("#eRandom").prop("checked",!0),$("#eAlignement").show()):($("#eRandom").prop("checked",!1),$("#eAlignement").hide()),"v"==$(e).attr("alignement")?$("#eVertical").prop("checked",!0):$("#eHorizontal").prop("checked",!0),"yes"!=$(e).attr("hiding")?$("#eVisible").click():$("#eAllVisible").click(),$("#eNb").val(parseInt($(e).attr("hiding"))),$("#menuEbauche #eRandom+label").on("mouseup",function(e){e.stopPropagation();var t=maPage.selection.objets[0];if("random"==$(t).attr("type"))if($(this).prev().prop("checked"))$(t).children("[id*=boite]").css({position:"absolute"}),$(t).removeAttr("alignement"),$("#eAlignement").hide(),$(t).find("[id*=order]").remove(),$(this).prev().prop("checked",!1);else{$(t).children("[id*=boite]").css({position:"",left:"",top:""}),$("#eAlignement").show(),$(this).prev().prop("checked",!0);var i=$(t).attr("id").substring(5);$(t).append('<script id="order'+i+'">order("boite'+i+'")</script>'),$("#menuEbauche #eVertical").trigger("change"),$("#menuEbauche #eHorizontal").trigger("change")}}),$("#menuEbauche #eVertical").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];"random"==$(t).attr("type")&&($(this).prop("checked")?($(t).children("[id*=boite]").css({display:""}),$(t).attr("alignement","v")):($(t).children("[id*=boite]").css({display:"inline-block"}),$(t).attr("alignement","h")))}),$("#menuEbauche #eHorizontal").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];"random"==$(t).attr("type")&&($(this).prop("checked")?($(t).children("[id*=boite]").css({display:"inline-block"}),$(t).attr("alignement","h")):($(t).children("[id*=boite]").css({display:""}),$(t).attr("alignement","v")))}),$("#menuEbauche #eAllVisible").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];"random"==$(t).attr("type")&&$(this).prop("checked")&&($("#eNbVisible").hide(),$(t).find("[id*=hiding]").remove())}),$("#menuEbauche #eVisible").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];if("random"==$(t).attr("type")&&$(this).prop("checked")){$(t).children("[id*=boite][hiding!=no]").length>1&&$("#eNbVisible").show();var i=$(t).attr("id").substring(5);$(t).append('<script id="hiding'+i+'">hiding("boite'+i+'")</script>')}}),$("#eNb").on("change",function(e){e.stopPropagation();var t=maPage.selection.objets[0];"random"==$(t).attr("type")&&$(t).attr("hiding",$(this).val())}),corrige.setUI(e);break;case"radio":var s='<h1>Le bouton de type Radio</h1><input id="param1" class="text_eleve" type="text" value="'+$(e).find("input").attr("name")+'" style="float: right;margin-top: 10px;"><div>Définir le nom du groupe des boutons radio sélectionnés:</div><script>$("#param1").on("change",function(a){var n=[$(this).val()];$(maPage.selection.objets).each(function(){$(this).find("input").attr("name",n[0])},n)});</script><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),corrige.setUI(e);break;case"commentaire":var s='<h1>La boite commentaire</h1><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),corrige.setUI(e);break;case"image":var s='<h1>La boite de type image</h1><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),corrige.setUI(e);break;case"text":var a=$(e).find("input").attr("style"),o=new RegExp(".*text-align *: *(\\w+).*","i");o.exec(a);var n=RegExp.$1,s='<h1>La zone type Texte</h1><select id="param1" style="float:right;background: rgb(255, 255, 255) none repeat scroll 0% 0%; width: 120px;"><option value="left">à gauche</option><option value="center">au centre</option><option value="right">à droite</option></select><div>Définir le positionnement du text dans la saisie:</div><script>$("#param1").on("change",function(a){var t=[$(this).val()];$(maPage.selection.objets).each(function(){var a=$(this).find("input").attr("style"),e=new RegExp("^(.*)text-align *: *(\\\\w+)\\\\s*(;.*)$","i");e.exec(a);var n=RegExp.$1,i=RegExp.$3,r=n+"text-align:"+t[0]+i;$(this).find("input").attr("style",r)},t)});</script><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),$("#param1").val(n);corrige.setUI(e);break;case"cloze":var s='<h1>Le Texte à trous</h1><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s);corrige.setUI(e);break;case"manuelle":corrige.setUI(e);break;case"case":var s='<h1>La case à cocher</h1><div>Groupe auquel appartient la checkbox : <input class="text_eleve" id="paramGroupe" type="text" style="width: 160px;"></input><script>$("#paramGroupe").val("'+$(e).attr("groupe")+'");$("#paramGroupe").on("change", function (evt) {var $selection = maPage.selection.objets;for (var t = 0; t < $selection.length; t++) {var obj = $selection[t]; if ($(obj).is("[groupe]")) {$(obj).attr("groupe", $(this).val());            }}});</script><script>$("#menuEbauche").prepend(dv.htmlCss)</script></div>';$("#menuEbauche").html(s);corrige.setUI(e);break;case"text_selectable":var s='<h1>Activité "texte sélectionnable"</h1><div class="" style="margin-bottom:10px;">nombre maxi de zones sélectionnables <input id="maxSelected" value="0" type="number" class="text_eleve" style="width:3em;text-align:center;"> ( 0 : aucune limite)</div><div class="case"> <input id="caseEMode1" name="grEbauche1" autocomplete="off" type="radio"><label for="caseEMode1"></label></div><span style="margin-left: 28px; display: inline-block;">Texte sélectionable uniquement </span><div class="case" style="margin-top: 5px;"> <input id="caseEMode2" name="grEbauche1" autocomplete="off" type="radio"><label for="caseEMode2"></label></div><span style="margin-left: 28px; display: inline-block;">Texte sélectionable avec zone de text pour modification </span><div style="border: 1px solid rgb(153, 153, 153); border-radius: 10px; padding: 10px; position: relative;top:2em;"><div style="background-color: white; position: absolute; top: -16px; left: 20px; padding: 5px;">Définition des zones interactives : </div><div id="meCorrige" class="" style="min-height:50px;-moz-user-select:none;-webkit-user-select:none;user-select:none">Double click ici pour éditer le texte ...</div></div><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),"modif"==$(e).children("span").attr("mode")?$("#caseEMode2").click():$("#caseEMode1").click(),$("#maxSelected").val($(maPage.selection.objets[0]).find("div.dv").attr("maxSelect")),$("#maxSelected").change(function(e){$(maPage.selection.objets[0]).find("div.dv").attr("maxSelect",$(this).val())}),$("#caseEMode2,#caseEMode1").on("click",function(){"caseEMode2"==$(this).attr("id")?$(maPage.selection.objets[0]).children("span").attr("mode","modif"):$(maPage.selection.objets[0]).children("span").attr("mode","basic"),$("#mccorrige").trigger("change"),$(maPage.selection.objets[0]).find("iff").trigger($(maPage.selection.objets[0]).attr("id")+"corrige")}),dv.temp=$(maPage.selection.objets[0]).children("span").find("div.dv").html(),"<span> </span>"!=dv.temp&&$("#meCorrige").html(dv.temp),$("#meCorrige").on("click",function(e){$(this).find(".textSelected").removeClass("textSelected")}),$("#meCorrige").on("click","span",function(e){if(e.altKey||e.ctrlKey||e.shiftKey||(e.stopPropagation(),$(this).toggleClass("textSelected")),e.shiftKey&&(e.stopPropagation(),$(this).hasClass("noTxtSelectable")?$(this).attr("class","txtSelectable"):$(this).attr("class","noTxtSelectable"),$(maPage.selection.objets[0]).children("span").trigger("changeContenu")),e.ctrlKey){if(e.stopPropagation(),$(this).parent().find(".textSelected").length>1){var t="",i=[],s=-1,a=0,o="";$(this).parent().find("span").each(function(e){$(this).is(".textSelected")&&-1==s&&(s=e,o=$(this).hasClass("noTxtSelectable")?"noTxtSelectable":"txtSelectable")}),$(this).parent().find("span").each(function(e){$(this).is(".textSelected")&&(a=e)}),$(this).parent().find("span").each(function(e){e>s-1&&a+1>e&&i.push(this)}),$(i).wrapAll("<span></span>"),$(this).parent().find("span").each(function(e){t+=$(this).text()+" "}),t=t.replace(/ *$/,""),$(this).parent().append(t),$(this).parent().addClass(o),$(this).parent().find("span").remove()}else{var o="";o=$(this).hasClass("noTxtSelectable")?"noTxtSelectable":"txtSelectable";var n=($(this).text()+"").split(" "),t="";$(this).empty();for(var l=0;l<n.length;l++)""!=n[l]&&(t+="<span>"+n[l]+"</span> ");t=t.replace(/ *$/,""),$(this).append(t),$(this).find("span").addClass(o).unwrap()}$(maPage.selection.objets[0]).children("span").trigger("changeContenu")}}),$("#meCorrige").on("dblclick",function(e){e.stopPropagation(),dv.temp=this.innerHTML,"Double click ici pour éditer le texte ..."==dv.temp&&(dv.temp=""),CKEDITOR.instances.modifTextarea.document.$.body.innerHTML=dv.temp,$("#textModif").dialog("option","position",{my:"center center",at:"center center",of:document}),$("#textModif").dialog("option","buttons",[{text:"Ok",click:function(){var e=CKEDITOR.instances.modifTextarea.document.$.body.innerHTML+"";e=e.replace(/^([^<]+)/g,'<span class="txtSelectable">$1</span> '),e=e.replace(/<\/span>([,;\.\?\!\:])/g,"$1</span>"),e=e.replace(/ *<\/span>(\S)/g,"</span> $1"),e=e.replace(/ *<\/span> +([^<]+)/g,'</span> <span class="txtSelectable">$1</span> '),$("#meCorrige").html(e),$(this).trigger("meCorrigeChange"),$(this).dialog("close")}}]).dialog("open")});corrige.setUI(e);break;case"drop":var s='<h1>La zone de dépôt</h1><div><div class="case" style="margin: 10px;"> <input value="" id="eMasque" name="eMasque" autocomplete="off" type="checkbox"><label for="eMasque"> </label></div><span style="margin-left: 38px; margin-bottom:20px; display: inline-block;">  masquer la zone de dépôt</span><div>Nombre maxi d\'éléments déposables dans la zone de dépôt : <div class="case" style="margin: 10px;"> <input value="" id="ebaucheParamUnique" name="ebaucheParam1" autocomplete="off" type="radio"><label for="ebaucheParamUnique"> </label></div><span style="margin-left: 38px; display: inline-block;">Un seul dépôt possible</span><div class="case" style="margin: 10px;"> <input value="" id="ebaucheParamMultiple" name="ebaucheParam1" autocomplete="off" type="radio"><label for="ebaucheParamMultiple"> </label></div><span style="margin-left: 38px; display: inline-block;">Plusieurs dépôts possible</span><div style="margin-top:20px;">nombre de tentative de dépôt autorisé avant de figer la zone de dépôt et de ce qu\'elle contient. la valeur (-1) pour aucune limite<div style="margin-left: 209px;"><input id="ebaucheTentative" class="text_eleve"  type="number" min="-1" style="text-align:center;width:5em;height:2em;"></div></div><script></script><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';
$("#menuEbauche").html(s),setdropUIParameter(e);corrige.setUI(e);break;case"drag":var s='<h1>&Eacute;lément déplaçable</h1><div><div>&Eacute;lément déposable : <div class="case" style="margin: 10px;"> <input value="" id="ebaucheDropAny" name="ebauchewhere" autocomplete="off" type="radio"><label for="ebaucheDropAny"> </label></div><span style="margin-left: 38px; display: inline-block;">Partout sur la page</span><div class="case" style="margin: 10px;"> <input value="" id="ebaucheDropOnDrop" name="ebauchewhere" autocomplete="off" type="radio"><label for="ebaucheDropOnDrop"> </label></div><span style="margin-left: 38px; display: inline-block;">Dans les zones de dépôt uniquement</span></div><script></script><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),"cible"==$(e).find("[id*=drag]").attr("mode")?$("#ebaucheDropOnDrop").prop("checked",!0):$("#ebaucheDropAny").prop("checked",!0),$("#ebaucheDropOnDrop, #ebaucheDropAny").on("change",function(t){var i=$(e).find("[id*=drag]");"cible"==i.attr("mode")?i.attr("mode","any"):i.attr("mode","cible")});break;case"scientifique":var s='<h1>Le contenu à caractère scientifique</h1><div><div style="margin-bottom: 10px;"><input id="meEE" autocomplete="off" type="radio" name="meEE"><label for="meEE"> </label><span style="margin-left: 28px; display: inline-block;"> Contenu éditable par l\'élève</span></div><div style="margin-bottom: 10px;"><input id="meEP" autocomplete="off" type="radio" name="meEE"><label for="meEP"> </label><span style="margin-left: 28px; display: inline-block;"> Contenu non éditable par l\'élève</span></div></div><script>$("#menuEbauche").prepend(dv.htmlCss)</script>';$("#menuEbauche").html(s),"modifiable"==$(maPage.selection.objets[0]).attr("statu")?$("#meEE").prop("checked",!0):$("#meEP").prop("checked",!0),$("#meEE").on("change",function(e){$("#meEE").prop("checked")&&$(maPage.selection.objets[0]).attr("statu","modifiable").addClass("borderPlein").trigger("refresh")}),$("#meEP").on("change",function(e){$("#meEE").prop("checked")&&$(maPage.selection.objets[0]).attr("statu","non-modifiable").removeClass("borderPlein").trigger("refresh")});corrige.setUI(e)}},this.saveAllQuestions=function(){$("#page [id*=boite][class*=construction]").off("click dblclick mousedown"),$("#page [id*=boite][class*=resizable]").filter(".ui-resizable").resizable("destroy"),$("#page [id*=boite][class*=resizable]").removeClass("ui-resizable-autohide"),$("#page [id*=boite][class*=draggable]").draggable("destroy"),$("#page [id*=boite][class*=droppable]").droppable("destroy"),$("#page [id*=boite][class*=construction]").removeClass("construction"),$("#page [id*=drag]").each(function(){$.proxy(maPage.delInteractivite(this.id),maPage),$(this).removeClass("construction")}),$("#page").removeClass("hoverDroppable"),$("#page").removeAttr("id"),maPage.selection.removeAll(),$(".commentaire").hide(),$(".question").hide(),$("#loader_text").text("En cours d'enregistrement"),$("#loader").show(),$("#question0").show(),$("parametre").text(paramText),dvQuestions=$("#questions").html();var e=encodeURIComponent($("#questions").html());e.length;$.ajax({url:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+API+"/php/saveQuestions.php",type:"POST",dataType:"html",data:"code="+e+"&path="+window.location.pathname,success:$.proxy(function(e){$("#loader").hide(),$("#loader_text").text("En cours de chargement ..."),afficheQuestion(pageActuelle),$("#ui-id-2").trigger("click")},this)})},this.delInteractivite=function(e){$(e).off("click dblclick mousedown"),$(e+" [class*=resizable]").filter(".ui-resizable").resizable("destroy"),$(e+" [class*=resizable]").removeClass("ui-resizable-autohide"),$(e+" [class*=draggable]").draggable("destroy"),$(e+" [class*=droppable]").droppable("destroy"),$(e).removeClass("construction")},this.removeUIEbauche=function(){return'<div style="font-size: 1.5em;text-align: center;">Gestion des paramètres liés aux élements</div><div style="position: relative;top: 50px;left: 50px;font-size: 1.2em;font-weight:bold;">Sélectionner un élément...</div>'}},maPage;maPage=new CreatePage;var corrige=new Correction(maPage);