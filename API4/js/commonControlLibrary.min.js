/*

 jPlayer Plugin for jQuery JavaScript Library
 http://www.jplayer.org

 Copyright (c) 2009 - 2014 Happyworm Ltd
 Licensed under the MIT license.
 http://opensource.org/licenses/MIT

 Author: Mark J Panaghiston
 Version: 2.9.2
 Date: 14th December 2014

 Auto-growing textareas; technique ripped from Facebook
 https://github.com/jaz303/jquery-grab-bag/blob/f1a3cc1e86cbb248bcb41391d6eff115b1be6d89/javascripts/jquery.autogrow-textarea.js

  Linkify - v1.1.7
  Find URLs in plain text and return HTML for discovered links.
  https://github.com/HitSend/jQuery-linkify/

  Made by SoapBox Innovations, Inc.
  Under MIT License

 jQuery Hotkeys Plugin
 Copyright 2010, John Resig
 Dual licensed under the MIT or GPL Version 2 licenses.

 Based upon the plugin by Tzury Bar Yochay:
 http://github.com/tzuryby/hotkeys

 Original idea by:
 Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/
(function(d){"function"===typeof define&&define.amd?define(["jquery","jquery.ui.widget"],d):d(window.jQuery)})(function(d){d.support.xhrFileUpload=!(!window.XMLHttpRequestUpload||!window.FileReader);d.support.xhrFormDataFileUpload=!!window.FormData;d.propHooks.elements={get:function(e){return d.nodeName(e,"form")?d.grep(e.elements,function(e){return!d.nodeName(e,"input")||"file"!==e.type}):null}};d.widget("blueimp.fileupload",{options:{dropZone:d(document),pasteZone:d(document),fileInput:void 0,replaceFileInput:!0,
paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,formData:function(d){return d.serializeArray()},add:function(d,f){f.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["fileInput","dropZone","pasteZone","multipart",
"forceIframeTransport"],_BitrateTimer:function(){this.timestamp=+new Date;this.bitrate=this.loaded=0;this.getBitrate=function(d,f,c){var a=d-this.timestamp;if(!this.bitrate||!c||a>c)this.bitrate=1E3/a*(f-this.loaded)*8,this.loaded=f,this.timestamp=d;return this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&d.support.xhrFileUpload||d.support.xhrFormDataFileUpload)},_getFormData:function(e){var f;return"function"===typeof e.formData?e.formData(e.form):d.isArray(e.formData)?
e.formData:e.formData?(f=[],d.each(e.formData,function(c,a){f.push({name:c,value:a})}),f):[]},_getTotal:function(e){var f=0;d.each(e,function(c,a){f+=a.size||1});return f},_onProgress:function(d,f){if(d.lengthComputable){var c=+new Date,a,b;f._time&&f.progressInterval&&c-f._time<f.progressInterval&&d.loaded!==d.total||(f._time=c,a=f.total||this._getTotal(f.files),b=parseInt(d.loaded/d.total*(f.chunkSize||a),10)+(f.uploadedBytes||0),this._loaded+=b-(f.loaded||f.uploadedBytes||0),f.lengthComputable=
!0,f.loaded=b,f.total=a,f.bitrate=f._bitrateTimer.getBitrate(c,b,f.bitrateInterval),this._trigger("progress",d,f),this._trigger("progressall",d,{lengthComputable:!0,loaded:this._loaded,total:this._total,bitrate:this._bitrateTimer.getBitrate(c,this._loaded,f.bitrateInterval)}))}},_initProgressListener:function(e){var f=this,c=e.xhr?e.xhr():d.ajaxSettings.xhr();c.upload&&(d(c.upload).bind("progress",function(a){var b=a.originalEvent;a.lengthComputable=b.lengthComputable;a.loaded=b.loaded;a.total=b.total;
f._onProgress(a,e)}),e.xhr=function(){return c})},_initXHRData:function(e){var f,c=e.files[0],a=e.multipart||!d.support.xhrFileUpload,b=e.paramName[0];e.headers=e.headers||{};e.contentRange&&(e.headers["Content-Range"]=e.contentRange);a?d.support.xhrFormDataFileUpload&&(e.postMessage?(f=this._getFormData(e),e.blob?f.push({name:b,value:e.blob}):d.each(e.files,function(a,c){f.push({name:e.paramName[a]||b,value:c})})):(e.formData instanceof FormData?f=e.formData:(f=new FormData,d.each(this._getFormData(e),
function(a,b){f.append(b.name,b.value)})),e.blob?(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.name)+'"',f.append(b,e.blob,c.name)):d.each(e.files,function(a,c){(window.Blob&&c instanceof Blob||window.File&&c instanceof File)&&f.append(e.paramName[a]||b,c,c.name)})),e.data=f):(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(c.name)+'"',e.contentType=c.type,e.data=e.blob||c);e.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||
"");e.formData=this._getFormData(e);e.redirect&&d("<a></a>").prop("href",e.url).prop("host")!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(d){this._isXHRUpload(d)?(this._chunkedUpload(d,!0)||(d.data||this._initXHRData(d),this._initProgressListener(d)),d.postMessage&&(d.dataType="postmessage "+(d.dataType||""))):this._initIframeSettings(d,"iframe")},_getParamName:function(e){var f=d(e.fileInput),c=e.paramName;c?d.isArray(c)||(c=
[c]):(c=[],f.each(function(){for(var a=d(this),b=a.prop("name")||"files[]",a=(a.prop("files")||[1]).length;a;)c.push(b),--a}),c.length||(c=[f.prop("name")||"files[]"]));return c},_initFormSettings:function(e){e.form&&e.form.length||(e.form=d(e.fileInput.prop("form")),e.form.length||(e.form=d(this.options.fileInput.prop("form"))));e.paramName=this._getParamName(e);e.url||(e.url=e.form.prop("action")||location.href);e.type=(e.type||e.form.prop("method")||"").toUpperCase();"POST"!==e.type&&"PUT"!==e.type&&
"PATCH"!==e.type&&(e.type="POST");e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){e=d.extend({},this.options,e);this._initFormSettings(e);this._initDataSettings(e);return e},_enhancePromise:function(d){d.success=d.done;d.error=d.fail;d.complete=d.always;return d},_getXHRPromise:function(e,f,c){var a=d.Deferred(),b=a.promise();f=f||this.options.context||b;!0===e?a.resolveWith(f,c):!1===e&&a.rejectWith(f,c);b.abort=a.promise;return this._enhancePromise(b)},
_getUploadedBytes:function(d){return(d=(d=(d=d.getResponseHeader("Range"))&&d.split("-"))&&1<d.length&&parseInt(d[1],10))&&d+1},_chunkedUpload:function(e,f){var c=this,a=e.files[0],b=a.size,g=e.uploadedBytes=e.uploadedBytes||0,h=e.maxChunkSize||b,l=a.slice||a.webkitSlice||a.mozSlice,k=d.Deferred(),m=k.promise(),n,q;if(!(this._isXHRUpload(e)&&l&&(g||h<b))||e.data)return!1;if(f)return!0;if(g>=b)return a.error="Uploaded bytes exceed file size",this._getXHRPromise(!1,e.context,[null,"error",a.error]);
q=function(){var f=d.extend({},e);f.blob=l.call(a,g,g+h,a.type);f.chunkSize=f.blob.size;f.contentRange="bytes "+g+"-"+(g+f.chunkSize-1)+"/"+b;c._initXHRData(f);c._initProgressListener(f);n=(!1!==c._trigger("chunksend",null,f)&&d.ajax(f)||c._getXHRPromise(!1,f.context)).done(function(a,h,l){g=c._getUploadedBytes(l)||g+f.chunkSize;(!f.loaded||f.loaded<f.total)&&c._onProgress(d.Event("progress",{lengthComputable:!0,loaded:g-f.uploadedBytes,total:g-f.uploadedBytes}),f);e.uploadedBytes=f.uploadedBytes=
g;f.result=a;f.textStatus=h;f.jqXHR=l;c._trigger("chunkdone",null,f);c._trigger("chunkalways",null,f);g<b?q():k.resolveWith(f.context,[a,h,l])}).fail(function(a,g,b){f.jqXHR=a;f.textStatus=g;f.errorThrown=b;c._trigger("chunkfail",null,f);c._trigger("chunkalways",null,f);k.rejectWith(f.context,[a,g,b])})};this._enhancePromise(m);m.abort=function(){return n.abort()};q();return m},_beforeSend:function(d,f){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer);this._active+=
1;this._loaded+=f.uploadedBytes||0;this._total+=this._getTotal(f.files)},_onDone:function(e,f,c,a){if(!this._isXHRUpload(a)||!a.loaded||a.loaded<a.total){var b=this._getTotal(a.files)||1;this._onProgress(d.Event("progress",{lengthComputable:!0,loaded:b,total:b}),a)}a.result=e;a.textStatus=f;a.jqXHR=c;this._trigger("done",null,a)},_onFail:function(d,f,c,a){a.jqXHR=d;a.textStatus=f;a.errorThrown=c;this._trigger("fail",null,a);a.recalculateProgress&&(this._loaded-=a.loaded||a.uploadedBytes||0,this._total-=
a.total||this._getTotal(a.files))},_onAlways:function(d,f,c,a){--this._active;this._trigger("always",null,a);0===this._active&&(this._trigger("stop"),this._loaded=this._total=0,this._bitrateTimer=null)},_onSend:function(e,f){var c=this,a,b,g,h,l=c._getAJAXSettings(f),k=function(){c._sending+=1;l._bitrateTimer=new c._BitrateTimer;return a=a||((b||!1===c._trigger("send",e,l))&&c._getXHRPromise(!1,l.context,b)||c._chunkedUpload(l)||d.ajax(l)).done(function(a,g,b){c._isXHRUpload(l)||"undefined"!==typeof a?
c._onDone(a,g,b,l):c._onFail(b,"error","Unknown",l)}).fail(function(a,g,b){c._onFail(a,g,b,l)}).always(function(a,g,b){--c._sending;c._onAlways(a,g,b,l);if(l.limitConcurrentUploads&&l.limitConcurrentUploads>c._sending)for(a=c._slots.shift();a;){if(g=a.state?"pending"===a.state():!a.isRejected()){a.resolve();break}a=c._slots.shift()}})};this._beforeSend(e,l);return this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(1<this.options.limitConcurrentUploads?
(g=d.Deferred(),this._slots.push(g),h=g.pipe(k)):h=this._sequence=this._sequence.pipe(k,k),h.abort=function(){b=[void 0,"abort","abort"];return a?a.abort():(g&&g.rejectWith(l.context,b),k())},this._enhancePromise(h)):k()},_onAdd:function(e,f){var c=this,a=!0,b=d.extend({},this.options,f),g=b.limitMultiFileUploads,h=this._getParamName(b),l,k,m;if((b.singleFileUploads||g)&&this._isXHRUpload(b))if(!b.singleFileUploads&&g)for(k=[],l=[],m=0;m<f.files.length;m+=g)k.push(f.files.slice(m,m+g)),b=h.slice(m,
m+g),b.length||(b=h),l.push(b);else l=h;else k=[f.files],l=[h];f.originalFiles=f.files;d.each(k||f.files,function(g,b){var h=d.extend({},f);h.files=k?b:[b];h.paramName=l[g];h.submit=function(){return h.jqXHR=this.jqXHR=!1!==c._trigger("submit",e,this)&&c._onSend(e,this)};return a=c._trigger("add",e,h)});return a},_replaceFileInput:function(e){var f=e.clone(!0);d("<form></form>").append(f)[0].reset();e.after(f).detach();d.cleanData(e.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(c,
a){return a===e[0]?f[0]:a});e[0]===this.element[0]&&(this.element=f)},_handleFileTreeEntry:function(e,f){var c=this,a=d.Deferred(),b=function(g){g&&!g.entry&&(g.entry=e);a.resolve([g])},g;f=f||"";e.isFile?e._file?(e._file.relativePath=f,a.resolve(e._file)):e.file(function(g){g.relativePath=f;a.resolve(g)},b):e.isDirectory?(g=e.createReader(),g.readEntries(function(g){c._handleFileTreeEntries(g,f+e.name+"/").done(function(g){a.resolve(g)}).fail(b)},b)):a.resolve([]);return a.promise()},_handleFileTreeEntries:function(e,
f){var c=this;return d.when.apply(d,d.map(e,function(a){return c._handleFileTreeEntry(a,f)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var f=e.items;return f&&f.length&&(f[0].webkitGetAsEntry||f[0].getAsEntry)?this._handleFileTreeEntries(d.map(f,function(c){var a;if(c.webkitGetAsEntry){if(a=c.webkitGetAsEntry())a._file=c.getAsFile();return a}return c.getAsEntry()})):d.Deferred().resolve(d.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=
d(e);var f=e.prop("webkitEntries")||e.prop("entries");if(f&&f.length)return this._handleFileTreeEntries(f);f=d.makeArray(e.prop("files"));if(f.length)void 0===f[0].name&&f[0].fileName&&d.each(f,function(c,a){a.name=a.fileName;a.size=a.fileSize});else{e=e.prop("value");if(!e)return d.Deferred().resolve([]).promise();f=[{name:e.replace(/^.*\\/,"")}]}return d.Deferred().resolve(f).promise()},_getFileInputFiles:function(e){return e instanceof d&&1!==e.length?d.when.apply(d,d.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],
arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var f=this,c={fileInput:d(e.target),form:d(e.target.form)};this._getFileInputFiles(c.fileInput).always(function(a){c.files=a;f.options.replaceFileInput&&f._replaceFileInput(c.fileInput);!1!==f._trigger("change",e,c)&&f._onAdd(e,c)})},_onPaste:function(e){var f=e.originalEvent.clipboardData,c={files:[]};d.each(f&&f.items||[],function(a,b){var g=b.getAsFile&&b.getAsFile();g&&c.files.push(g)});if(!1===this._trigger("paste",e,c)||!1===
this._onAdd(e,c))return!1},_onDrop:function(d){var f=this,c=d.dataTransfer=d.originalEvent.dataTransfer,a={};c&&c.files&&c.files.length&&d.preventDefault();this._getDroppedFiles(c).always(function(b){a.files=b;!1!==f._trigger("drop",d,a)&&f._onAdd(d,a)})},_onDragOver:function(e){var f=e.dataTransfer=e.originalEvent.dataTransfer;if(!1===this._trigger("dragover",e))return!1;f&&-1!==d.inArray("Files",f.types)&&(f.dropEffect="copy",e.preventDefault())},_initEventHandlers:function(){this._isXHRUpload(this.options)&&
(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste}));this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(e,f){var c=-1!==d.inArray(e,this._refreshOptionsList);c&&this._destroyEventHandlers();this._super(e,f);c&&(this._initSpecialOptions(),
this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;void 0===e.fileInput?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof d||(e.fileInput=d(e.fileInput));e.dropZone instanceof d||(e.dropZone=d(e.dropZone));e.pasteZone instanceof d||(e.pasteZone=d(e.pasteZone))},_create:function(){var e=this.options;d.extend(e,d(this.element[0].cloneNode(!1)).data());e.blueimpFileupload=null;e.fileupload=null;this._initSpecialOptions();
this._slots=[];this._sequence=this._getXHRPromise(!0);this._sending=this._active=this._loaded=this._total=0;this._initEventHandlers()},_destroy:function(){this._destroyEventHandlers()},add:function(e){var f=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(c){e.files=c;f._onAdd(null,e)}):(e.files=d.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var f=this,c=d.Deferred(),a=
c.promise(),b,g;a.abort=function(){g=!0;if(b)return b.abort();c.reject(null,"abort","abort");return a};this._getFileInputFiles(e.fileInput).always(function(a){g||(e.files=a,b=f._onSend(null,e).then(function(a,g,b){c.resolve(a,g,b)},function(a,g,b){c.reject(a,g,b)}))});return this._enhancePromise(a)}e.files=d.makeArray(e.files);if(e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})});
(function(d){var e=d.HTMLCanvasElement&&d.HTMLCanvasElement.prototype,f;if(f=d.Blob)try{f=Boolean(new Blob)}catch(c){f=!1}var a=f;if(f=a&&d.Uint8Array)try{f=100===(new Blob([new Uint8Array(100)])).size}catch(b){f=!1}var g=f,h=d.BlobBuilder||d.WebKitBlobBuilder||d.MozBlobBuilder||d.MSBlobBuilder,l=(a||h)&&d.atob&&d.ArrayBuffer&&d.Uint8Array&&function(b){var c,d,l,e,f,p;0<=b.split(",")[0].indexOf("base64")?c=atob(b.split(",")[1]):c=decodeURIComponent(b.split(",")[1]);d=new ArrayBuffer(c.length);l=new Uint8Array(d);
for(e=0;e<c.length;e+=1)l[e]=c.charCodeAt(e);return f=b.split(",")[0].split(":")[1].split(";")[0],a?new Blob([g?l:d],{type:f}):(p=new h,p.append(d),p.getBlob(f))};d.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(a,g,b){b&&e.toDataURL&&l?a(l(this.toDataURL(g,b))):a(this.mozGetAsFile("blob",g))}:e.toDataURL&&l&&(e.toBlob=function(a,g,b){a(l(this.toDataURL(g,b)))}));"function"==typeof define&&define.amd?define(function(){return l}):d.dataURLtoBlob=l})(this);
(function(d){"function"===typeof define&&define.amd?define(["jquery","load-image","canvas-to-blob","./jquery.fileupload"],d):d(window.jQuery,window.loadImage)})(function(d,e){d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{process:[],add:function(e,c){d(this).fileupload("process",c).done(function(){c.submit()})}},processActions:{load:function(f,c){var a=this,b=f.files[f.index],g=d.Deferred();window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype.toBlob&&("number"!==d.type(c.maxFileSize)||
b.size<c.maxFileSize)&&(!c.fileTypes||c.fileTypes.test(b.type))?e(b,function(b){if(!b.src)return g.rejectWith(a,[f]);f.img=b;g.resolveWith(a,[f])}):g.rejectWith(a,[f]);return g.promise()},resize:function(f,c){var a=f.img,b;c=d.extend({canvas:!0},c);a&&(b=e.scale(a,c),b.width!==a.width||b.height!==a.height)&&(f.canvas=b);return f},save:function(e,c){if(!e.canvas)return e;var a=this,b=e.files[e.index],g=b.name,h=d.Deferred(),l=function(g){g.name||(b.type===g.type?g.name=b.name:b.name&&(g.name=b.name.replace(/\..+$/,
"."+g.type.substr(6))));e.files[e.index]=g;h.resolveWith(a,[e])};e.canvas.mozGetAsFile?l(e.canvas.mozGetAsFile(/^image\/(jpeg|png)$/.test(b.type)&&g||(g&&g.replace(/\..+$/,"")||"blob")+".png",b.type)):e.canvas.toBlob(l,b.type);return h.promise()}},_processFile:function(e,c,a){var b=this,g=d.Deferred().resolveWith(b,[{files:e,index:c}]).promise();b._processing+=1;d.each(a.process,function(a,c){g=g.pipe(function(a){return b.processActions[c.action].call(this,a,c)})});g.always(function(){--b._processing;
0===b._processing&&b.element.removeClass("fileupload-processing")});1===b._processing&&b.element.addClass("fileupload-processing");return g},process:function(e){var c=this,a=d.extend({},this.options,e);a.process&&a.process.length&&this._isXHRUpload(a)&&d.each(e.files,function(b,g){c._processingQueue=c._processingQueue.pipe(function(){var g=d.Deferred();c._processFile(e.files,b,a).always(function(){g.resolveWith(c)});return g.promise()})});return this._processingQueue},_create:function(){this._super();
this._processing=0;this._processingQueue=d.Deferred().resolveWith(this).promise()}})});
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(window.jQuery)})(function(d){var e=0;d.ajaxTransport("iframe",function(f){if(f.async){var c=f.initialIframeSrc||"javascript:false;",a,b,g;return{send:function(h,l){a=d('<form style="display:none;"></form>');a.attr("accept-charset",f.formAcceptCharset);g=/\?/.test(f.url)?"&":"?";"DELETE"===f.type?(f.url=f.url+g+"_method=DELETE",f.type="POST"):"PUT"===f.type?(f.url=f.url+g+"_method=PUT",f.type="POST"):"PATCH"===f.type&&(f.url=
f.url+g+"_method=PATCH",f.type="POST");e+=1;b=d('<iframe src="'+c+'" name="iframe-transport-'+e+'"></iframe>').bind("load",function(){var g,h=d.isArray(f.paramName)?f.paramName:[f.paramName];b.unbind("load").bind("load",function(){var g;try{if(g=b.contents(),!g.length||!g[0].firstChild)throw Error();}catch(h){g=void 0}l(200,"success",{iframe:g});d('<iframe src="'+c+'"></iframe>').appendTo(a);window.setTimeout(function(){a.remove()},0)});a.prop("target",b.prop("name")).prop("action",f.url).prop("method",
f.type);f.formData&&d.each(f.formData,function(g,b){d('<input type="hidden"/>').prop("name",b.name).val(b.value).appendTo(a)});f.fileInput&&f.fileInput.length&&"POST"===f.type&&(g=f.fileInput.clone(),f.fileInput.after(function(a){return g[a]}),f.paramName&&f.fileInput.each(function(a){d(this).prop("name",h[a]||f.paramName)}),a.append(f.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),f.fileInput.removeAttr("form"));a.submit();g&&g.length&&f.fileInput.each(function(a,
b){var c=d(g[a]);d(b).prop("name",c.prop("name")).attr("form",c.attr("form"));c.replaceWith(b)})});a.append(b).appendTo(document.body)},abort:function(){b&&b.unbind("load").prop("src",c);a&&a.remove()}}}});d.ajaxSetup({converters:{"iframe text":function(e){return e&&d(e[0].body).text()},"iframe json":function(e){return e&&d.parseJSON(d(e[0].body).text())},"iframe html":function(e){return e&&d(e[0].body).html()},"iframe xml":function(e){return(e=e&&e[0])&&d.isXMLDoc(e)?e:d.parseXML(e.XMLDocument&&
e.XMLDocument.xml||d(e.body).html())},"iframe script":function(e){return e&&d.globalEval(d(e[0].body).text())}}})});
(function(d){var e=function(c,a,b){var g=document.createElement("img"),h,d;return g.onerror=a,g.onload=function(){!d||b&&b.noRevoke||e.revokeObjectURL(d);a(e.scale(g,b))},window.Blob&&c instanceof Blob||window.File&&c instanceof File?(h=d=e.createObjectURL(c),g._type=c.type):h=c,h?(g.src=h,g):e.readFile(c,function(b){var c=b.target;c&&c.result?g.src=c.result:a(b)})},f=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;e.detectSubsampling=function(c){var a=
c.width,b,g;return 1048576<a*c.height?(b=document.createElement("canvas"),b.width=b.height=1,g=b.getContext("2d"),g.drawImage(c,-a+1,0),0===g.getImageData(0,0,1,1).data[3]):!1};e.detectVerticalSquash=function(c,a){var b=document.createElement("canvas"),g=b.getContext("2d"),h,d,e;b.width=1;b.height=a;g.drawImage(c,0,0);b=g.getImageData(0,0,1,a).data;g=0;for(d=h=a;d>g;)e=b[4*(d-1)+3],0===e?h=d:g=d,d=h+g>>1;return d/a};e.renderImageToCanvas=function(c,a,b,g){var h=c.width,d=c.height;a=a.getContext("2d");
var f,m=document.createElement("canvas"),n,q,s,t,p;a.save();e.detectSubsampling(c)&&(h/=2,d/=2);f=e.detectVerticalSquash(c,d);m.width=m.height=1024;n=m.getContext("2d");for(q=0;q<d;){s=q+1024>d?d-q:1024;for(t=0;t<h;)p=t+1024>h?h-t:1024,n.clearRect(0,0,1024,1024),n.drawImage(c,-t,-q),a.drawImage(m,0,0,p,s,Math.floor(t*b/h),Math.floor(q*g/d/f),Math.ceil(p*b/h),Math.ceil(s*g/d/f)),t+=1024;q+=1024}a.restore()};e.scale=function(c,a){a=a||{};var b=document.createElement("canvas"),g=c.width,h=c.height,d=
Math.max((a.minWidth||g)/g,(a.minHeight||h)/h);return 1<d&&(g=parseInt(g*d,10),h=parseInt(h*d,10)),d=Math.min((a.maxWidth||g)/g,(a.maxHeight||h)/h),1>d&&(g=parseInt(g*d,10),h=parseInt(h*d,10)),c.getContext||a.canvas&&b.getContext?(b.width=g,b.height=h,"image/jpeg"===c._type?e.renderImageToCanvas(c,b,g,h):b.getContext("2d").drawImage(c,0,0,g,h),b):(c.width=g,c.height=h,c)};e.createObjectURL=function(c){return f?f.createObjectURL(c):!1};e.revokeObjectURL=function(c){return f?f.revokeObjectURL(c):!1};
e.readFile=function(c,a){if(window.FileReader&&FileReader.prototype.readAsDataURL){var b=new FileReader;return b.onload=b.onerror=a,b.readAsDataURL(c),b}return!1};"function"==typeof define&&define.amd?define(function(){return e}):d.loadImage=e})(this);
(function(d){var e=function(d,c){var a=/[^\w\-\.:]/.test(d)?new Function(e.arg+",tmpl","var _e=tmpl.encode"+e.helper+",_s='"+d.replace(e.regexp,e.func)+"';return _s;"):e.cache[d]=e.cache[d]||e(e.load(d));return c?a(c,e):function(b){return a(b,e)}};e.cache={};e.load=function(d){return document.getElementById(d).innerHTML};e.regexp=/([\s'\\])(?![^%]*%\})|(?:\{%(=|#)([\s\S]+?)%\})|(\{%)|(%\})/g;e.func=function(d,c,a,b,g,h){if(c)return{"\n":"\\n","\r":"\\r","\t":"\\t"," ":" "}[d]||"\\"+d;if(a)return"="===
a?"'+_e("+b+")+'":"'+("+b+"||'')+'";if(g)return"';";if(h)return"_s+='"};e.encReg=/[<>&"'\x00]/g;e.encMap={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;"};e.encode=function(d){return String(d||"").replace(e.encReg,function(c){return e.encMap[c]||""})};e.arg="o";e.helper=",print=function(s,e){_s+=e&&(s||'')||_e(s);},include=function(s,d){_s+=tmpl(s,d);}";"function"===typeof define&&define.amd?define(function(){return e}):d.tmpl=e})(this);
(function(d,e){"function"===typeof define&&define.amd?define(["jquery"],e):"object"===typeof exports?e(require("jquery")):d.jQuery?e(d.jQuery):e(d.Zepto)})(this,function(d,e){d.fn.jPlayer=function(a){var b="string"===typeof a,c=Array.prototype.slice.call(arguments,1),f=this;a=!b&&c.length?d.extend.apply(null,[!0,a].concat(c)):a;if(b&&"_"===a.charAt(0))return f;b?this.each(function(){var b=d(this).data("jPlayer"),h=b&&d.isFunction(b[a])?b[a].apply(b,c):b;if(h!==b&&h!==e)return f=h,!1}):this.each(function(){var b=
d(this).data("jPlayer");b?b.option(a||{}):d(this).data("jPlayer",new d.jPlayer(a,this))});return f};d.jPlayer=function(a,b){if(arguments.length){this.element=d(b);this.options=d.extend(!0,{},this.options,a);var c=this;this.element.bind("remove.jPlayer",function(){c.destroy()});this._init()}};"function"!==typeof d.fn.stop&&(d.fn.stop=function(){});d.jPlayer.emulateMethods="load play pause";d.jPlayer.emulateStatus="src readyState networkState currentTime duration paused ended playbackRate";d.jPlayer.emulateOptions=
"muted volume";d.jPlayer.reservedEvent="ready flashreset resize repeat error warning";d.jPlayer.event={};d.each("ready setmedia flashreset resize repeat click error warning loadstart progress suspend abort emptied stalled play pause loadedmetadata loadeddata waiting playing canplay canplaythrough seeking seeked timeupdate ended ratechange durationchange volumechange".split(" "),function(){d.jPlayer.event[this]="jPlayer_"+this});d.jPlayer.htmlEvent="loadstart abort emptied stalled loadedmetadata canplay canplaythrough".split(" ");
d.jPlayer.pause=function(){d.jPlayer.prototype.destroyRemoved();d.each(d.jPlayer.prototype.instances,function(a,b){b.data("jPlayer").status.srcSet&&b.jPlayer("pause")})};d.jPlayer.timeFormat={showHour:!1,showMin:!0,showSec:!0,padHour:!1,padMin:!0,padSec:!0,sepHour:":",sepMin:":",sepSec:""};var f=function(){this.init()};f.prototype={init:function(){this.options={timeFormat:d.jPlayer.timeFormat}},time:function(a){var b=new Date(1E3*(a&&"number"===typeof a?a:0)),c=b.getUTCHours();a=this.options.timeFormat.showHour?
b.getUTCMinutes():b.getUTCMinutes()+60*c;b=this.options.timeFormat.showMin?b.getUTCSeconds():b.getUTCSeconds()+60*a;c=this.options.timeFormat.padHour&&10>c?"0"+c:c;a=this.options.timeFormat.padMin&&10>a?"0"+a:a;b=this.options.timeFormat.padSec&&10>b?"0"+b:b;c=""+(this.options.timeFormat.showHour?c+this.options.timeFormat.sepHour:"");c+=this.options.timeFormat.showMin?a+this.options.timeFormat.sepMin:"";return c+=this.options.timeFormat.showSec?b+this.options.timeFormat.sepSec:""}};var c=new f;d.jPlayer.convertTime=
function(a){return c.time(a)};d.jPlayer.uaBrowser=function(a){a=a.toLowerCase();var b=/(opera)(?:.*version)?[ \/]([\w.]+)/,c=/(msie) ([\w.]+)/,d=/(mozilla)(?:.*? rv:([\w.]+))?/;a=/(webkit)[ \/]([\w.]+)/.exec(a)||b.exec(a)||c.exec(a)||0>a.indexOf("compatible")&&d.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};d.jPlayer.uaPlatform=function(a){var b=a.toLowerCase(),c=/(android)/,d=/(mobile)/;a=/(ipad|iphone|ipod|android|blackberry|playbook|windows ce|webos)/.exec(b)||[];b=/(ipad|playbook)/.exec(b)||
!d.exec(b)&&c.exec(b)||[];a[1]&&(a[1]=a[1].replace(/\s/g,"_"));return{platform:a[1]||"",tablet:b[1]||""}};d.jPlayer.browser={};d.jPlayer.platform={};var a=d.jPlayer.uaBrowser(navigator.userAgent);a.browser&&(d.jPlayer.browser[a.browser]=!0,d.jPlayer.browser.version=a.version);a=d.jPlayer.uaPlatform(navigator.userAgent);a.platform&&(d.jPlayer.platform[a.platform]=!0,d.jPlayer.platform.mobile=!a.tablet,d.jPlayer.platform.tablet=!!a.tablet);d.jPlayer.getDocMode=function(){var a;d.jPlayer.browser.msie&&
(document.documentMode?a=document.documentMode:(a=5,document.compatMode&&"CSS1Compat"===document.compatMode&&(a=7)));return a};d.jPlayer.browser.documentMode=d.jPlayer.getDocMode();d.jPlayer.nativeFeatures={init:function(){var a=document,b=a.createElement("video"),c={w3c:"fullscreenEnabled fullscreenElement requestFullscreen exitFullscreen fullscreenchange fullscreenerror".split(" "),moz:"mozFullScreenEnabled mozFullScreenElement mozRequestFullScreen mozCancelFullScreen mozfullscreenchange mozfullscreenerror".split(" "),
webkit:" webkitCurrentFullScreenElement webkitRequestFullScreen webkitCancelFullScreen webkitfullscreenchange ".split(" "),webkitVideo:"webkitSupportsFullscreen webkitDisplayingFullscreen webkitEnterFullscreen webkitExitFullscreen  ".split(" "),ms:" msFullscreenElement msRequestFullscreen msExitFullscreen MSFullscreenChange MSFullscreenError".split(" ")},d=["w3c","moz","webkit","webkitVideo","ms"],e,f;this.fullscreen=b={support:{w3c:!!a[c.w3c[0]],moz:!!a[c.moz[0]],webkit:"function"===typeof a[c.webkit[3]],
webkitVideo:"function"===typeof b[c.webkitVideo[2]],ms:"function"===typeof b[c.ms[2]]},used:{}};e=0;for(f=d.length;e<f;e++){var q=d[e];if(b.support[q]){b.spec=q;b.used[q]=!0;break}}if(b.spec){var s=c[b.spec];b.api={fullscreenEnabled:!0,fullscreenElement:function(b){b=b?b:a;return b[s[1]]},requestFullscreen:function(a){return a[s[2]]()},exitFullscreen:function(b){b=b?b:a;return b[s[3]]()}};b.event={fullscreenchange:s[4],fullscreenerror:s[5]}}else b.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},
requestFullscreen:function(){},exitFullscreen:function(){}},b.event={}}};d.jPlayer.nativeFeatures.init();d.jPlayer.focus=null;d.jPlayer.keyIgnoreElementNames="A INPUT TEXTAREA SELECT BUTTON";var b=function(a){var b=d.jPlayer.focus,c;b&&(d.each(d.jPlayer.keyIgnoreElementNames.split(/\s+/g),function(b,h){if(a.target.nodeName.toUpperCase()===h.toUpperCase())return c=!0,!1}),c||d.each(b.options.keyBindings,function(c,l){if(l&&d.isFunction(l.fn)&&("number"===typeof l.key&&a.which===l.key||"string"===typeof l.key&&
a.key===l.key))return a.preventDefault(),l.fn(b),!1}))};d.jPlayer.keys=function(a){d(document.documentElement).unbind("keydown.jPlayer");a&&d(document.documentElement).bind("keydown.jPlayer",b)};d.jPlayer.keys(!0);d.jPlayer.prototype={count:0,version:{script:"2.9.2",needFlash:"2.9.0",flash:"unknown"},options:{swfPath:"js",solution:"html, flash",supplied:"mp3",auroraFormats:"wav",preload:"metadata",volume:.8,muted:!1,remainingDuration:!1,toggleDuration:!1,captureDuration:!0,playbackRate:1,defaultPlaybackRate:1,
minPlaybackRate:.5,maxPlaybackRate:4,wmode:"opaque",backgroundColor:"#000000",cssSelectorAncestor:"#jp_container_1",cssSelector:{videoPlay:".jp-video-play",play:".jp-play",pause:".jp-pause",stop:".jp-stop",seekBar:".jp-seek-bar",playBar:".jp-play-bar",mute:".jp-mute",unmute:".jp-unmute",volumeBar:".jp-volume-bar",volumeBarValue:".jp-volume-bar-value",volumeMax:".jp-volume-max",playbackRateBar:".jp-playback-rate-bar",playbackRateBarValue:".jp-playback-rate-bar-value",currentTime:".jp-current-time",
duration:".jp-duration",title:".jp-title",fullScreen:".jp-full-screen",restoreScreen:".jp-restore-screen",repeat:".jp-repeat",repeatOff:".jp-repeat-off",gui:".jp-gui",noSolution:".jp-no-solution"},stateClass:{playing:"jp-state-playing",seeking:"jp-state-seeking",muted:"jp-state-muted",looped:"jp-state-looped",fullScreen:"jp-state-full-screen",noVolume:"jp-state-no-volume"},useStateClassSkin:!1,autoBlur:!0,smoothPlayBar:!1,fullScreen:!1,fullWindow:!1,autohide:{restored:!1,full:!0,fadeIn:200,fadeOut:600,
hold:1E3},loop:!1,repeat:function(a){a.jPlayer.options.loop?d(this).unbind(".jPlayerRepeat").bind(d.jPlayer.event.ended+".jPlayer.jPlayerRepeat",function(){d(this).jPlayer("play")}):d(this).unbind(".jPlayerRepeat")},nativeVideoControls:{},noFullWindow:{msie:/msie [0-6]\./,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/(?=.*android)(?!.*chrome)(?=.*mobile)/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/},
noVolume:{ipad:/ipad/,iphone:/iphone/,ipod:/ipod/,android_pad:/android(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/,playbook:/playbook/},timeFormat:{},keyEnabled:!1,audioFullScreen:!1,keyBindings:{play:{key:80,fn:function(a){a.status.paused?a.play():a.pause()}},fullScreen:{key:70,fn:function(a){(a.status.video||a.options.audioFullScreen)&&a._setOption("fullScreen",!a.options.fullScreen)}},muted:{key:77,fn:function(a){a._muted(!a.options.muted)}},
volumeUp:{key:190,fn:function(a){a.volume(a.options.volume+.1)}},volumeDown:{key:188,fn:function(a){a.volume(a.options.volume-.1)}},loop:{key:76,fn:function(a){a._loop(!a.options.loop)}}},verticalVolume:!1,verticalPlaybackRate:!1,globalVolume:!1,idPrefix:"jp",noConflict:"jQuery",emulateHtml:!1,consoleAlerts:!0,errorAlerts:!1,warningAlerts:!1},optionsAudio:{size:{width:"0px",height:"0px",cssClass:""},sizeFull:{width:"0px",height:"0px",cssClass:""}},optionsVideo:{size:{width:"480px",height:"270px",
cssClass:"jp-video-270p"},sizeFull:{width:"100%",height:"100%",cssClass:"jp-video-full"}},instances:{},status:{src:"",media:{},paused:!0,format:{},formatType:"",waitForPlay:!0,waitForLoad:!0,srcSet:!1,video:!1,seekPercent:0,currentPercentRelative:0,currentPercentAbsolute:0,currentTime:0,duration:0,remaining:0,videoWidth:0,videoHeight:0,readyState:0,networkState:0,playbackRate:1,ended:0},internal:{ready:!1},solution:{html:!0,aurora:!0,flash:!0},format:{mp3:{codec:"audio/mpeg",flashCanPlay:!0,media:"audio"},
m4a:{codec:'audio/mp4; codecs="mp4a.40.2"',flashCanPlay:!0,media:"audio"},m3u8a:{codec:'application/vnd.apple.mpegurl; codecs="mp4a.40.2"',flashCanPlay:!1,media:"audio"},m3ua:{codec:"audio/mpegurl",flashCanPlay:!1,media:"audio"},oga:{codec:'audio/ogg; codecs="vorbis, opus"',flashCanPlay:!1,media:"audio"},flac:{codec:"audio/x-flac",flashCanPlay:!1,media:"audio"},wav:{codec:'audio/wav; codecs="1"',flashCanPlay:!1,media:"audio"},webma:{codec:'audio/webm; codecs="vorbis"',flashCanPlay:!1,media:"audio"},
fla:{codec:"audio/x-flv",flashCanPlay:!0,media:"audio"},rtmpa:{codec:'audio/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"audio"},m4v:{codec:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!0,media:"video"},m3u8v:{codec:'application/vnd.apple.mpegurl; codecs="avc1.42E01E, mp4a.40.2"',flashCanPlay:!1,media:"video"},m3uv:{codec:"audio/mpegurl",flashCanPlay:!1,media:"video"},ogv:{codec:'video/ogg; codecs="theora, vorbis"',flashCanPlay:!1,media:"video"},webmv:{codec:'video/webm; codecs="vorbis, vp8"',
flashCanPlay:!1,media:"video"},flv:{codec:"video/x-flv",flashCanPlay:!0,media:"video"},rtmpv:{codec:'video/rtmp; codecs="rtmp"',flashCanPlay:!0,media:"video"}},_init:function(){var a=this;this.element.empty();this.status=d.extend({},this.status);this.internal=d.extend({},this.internal);this.options.timeFormat=d.extend({},d.jPlayer.timeFormat,this.options.timeFormat);this.internal.cmdsIgnored=d.jPlayer.platform.ipad||d.jPlayer.platform.iphone||d.jPlayer.platform.ipod;this.internal.domNode=this.element.get(0);
this.options.keyEnabled&&!d.jPlayer.focus&&(d.jPlayer.focus=this);this.androidFix={setMedia:!1,play:!1,pause:!1,time:NaN};d.jPlayer.platform.android&&(this.options.preload="auto"!==this.options.preload?"metadata":"auto");this.formats=[];this.solutions=[];this.require={};this.htmlElement={};this.html={};this.html.audio={};this.html.video={};this.aurora={};this.aurora.formats=[];this.aurora.properties=[];this.flash={};this.css={};this.css.cs={};this.css.jq={};this.ancestorJq=[];this.options.volume=
this._limitValue(this.options.volume,0,1);d.each(this.options.supplied.toLowerCase().split(","),function(b,c){var h=c.replace(/^\s+|\s+$/g,"");if(a.format[h]){var l=!1;d.each(a.formats,function(a,b){if(h===b)return l=!0,!1});l||a.formats.push(h)}});d.each(this.options.solution.toLowerCase().split(","),function(b,c){var h=c.replace(/^\s+|\s+$/g,"");if(a.solution[h]){var l=!1;d.each(a.solutions,function(a,b){if(h===b)return l=!0,!1});l||a.solutions.push(h)}});d.each(this.options.auroraFormats.toLowerCase().split(","),
function(b,c){var h=c.replace(/^\s+|\s+$/g,"");if(a.format[h]){var l=!1;d.each(a.aurora.formats,function(a,b){if(h===b)return l=!0,!1});l||a.aurora.formats.push(h)}});this.internal.instance="jp_"+this.count;this.instances[this.internal.instance]=this.element;this.element.attr("id")||this.element.attr("id",this.options.idPrefix+"_jplayer_"+this.count);this.internal.self=d.extend({},{id:this.element.attr("id"),jq:this.element});this.internal.audio=d.extend({},{id:this.options.idPrefix+"_audio_"+this.count,
jq:e});this.internal.video=d.extend({},{id:this.options.idPrefix+"_video_"+this.count,jq:e});this.internal.flash=d.extend({},{id:this.options.idPrefix+"_flash_"+this.count,jq:e,swf:this.options.swfPath+(".swf"!==this.options.swfPath.toLowerCase().slice(-4)?(this.options.swfPath&&"/"!==this.options.swfPath.slice(-1)?"/":"")+"jquery.jplayer.swf":"")});this.internal.poster=d.extend({},{id:this.options.idPrefix+"_poster_"+this.count,jq:e});d.each(d.jPlayer.event,function(b,c){a.options[b]!==e&&(a.element.bind(c+
".jPlayer",a.options[b]),a.options[b]=e)});this.require.audio=!1;this.require.video=!1;d.each(this.formats,function(b,c){a.require[a.format[c].media]=!0});this.options=this.require.video?d.extend(!0,{},this.optionsVideo,this.options):d.extend(!0,{},this.optionsAudio,this.options);this._setSize();this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this.status.noVolume=this._uaBlocklist(this.options.noVolume);
d.jPlayer.nativeFeatures.fullscreen.api.fullscreenEnabled&&this._fullscreenAddEventListeners();this._restrictNativeVideoControls();this.htmlElement.poster=document.createElement("img");this.htmlElement.poster.id=this.internal.poster.id;this.htmlElement.poster.onload=function(){a.status.video&&!a.status.waitForPlay||a.internal.poster.jq.show()};this.element.append(this.htmlElement.poster);this.internal.poster.jq=d("#"+this.internal.poster.id);this.internal.poster.jq.css({width:this.status.width,height:this.status.height});
this.internal.poster.jq.hide();this.internal.poster.jq.bind("click.jPlayer",function(b){b.stopPropagation();a._trigger(d.jPlayer.event.click)});this.html.audio.available=!1;this.require.audio&&(this.htmlElement.audio=document.createElement("audio"),this.htmlElement.audio.id=this.internal.audio.id,this.html.audio.available=!!this.htmlElement.audio.canPlayType&&this._testCanPlayType(this.htmlElement.audio));this.html.video.available=!1;this.require.video&&(this.htmlElement.video=document.createElement("video"),
this.htmlElement.video.id=this.internal.video.id,this.html.video.available=!!this.htmlElement.video.canPlayType&&this._testCanPlayType(this.htmlElement.video));this.flash.available=this._checkForFlash(10.1);this.html.canPlay={};this.aurora.canPlay={};this.flash.canPlay={};d.each(this.formats,function(b,c){a.html.canPlay[c]=a.html[a.format[c].media].available&&""!==a.htmlElement[a.format[c].media].canPlayType(a.format[c].codec);a.aurora.canPlay[c]=-1<d.inArray(c,a.aurora.formats);a.flash.canPlay[c]=
a.format[c].flashCanPlay&&a.flash.available});this.html.desired=!1;this.aurora.desired=!1;this.flash.desired=!1;d.each(this.solutions,function(b,c){if(0===b)a[c].desired=!0;else{var h=!1,l=!1;d.each(a.formats,function(b,c){a[a.solutions[0]].canPlay[c]&&("video"===a.format[c].media?l=!0:h=!0)});a[c].desired=a.require.audio&&!h||a.require.video&&!l}});this.html.support={};this.aurora.support={};this.flash.support={};d.each(this.formats,function(b,c){a.html.support[c]=a.html.canPlay[c]&&a.html.desired;
a.aurora.support[c]=a.aurora.canPlay[c]&&a.aurora.desired;a.flash.support[c]=a.flash.canPlay[c]&&a.flash.desired});this.html.used=!1;this.aurora.used=!1;this.flash.used=!1;d.each(this.solutions,function(b,c){d.each(a.formats,function(b,h){if(a[c].support[h])return a[c].used=!0,!1})});this._resetActive();this._resetGate();this._cssSelectorAncestor(this.options.cssSelectorAncestor);this.html.used||this.aurora.used||this.flash.used?this.css.jq.noSolution.length&&this.css.jq.noSolution.hide():(this._error({type:d.jPlayer.error.NO_SOLUTION,
context:"{solution:'"+this.options.solution+"', supplied:'"+this.options.supplied+"'}",message:d.jPlayer.errorMsg.NO_SOLUTION,hint:d.jPlayer.errorHint.NO_SOLUTION}),this.css.jq.noSolution.length&&this.css.jq.noSolution.show());if(this.flash.used){var b,c="jQuery="+encodeURI(this.options.noConflict)+"&id="+encodeURI(this.internal.self.id)+"&vol="+this.options.volume+"&muted="+this.options.muted;if(d.jPlayer.browser.msie&&(9>Number(d.jPlayer.browser.version)||9>d.jPlayer.browser.documentMode)){c=['<param name="movie" value="'+
this.internal.flash.swf+'" />','<param name="FlashVars" value="'+c+'" />','<param name="allowScriptAccess" value="always" />','<param name="bgcolor" value="'+this.options.backgroundColor+'" />','<param name="wmode" value="'+this.options.wmode+'" />'];b=document.createElement('<object id="'+this.internal.flash.id+'" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="0" height="0" tabindex="-1"></object>');for(var f=0;f<c.length;f++)b.appendChild(document.createElement(c[f]))}else f=function(a,
b,c){var g=document.createElement("param");g.setAttribute("name",b);g.setAttribute("value",c);a.appendChild(g)},b=document.createElement("object"),b.setAttribute("id",this.internal.flash.id),b.setAttribute("name",this.internal.flash.id),b.setAttribute("data",this.internal.flash.swf),b.setAttribute("type","application/x-shockwave-flash"),b.setAttribute("width","1"),b.setAttribute("height","1"),b.setAttribute("tabindex","-1"),f(b,"flashvars",c),f(b,"allowscriptaccess","always"),f(b,"bgcolor",this.options.backgroundColor),
f(b,"wmode",this.options.wmode);this.element.append(b);this.internal.flash.jq=d(b)}this.status.playbackRateEnabled=this.html.used&&!this.flash.used?this._testPlaybackRate("audio"):!1;this._updatePlaybackRate();this.html.used&&(this.html.audio.available&&(this._addHtmlEventListeners(this.htmlElement.audio,this.html.audio),this.element.append(this.htmlElement.audio),this.internal.audio.jq=d("#"+this.internal.audio.id)),this.html.video.available&&(this._addHtmlEventListeners(this.htmlElement.video,this.html.video),
this.element.append(this.htmlElement.video),this.internal.video.jq=d("#"+this.internal.video.id),this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):this.internal.video.jq.css({width:"0px",height:"0px"}),this.internal.video.jq.bind("click.jPlayer",function(b){b.stopPropagation();a._trigger(d.jPlayer.event.click)})));this.options.emulateHtml&&this._emulateHtmlBridge();!this.html.used&&!this.aurora.used||this.flash.used||setTimeout(function(){a.internal.ready=
!0;a.version.flash="n/a";a._trigger(d.jPlayer.event.repeat);a._trigger(d.jPlayer.event.ready)},100);this._updateNativeVideoControls();this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide();d.jPlayer.prototype.count++},destroy:function(){this.clearMedia();this._removeUiClass();this.css.jq.currentTime.length&&this.css.jq.currentTime.text("");this.css.jq.duration.length&&this.css.jq.duration.text("");d.each(this.css.jq,function(a,b){b.length&&b.unbind(".jPlayer")});this.internal.poster.jq.unbind(".jPlayer");
this.internal.video.jq&&this.internal.video.jq.unbind(".jPlayer");this._fullscreenRemoveEventListeners();this===d.jPlayer.focus&&(d.jPlayer.focus=null);this.options.emulateHtml&&this._destroyHtmlBridge();this.element.removeData("jPlayer");this.element.unbind(".jPlayer");this.element.empty();delete this.instances[this.internal.instance]},destroyRemoved:function(){var a=this;d.each(this.instances,function(b,c){a.element===c||c.data("jPlayer")||(c.jPlayer("destroy"),delete a.instances[b])})},enable:function(){},
disable:function(){},_testCanPlayType:function(a){try{return a.canPlayType(this.format.mp3.codec),!0}catch(b){return!1}},_testPlaybackRate:function(a){a=document.createElement("string"===typeof a?a:"audio");try{return"playbackRate"in a?(a.playbackRate=.5,.5===a.playbackRate):!1}catch(b){return!1}},_uaBlocklist:function(a){var b=navigator.userAgent.toLowerCase(),c=!1;d.each(a,function(a,g){if(g&&g.test(b))return c=!0,!1});return c},_restrictNativeVideoControls:function(){this.require.audio&&this.status.nativeVideoControls&&
(this.status.nativeVideoControls=!1,this.status.noFullWindow=!0)},_updateNativeVideoControls:function(){this.html.video.available&&this.html.used&&(this.htmlElement.video.controls=this.status.nativeVideoControls,this._updateAutohide(),this.status.nativeVideoControls&&this.require.video?(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})):this.status.waitForPlay&&this.status.video&&(this.internal.poster.jq.show(),this.internal.video.jq.css({width:"0px",
height:"0px"})))},_addHtmlEventListeners:function(a,b){var c=this;a.preload=this.options.preload;a.muted=this.options.muted;a.volume=this.options.volume;this.status.playbackRateEnabled&&(a.defaultPlaybackRate=this.options.defaultPlaybackRate,a.playbackRate=this.options.playbackRate);a.addEventListener("progress",function(){b.gate&&(c.internal.cmdsIgnored&&0<this.readyState&&(c.internal.cmdsIgnored=!1),c._getHtmlStatus(a),c._updateInterface(),c._trigger(d.jPlayer.event.progress))},!1);a.addEventListener("loadeddata",
function(){b.gate&&(c.androidFix.setMedia=!1,c.androidFix.play&&(c.androidFix.play=!1,c.play(c.androidFix.time)),c.androidFix.pause&&(c.androidFix.pause=!1,c.pause(c.androidFix.time)),c._trigger(d.jPlayer.event.loadeddata))},!1);a.addEventListener("timeupdate",function(){b.gate&&(c._getHtmlStatus(a),c._updateInterface(),c._trigger(d.jPlayer.event.timeupdate))},!1);a.addEventListener("durationchange",function(){b.gate&&(c._getHtmlStatus(a),c._updateInterface(),c._trigger(d.jPlayer.event.durationchange))},
!1);a.addEventListener("play",function(){b.gate&&(c._updateButtons(!0),c._html_checkWaitForPlay(),c._trigger(d.jPlayer.event.play))},!1);a.addEventListener("playing",function(){b.gate&&(c._updateButtons(!0),c._seeked(),c._trigger(d.jPlayer.event.playing))},!1);a.addEventListener("pause",function(){b.gate&&(c._updateButtons(!1),c._trigger(d.jPlayer.event.pause))},!1);a.addEventListener("waiting",function(){b.gate&&(c._seeking(),c._trigger(d.jPlayer.event.waiting))},!1);a.addEventListener("seeking",
function(){b.gate&&(c._seeking(),c._trigger(d.jPlayer.event.seeking))},!1);a.addEventListener("seeked",function(){b.gate&&(c._seeked(),c._trigger(d.jPlayer.event.seeked))},!1);a.addEventListener("volumechange",function(){b.gate&&(c.options.volume=a.volume,c.options.muted=a.muted,c._updateMute(),c._updateVolume(),c._trigger(d.jPlayer.event.volumechange))},!1);a.addEventListener("ratechange",function(){b.gate&&(c.options.defaultPlaybackRate=a.defaultPlaybackRate,c.options.playbackRate=a.playbackRate,
c._updatePlaybackRate(),c._trigger(d.jPlayer.event.ratechange))},!1);a.addEventListener("suspend",function(){b.gate&&(c._seeked(),c._trigger(d.jPlayer.event.suspend))},!1);a.addEventListener("ended",function(){b.gate&&(d.jPlayer.browser.webkit||(c.htmlElement.media.currentTime=0),c.htmlElement.media.pause(),c._updateButtons(!1),c._getHtmlStatus(a,!0),c._updateInterface(),c._trigger(d.jPlayer.event.ended))},!1);a.addEventListener("error",function(){b.gate&&(c._updateButtons(!1),c._seeked(),c.status.srcSet&&
(clearTimeout(c.internal.htmlDlyCmdId),c.status.waitForLoad=!0,c.status.waitForPlay=!0,c.status.video&&!c.status.nativeVideoControls&&c.internal.video.jq.css({width:"0px",height:"0px"}),c._validString(c.status.media.poster)&&!c.status.nativeVideoControls&&c.internal.poster.jq.show(),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c._error({type:d.jPlayer.error.URL,context:c.status.src,message:d.jPlayer.errorMsg.URL,hint:d.jPlayer.errorHint.URL})))},!1);d.each(d.jPlayer.htmlEvent,function(e,f){a.addEventListener(this,
function(){b.gate&&c._trigger(d.jPlayer.event[f])},!1)})},_addAuroraEventListeners:function(a,b){var c=this;a.volume=100*this.options.volume;a.on("progress",function(){b.gate&&(c.internal.cmdsIgnored&&0<this.readyState&&(c.internal.cmdsIgnored=!1),c._getAuroraStatus(a),c._updateInterface(),c._trigger(d.jPlayer.event.progress),0<a.duration&&c._trigger(d.jPlayer.event.timeupdate))},!1);a.on("ready",function(){b.gate&&c._trigger(d.jPlayer.event.loadeddata)},!1);a.on("duration",function(){b.gate&&(c._getAuroraStatus(a),
c._updateInterface(),c._trigger(d.jPlayer.event.durationchange))},!1);a.on("end",function(){b.gate&&(c._updateButtons(!1),c._getAuroraStatus(a,!0),c._updateInterface(),c._trigger(d.jPlayer.event.ended))},!1);a.on("error",function(){b.gate&&(c._updateButtons(!1),c._seeked(),c.status.srcSet&&(c.status.waitForLoad=!0,c.status.waitForPlay=!0,c.status.video&&!c.status.nativeVideoControls&&c.internal.video.jq.css({width:"0px",height:"0px"}),c._validString(c.status.media.poster)&&!c.status.nativeVideoControls&&
c.internal.poster.jq.show(),c.css.jq.videoPlay.length&&c.css.jq.videoPlay.show(),c._error({type:d.jPlayer.error.URL,context:c.status.src,message:d.jPlayer.errorMsg.URL,hint:d.jPlayer.errorHint.URL})))},!1)},_getHtmlStatus:function(a,b){var c=0,d=0,e=0,f=0;isFinite(a.duration)&&(this.status.duration=a.duration);c=a.currentTime;d=0<this.status.duration?100*c/this.status.duration:0;"object"===typeof a.seekable&&0<a.seekable.length?(e=0<this.status.duration?100*a.seekable.end(a.seekable.length-1)/this.status.duration:
100,f=0<this.status.duration?100*a.currentTime/a.seekable.end(a.seekable.length-1):0):(e=100,f=d);b&&(d=f=c=0);this.status.seekPercent=e;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=d;this.status.currentTime=c;this.status.remaining=this.status.duration-this.status.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=a.readyState;this.status.networkState=a.networkState;this.status.playbackRate=a.playbackRate;this.status.ended=
a.ended},_getAuroraStatus:function(a,b){var c=0,d=0,e=0,f=0;this.status.duration=a.duration/1E3;c=a.currentTime/1E3;d=0<this.status.duration?100*c/this.status.duration:0;0<a.buffered?(e=0<this.status.duration?a.buffered*this.status.duration/this.status.duration:100,f=0<this.status.duration?c/(a.buffered*this.status.duration):0):(e=100,f=d);b&&(d=f=c=0);this.status.seekPercent=e;this.status.currentPercentRelative=f;this.status.currentPercentAbsolute=d;this.status.currentTime=c;this.status.remaining=
this.status.duration-this.status.currentTime;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=!1},_resetStatus:function(){this.status=d.extend({},this.status,d.jPlayer.prototype.status)},_trigger:function(a,b,c){a=d.Event(a);a.jPlayer={};a.jPlayer.version=d.extend({},this.version);a.jPlayer.options=d.extend(!0,{},this.options);a.jPlayer.status=d.extend(!0,{},this.status);a.jPlayer.html=d.extend(!0,{},this.html);a.jPlayer.aurora=d.extend(!0,{},this.aurora);
a.jPlayer.flash=d.extend(!0,{},this.flash);b&&(a.jPlayer.error=d.extend({},b));c&&(a.jPlayer.warning=d.extend({},c));this.element.trigger(a)},jPlayerFlashEvent:function(a,b){if(a===d.jPlayer.event.ready)if(!this.internal.ready)this.internal.ready=!0,this.internal.flash.jq.css({width:"0px",height:"0px"}),this.version.flash=b.version,this.version.needFlash!==this.version.flash&&this._error({type:d.jPlayer.error.VERSION,context:this.version.flash,message:d.jPlayer.errorMsg.VERSION+this.version.flash,
hint:d.jPlayer.errorHint.VERSION}),this._trigger(d.jPlayer.event.repeat),this._trigger(a);else if(this.flash.gate){if(this.status.srcSet){var c=this.status.currentTime,e=this.status.paused;this.setMedia(this.status.media);this.volumeWorker(this.options.volume);0<c&&(e?this.pause(c):this.play(c))}this._trigger(d.jPlayer.event.flashreset)}if(this.flash.gate)switch(a){case d.jPlayer.event.progress:this._getFlashStatus(b);this._updateInterface();this._trigger(a);break;case d.jPlayer.event.timeupdate:this._getFlashStatus(b);
this._updateInterface();this._trigger(a);break;case d.jPlayer.event.play:this._seeked();this._updateButtons(!0);this._trigger(a);break;case d.jPlayer.event.pause:this._updateButtons(!1);this._trigger(a);break;case d.jPlayer.event.ended:this._updateButtons(!1);this._trigger(a);break;case d.jPlayer.event.click:this._trigger(a);break;case d.jPlayer.event.error:this.status.waitForLoad=!0;this.status.waitForPlay=!0;this.status.video&&this.internal.flash.jq.css({width:"0px",height:"0px"});this._validString(this.status.media.poster)&&
this.internal.poster.jq.show();this.css.jq.videoPlay.length&&this.status.video&&this.css.jq.videoPlay.show();this.status.video?this._flash_setVideo(this.status.media):this._flash_setAudio(this.status.media);this._updateButtons(!1);this._error({type:d.jPlayer.error.URL,context:b.src,message:d.jPlayer.errorMsg.URL,hint:d.jPlayer.errorHint.URL});break;case d.jPlayer.event.seeking:this._seeking();this._trigger(a);break;case d.jPlayer.event.seeked:this._seeked();this._trigger(a);break;case d.jPlayer.event.ready:break;
default:this._trigger(a)}return!1},_getFlashStatus:function(a){this.status.seekPercent=a.seekPercent;this.status.currentPercentRelative=a.currentPercentRelative;this.status.currentPercentAbsolute=a.currentPercentAbsolute;this.status.currentTime=a.currentTime;this.status.duration=a.duration;this.status.remaining=a.duration-a.currentTime;this.status.videoWidth=a.videoWidth;this.status.videoHeight=a.videoHeight;this.status.readyState=4;this.status.networkState=0;this.status.playbackRate=1;this.status.ended=
!1},_updateButtons:function(a){a===e?a=!this.status.paused:this.status.paused=!a;a?this.addStateClass("playing"):this.removeStateClass("playing");!this.status.noFullWindow&&this.options.fullWindow?this.addStateClass("fullScreen"):this.removeStateClass("fullScreen");this.options.loop?this.addStateClass("looped"):this.removeStateClass("looped");this.css.jq.play.length&&this.css.jq.pause.length&&(a?(this.css.jq.play.hide(),this.css.jq.pause.show()):(this.css.jq.play.show(),this.css.jq.pause.hide()));
this.css.jq.restoreScreen.length&&this.css.jq.fullScreen.length&&(this.status.noFullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.hide()):this.options.fullWindow?(this.css.jq.fullScreen.hide(),this.css.jq.restoreScreen.show()):(this.css.jq.fullScreen.show(),this.css.jq.restoreScreen.hide()));this.css.jq.repeat.length&&this.css.jq.repeatOff.length&&(this.options.loop?(this.css.jq.repeat.hide(),this.css.jq.repeatOff.show()):(this.css.jq.repeat.show(),this.css.jq.repeatOff.hide()))},
_updateInterface:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.width(this.status.seekPercent+"%");this.css.jq.playBar.length&&(this.options.smoothPlayBar?this.css.jq.playBar.stop().animate({width:this.status.currentPercentAbsolute+"%"},250,"linear"):this.css.jq.playBar.width(this.status.currentPercentRelative+"%"));var a="";this.css.jq.currentTime.length&&(a=this._convertTime(this.status.currentTime),a!==this.css.jq.currentTime.text()&&this.css.jq.currentTime.text(this._convertTime(this.status.currentTime)));
var a="",a=this.status.duration,b=this.status.remaining;this.css.jq.duration.length&&("string"===typeof this.status.media.duration?a=this.status.media.duration:("number"===typeof this.status.media.duration&&(a=this.status.media.duration,b=a-this.status.currentTime),a=this.options.remainingDuration&&0<a?(0<b?"-":"")+this._convertTime(b):this._convertTime(a)),a!==this.css.jq.duration.text()&&this.css.jq.duration.text(a))},_convertTime:f.prototype.time,_seeking:function(){this.css.jq.seekBar.length&&
this.css.jq.seekBar.addClass("jp-seeking-bg");this.addStateClass("seeking")},_seeked:function(){this.css.jq.seekBar.length&&this.css.jq.seekBar.removeClass("jp-seeking-bg");this.removeStateClass("seeking")},_resetGate:function(){this.html.audio.gate=!1;this.html.video.gate=!1;this.aurora.gate=!1;this.flash.gate=!1},_resetActive:function(){this.html.active=!1;this.aurora.active=!1;this.flash.active=!1},_escapeHtml:function(a){return a.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")},
_qualifyURL:function(a){var b=document.createElement("div");b.innerHTML='<a href="'+this._escapeHtml(a)+'">x</a>';return b.firstChild.href},_absoluteMediaUrls:function(a){var b=this;d.each(a,function(c,d){d&&b.format[c]&&"data:"!==d.substr(0,5)&&(a[c]=b._qualifyURL(d))});return a},addStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.addClass(this.options.stateClass[a])},removeStateClass:function(a){this.ancestorJq.length&&this.ancestorJq.removeClass(this.options.stateClass[a])},setMedia:function(a){var b=
this,c=!1,e=this.status.media.poster!==a.poster;this._resetMedia();this._resetGate();this._resetActive();this.androidFix.setMedia=!1;this.androidFix.play=!1;this.androidFix.pause=!1;a=this._absoluteMediaUrls(a);d.each(this.formats,function(e,f){var k="video"===b.format[f].media;d.each(b.solutions,function(e,m){if(b[m].support[f]&&b._validString(a[f])){var p="html"===m,r="aurora"===m;k?(p?(b.html.video.gate=!0,b._html_setVideo(a),b.html.active=!0):(b.flash.gate=!0,b._flash_setVideo(a),b.flash.active=
!0),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.show(),b.status.video=!0):(p?(b.html.audio.gate=!0,b._html_setAudio(a),b.html.active=!0,d.jPlayer.platform.android&&(b.androidFix.setMedia=!0)):r?(b.aurora.gate=!0,b._aurora_setAudio(a),b.aurora.active=!0):(b.flash.gate=!0,b._flash_setAudio(a),b.flash.active=!0),b.css.jq.videoPlay.length&&b.css.jq.videoPlay.hide(),b.status.video=!1);c=!0;return!1}});if(c)return!1});c?(this.status.nativeVideoControls&&this.html.video.gate||!this._validString(a.poster)||
(e?this.htmlElement.poster.src=a.poster:this.internal.poster.jq.show()),"string"===typeof a.title&&(this.css.jq.title.length&&this.css.jq.title.html(a.title),this.htmlElement.audio&&this.htmlElement.audio.setAttribute("title",a.title),this.htmlElement.video&&this.htmlElement.video.setAttribute("title",a.title)),this.status.srcSet=!0,this.status.media=d.extend({},a),this._updateButtons(!1),this._updateInterface(),this._trigger(d.jPlayer.event.setmedia)):this._error({type:d.jPlayer.error.NO_SUPPORT,
context:"{supplied:'"+this.options.supplied+"'}",message:d.jPlayer.errorMsg.NO_SUPPORT,hint:d.jPlayer.errorHint.NO_SUPPORT})},_resetMedia:function(){this._resetStatus();this._updateButtons(!1);this._updateInterface();this._seeked();this.internal.poster.jq.hide();clearTimeout(this.internal.htmlDlyCmdId);this.html.active?this._html_resetMedia():this.aurora.active?this._aurora_resetMedia():this.flash.active&&this._flash_resetMedia()},clearMedia:function(){this._resetMedia();this.html.active?this._html_clearMedia():
this.aurora.active?this._aurora_clearMedia():this.flash.active&&this._flash_clearMedia();this._resetGate();this._resetActive()},load:function(){this.status.srcSet?this.html.active?this._html_load():this.aurora.active?this._aurora_load():this.flash.active&&this._flash_load():this._urlNotSetError("load")},focus:function(){this.options.keyEnabled&&(d.jPlayer.focus=this)},play:function(a){"object"===typeof a&&this.options.useStateClassSkin&&!this.status.paused?this.pause(a):(a="number"===typeof a?a:NaN,
this.status.srcSet?(this.focus(),this.html.active?this._html_play(a):this.aurora.active?this._aurora_play(a):this.flash.active&&this._flash_play(a)):this._urlNotSetError("play"))},videoPlay:function(){this.play()},pause:function(a){a="number"===typeof a?a:NaN;this.status.srcSet?this.html.active?this._html_pause(a):this.aurora.active?this._aurora_pause(a):this.flash.active&&this._flash_pause(a):this._urlNotSetError("pause")},tellOthers:function(a,b){var c=this,e="function"===typeof b,f=Array.prototype.slice.call(arguments);
"string"===typeof a&&(e&&f.splice(1,1),d.jPlayer.prototype.destroyRemoved(),d.each(this.instances,function(){c.element!==this&&(e&&!b.call(this.data("jPlayer"),c)||this.jPlayer.apply(this,f))}))},pauseOthers:function(a){this.tellOthers("pause",function(){return this.status.srcSet},a)},stop:function(){this.status.srcSet?this.html.active?this._html_pause(0):this.aurora.active?this._aurora_pause(0):this.flash.active&&this._flash_pause(0):this._urlNotSetError("stop")},playHead:function(a){a=this._limitValue(a,
0,100);this.status.srcSet?this.html.active?this._html_playHead(a):this.aurora.active?this._aurora_playHead(a):this.flash.active&&this._flash_playHead(a):this._urlNotSetError("playHead")},_muted:function(a){this.mutedWorker(a);this.options.globalVolume&&this.tellOthers("mutedWorker",function(){return this.options.globalVolume},a)},mutedWorker:function(a){this.options.muted=a;this.html.used&&this._html_setProperty("muted",a);this.aurora.used&&this._aurora_mute(a);this.flash.used&&this._flash_mute(a);
this.html.video.gate||this.html.audio.gate||(this._updateMute(a),this._updateVolume(this.options.volume),this._trigger(d.jPlayer.event.volumechange))},mute:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.muted?this._muted(!1):(a=a===e?!0:!!a,this._muted(a))},unmute:function(a){a=a===e?!0:!!a;this._muted(!a)},_updateMute:function(a){a===e&&(a=this.options.muted);a?this.addStateClass("muted"):this.removeStateClass("muted");this.css.jq.mute.length&&this.css.jq.unmute.length&&
(this.status.noVolume?(this.css.jq.mute.hide(),this.css.jq.unmute.hide()):a?(this.css.jq.mute.hide(),this.css.jq.unmute.show()):(this.css.jq.mute.show(),this.css.jq.unmute.hide()))},volume:function(a){this.volumeWorker(a);this.options.globalVolume&&this.tellOthers("volumeWorker",function(){return this.options.globalVolume},a)},volumeWorker:function(a){a=this._limitValue(a,0,1);this.options.volume=a;this.html.used&&this._html_setProperty("volume",a);this.aurora.used&&this._aurora_volume(a);this.flash.used&&
this._flash_volume(a);this.html.video.gate||this.html.audio.gate||(this._updateVolume(a),this._trigger(d.jPlayer.event.volumechange))},volumeBar:function(a){if(this.css.jq.volumeBar.length){var b=d(a.currentTarget),c=b.offset(),e=a.pageX-c.left,f=b.width();a=b.height()-a.pageY+c.top;b=b.height();this.options.verticalVolume?this.volume(a/b):this.volume(e/f)}this.options.muted&&this._muted(!1)},_updateVolume:function(a){a===e&&(a=this.options.volume);a=this.options.muted?0:a;this.status.noVolume?(this.addStateClass("noVolume"),
this.css.jq.volumeBar.length&&this.css.jq.volumeBar.hide(),this.css.jq.volumeBarValue.length&&this.css.jq.volumeBarValue.hide(),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.hide()):(this.removeStateClass("noVolume"),this.css.jq.volumeBar.length&&this.css.jq.volumeBar.show(),this.css.jq.volumeBarValue.length&&(this.css.jq.volumeBarValue.show(),this.css.jq.volumeBarValue[this.options.verticalVolume?"height":"width"](100*a+"%")),this.css.jq.volumeMax.length&&this.css.jq.volumeMax.show())},volumeMax:function(){this.volume(1);
this.options.muted&&this._muted(!1)},_cssSelectorAncestor:function(a){var b=this;this.options.cssSelectorAncestor=a;this._removeUiClass();this.ancestorJq=a?d(a):[];a&&1!==this.ancestorJq.length&&this._warning({type:d.jPlayer.warning.CSS_SELECTOR_COUNT,context:a,message:d.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.ancestorJq.length+" found for cssSelectorAncestor.",hint:d.jPlayer.warningHint.CSS_SELECTOR_COUNT});this._addUiClass();d.each(this.options.cssSelector,function(a,c){b._cssSelector(a,c)});
this._updateInterface();this._updateButtons();this._updateAutohide();this._updateVolume();this._updateMute()},_cssSelector:function(a,b){var c=this;"string"===typeof b?d.jPlayer.prototype.options.cssSelector[a]?(this.css.jq[a]&&this.css.jq[a].length&&this.css.jq[a].unbind(".jPlayer"),this.options.cssSelector[a]=b,this.css.cs[a]=this.options.cssSelectorAncestor+" "+b,this.css.jq[a]=b?d(this.css.cs[a]):[],this.css.jq[a].length&&this[a]&&this.css.jq[a].bind("click.jPlayer",function(b){b.preventDefault();
c[a](b);c.options.autoBlur?d(this).blur():d(this).focus()}),b&&1!==this.css.jq[a].length&&this._warning({type:d.jPlayer.warning.CSS_SELECTOR_COUNT,context:this.css.cs[a],message:d.jPlayer.warningMsg.CSS_SELECTOR_COUNT+this.css.jq[a].length+" found for "+a+" method.",hint:d.jPlayer.warningHint.CSS_SELECTOR_COUNT})):this._warning({type:d.jPlayer.warning.CSS_SELECTOR_METHOD,context:a,message:d.jPlayer.warningMsg.CSS_SELECTOR_METHOD,hint:d.jPlayer.warningHint.CSS_SELECTOR_METHOD}):this._warning({type:d.jPlayer.warning.CSS_SELECTOR_STRING,
context:b,message:d.jPlayer.warningMsg.CSS_SELECTOR_STRING,hint:d.jPlayer.warningHint.CSS_SELECTOR_STRING})},duration:function(a){this.options.toggleDuration&&(this.options.captureDuration&&a.stopPropagation(),this._setOption("remainingDuration",!this.options.remainingDuration))},seekBar:function(a){if(this.css.jq.seekBar.length){var b=d(a.currentTarget),c=b.offset();a=a.pageX-c.left;b=b.width();this.playHead(100*a/b)}},playbackRate:function(a){this._setOption("playbackRate",a)},playbackRateBar:function(a){if(this.css.jq.playbackRateBar.length){var b=
d(a.currentTarget),c=b.offset(),e=a.pageX-c.left,f=b.width();a=b.height()-a.pageY+c.top;b=b.height();this.playbackRate((this.options.verticalPlaybackRate?a/b:e/f)*(this.options.maxPlaybackRate-this.options.minPlaybackRate)+this.options.minPlaybackRate)}},_updatePlaybackRate:function(){var a=(this.options.playbackRate-this.options.minPlaybackRate)/(this.options.maxPlaybackRate-this.options.minPlaybackRate);this.status.playbackRateEnabled?(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.show(),
this.css.jq.playbackRateBarValue.length&&(this.css.jq.playbackRateBarValue.show(),this.css.jq.playbackRateBarValue[this.options.verticalPlaybackRate?"height":"width"](100*a+"%"))):(this.css.jq.playbackRateBar.length&&this.css.jq.playbackRateBar.hide(),this.css.jq.playbackRateBarValue.length&&this.css.jq.playbackRateBarValue.hide())},repeat:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.loop?this._loop(!1):this._loop(!0)},repeatOff:function(){this._loop(!1)},_loop:function(a){this.options.loop!==
a&&(this.options.loop=a,this._updateButtons(),this._trigger(d.jPlayer.event.repeat))},option:function(a,b){var c=a;if(0===arguments.length)return d.extend(!0,{},this.options);if("string"===typeof a){var f=a.split(".");if(b===e){for(var c=d.extend(!0,{},this.options),m=0;m<f.length;m++)if(c[f[m]]!==e)c=c[f[m]];else return this._warning({type:d.jPlayer.warning.OPTION_KEY,context:a,message:d.jPlayer.warningMsg.OPTION_KEY,hint:d.jPlayer.warningHint.OPTION_KEY}),e;return c}for(var m=c={},n=0;n<f.length;n++)n<
f.length-1?(m[f[n]]={},m=m[f[n]]):m[f[n]]=b}this._setOptions(c);return this},_setOptions:function(a){var b=this;d.each(a,function(a,c){b._setOption(a,c)});return this},_setOption:function(a,b){var c=this;switch(a){case "volume":this.volume(b);break;case "muted":this._muted(b);break;case "globalVolume":this.options[a]=b;break;case "cssSelectorAncestor":this._cssSelectorAncestor(b);break;case "cssSelector":d.each(b,function(a,b){c._cssSelector(a,b)});break;case "playbackRate":this.options[a]=b=this._limitValue(b,
this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("playbackRate",b);this._updatePlaybackRate();break;case "defaultPlaybackRate":this.options[a]=b=this._limitValue(b,this.options.minPlaybackRate,this.options.maxPlaybackRate);this.html.used&&this._html_setProperty("defaultPlaybackRate",b);this._updatePlaybackRate();break;case "minPlaybackRate":this.options[a]=b=this._limitValue(b,.1,this.options.maxPlaybackRate-.1);this._updatePlaybackRate();break;case "maxPlaybackRate":this.options[a]=
b=this._limitValue(b,this.options.minPlaybackRate+.1,16);this._updatePlaybackRate();break;case "fullScreen":if(this.options[a]!==b){var e=d.jPlayer.nativeFeatures.fullscreen.used.webkitVideo;if(!e||e&&!this.status.waitForPlay)e||(this.options[a]=b),b?this._requestFullscreen():this._exitFullscreen(),e||this._setOption("fullWindow",b)}break;case "fullWindow":this.options[a]!==b&&(this._removeUiClass(),this.options[a]=b,this._refreshSize());break;case "size":this.options.fullWindow||this.options[a].cssClass===
b.cssClass||this._removeUiClass();this.options[a]=d.extend({},this.options[a],b);this._refreshSize();break;case "sizeFull":this.options.fullWindow&&this.options[a].cssClass!==b.cssClass&&this._removeUiClass();this.options[a]=d.extend({},this.options[a],b);this._refreshSize();break;case "autohide":this.options[a]=d.extend({},this.options[a],b);this._updateAutohide();break;case "loop":this._loop(b);break;case "remainingDuration":this.options[a]=b;this._updateInterface();break;case "toggleDuration":this.options[a]=
b;break;case "nativeVideoControls":this.options[a]=d.extend({},this.options[a],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this._restrictNativeVideoControls();this._updateNativeVideoControls();break;case "noFullWindow":this.options[a]=d.extend({},this.options[a],b);this.status.nativeVideoControls=this._uaBlocklist(this.options.nativeVideoControls);this.status.noFullWindow=this._uaBlocklist(this.options.noFullWindow);this._restrictNativeVideoControls();this._updateButtons();
break;case "noVolume":this.options[a]=d.extend({},this.options[a],b);this.status.noVolume=this._uaBlocklist(this.options.noVolume);this._updateVolume();this._updateMute();break;case "emulateHtml":this.options[a]!==b&&((this.options[a]=b)?this._emulateHtmlBridge():this._destroyHtmlBridge());break;case "timeFormat":this.options[a]=d.extend({},this.options[a],b);break;case "keyEnabled":this.options[a]=b;b||this!==d.jPlayer.focus||(d.jPlayer.focus=null);break;case "keyBindings":this.options[a]=d.extend(!0,
{},this.options[a],b);break;case "audioFullScreen":this.options[a]=b;break;case "autoBlur":this.options[a]=b}return this},_refreshSize:function(){this._setSize();this._addUiClass();this._updateSize();this._updateButtons();this._updateAutohide();this._trigger(d.jPlayer.event.resize)},_setSize:function(){this.options.fullWindow?(this.status.width=this.options.sizeFull.width,this.status.height=this.options.sizeFull.height,this.status.cssClass=this.options.sizeFull.cssClass):(this.status.width=this.options.size.width,
this.status.height=this.options.size.height,this.status.cssClass=this.options.size.cssClass);this.element.css({width:this.status.width,height:this.status.height})},_addUiClass:function(){this.ancestorJq.length&&this.ancestorJq.addClass(this.status.cssClass)},_removeUiClass:function(){this.ancestorJq.length&&this.ancestorJq.removeClass(this.status.cssClass)},_updateSize:function(){this.internal.poster.jq.css({width:this.status.width,height:this.status.height});!this.status.waitForPlay&&this.html.active&&
this.status.video||this.html.video.available&&this.html.used&&this.status.nativeVideoControls?this.internal.video.jq.css({width:this.status.width,height:this.status.height}):!this.status.waitForPlay&&this.flash.active&&this.status.video&&this.internal.flash.jq.css({width:this.status.width,height:this.status.height})},_updateAutohide:function(){var a=this,b=function(b){var c=!1,d;"undefined"!==typeof a.internal.mouse?(c=a.internal.mouse.x-b.pageX,d=a.internal.mouse.y-b.pageY,c=0<Math.floor(c)||0<Math.floor(d)):
c=!0;a.internal.mouse={x:b.pageX,y:b.pageY};c&&a.css.jq.gui.fadeIn(a.options.autohide.fadeIn,function(){clearTimeout(a.internal.autohideId);a.internal.autohideId=setTimeout(function(){a.css.jq.gui.fadeOut(a.options.autohide.fadeOut)},a.options.autohide.hold)})};this.css.jq.gui.length&&(this.css.jq.gui.stop(!0,!0),clearTimeout(this.internal.autohideId),delete this.internal.mouse,this.element.unbind(".jPlayerAutohide"),this.css.jq.gui.unbind(".jPlayerAutohide"),this.status.nativeVideoControls?this.css.jq.gui.hide():
this.options.fullWindow&&this.options.autohide.full||!this.options.fullWindow&&this.options.autohide.restored?(this.element.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.bind("mousemove.jPlayer.jPlayerAutohide",b),this.css.jq.gui.hide()):this.css.jq.gui.show())},fullScreen:function(a){"object"===typeof a&&this.options.useStateClassSkin&&this.options.fullScreen?this._setOption("fullScreen",!1):this._setOption("fullScreen",!0)},restoreScreen:function(){this._setOption("fullScreen",!1)},
_fullscreenAddEventListeners:function(){var a=this,b=d.jPlayer.nativeFeatures.fullscreen;b.api.fullscreenEnabled&&b.event.fullscreenchange&&("function"!==typeof this.internal.fullscreenchangeHandler&&(this.internal.fullscreenchangeHandler=function(){a._fullscreenchange()}),document.addEventListener(b.event.fullscreenchange,this.internal.fullscreenchangeHandler,!1))},_fullscreenRemoveEventListeners:function(){var a=d.jPlayer.nativeFeatures.fullscreen;this.internal.fullscreenchangeHandler&&document.removeEventListener(a.event.fullscreenchange,
this.internal.fullscreenchangeHandler,!1)},_fullscreenchange:function(){this.options.fullScreen&&!d.jPlayer.nativeFeatures.fullscreen.api.fullscreenElement()&&this._setOption("fullScreen",!1)},_requestFullscreen:function(){var a=this.ancestorJq.length?this.ancestorJq[0]:this.element[0],b=d.jPlayer.nativeFeatures.fullscreen;b.used.webkitVideo&&(a=this.htmlElement.video);b.api.fullscreenEnabled&&b.api.requestFullscreen(a)},_exitFullscreen:function(){var a=d.jPlayer.nativeFeatures.fullscreen,b;a.used.webkitVideo&&
(b=this.htmlElement.video);a.api.fullscreenEnabled&&a.api.exitFullscreen(b)},_html_initMedia:function(a){var b=d(this.htmlElement.media).empty();d.each(a.track||[],function(a,c){var g=document.createElement("track");g.setAttribute("kind",c.kind?c.kind:"");g.setAttribute("src",c.src?c.src:"");g.setAttribute("srclang",c.srclang?c.srclang:"");g.setAttribute("label",c.label?c.label:"");c.def&&g.setAttribute("default",c.def);b.append(g)});this.htmlElement.media.src=this.status.src;"none"!==this.options.preload&&
this._html_load();this._trigger(d.jPlayer.event.timeupdate)},_html_setFormat:function(a){var b=this;d.each(this.formats,function(c,d){if(b.html.support[d]&&a[d])return b.status.src=a[d],b.status.format[d]=!0,b.status.formatType=d,!1})},_html_setAudio:function(a){this._html_setFormat(a);this.htmlElement.media=this.htmlElement.audio;this._html_initMedia(a)},_html_setVideo:function(a){this._html_setFormat(a);this.status.nativeVideoControls&&(this.htmlElement.video.poster=this._validString(a.poster)?
a.poster:"");this.htmlElement.media=this.htmlElement.video;this._html_initMedia(a)},_html_resetMedia:function(){this.htmlElement.media&&(this.htmlElement.media.id!==this.internal.video.id||this.status.nativeVideoControls||this.internal.video.jq.css({width:"0px",height:"0px"}),this.htmlElement.media.pause())},_html_clearMedia:function(){this.htmlElement.media&&(this.htmlElement.media.src="about:blank",this.htmlElement.media.load())},_html_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=
!1,this.htmlElement.media.load());clearTimeout(this.internal.htmlDlyCmdId)},_html_play:function(a){var b=this,c=this.htmlElement.media;this.androidFix.pause=!1;this._html_load();if(this.androidFix.setMedia)this.androidFix.play=!0,this.androidFix.time=a;else if(isNaN(a))c.play();else{this.internal.cmdsIgnored&&c.play();try{if(!c.seekable||"object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a,c.play();else throw 1;}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.play(a)},250);
return}}this._html_checkWaitForPlay()},_html_pause:function(a){var b=this,c=this.htmlElement.media;this.androidFix.play=!1;0<a?this._html_load():clearTimeout(this.internal.htmlDlyCmdId);c.pause();if(this.androidFix.setMedia)this.androidFix.pause=!0,this.androidFix.time=a;else if(!isNaN(a))try{if(!c.seekable||"object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a;else throw 1;}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.pause(a)},250);return}0<a&&this._html_checkWaitForPlay()},
_html_playHead:function(a){var b=this,c=this.htmlElement.media;this._html_load();try{if("object"===typeof c.seekable&&0<c.seekable.length)c.currentTime=a*c.seekable.end(c.seekable.length-1)/100;else if(0<c.duration&&!isNaN(c.duration))c.currentTime=a*c.duration/100;else throw"e";}catch(d){this.internal.htmlDlyCmdId=setTimeout(function(){b.playHead(a)},250);return}this.status.waitForLoad||this._html_checkWaitForPlay()},_html_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=
!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&(this.internal.poster.jq.hide(),this.internal.video.jq.css({width:this.status.width,height:this.status.height})))},_html_setProperty:function(a,b){this.html.audio.available&&(this.htmlElement.audio[a]=b);this.html.video.available&&(this.htmlElement.video[a]=b)},_aurora_setAudio:function(a){var b=this;d.each(this.formats,function(c,d){if(b.aurora.support[d]&&a[d])return b.status.src=a[d],b.status.format[d]=!0,b.status.formatType=
d,!1});this.aurora.player=new AV.Player.fromURL(this.status.src);this._addAuroraEventListeners(this.aurora.player,this.aurora);"auto"===this.options.preload&&(this._aurora_load(),this.status.waitForLoad=!1)},_aurora_resetMedia:function(){this.aurora.player&&this.aurora.player.stop()},_aurora_clearMedia:function(){},_aurora_load:function(){this.status.waitForLoad&&(this.status.waitForLoad=!1,this.aurora.player.preload())},_aurora_play:function(a){this.status.waitForLoad||isNaN(a)||this.aurora.player.seek(a);
this.aurora.player.playing||this.aurora.player.play();this.status.waitForLoad=!1;this._aurora_checkWaitForPlay();this._updateButtons(!0);this._trigger(d.jPlayer.event.play)},_aurora_pause:function(a){isNaN(a)||this.aurora.player.seek(1E3*a);this.aurora.player.pause();0<a&&this._aurora_checkWaitForPlay();this._updateButtons(!1);this._trigger(d.jPlayer.event.pause)},_aurora_playHead:function(a){0<this.aurora.player.duration&&this.aurora.player.seek(a*this.aurora.player.duration/100);this.status.waitForLoad||
this._aurora_checkWaitForPlay()},_aurora_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1)},_aurora_volume:function(a){this.aurora.player.volume=100*a},_aurora_mute:function(a){a?(this.aurora.properties.lastvolume=this.aurora.player.volume,this.aurora.player.volume=0):this.aurora.player.volume=this.aurora.properties.lastvolume;this.aurora.properties.muted=a},_flash_setAudio:function(a){var b=this;try{d.each(this.formats,function(c,d){if(b.flash.support[d]&&a[d]){switch(d){case "m4a":case "fla":b._getMovie().fl_setAudio_m4a(a[d]);
break;case "mp3":b._getMovie().fl_setAudio_mp3(a[d]);break;case "rtmpa":b._getMovie().fl_setAudio_rtmp(a[d])}b.status.src=a[d];b.status.format[d]=!0;b.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(c){this._flashError(c)}},_flash_setVideo:function(a){var b=this;try{d.each(this.formats,function(c,d){if(b.flash.support[d]&&a[d]){switch(d){case "m4v":case "flv":b._getMovie().fl_setVideo_m4v(a[d]);break;case "rtmpv":b._getMovie().fl_setVideo_rtmp(a[d])}b.status.src=
a[d];b.status.format[d]=!0;b.status.formatType=d;return!1}}),"auto"===this.options.preload&&(this._flash_load(),this.status.waitForLoad=!1)}catch(c){this._flashError(c)}},_flash_resetMedia:function(){this.internal.flash.jq.css({width:"0px",height:"0px"});this._flash_pause(NaN)},_flash_clearMedia:function(){try{this._getMovie().fl_clearMedia()}catch(a){this._flashError(a)}},_flash_load:function(){try{this._getMovie().fl_load()}catch(a){this._flashError(a)}this.status.waitForLoad=!1},_flash_play:function(a){try{this._getMovie().fl_play(a)}catch(b){this._flashError(b)}this.status.waitForLoad=
!1;this._flash_checkWaitForPlay()},_flash_pause:function(a){try{this._getMovie().fl_pause(a)}catch(b){this._flashError(b)}0<a&&(this.status.waitForLoad=!1,this._flash_checkWaitForPlay())},_flash_playHead:function(a){try{this._getMovie().fl_play_head(a)}catch(b){this._flashError(b)}this.status.waitForLoad||this._flash_checkWaitForPlay()},_flash_checkWaitForPlay:function(){this.status.waitForPlay&&(this.status.waitForPlay=!1,this.css.jq.videoPlay.length&&this.css.jq.videoPlay.hide(),this.status.video&&
(this.internal.poster.jq.hide(),this.internal.flash.jq.css({width:this.status.width,height:this.status.height})))},_flash_volume:function(a){try{this._getMovie().fl_volume(a)}catch(b){this._flashError(b)}},_flash_mute:function(a){try{this._getMovie().fl_mute(a)}catch(b){this._flashError(b)}},_getMovie:function(){return document[this.internal.flash.id]},_getFlashPluginVersion:function(){var a=0,b;if(window.ActiveXObject)try{if(b=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")){var c=b.GetVariable("$version");
c&&(c=c.split(" ")[1].split(","),a=parseInt(c[0],10)+"."+parseInt(c[1],10))}}catch(d){}else navigator.plugins&&0<navigator.mimeTypes.length&&(b=navigator.plugins["Shockwave Flash"])&&(a=navigator.plugins["Shockwave Flash"].description.replace(/.*\s(\d+\.\d+).*/,"$1"));return 1*a},_checkForFlash:function(a){var b=!1;this._getFlashPluginVersion()>=a&&(b=!0);return b},_validString:function(a){return a&&"string"===typeof a},_limitValue:function(a,b,c){return a<b?b:a>c?c:a},_urlNotSetError:function(a){this._error({type:d.jPlayer.error.URL_NOT_SET,
context:a,message:d.jPlayer.errorMsg.URL_NOT_SET,hint:d.jPlayer.errorHint.URL_NOT_SET})},_flashError:function(a){var b;b=this.internal.ready?"FLASH_DISABLED":"FLASH";this._error({type:d.jPlayer.error[b],context:this.internal.flash.swf,message:d.jPlayer.errorMsg[b]+a.message,hint:d.jPlayer.errorHint[b]});this.internal.flash.jq.css({width:"1px",height:"1px"})},_error:function(a){this._trigger(d.jPlayer.event.error,a);this.options.errorAlerts&&this._alert("Error!"+(a.message?"\n"+a.message:"")+(a.hint?
"\n"+a.hint:"")+"\nContext: "+a.context)},_warning:function(a){this._trigger(d.jPlayer.event.warning,e,a);this.options.warningAlerts&&this._alert("Warning!"+(a.message?"\n"+a.message:"")+(a.hint?"\n"+a.hint:"")+"\nContext: "+a.context)},_alert:function(a){a="jPlayer "+this.version.script+" : id='"+this.internal.self.id+"' : "+a;this.options.consoleAlerts?window.console&&window.console.log&&window.console.log(a):alert(a)},_emulateHtmlBridge:function(){var a=this;d.each(d.jPlayer.emulateMethods.split(/\s+/g),
function(b,c){a.internal.domNode[c]=function(b){a[c](b)}});d.each(d.jPlayer.event,function(b,c){var e=!0;d.each(d.jPlayer.reservedEvent.split(/\s+/g),function(a,c){if(c===b)return e=!1});e&&a.element.bind(c+".jPlayer.jPlayerHtml",function(){a._emulateHtmlUpdate();var c=document.createEvent("Event");c.initEvent(b,!1,!0);a.internal.domNode.dispatchEvent(c)})})},_emulateHtmlUpdate:function(){var a=this;d.each(d.jPlayer.emulateStatus.split(/\s+/g),function(b,c){a.internal.domNode[c]=a.status[c]});d.each(d.jPlayer.emulateOptions.split(/\s+/g),
function(b,c){a.internal.domNode[c]=a.options[c]})},_destroyHtmlBridge:function(){var a=this;this.element.unbind(".jPlayerHtml");d.each((d.jPlayer.emulateMethods+" "+d.jPlayer.emulateStatus+" "+d.jPlayer.emulateOptions).split(/\s+/g),function(b,c){delete a.internal.domNode[c]})}};d.jPlayer.error={FLASH:"e_flash",FLASH_DISABLED:"e_flash_disabled",NO_SOLUTION:"e_no_solution",NO_SUPPORT:"e_no_support",URL:"e_url",URL_NOT_SET:"e_url_not_set",VERSION:"e_version"};d.jPlayer.errorMsg={FLASH:"jPlayer's Flash fallback is not configured correctly, or a command was issued before the jPlayer Ready event. Details: ",
FLASH_DISABLED:"jPlayer's Flash fallback has been disabled by the browser due to the CSS rules you have used. Details: ",NO_SOLUTION:"No solution can be found by jPlayer in this browser. Neither HTML nor Flash can be used.",NO_SUPPORT:"It is not possible to play any media format provided in setMedia() on this browser using your current options.",URL:"Media URL could not be loaded.",URL_NOT_SET:"Attempt to issue media playback commands, while no media url is set.",VERSION:"jPlayer "+d.jPlayer.prototype.version.script+
" needs Jplayer.swf version "+d.jPlayer.prototype.version.needFlash+" but found "};d.jPlayer.errorHint={FLASH:"Check your swfPath option and that Jplayer.swf is there.",FLASH_DISABLED:"Check that you have not display:none; the jPlayer entity or any ancestor.",NO_SOLUTION:"Review the jPlayer options: support and supplied.",NO_SUPPORT:"Video or audio formats defined in the supplied option are missing.",URL:"Check media URL is valid.",URL_NOT_SET:"Use setMedia() to set the media URL.",VERSION:"Update jPlayer files."};
d.jPlayer.warning={CSS_SELECTOR_COUNT:"e_css_selector_count",CSS_SELECTOR_METHOD:"e_css_selector_method",CSS_SELECTOR_STRING:"e_css_selector_string",OPTION_KEY:"e_option_key"};d.jPlayer.warningMsg={CSS_SELECTOR_COUNT:"The number of css selectors found did not equal one: ",CSS_SELECTOR_METHOD:"The methodName given in jPlayer('cssSelector') is not a valid jPlayer method.",CSS_SELECTOR_STRING:"The methodCssSelector given in jPlayer('cssSelector') is not a String or is empty.",OPTION_KEY:"The option requested in jPlayer('option') is undefined."};
d.jPlayer.warningHint={CSS_SELECTOR_COUNT:"Check your css selector and the ancestor.",CSS_SELECTOR_METHOD:"Check your method name.",CSS_SELECTOR_STRING:"Check your css selector is a string.",OPTION_KEY:"Check your option name."}});
function Accordion(d){window[d]=this;var e=this,f,c,a,b,g;e.initialize=function(){f=e.settings.cssClasses.expandedSectionHeader;c=e.settings.cssClasses.sectionHeader;a=e.settings.onSectionSlideDown;b=e.settings.onSectionSlideUp;g=e.settings.onInitComplete;$.each(e.foldableSections(),function(a,b){$("#"+b.headerLink+", #"+b.header).click(function(){e.handleSectionClick(b)})});null!=g&&$(document).trigger(g,e)};e.foldableSections=function(){return $(e.sections).filter(function(a,b){return b.isFoldable})};
e.handleSectionClick=function(a){a.isExpanded?e.collapseSection(a):e.expandSection(a)};e.expandSection=function(b){$("#"+b.header).removeClass(c).addClass(f);$("#"+b.content).slideDown(e.settings.animationDuration,function(){null!=a&&$(document).trigger(a,b.content)});b.isExpanded=!b.isExpanded};e.collapseSection=function(a){$("#"+a.header).removeClass(f).addClass(c);$("#"+a.content).slideUp(e.settings.animationDuration,function(){null!=b&&$(document).trigger(b,a.content)});a.isExpanded=!a.isExpanded};
return e}
function AccordionGrid(d){window[d]=this;var e=this;this.expandedRowCssClass=this.hiddenGridCssClass=null;this.subGridClientIds=[];e.toggleAccordionGrid=function(d,c){var a=$("."+d).parent("li");a.hasClass(e.hiddenGridCssClass)||void 0==c?("UL"!=$("."+d).get(0).tagName&&$(e.subGridClientIds).each(function(){this.cssClass==d&&1>this.totalCount&&this.refresh()}),$(c).addClass(e.expandedRowCssClass),a.removeClass(e.hiddenGridCssClass)):($(c).removeClass(e.expandedRowCssClass),a.addClass(e.hiddenGridCssClass))};e.reOpenOnPostBack=
function(d,c){""!=d&&void 0!=d&&e.toggleAccordionGrid(d);""!=c&&void 0!=c&&e.toggleAccordionGrid(c)};e.getSelectedValues=function(){var d=!1;$(e.subGridClientIds).each(function(){0<this.getSelectedValues().length&&(d=!0)});return d?!0:""}}
function AjaxUploaderCallbacks(d){var e={},f={getFunctionByName:function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;for(var b=c.split("."),d=b.pop(),e=0;e<b.length;e++)a=a[b[e]];return a[d]}}};e.controlInitialized=f.getFunctionByName(d?d.OnControlInitialization:void 0);e.fileSelected=f.getFunctionByName(d?d.OnFileSelected:void 0);e.beforeFileUpload=f.getFunctionByName(d?d.OnBeforeFileUpload:void 0);e.fileUploadSuccess=f.getFunctionByName(d?d.OnFileUploadSuccess:void 0);e.fileUploadError=
f.getFunctionByName(d?d.OnFileUploadError:void 0);e.beforeFileRemoved=f.getFunctionByName(d?d.OnBeforeFileRemoved:void 0);e.fileRemoveSuccess=f.getFunctionByName(d?d.OnFileRemoveSuccess:void 0);e.fileRemoveError=f.getFunctionByName(d?d.OnFileRemoveError:void 0);e.beforeFileUploadAborted=f.getFunctionByName(d?d.OnBeforeFileUploadAborted:void 0);e.fileUploadAborted=f.getFunctionByName(d?d.OnFileUploadAborted:void 0);e.fileUploadProgress=f.getFunctionByName(d?d.OnFileUploadProgress:void 0);return e}
function AjaxUploaderCommon(){return{getRelativePath:function(d,e){return d.webkitRelativePath||d.relativePath||e||""}}}var auCommon=AjaxUploaderCommon();
function AjaxUploaderControl(d,e,f,c,a,b,g,h){contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(d.fileInput),"controls.fileInput is not defined");contract.require(!objectState.isNullOrUndefined(d.fileList),"controls.fileList is not defined");contract.require(!objectState.isNullOrUndefined(d.dropZone),"controls.dropZone is not defined");contract.require(!objectState.isNullOrUndefined(d.folderInput),"controls.folderInput is not defined");
contract.require(!objectState.isNullOrUndefined(d.folderInputLink),"controls.folderInputLink is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'validationService' is not defined");contract.require(objectState.isFunction(f.validateFile),"'validationService' has invalid interface");contract.require(!objectState.isNullOrUndefined(c),"argument 'fileList' is not defined");contract.require(!objectState.isNullOrUndefined(a),
"argument 'fileUploadService' is not defined");contract.require(objectState.isFunction(a.subscribe),"'fileUploadService' has invalid interface");contract.require(!objectState.isNullOrUndefined(b),"argument 'folderManifestFactory' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'literals' is not defined");var l={},k={};if(void 0===h||null===h)h={};k.disableDeletePostbackThreshold=.99;k.initialize=function(){k.initializeElementsToSupportSingleOrMultipleFiles();k.initializeDropZone();
void 0!==h.controlInitialized&&h.controlInitialized(l);k.initializeFileUploader()};k.initializeElementsToSupportSingleOrMultipleFiles=function(){e.allowMultipleFiles?(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles(),k.initializeFolderInput()):(k.changeFileInputToAcceptSingleFile(),k.changeDropZoneToAcceptSingleFile())};k.initializeDropZone=function(){e.allowDragAndDrop?k.enableDropZone():k.disableDropZone()};k.initializeFolderInput=function(){e.allowFoldersUpload?(k.initializeFolderUploadElements(),
k.enableFolderInput()):k.disableFolderInput()};k.enableFolderInput=function(){browserSniffer.isDirectoryUploadSupported()&&(d.folderInputLink.removeClass("h-hidden"),d.folderInput.show(),d.folderInputLink.show())};k.disableFolderInput=function(){d.folderInput.hide();d.folderInputLink.hide()};k.changeFileInputToAcceptSingleFile=function(){d.fileInput.removeAttr("multiple")};k.changeFileInputToAcceptMultipleFiles=function(){d.fileInput.attr("multiple",!0)};k.enableDropZone=function(){browserSniffer.isDragAndDropSupported()&&
(d.dropZone.removeClass("h-hidden"),d.dropZone.show())};k.disableDropZone=function(){d.dropZone.hide()};k.changeDropZoneToAcceptMultipleFiles=function(){$(d.fileInput.selector).unbind("fileuploaddrop",k.takeOnlyFirstFileFunction)};k.changeDropZoneToAcceptSingleFile=function(){$(d.fileInput.selector).bind("fileuploaddrop",k.takeOnlyFirstFileFunction)};k.isMultipleFileSelect=function(a){return a.originalFiles&&1<a.originalFiles.length};k.isSingleFileInFolder=function(a){return a.originalFiles&&1===
a.originalFiles.length&&""!==auCommon.getRelativePath(a.originalFiles[0],"")?!0:!1};k.getArrayFromEventFileList=function(a){var b=[],c;for(c=0;c<a.length;c+=1)b.push(a[c]);return b};k.handleFolderSelect=function(a){var b=k.getArrayFromEventFileList(a.target.files);k.fileUploader.upload(b);a.target.value=null};k.initializeFolderUploadElements=function(){d.folderInputLink.click(function(){d.folderInput.click()});d.folderInput.on("change",k.handleFolderSelect)};k.initializeFileUploader=function(){k.fileUploader=
a.subscribe({fileInput:d.fileInput,dropZone:d.dropZone},{onDone:k.onDone,onFail:k.onFail,onProcessAlways:k.onProcessAlways,onProgress:k.onProgress,onAdd:k.onAdd,onSend:k.onSend,onFileUploadAborted:k.onUploadAborted})};k.getFolderName=function(a){var b,c,d,g=null;for(b=0;b<a.length;b+=1){c=auCommon.getRelativePath(a[b],"");d=c.indexOf("/");if(-1===d)return null;c=c.substring(0,d);if(null===g)g=c;else if(g!==c)return null}return g};k.getFileNameForMultipleFiles=function(a){a=k.getFolderName(a);return null!==
a?a:g.files};k.getTotalSize=function(a){var b=0;$.each(a,function(a,c){b+=c.size||0});return b};k.getFileInfo=function(a,b){var c;c=b?{name:k.getFileNameForMultipleFiles(a),size:k.getTotalSize(a)}:a[0];c.fileId=guidFactory.newGuid();return c};k.handleForbiddenFolderUpload=function(a,b){f.validateIsFile(a.files[0],k.handleIsAFileValidationResult.bind(k,a.files,0,b.fileId,{total:a.files.length,checked:0,stop:!1}))};k.handleIsAFileValidationResult=function(a,b,d,g,e){g.checked+=1;a[b].checkedForBeingAFolder=
!0;e.isValid?g.stop||(g.checked===g.total?k.fileUploader.upload(a):(b+=1,f.validateIsFile(a[b],k.handleIsAFileValidationResult.bind(k,a,b,d,g)))):(g.stop=!0,c.setFileStatusToError(d,e.errorMessage,k.removeFromList),c.enableAction(d))};k.hasToBeCheckedForBeingAFolder=function(a){return f.mightBeAFolder(a)&&!a.checkedForBeingAFolder};k.hasToHandlePossibleForbiddenFolderUpload=function(a){var b,c;if(browserSniffer.isDirectoryUploadSupported())return!1;if(a.files&&a.files.length)for(b=0;b<a.files.length;b+=
1)if(c=a.files[b],k.hasToBeCheckedForBeingAFolder(c))return!0;return!1};k.getProgressFromCallback=function(a,b){h.fileUploadProgress(a,{disableFileAction:function(){c.disableAction(b)},setProgressTo:function(b){a=b}});return a};k.onDone=function(a,b){void 0!==h.fileUploadSuccess&&h.fileUploadSuccess(a,b);k.enableUploadButtonsAndDropzone();var d=b.fileId;c.updateFileProgress(d,1);c.setFileStatusToSuccess(d,k.requestFileDelete)};k.onFail=function(a,b){void 0!==h.fileUploadError&&h.fileUploadError(a);
k.enableUploadButtonsAndDropzone();var d=b.fileId;c.setFileStatusToError(d,a,k.removeFromList);c.enableAction(d)};k.onProcessAlways=function(a,b){if(!k.isMultipleFileSelect(b)){var d=b.files[b.index];d.preview&&c.updateFilePreview(b.fileId,d.preview)}};k.onProgress=function(a,b){var d=b.fileId,g=b.loaded/b.total,f;f=objectState.isFunction(h.fileUploadProgress)?k.getProgressFromCallback(g,d):g;c.updateFileProgress(d,f);e.disableDeletePostBackAfterUpload&&g>=k.disableDeletePostbackThreshold&&c.disableAction(d)};
k.onAdd=function(a,d,g){var l={},t=k.isMultipleFileSelect(d)||k.isSingleFileInFolder(d);void 0!==h.fileSelected&&h.fileSelected(a,d);var p=k.getFileInfo(d.files,t);c.addFile(p,function(){k.onBeforeAbortUpload();d.abort()});if(k.hasToHandlePossibleForbiddenFolderUpload(d))return k.handleForbiddenFolderUpload(d,p),{cancel:!0};var r=f.validateFile(p);if(!r.isValid)return c.setFileStatusToError(p.fileId,r.errorMessage,k.removeFromList),c.enableAction(p.fileId),{cancel:!0};t&&e.includeFolderManifest&&
(l.manifest=b.createJSON(d.files));d.formData=l;d.fileId=p.fileId;k.disableUploadButtonsAndDropzone();c.setFileStatusToInProgress(p.fileId);void 0!==h.beforeFileUpload&&h.beforeFileUpload(a,d,t,g);return{success:!0}};k.onSend=function(a,b,d){d||(a=b.fileId,c.setDefaultFileProgress(a),e.disableDeletePostBackAfterUpload&&c.disableAction(a))};k.onBeforeFileRemoved=function(a,b){void 0!==h.beforeFileRemoved&&h.beforeFileRemoved(a,b)};k.onFileRemoveError=function(a,b,c){void 0!==h.fileRemoveError&&h.fileRemoveError(a,
b,c)};k.onFileRemoveSuccess=function(a,b,d){void 0!==h.fileRemoveSuccess&&h.fileRemoveSuccess(a,b,d);c.removeFiles()};k.removeFromList=function(a){c.removeFile(a)};k.requestFileDelete=function(b){a.requestFileDelete(b,{beforeRemoved:k.onBeforeFileRemoved,removeError:k.onFileRemoveError,removeSuccess:k.onFileRemoveSuccess})};k.onBeforeAbortUpload=function(){void 0!==h.beforeFileUploadAborted&&h.beforeFileUploadAborted()};k.onUploadAborted=function(a,b){void 0!==h.fileUploadAborted&&h.fileUploadAborted(a,
b);c.removeFiles();k.enableUploadButtonsAndDropzone()};k.returnFalseFunction=function(){return!1};k.takeOnlyFirstFileFunction=function(a,b){b.files=b.files.splice(0,1)};k.disableUploadButtonsAndDropzone=function(){d.folderInput.prop("disabled",!0);$(d.fileInput.selector).prop("disabled",!0);$(d.fileInput.selector).bind("fileuploaddrop",k.returnFalseFunction)};k.enableUploadButtonsAndDropzone=function(){d.folderInput.prop("disabled",!1);$(d.fileInput.selector).prop("disabled",!1);$(d.fileInput.selector).unbind("fileuploaddrop",
k.returnFalseFunction)};l.enableMultipleFilesMode=function(){e.allowFoldersUpload&&k.enableFolderInput();e.allowMultipleFiles&&(k.changeFileInputToAcceptMultipleFiles(),k.changeDropZoneToAcceptMultipleFiles())};l.enableSingleFileMode=function(){k.disableFolderInput();k.changeFileInputToAcceptSingleFile();k.changeDropZoneToAcceptSingleFile()};k.initialize();return l}
function AjaxUploaderControlInitialization(d,e,f,c){var a=UploaderSenderOptionsFactory(),b=AjaxUploaderFolderManifestFactory(),g=UploaderFileItemFactory(e),h=AjaxUploaderValidationService(d,e),g=UploaderFileList(f.fileList,g,e),a=AjaxUploaderFileService(d,a);AjaxUploaderControl(f,d,h,g,a,b,e,c)}
function AjaxUploaderControls(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");var e={},f={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,a){var b=f.getJQuerySafeId(c),b=$(b);if(f.jQElementExists(b))return b;if(void 0!==a)throw a;},initializeBrowseButtonFocusStyles:function(c){c.focusin(function(){c.toggleClass("ccl-button-color-green-highlight")}).focusout(function(){c.toggleClass("ccl-button-color-green-highlight")})}};
e.fileInput=f.getJQElement(d.FileInput,"FileInput not found");e.fileList=f.getJQElement(d.FileList,"FileList not found");e.dropZone=f.getJQElement(d.DropZone,"DropZone not found");e.folderInput=f.getJQElement(d.FolderInput,"FolderInput not found");e.folderInputLink=f.getJQElement(d.FolderInputLink,"FolderInputLink not found");f.browseButton=e.fileInput.parent();f.initializeBrowseButtonFocusStyles(f.browseButton);return e}
function AjaxUploaderFileService(d,e){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d.uploadUrl),"parameter 'uploadUrl' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(d.uploadType),"parameter 'uploadType' of argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'optionsFactory' is not defined");var f={},c={};c.uploadUrl=d.uploadUrl;
c.uploadType=d.uploadType;c.dataType="json";c.previewMaxWidth=50;c.previewMaxHeight=50;c.loadImageMaxFileSize=25E6;c.isFileUploadAborted=function(a){return"abort"===a.errorThrown};c.ensureCallbacksAreSafeToCall=function(a){if(void 0===a||null===a)a={};if(void 0===a.onFail||null===a.onFail)a.onFail=function(a,c){};if(void 0===a.onFileUploadAborted||null===a.onFileUploadAborted)a.onFileUploadAborted=function(a,c){};return a};c.isIframeTransportUsed=function(a){return a.dataType&&"iframe"===a.dataType.substr(0,
6)};c.isUploadProgressSupported=function(a){return!c.isIframeTransportUsed(a)};c.isDoneReallyAFail=function(a){return c.isIframeTransportUsed(a)&&"undefined"===typeof a.result?!0:!1};c.handleUploadAbort=function(a,b,c){c(a,b)};c.disableFileUpload=function(a){a.isEnabled=!1};c.enableFileUpload=function(a){a.isEnabled=!0};c.hasDataToSend=function(a){return 0<a.files.length};c.getErrorMesageFromXhr=function(a){if(a.responseText)try{var b=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(b.errorMessage))return b.errorMessage}catch(c){}return a.statusText};
f.subscribe=function(a,b){contract.require(!objectState.isNullOrUndefined(a),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(a.fileInput),"parameter 'fileInput' of argument 'controls' is not defined");b=c.ensureCallbacksAreSafeToCall(b);var d={url:c.uploadUrl},h={isEnabled:!0};a.fileInput.fileupload({url:d.url,type:c.uploadType,dataType:c.dataType,dropZone:a.dropZone||void 0,previewMaxWidth:c.previewMaxWidth,previewMaxHeight:c.previewMaxHeight,loadImageMaxFileSize:c.loadImageMaxFileSize,
singleFileUploads:!1,done:function(a,d){if(c.isDoneReallyAFail(d))d.textStatus="error",b.onFail(void 0,d);else b.onDone(a,d);$(this);c.enableFileUpload(h)},fail:function(a,d){if(c.isFileUploadAborted(d))c.handleUploadAbort(a,d,b.onFileUploadAborted);else{var g=c.getErrorMesageFromXhr(d.xhr());b.onFail(g,d)}$(this);c.enableFileUpload(h)},processalways:b.onProcessAlways,progress:b.onProgress,send:function(a,d){b.onSend(a,d,c.isUploadProgressSupported(d))}}).bind("fileuploadadd",function(a,f){if(!h.isEnabled)return!1;
var m=$(this);if(!c.hasDataToSend(f))return!1;c.disableFileUpload(h);var n=e.create(d);if(!0===b.onAdd(a,f,n).cancel)return c.enableFileUpload(h),!1;m.fileupload("option",n.getProcessedOptions())});return AjaxUploaderFileUploader(a.fileInput)};f.requestFileDelete=function(a,b){var d=URI(c.uploadUrl).addSearch("fileId",a).normalizeSearch().toString();$.ajax({url:d,dataType:"json",type:"DELETE",beforeSend:b.beforeRemoved,error:b.removeError,success:b.removeSuccess})};return f}
function AjaxUploaderFileUploader(d){var e={},f={};f.fileInputSelector=d.selector;f.getFileInput=function(){return $(f.fileInputSelector)};f.uploadFiles=function(c){f.getFileInput().fileupload("add",{files:c})};e.upload=function(c){c=Array.isArray(c)?c:[c];f.uploadFiles(c)};return e}
function AjaxUploaderFolderManifestFactory(){var d={},e={escapeRegExpSpecialCharacters:function(d){return d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},makeForwardAndBackSlashesTreatedAsEqual:function(d){return d.replace(/\\\\|\//g,"[\\/]")},markStringAsEndingInput:function(d){return d+"$"},getFileNameRemovalRegExpString:function(d){d=e.escapeRegExpSpecialCharacters(d);d=e.makeForwardAndBackSlashesTreatedAsEqual(d);return e.markStringAsEndingInput(d)},getFileNameRemovalRegExp:function(d){d=e.getFileNameRemovalRegExpString(d);
return new RegExp(d,"i")},removeFileNameFromPath:function(d,c){var a=e.getFileNameRemovalRegExp(c);return d.replace(a,"")},trimFolderPath:function(d){d=d.replace(/[\\/]$/,"");return d=d.replace(/^[\\/]/,"")},getFolderForFile:function(d){var c=auCommon.getRelativePath(d,"");d=c.length<d.name.length?c:e.removeFileNameFromPath(c,d.name);return e.trimFolderPath(d)},convertSingleFileToArrayIfNeeded:function(d){Array.isArray(d)||(d=[d]);return d},getArrayOfFolders:function(d){var c=[],a=d.length,b;for(b=
0;b<a;b+=1)objectState.isFileError(d[b])||c.push(e.getFolderForFile(d[b]));return c}};d.create=function(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'files' is not defined");d=e.convertSingleFileToArrayIfNeeded(d);return{folders:e.getArrayOfFolders(d)}};d.createJSON=function(e){e=d.create(e);return JSON.stringify(e)};return d}
function AjaxUploaderLiterals(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'translations' is not defined");var e={};e.fileExtensionNotAllowed=d.FileExtensionNotAllowed;e.fileTooBig=d.FileTooBig;e.fileTooSmall=d.FileTooSmall;e.kb=d.Kb;e.mb=d.Mb;e.error=d.Error;e.maxFileSizeForUpload=d.MaxFileSizeForUpload;e.dropYourFilesHere=d.DropYourFilesHere;e.browse=d.Browse;e.remove=d.Remove;e.unknown=d.Unknown;e.cantHandleFolderDragAndDrop=d.CantHandleFolderUpload;e.invalidCharactersXInFileName=
d.InvalidCharactersXInFileName;e.unableToOpenFile=d.UnableToOpenFile;e.files=d.Files;e.invalidFirstPartOfFileName=d.InvalidFirstPartOfFileName;e.getFormattedFileSize=function(d){return"number"!==typeof d?"":1048576<=d?(d/1048576).toFixed(2)+" "+e.mb:(d/1024).toFixed(2)+" "+e.kb};return e}
function AjaxUploaderSettings(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");var e={},f={getRegExp:function(c){if(c instanceof RegExp)return c;c=c.split("/");var a=c.pop();c.shift();return new RegExp(c.join("/"),a)},getBoolean:function(c){return/^true$/i.test(c)},getArray:function(c){return"undefined"===typeof c||null==c?null:JSON.parse(c)}};e.uploadUrl=d.UploadUrl;e.uploadType=d.UploadType;e.maxFileSize=parseInt(d.MaxFileSize);e.minFileSize=parseInt(d.MinFileSize||
0);e.forbiddenFileExtensions=f.getRegExp(d.ForbiddenFileExtensions);e.pathToCdn=d.PathToCdn;e.allowFoldersUpload=f.getBoolean(d.AllowFoldersUpload);e.allowMultipleFiles=f.getBoolean(d.AllowMultipleFiles);e.allowDragAndDrop=f.getBoolean(d.AllowDragAndDrop);e.includeFolderManifest=f.getBoolean(d.IncludeFolderManifest);e.disableDeletePostBackAfterUpload=f.getBoolean(d.DisableDeletePostBackAfterUpload);e.illegalFileNames=f.getArray(d.IllegalFileNames);e.illegalCharacters=f.getArray(d.IllegalCharacters);
return e}
function AjaxUploaderValidationService(d,e){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(0<=d.maxFileSize,"MaxFileSize cannot be less than zero");contract.require(0<=d.minFileSize,"MinFileSize cannot be less than zero");contract.require(!objectState.isNullOrUndefined(e),"argument 'translations' is not defined");var f={},c={getSuccessResult:function(){return{isValid:!0}},getErrorResult:function(a){return{isValid:!1,errorMessage:a}},tryReadFile:function(a,
b){var d=new FileReader,h=!1;d.onprogress=function(a){h||(h=!0,d.abort(),b(c.getSuccessResult()))};d.onerror=function(a){h||(h=!0,b(c.getErrorResult(e.cantHandleFolderDragAndDrop)))};d.readAsArrayBuffer(a)}};f.mightBeAFolder=function(a){return""===a.type};f.validateIsFile=function(a,b){f.mightBeAFolder(a)&&FileReader?c.tryReadFile(a,b):b(c.getSuccessResult())};c.validateFileSize=function(a){return a<d.minFileSize?c.getErrorResult(e.fileTooSmall):a>d.maxFileSize?c.getErrorResult(e.fileTooBig):c.getSuccessResult()};
c.validateFileExtension=function(a){return d.forbiddenFileExtensions.test(a)?c.getSuccessResult():c.getErrorResult(e.fileExtensionNotAllowed)};c.validateFileNameAgainstIllegalCharacters=function(a){var b=[];if(c.areIllegalCharactersDefined())for(var g=d.illegalCharacters.length,h=0;h<g;h++)d.illegalCharacters[h]&&-1<a.indexOf(d.illegalCharacters[h])&&b.push(d.illegalCharacters[h]);return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),c.getErrorResult(e.invalidCharactersXInFileName.replace("{0}",
a.join(" ")))):c.getSuccessResult()};c.areIllegalCharactersDefined=function(){return null!=d.illegalCharacters&&0<d.illegalCharacters.length};c.validateFileNameAgainstIllegalFileNames=function(a){var b=[];if(c.areIllegalFileNamesDefined()){a=a.split(".")[0];for(var g=d.illegalFileNames.length,h=0;h<g;h++)d.illegalFileNames[h]&&a.toUpperCase()===d.illegalFileNames[h].toUpperCase()&&b.push(d.illegalFileNames[h])}return 0<b.length?(a=b.filter(function(a,c){return b.indexOf(a)==c}),c.getErrorResult(e.invalidFirstPartOfFileName.replace("{0}",
a.join(" ")))):c.getSuccessResult()};c.areIllegalFileNamesDefined=function(){return null!=d.illegalFileNames&&0<d.illegalFileNames.length};c.checkIsFileError=function(a){return objectState.isFileError(a)?c.getErrorResult(e.unableToOpenFile):c.getSuccessResult()};f.maxFileSize=d.maxFileSize;f.minFileSize=d.minFileSize;f.validateFile=function(a){contract.require(!objectState.isNullOrUndefined(a),"argument 'file' is not defined");var b;b=c.checkIsFileError(a);if(!1===b.isValid)return b;b=c.validateFileNameAgainstIllegalCharacters(a.name);
if(!1===b.isValid)return b;b=c.validateFileNameAgainstIllegalFileNames(a.name);if(!1===b.isValid)return b;b=c.validateFileExtension(a.name);if(!1===b.isValid)return b;b=c.validateFileSize(a.size);return!1===b.isValid?b:c.getSuccessResult()};return f}
function BrowserSniffer(){return{isDirectoryUploadSupported:function(){var d=document.createElement("input");return"webkitdirectory"in d||"directory"in d},isDragAndDropSupported:function(){return"draggable"in document.createElement("span")},isInternetExplorer9:function(){return $("body").hasClass("h-ie9")}}}var browserSniffer=BrowserSniffer();
function Calendar(d){window[d]=this;var e=this,f,c,a,b;e.initialize=function(){c=e.settings;a=e.customSettings;b=e.customScripts;f=e.calendar;$.extend(c,{select:b.onSelect,eventRender:b.eventRender,dayRender:b.dayRender,eventDrop:b.eventDrop,eventResize:b.eventResize,eventClick:b.eventClick,loading:b.loading,weekNumberCalculation:function(a){var b=f.fullCalendar("getView");return b&&b.name==window.fullCalendarViews.agendaDay?"":Calendar.getWeekNumber(a,c.firstDay)},viewChange:b.onChangeView,viewRender:function(a){f.fullCalendar("option",
"contentHeight",a.name==window.fullCalendarViews.month?NaN:2500);b.viewRender(a)},updateTodayButton:b.updateTodayButton,eventAfterAllRender:b.eventAfterAllRender,showMoreMousedown:b.showMoreMousedown});f.fullCalendar(c)};e.refetchEvents=function(b,c){var d=[];$.each(b,function(a,b){d.push(b.id)});$.isFunction(c)&&c(!0);$.ajax({type:"POST",url:a.refetchEventsSource,data:{ids:d.join()},datatype:"json",success:function(a){$.each(b,function(a,b){e.removeEvent(b.id)});$.each(a,function(a,c){var d=$.grep(b,
function(a){return a.id==c.id})[0];d.source?e.addEventForSource(c,d.source):e.addEvent(c)});$.isFunction(c)&&c(!1)},error:function(){$.isFunction(c)&&c(!1)}})};e.refetchAll=function(){f.fullCalendar("refetchEvents")};e.removeEvent=function(a){f.fullCalendar("removeEvents",a)};e.addEvent=function(a){f.fullCalendar("renderEvent",a)};e.refetchSource=function(a){f.fullCalendar("refetchSource",a)};e.refetchSourceByName=function(a){a in e.eventSources&&e.refetchSource(e.eventSources[a])};e.addEventForSource=
function(a,b){f.fullCalendar("renderEventForSource",a,b)};e.addEventForSourceByName=function(a,b){b in e.eventSources&&e.addEventForSource(a,e.eventSources[b])}}
Calendar.getWeekNumber=function(d,e){e="number"==typeof e?e:1;e=0==e?7:e;var f=Calendar.calculateWeekNumber(d,e);if(11==d.getMonth()){var c=new Date(d.getFullYear()+1,0,1);if(7==e)c=new Date(d.getFullYear(),d.getMonth(),d.getDate()-d.getDay()),(new Date(c.getFullYear(),c.getMonth(),c.getDate()+6)).getFullYear()>c.getFullYear()&&(f=1);else{var c=c.getIsoDay(),a=new Date(d.getFullYear(),d.getMonth(),d.getDate()-(d.getIsoDay()-1));(new Date(a.getFullYear(),a.getMonth(),a.getDate()+6)).getFullYear()>
a.getFullYear()&&5>c&&(f=1)}}0==f&&(f=new Date(d.getFullYear(),d.getMonth(),d.getDate()-7),f=Calendar.calculateWeekNumber(f,e));return f};
Calendar.calculateWeekNumber=function(d,e){var f=[0,31,59,90,120,151,181,212,243,273,304,334],c=[0,31,60,91,121,152,182,213,244,274,305,335],f=1==(new Date(d.getFullYear(),1,29)).getMonth()?d.getDate()+c[d.getMonth()]:d.getDate()+f[d.getMonth()],c=d.getIsoDay(),c=Calendar.getShiftBetweenNumbers(e,c),c=Calendar.shiftNumber(1,c);return Math.floor((f-c+(7==e?13:10))/7)};Calendar.getShiftBetweenNumbers=function(d,e){for(var f=0;7>f;f++){if(d==e)return f;d++;8==d&&(d=1)}return 0};
Calendar.shiftNumber=function(d,e){if(0==e)return d;for(var f=0;f<e;f++)d++,8==d&&(d=1);return d};Date.prototype.getIsoDay=function(){var d=this.getDay();return 0==d?7:d};
function ClientInlineEditor(d,e,f,c,a,b,g){if(d){var h=this;h.isWatermarkMode=!1;h.isGetInitialTextFromHidden=!!f;h.hiddenField=f;h.viewField=$(d);h.editModeActivator=e?$(e):h.viewField;h.editField=void 0;h.editHidden=void 0;h.editLink=$();h.onEditFunction=a;h.onChangeModeFunction=b;h.userData=g;h.options=$.extend({multiline:!1,watermark:"",autoResize:!1,clickToEditToolTip:"",clickToSaveToolTip:"",submitOnEnter:!1,ignoreViewModeText:!1,editFieldCssClass:"",watermarkCssClass:"",editFieldAutoWidth:!0,
editFieldDisplayInline:!1,highlightOnSave:!1,highlightOnFocus:!1,maxLength:0,renderRightLinkWithIcon:!1,rightLinkCssClass:"",rightLinkViewModeCssClass:"",rightLinkEditModeCssClass:"",supressOriginalBehaviour:!1,blockedCharacters:[],forceContainerSize:!1},c);h.options.useWatermark=!!h.options.watermark;h.options.useClickToEditToolTip=!!h.options.clickToEditToolTip;h.options.useEditFieldCssClass=!!h.options.editFieldCssClass;h.options.useWatermarkCssClass=!!h.options.watermarkCssClass;h.options.renderRightLinkWithIcon&&
(h.editLink=$("<a href='#'></a>").addClass(h.options.rightLinkCssClass).append($("<img alt='' />").attr("src",CommonConstants.onePixelTransparentImageSource)).insertAfter(h.viewField).click({self:h},h.rightLinkClick).keydown({self:h},h.rightLinkKeyDown),h.initDeviceChecks(),h.toggleRightLinkMode(!0,!0));h.options.supressOriginalBehaviour||h.editModeActivator.click($.proxy(h.switchToEditMode,h)).filter("a").keydown({self:h},h.editModeActivatorKeyDown);h.toggleActivatorTooltip(!0);h.fixSize();return{switchToEditMode:function(){h.switchToEditMode();
return h.editField},setNewText:function(a){h.setNewText(a)},getEditFieldText:function(){return h.getEditFieldText()},setToolTip:function(a){h.options.clickToEditToolTip=a;h.editModeActivator.attr("title",a)}}}}
ClientInlineEditor.prototype={isIos:void 0,hiddenCssClass:"h-hidden",createEditor:function(d){this.options.renderRightLinkWithIcon||this.initDeviceChecks();this.editField=$(d.multiline?"<textarea/>":'<input type="text"/>').css("resize","none").addClass(this.hiddenCssClass);d.editFieldAutoWidth&&this.editField.width(this.viewField.width());d.useEditFieldCssClass&&this.editField.addClass(d.editFieldCssClass);!d.multiline&&d.maxLength&&this.editField.attr("maxlength",d.maxLength);d.multiline&&d.maxLength&&
this.editField.maxlength({max:d.maxLength});this.editHidden=this.isGetInitialTextFromHidden?$(this.hiddenField):$('<input type="hidden"/>').val(this.viewField.text());this.setNewText(d.ignoreViewModeText?"":$.trim(this.editHidden.val()));this.viewField.after(this.editField);this.isGetInitialTextFromHidden||this.viewField.after(this.editHidden);d.multiline&&d.autoResize&&this.editField.autogrow();this.switchToViewMode(!1);this.editField.removeClass(this.hiddenCssClass).keyup({self:this},this.editFieldKeyUp).keypress({self:this},
this.editFieldKeyPress).on("paste",$.proxy(this.hideWatermark,this)).focus({self:this},this.editFieldFocus).blur({self:this},this.editFieldBlur)},setNewText:function(d){this.options.ignoreViewModeText||this.options.supressOriginalBehaviour||(d?this.options.multiline?this.viewField.html(CommonFunctions.replaceLineBreaksWithBrTags(d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;"))):this.viewField.text(d):this.viewField.html(""));this.editField||this.createEditor(this.options);
this.editField.val(d);this.editHidden.val(d)},fixSize:function(){if(this.options.forceContainerSize){var d=this.viewField.parent();d.css("width","0px");setTimeout(function(){d.css("width","auto")},10)}},switchToViewMode:function(d,e){this.editField.hide();d&&this.options.highlightOnSave?this.viewField.fadeIn("slow"):this.viewField.show();this.toggleActivatorTooltip(!0);this.fireChangeMode(!1,d,e);this.toggleRightLinkMode(!0)},switchToEditMode:function(){this.editField||this.createEditor(this.options);
this.isViewMode()&&(this.viewField.hide(),this.editField.show(),this.options.editFieldDisplayInline&&this.editField.css("display","inline"),this.toggleActivatorTooltip(!1),this.fireChangeMode(!0,!1),this.editField.focus(),this.toggleRightLinkMode(!1))},fireChangeMode:function(d,e,f){if(this.onChangeModeFunction){var c=this;setTimeout(function(){c.onChangeModeFunction({isEditMode:d,isNewTextSaved:e,actualText:f,source:c.viewField,currentOptions:c.options,userData:c.userData})})}this.fixSize()},isViewMode:function(){return this.editField.is(":hidden")},
updateText:function(){var d=this;d.updateValue();var e={isUpdateSuccess:!0,stopOnEdit:!1,actualText:d.isWatermarkMode?"":d.editField.val(),source:d.viewField,currentOptions:d.options,userData:d.userData};if(e.actualText===d.editHidden.val())setTimeout(function(){d.switchToViewMode(!1)},d.options.renderRightLinkWithIcon?100:0);else if(d.toggleEditField(!1),d.onEditFunction)d.onEditFunction(e,$.proxy(d.onUpdateComplete,d));else setTimeout(function(){d.onUpdateComplete(e)})},onUpdateComplete:function(d){this.toggleEditField(!0);
d.isUpdateSuccess?(this.setNewText(d.actualText),this.switchToViewMode(!0,d.actualText)):d.stopOnEdit||this.rollbackText()},rollbackText:function(){this.editField.val(this.editHidden.val());this.switchToViewMode(!1)},toggleEditField:function(d){this.editField.prop("disabled",!d)},toggleActivatorTooltip:function(d){this.editModeActivator.css("cursor",d?"pointer":"default");this.options.useClickToEditToolTip&&this.editModeActivator.attr("title",d?this.options.clickToEditToolTip:null)},isEnterKey:function(d){return d.which===
CommonConstants.keyCodes.enter&&!d.shiftKey},isEnterKeyAndNeedToSubmit:function(d){return this.options.submitOnEnter&&d.which===CommonConstants.keyCodes.enter&&!d.shiftKey},showWatermark:function(){!this.options.useWatermark||this.isWatermarkMode||this.editField.val()||(this.options.useWatermarkCssClass&&this.editField.addClass(this.options.watermarkCssClass),this.editField.val(this.options.watermark),this.isWatermarkMode=!0)},hideWatermark:function(){this.options.useWatermark&&this.isWatermarkMode&&
(this.options.useWatermarkCssClass&&this.editField.removeClass(this.options.watermarkCssClass),this.editField.val(""),this.isWatermarkMode=!1)},editModeActivatorKeyDown:function(d){var e=d.data.self;e.fireClickByKeyDown(d,e.editModeActivator)},rightLinkKeyDown:function(d){var e=d.data.self;e.fireClickByKeyDown(d,e.editLink)},fireClickByKeyDown:function(d,e){d.which===CommonConstants.keyCodes.enter&&(d.preventDefault(),setTimeout(function(){e.click()},400))},editFieldFocus:function(d){d=d.data.self;
var e=d.editField.get(0);d.showWatermark();CommonFunctions.setFocusTo(e,!d.isWatermarkMode);d.options.highlightOnFocus&&(d.isIos?e.setSelectionRange(0,e.value.length):d.editField.select());d.options.multiline&&d.options.autoResize&&d.editField.change()},editFieldBlur:function(d){d.data.self.updateTextOnBlur();d.stopPropagation()},updateTextOnBlur:function(){this.editField.prop("disabled")||(this.hideWatermark(),this.updateText())},editFieldKeyUp:function(d){var e=d.data.self;if(!e.isViewMode()){if(e.editField.prop("disabled"))return!0;
if(d.which===CommonConstants.keyCodes.escape)e.rollbackText();else if(e.isEnterKey(d)){if(e.options.multiline&&!e.isEnterKeyAndNeedToSubmit(d))return!0;e.updateText();if(e.isEnterKeyAndNeedToSubmit(d))return d.stopPropagation(),!1}else e.isIos||e.isAndroidDevice||e.updateValue()}return!0},updateValue:function(){if(null!=this.options.blockedCharacters&&0<this.options.blockedCharacters.length){for(var d=this.editField.val(),e=d,f=this.options.blockedCharacters.length,c=0;c<f;c++)if(this.options.blockedCharacters[c])for(;-1<
d.indexOf(this.options.blockedCharacters[c]);)d=d.replace(this.options.blockedCharacters[c],"");d!==e&&this.editField.val(d)}},editFieldKeyPress:function(d){var e=d.data.self;e.hideWatermark();e.options.multiline||!e.isEnterKey(d)||e.isEnterKeyAndNeedToSubmit(d)||d.preventDefault();return!e.isEnterKeyAndNeedToSubmit(d)},initDeviceChecks:function(){this.isAndroidDevice=(this.isIos=CommonFunctions.isIos())?!1:CommonFunctions.isAndroidDevice()},rightLinkClick:function(d){var e=d.data.self;!e.editField||
e.isViewMode()?e.switchToEditMode():e.isIos&&e.updateTextOnBlur();d.preventDefault()},toggleRightLinkMode:function(d,e){this.editLink.toggleClass(this.options.rightLinkEditModeCssClass,!d).prop("title",d?this.options.clickToEditToolTip:this.options.clickToSaveToolTip);this.isIos||this.isAndroidDevice||this.editLink.toggleClass(this.options.rightLinkViewModeCssClass,d);d&&!e&&this.editLink.focus().blur()},getEditFieldText:function(){return this.editField.val()}};
function CodeContracts(){return{require:function(d,e){if(!objectState.isBoolean(d)||objectState.isNullOrUndefined(e))throw"invalid contract";if(!d)if(objectState.isFunction(e))e();else throw e;}}}var contract=CodeContracts();
function ColorPicker(d){function e(a){a=$(a).find("input:hidden:first").val();c(a)}function f(){var a=m.find("li."+h.settings.cssClasses.selected+" input:hidden:first").val();c(a)}function c(a){l.trigger(h.settings.clientEvents.colorOver,a)}function a(a){a.which===CommonConstants.keyCodes.escape&&(f(),b());return!0}function b(a){k.hide();n.hide();a&&l.focus()}function g(){n=$("<div></div>").addClass(h.settings.cssClasses.popupTop).appendTo("form").keydown(function(b){return a(b||window.event)});q=
l.clone(!1).appendTo(n).click(function(a){b();return!1});k=$("<div></div>").addClass(h.settings.cssClasses.popup).addClass(h.settings.cssClasses.customPopup).appendTo("form").keydown(function(b){return a(b||window.event)});m=$("<ul></ul>").appendTo(k);for(var c=0;c<h.settings.colorKeys.length;c++){var d=h.settings.colorKeys[c],g=$("<li></li>").append($('<input type="hidden" />').val(d)).append($("<a></a>").attr("href","#").html("&nbsp;").addClass(h.settings.colors[d].PickerColorCssClass)).appendTo(m);
d==h.settings.selectedColorKey&&g.addClass(h.settings.cssClasses.selected)}}window[d]=this;var h=this,l,k,m,n,q;h.initialize=function(){l=h.controls.pickerLink;g();$(document).click(function(a){a=a?a:window.event;var c=a.srcElement||a.target;!k.length||k.is(":hidden")||c==l.get(0)||$(c).parents().filter("#"+l.prop("id")).length||(c=k.offset(),a.clientX>c.left&&a.clientX<c.left+k.width()&&a.clientY>c.top&&a.clientY<c.top+k.height()||b())}).on("closeColorPicker",function(){b(!1)});var a=m.find("li");
a.find("a").click(function(d){d=$(this.parentNode);var g=d.find("input:hidden:first").val();b();a.removeClass(h.settings.cssClasses.selected);d.addClass(h.settings.cssClasses.selected);c(g);l.trigger(h.settings.clientEvents.colorChange,g);return!1}).mouseenter(function(a){e(this.parentNode)}).mouseleave(function(a){f()}).focusin(function(a){e(this.parentNode)}).focusout(function(a){f()});l.click(function(a){a.preventDefault();$(document).click();k.is(":hidden")?(a=l.offset(),k.css({top:a.top+l.height()-
1+"px",left:a.left-k.width()+l.width()+3+"px"}).show(),a=k.offset(),n.show().css({top:a.top-n.height()+"px",left:a.left+k.width()-n.width()+"px"}),q.focus()):b()})};h.getColorByKey=function(a){return h.settings.colors[a].RepaintColorCssClass};return h}window.Array.removeElements=function(d,e){for(var f,c=[].concat(e),a=c.length,b;a&&d.length;)for(f=c[--a];-1!=(b=d.indexOf(f));)d.splice(b,1);return d};String.format||(String.format=function(d){return CCL.CommonFunctions.formatString.apply(this,arguments)});
var CCL;
(function(d){(function(d){})(d.CommonConstants||(d.CommonConstants={}));(function(d){d.setFocusTo=function(d,c){if(d.setSelectionRange){d.focus();var a=c?d.value.length:0;d.setSelectionRange(a,a)}else d.createTextRange&&(a=d.createTextRange(),c&&a.collapse(!1),a.select())};d.addIdToHidden=function(d,c){if(d&&c){for(var a=document.getElementById(d),b=a.value.split(","),g=!1,e=0;e<b.length;e++)if(c==b[e]){g=!0;break}g||(a.value+=c+",")}};d.removeIdFromHidden=function(d,c){if(d&&c){var a=document.getElementById(d);if(a&&
a.value){for(var b=a.value.split(","),g="",e=0;e<b.length;e++)c!=b[e]&&0<b[e].length&&(g+=b[e]+",");a.value=g}}};d.setupDropDownMenu=function(d,c,a){var b=d?"touchstart":"click";a.find("a").click(function(){a.hide()});c.on(b+" keydown",function(c){c.type!==b&&c.which!==CommonConstants.keyCodes.arrowDown&&c.which!==CommonConstants.keyCodes.enter||a.toggle()});$(document).on(b+" "+CommonTriggers.clickInInnerFrame,function(b){if(a.is(":visible")){var d=b.target,e=$(d);b=d===c.get(0)||1===e.closest(c).length;
d=!b&&(d===a.get(0)||1===e.closest(a).length);b||d||a.hide()}})};d.safeExecuteFunction=function(d){if(d)try{return d()}catch(c){}return!0};d.isPlainText=function(d){var c=RegExp("^s*<[a-z]+>[^<]*</[a-z]+>(s|\n)*$","ig");d=d.replace(/<br((\s*)|(\s[^>]*))\/?>/gi,"");d=d.replace(/<\/p>\s*<p(\s+[^>]*)?>/gi,"\n");return-1==d.indexOf("<")||null!=d.match(c)};d.isIos=function(){return null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)};d.isAndroidDevice=function(){return null!=navigator.userAgent.match(/Android/i)};
d.isAndroidBrowser=function(){return $("body").hasClass("h-android")};d.isIe=function(){return-1!==navigator.userAgent.indexOf("MSIE")||/rv:11.0/i.test(navigator.userAgent)};d.setEmbeddedObjectsVisibility=function(f,c,a){c&&c.find("applet").toggle(f);a&&(c=a.find("iframe,object"),d.isIe()?c.toggle(f):c.css("visibility",f?"visible":"hidden").toggleClass("h-visibility-hidden",!f))};d.measureKpi=function(f,c,a,b){$.ajax({type:"POST",url:f,data:{measureSection:c,measurement:a,measureContext:b},error:d.alertAjaxError})}})(d.CommonFunctions||
(d.CommonFunctions={}));(function(d){})(d.CommonWindowMessages||(d.CommonWindowMessages={}));(function(d){})(d.CommonTriggers||(d.CommonTriggers={}))})(CCL||(CCL={}));var CommonConstants=CCL.CommonConstants,CommonFunctions=CCL.CommonFunctions,CommonWindowMessages=CCL.CommonWindowMessages,CommonTriggers=CCL.CommonTriggers;
(function(d){d.fn.setCursorPosition=function(d){this.each(function(f,c){if(c.setSelectionRange)c.setSelectionRange(d,d);else if(c.createTextRange){var a=c.createTextRange();a.collapse(!0);a.moveEnd("character",d);a.moveStart("character",d);a.select()}});return this};d.fn.scrollMinimal=function(){var e=this.offset().top,f=this.outerHeight(!0),c=d(window).scrollTop(),a=d(window).height();e<c?d(window).scrollTop(e):e+f>c+a&&d(window).scrollTop(e-a+f)};d.fn.toggleHyperlink=function(d){d?(this.removeAttr("disabled"),
this.removeData("disabled")):(this.attr("disabled","disabled"),this.data("disabled",!0));return this};d.fn.getIfHyperLinkEnabled=function(){return"disabled"!==this.attr("disabled")&&!this.data("disabled")};d.fn.maxlength=function(e){e=d.extend({max:200},e);return this.each(function(){var f=d(this);f.keypress(function(c){var a=e.max,b=d(c.target),g=c.which;(g>=CommonConstants.keyCodes.space||g===CommonConstants.keyCodes.enter)&&b.val().length>=a&&c.preventDefault()});f.change(function(c){var a=e.max;
c=d(c.target);c.val().length>a&&(a=c.val().substr(0,a),c.val(a))})})};d.fn.tclick=function(d){this.on("touchstart",function(f){d.call(this,f);f.stopPropagation();f.preventDefault()});this.on("click",function(f){d.call(this,f)});return this}})(jQuery);
function ContextDialog(d,e){var f=this,c=$(d),a,b={setFocus:!0,width:300,maxWidth:null,showArrow:!0,arrowOffset:"auto",align:"auto",valign:"auto",marginLeft:10,marginRight:10,marginTop:-40,marginBottom:40,toggleElement:null,customScripts:{beforeCloseDialog:null},zIndex:999,closeWithOutsideClick:!0,scrollToLastWindowOnClose:!0,allowAccessToParentWindow:!0,expandParentFrame:!0},g=c.wrap("<div class='ccl-context-dialog'></div>").parent(),h=g.parent(),l=$("<header class='ccl-context-dialog-header'></header>").prependTo(g),
k=$("<a class='ccl-context-dialog-close' href='javascript:void(0);'>&#215;</a>").appendTo(g),m=$("<h2></h2>").appendTo(l),n=$("<div class='ccl-context-dialog-arrow'></div>").prependTo(g),q,s=$("html"),t=$("body"),p=$(window),r,z,y=CommonFunctions.isAndroidBrowser();f.dispose=function(){c.removeClass("ccl-context-dialog-content");c.insertBefore(g);g.remove();f=null};f.openDialogAt=function(d,e,l){function k(){var a,c,h=g.outerWidth(),f=g.outerHeight(),s=p.scrollLeft(),q=p.scrollTop(),t=p.width()+s,
q=p.height()+q;"auto"==b.align?c=t-d>h+b.marginLeft?d+b.marginLeft:d-h-b.marginRight:"center"==b.align?c=d-h/2:"left"==b.align?c=d-h-b.marginRight:"right"==b.align&&(c=d+b.marginLeft);"auto"==b.valign?a=q-b.marginBottom-e>f+b.marginTop?e+b.marginTop:q-f-b.marginBottom:"top"==b.valign?a=e-f-b.marginBottom:"center"==b.valign?a=e-f/2:"bottom"==b.valign&&(a=e+b.marginTop);l||(c=c<s?s:c);g.css({top:a,left:c});var r,B;a<e&&a+f>e?(r="top",B=Math.max(0,Math.min(e-a,f-12)),c+h<d?g.addClass("left"):d<c&&g.addClass("right")):
c<d&&c+h>d&&(r="left",B=Math.max(0,Math.min(d-c,h-12)),a>e?g.addClass("bottom"):a+f<e&&g.addClass("top"));"auto"==b.arrowOffset?"top"==r?n.css({top:B,left:""}):"left"==r&&n.css({top:"",left:B}):n.css({top:"",left:""});l&&(c=g.outerWidth()/2,0<c-m&&(g.css({left:b.marginLeft-m}),n.css({left:m-b.marginLeft+d})),h=c-(z-m-d-b.marginRight),0<h&&(g.css({left:d-c-h-b.marginRight}),n.css({left:c+h+b.marginRight})),y||(g.css("max-height",""),a=p.height()-a-b.marginBottom,0<a&&g.height()>a&&g.css("max-height",
a)))}l?d+=h.width():(d||(d=0),e||(e=0));$(document).trigger("contextdialog:show",[c]);q=p.scrollTop();f.isMobileView=p.width()<=CommonConstants.mediaScreenSizes.mobile;s.addClass("ccl-context-dialog-has-overlay");g.toggleClass("show-arrow",b.showArrow);g.removeClass("top bottom left right");b.width&&g.outerWidth(b.width);b.maxWidth&&g.css("max-width",b.maxWidth+"px");var m=h.position().left,z=p.width();if(f.isMobileView&&l)g.addClass("bottom"),g.css({left:b.marginLeft-m,width:z-b.marginLeft-b.marginRight}),
n.css({left:m-b.marginLeft+d});else if(f.isMobileView){if(b.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.expandContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight()),b.allowAccessToParentWindow&&window.parent&&$(window.parent).width()>CommonConstants.mediaScreenSizes.mobile&&k(),window.top!=window)try{var da=$(window.top).width();da<p.width()&&t.outerWidth(da,!0)}catch(ga){}}else k();g.show();
r=window.parent&&b.allowAccessToParentWindow?window.parent.document.activeElement:document.activeElement;b.setFocus&&b.focusTarget&&b.focusTarget.focus();a=!0};f.openDialog=function(b){if(!a){var c=0,d=0;b&&("touchend"==b.type&&(c=b.originalEvent.changedTouches[0],b.pageX=c.pageX,b.pageY=c.pageY),c=b.pageX,d=b.pageY,0>=c&&0>=d&&b.target&&(d=$(b.target).offset(),c=d.left+b.target.offsetWidth/2,d=d.top+b.target.offsetHeight/2),b.stopPropagation());f.openDialogAt(c,d)}};f.closeDialog=function(){CommonFunctions.safeExecuteFunction(b.customScripts.beforeCloseDialog);
f.isMobileView&&b.expandParentFrame&&(CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(CommonWindowMessages.MessageNames.collapseContentAreaFrame)),IframeResizer.reportSetIframeDefaultHeight(),t.width(""));g.hide();s.removeClass("ccl-context-dialog-has-overlay");b.scrollToLastWindowOnClose&&p.scrollTop(q);$(document).trigger("contextdialog:close",[c]);a=!1;b.scrollToLastWindowOnClose&&r&&r.focus()};f.setCloseFunction=function(a){f.closeDialog=a;k.unbind("click");
k.click(a)};f.setTitle=function(a){b.title=a;m.text(b.title)};f.setCloseLinkFunction=function(a){k.unbind("click");k.click(a)};f.showFooter=function(){z&&z.show()};f.hideFooter=function(){z&&z.hide()};f.showHeader=function(){l.show()};f.hideHeader=function(){l.hide()};f.toggleCloseLink=function(a){k.toggle(a)};f.isOpened=function(){return a};f.setBeforeCloseDialog=function(a){b.customScripts.beforeCloseDialog=a};f.onEscape=function(){k.trigger("click")};f.mainContainer=g;(function(){$.extend(b,e);
m.uniqueId();g.attr({role:"dialog","aria-labelledby":m.attr("id")});c.addClass("ccl-context-dialog-content");if(b.footerContent){var a=$("#"+b.footerContent);z=$("<footer class='ccl-context-dialog-footer'></footer>");z.appendTo(g);a.appendTo(z)}b.cssClass&&g.addClass(b.cssClass);g.css({"z-index":b.zIndex});f.setTitle(b.title);c.show();k.click(f.closeDialog)})();$(function(){function c(d){a&&0===$(d.target).closest(g).length&&!(b.toggleElement&&0<$(d.target).closest(b.toggleElement).length)&&d.pageX<
$(window).width()&&b.closeWithOutsideClick&&f.closeDialog(d)}function d(b){if(a&&b.which===CommonConstants.keyCodes.escape)f.onEscape()}function e(a){a.each(function(a,b){b.addEventListener?(b.addEventListener(l,c,!0),b.addEventListener("keydown",d,!0)):($(b).on(l,c),$(b).on("keydown",d))})}var h=$(window);window.parent&&b.allowAccessToParentWindow&&(h=h.add(window.parent));var l=window.CommonFunctions.isIos()?"touchstart":"mousedown";e(h);$("iframe").on("load",function(){try{var a=$(this.contentWindow||
this.contentDocument);e(a)}catch(b){}});$(document).on(CommonTriggers.clickInInnerFrame,function(){a&&f.closeDialog()})});return f}
function CssModal(d){function e(){return r.closeButton.getIfHyperLinkEnabled()&&(!y||y())}function f(){return window.location.hash.replace("#","")===q?!0:!1}function c(){$(document).off("cssmodal:hide",c);a()}function a(){if(f()&&!t){if(CssModal.IsAnyDialogOpened()){$(document).on("cssmodal:hide",c);return}t=!0;CommonFunctions.safeExecuteFunction(z.beforeOpenDialog);if(f()&&t){if(p.userInputControlsSelector){var a=$(p.userInputControlsSelector);CommonFunctions.setEmbeddedObjectsVisibility(!1,a,a)}ba=
B.scrollTop();ca.addClass(CssModal.commonSettings.cssClasses.overlay);p.isIos&&ca.addClass(CssModal.commonSettings.cssClasses.overlayIos);m(CommonWindowMessages.MessageNames.expandContentAreaFrame);if(window.top!=window)try{var b=$(window.top).width();b<B.width()&&na.outerWidth(b,!0)}catch(d){}$(E).removeClass(CssModal.commonSettings.cssClasses.isActive);r.container.addClass(CssModal.commonSettings.cssClasses.isActive);E=r.container.get(0);CssModal.modes.ajaxDynamically===s&&h();CssModal.modes.iframeDynamically===
s&&k();E&&(J=document.activeElement,E.focus());$(document).trigger("cssmodal:show",[E,q]);CssModal.modes.ajaxDynamically!==s&&CssModal.modes.iframeDynamically!==s&&g();r.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow);p.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded})}CommonFunctions.safeExecuteFunction(z.afterOpenDialog)}if(!f()&&t){t=!1;CommonFunctions.safeExecuteFunction(z.beforeCloseDialog);
p.userInputControlsSelector&&(a=$(p.userInputControlsSelector),CommonFunctions.setEmbeddedObjectsVisibility(!0,a,a));r.contentContainer.removeClass(CssModal.commonSettings.cssClasses.webkitOverflow);ca.removeClass(CssModal.commonSettings.cssClasses.overlay);p.isIos&&ca.removeClass(CssModal.commonSettings.cssClasses.overlayIos);B.scrollTop(ba);if(E){if(CssModal.modes.ajaxDynamically===s||CssModal.modes.iframeDynamically===s)r.contentContainer.find("iframe").attr("src","about:blank"),setTimeout(l,100);
$(E).removeClass(CssModal.commonSettings.cssClasses.isActive);p.isNestedDialog||(m(CommonWindowMessages.MessageNames.collapseContentAreaFrame),na.width(""));$(document).trigger("cssmodal:hide",[E,q]);E=null}n.setCloseConfirmation(null);J&&J.focus();p.isNestedDialog&&CommonFunctions.makePostMessageCall(window.parent,{messageName:CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed});CommonFunctions.safeExecuteFunction(z.afterCloseDialog)}}function b(){da&&clearTimeout(da);da=setTimeout(g,
p.resizeTimeoutInMilliseconds)}function g(){if(f()&&t)if(r.innerContainer.removeAttr("style"),r.contentContainer.removeAttr("style"),B.width()>CommonConstants.mediaScreenSizes.mobile&&!p.isNestedDialog){if(n._maximized)r.innerContainer.css({width:$(window).width(),height:$(window).height(),left:"0",top:"0"});else if(p.preferredWidth&&0<p.preferredWidth&&r.innerContainer.width(Math.min(p.preferredWidth,B.width()-40)),p.preferredHeight&&0<p.preferredHeight){var a=r.contentContainer.outerHeight(!0)-
r.contentContainer.height();r.contentContainer.outerHeight(p.preferredHeight+a,!0)}r.contentContainer.css({width:p.minContentWidth&&0<p.minContentWidth?p.minContentWidth:void 0,minWidth:p.minContentWidth&&0<p.minContentWidth?p.minContentWidth:void 0,minHeight:p.minContentHeight&&0<p.minContentHeight?p.minContentHeight:void 0});a=r.innerContainer.height()-r.headerContainer.outerHeight()-r.footerContainer.outerHeight();if(n._maximized)r.contentContainer.outerHeight(a);else{r.contentContainer.outerHeight()-
1>a&&r.contentContainer.outerHeight(a);var a=r.innerContainer.height()/2,b=r.innerContainer.width()/2;r.innerContainer.css({left:"50%","margin-left":-1*b,"margin-top":-1*a,top:"50%"})}}else{var c=0;r.innerContainer.children().not(r.contentContainer).each(function(){p.hideFooterInMobileView&&$(this).is(r.footerContainer)||(c+=$(this).outerHeight())});r.contentContainer.outerHeight(r.innerContainer.height()-c)}}function h(){r.contentContainer.empty();r.contentContainer.html(p.loadingText);if(CssModal.modes.ajaxStatically===
s)r.contentContainer.load(p.ajaxUrl,g);else if(CssModal.modes.ajaxDynamically===s){var a=void 0!==ga?$.param(ga,!0):{};$.ajax({type:"GET",url:p.ajaxUrl,data:a,success:function(a){r.contentContainer.html(a);g()},error:function(a,b,c){CommonScripts.jQueryWebServiceErrorHelper(a,b,c)}})}}function l(){r.contentContainer.html("")}function k(){r.contentContainer.empty().append($("<iframe/>").attr("src",p.iframeUrl).addClass(CssModal.commonSettings.cssClasses.iframe).attr("seamless","seamless").attr("frameborder",
"0").attr("title",p.iframeTitle).on("load",function(){g()}))}function m(a){p.expandToAllWindowSize&&(CommonFunctions.makePostMessageCall(window.top,{messageName:a}),IframeResizer.reportSetIframeDefaultHeight())}window[d]=this;var n=this,q=d,s,t=!1,p,r,z,y,J,E,ba,B=$(window),ca=$("html"),na=$("body"),da,ga={};n.initialize=function(c,d,g){z=d;p=g;r=$.extend(c,{closeButton:$("."+p.closeButtonClass)});s=p.mode;$(document).keyup(function(a){n.keyUp(a)});CssModal.modes.ajaxStatically===s&&h();CssModal.modes.iframeStatically===
s&&k();B.on("hashchange",a);B.on("resize",b);B.on("load",a);r.closeButton.click(e);CssModal.instances.push(this);if(CssModal.modes.iframeStatically===s||CssModal.modes.iframeDynamically===s)CommonFunctions.attachPostMessageEventListener($(window),CommonWindowMessages.MessageNames.nestedCssModalDialogExpanded,function(){r.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!1);r.innerContainer.toggleClass(p.mobileExpandedNestedContentClass,!0)}),CommonFunctions.attachPostMessageEventListener($(window),
CommonWindowMessages.MessageNames.nestedCssModalDialogCollapsed,function(){r.contentContainer.toggleClass(CssModal.commonSettings.cssClasses.webkitOverflow,!0);r.innerContainer.toggleClass(p.mobileExpandedNestedContentClass,!1)})};n.getId=function(){return q};n.openDialog=function(a){n._maximized=a;window.location.hash="#"+q;a?(r.innerContainer.addClass("ccl-cssmodal-modal-maximized"),r.innerContainer.removeClass("ccl-cssmodal-modal-inner")):(r.innerContainer.addClass("ccl-cssmodal-modal-inner"),
r.innerContainer.removeClass("ccl-cssmodal-modal-maximized"))};n.keyUp=function(a){f()&&a.which===CommonConstants.keyCodes.escape&&e()&&CssModal.closeDialog()};n.setContentMinSize=function(a,b){p.minContentWidth=a;p.minContentHeight=b;g()};n.setPreferredSize=function(a,b){0<a&&(p.preferredWidth=a);0<b&&(p.preferredHeight=b);g()};n.clearContent=function(){r.contentContainer.empty()};n.setTitle=function(a){if(a){var b=$("h2",r.headerContainer);b&&b.text(a)}};n.setAjaxUrl=function(a,b,c){p.ajaxUrl=a;
ga=b;c&&h()};n.setIframeUrl=function(a,b){p.iframeUrl=a;b&&k()};n.setIframeTitle=function(a){p.setIframeTitle=a};n.setCloseConfirmation=function(a){y=a};n.toggleDialogCloseButton=function(a){r.closeButton.toggleHyperlink(a)};n.getFooter=function(){return r.footerContainer};n.adjustWindowSize=function(){g()};n.setMode=function(a){s=a};n.getIsOpened=function(){return t};return n}CssModal.commonSettings=void 0;CssModal.modes=void 0;CssModal.closeDialog=function(){window.location.hash="!"};
CssModal.instances=[];CssModal.IsAnyDialogOpened=function(d){for(var e=0;e<CssModal.instances.length;e++)if((!d||d(CssModal.instances[e].getId()))&&CssModal.instances[e].getIsOpened())return!0;return!1};
function DatePicker(d){function e(a){if("date"===jQuery.type(a))return!0;try{if(1E3>$.datepicker.parseDate(l.dateFormat,a,{shortYearCutoff:99}).getFullYear())return!1}catch(b){return!1}return!0}function f(){return!h.controls.dateInput.val()||h.controls.dateInput.val()===l.waterMark}function c(){h.controls.dateInput.val(l.waterMark).removeClass(k.watermark).addClass(k.watermark)}function a(){!t&&p&&(t=window[h.settings.timeSlotPickerClientInstanceName]);return t}function b(a,b){if((m||r)&&h.getAvailableDatesFunction){var c=
12==b?new Date(a,12,6):new Date(a,b,6),c={startDate:JSON.stringify(1==b?new Date(a,-1,25):new Date(a,b-2,25)),endDate:JSON.stringify(c),filterId:z};h.getAvailableDatesFunction(c);n=c.allowedDates}}function g(a,b){if(q&&h.getCssClassesForCalendarDatesFunction){var c=12==b?new Date(a,12,6):new Date(a,b,6),c={startDate:JSON.stringify(1==b?new Date(a,-1,25):new Date(a,b-2,25)),endDate:JSON.stringify(c)};h.getCssClassesForCalendarDatesFunction(c);s=c.customCssClassesForCalendarDates}}window[d]=this;var h=
this,l,k,m,n,q,s,t,p,r,z,y;h.initialize=function(){l=h.settings;k=l.cssClasses;q=l.useCustomCssClassesForCalendarDates;m=l.useRestrictedDateSelection;p=!!h.settings.timeSlotPickerClientInstanceName;DatePickerPool.add(h.controls.dateInput,h);h.controls.dateInput.datepicker({showOn:l.hideInput?"button":"both",buttonImage:"",buttonImageOnly:!1,showButtonPanel:!0,showOtherMonths:!0,selectOtherMonths:!0,defaultDate:l.defaultDate,dateFormat:l.dateFormat,firstDay:l.firstDayOfWeek,waterMark:l.waterMark,monthNames:l.monthNames,
monthNamesShort:l.abbreviatedMonthNames,dayNames:l.dayNames,dayNamesShort:l.abbreviatedDayNames,dayNamesMin:l.abbreviatedDayNames,closeText:l.closeText,prevText:l.previousMonthText,nextText:l.nextMonthText,currentText:l.todayText,disabled:l.disabled,showWeek:l.showWeek,weekHeader:l.weekHeader,disableWeekSelection:l.DisableWeekSelection,beforeShow:function(a,c){a=$(a);a.val()==$.datepicker._get(c,"waterMark")&&a.val("").removeClass(k.watermark);var d=a.datepicker("getDate");null==d&&(d=new Date);(m||
r)&&b(d.getFullYear(),d.getMonth()+1);q&&g(d.getFullYear(),d.getMonth()+1);y=a.val();setTimeout(function(){a.trigger("update")},1)},onChangeMonthYear:function(a,c,d){b(a,c);g(a,c);setTimeout(function(){$(d.input).trigger("update")},1)},beforeShowDay:function(a){if(!m&&!r&&!q||void 0==n&&void 0==s)return[!0];a=[a.getFullYear(),a.getMonth()+1,a.getDate()].join("_");var b=[!0];(m||r)&&void 0!=n&&(b=void 0==n[a]?[!1,k.disabled]:1==n[a]?[!0,k.avalaible]:[!1,k.busy]);q&&void 0!=s&&void 0!=s[a]&&$.each(s[a],
function(a,c){b[1]=a;b[2]=c});return b},onClose:function(b,c){var d=$(this);d.val()||(d.val($.datepicker._get(c,"waterMark")).addClass(k.watermark),p&&a().resetTimes());h.relatedWithDateInput&&h.relatedWithDateInput.isLater&&(d=window[h.relatedWithDateInput.id].getDateAsString(),!b||""!=d&&d!=y||window[h.relatedWithDateInput.id].setDate(b));y=b}}).on("update",function(){if(h.settings.showWeek)if(h.settings.disableWeekSelection)$("td.ui-datepicker-week-col").addClass(k.disabled).wrapInner("<span></span>");
else $("td.ui-datepicker-week-col").wrapInner('<a href="javascript:void(0);"></a>').on("click",function(){var a,b;h.relatedWithDateInput?(h.relatedWithDateInput.isLater?($(this).next().click(),b=a=h.controls.dateInput.datepicker("getDate"),b.setDate(a.getDate()+6)):(a=$(this).parent().find("td"),a.get(a.length-1).click(),b=a=h.controls.dateInput.datepicker("getDate"),b.setDate(a.getDate()-6)),window[h.relatedWithDateInput.id].setDate(b)):$(this).next().click()});l.hideTodayButton&&$(".ui-datepicker-current").hide()}).trigger("update");
$("#ui-datepicker-div").hide();l.hideInput&&h.controls.dateInput.hide();f()&&c();h.controls.dateInput.change(function(){if(h.onDateSelectedFunction){var a={dateText:h.getDateAsString(),dateFilterId:r?z:0};h.onDateSelectedFunction(a)}}).keypress(function(a){a.which===CommonConstants.keyCodes.enter&&(h.controls.dateInput.change(),a.preventDefault())});m&&h.controls.dateInput.keypress(function(a){a.which!==CommonConstants.keyCodes.del&&a.which!==CommonConstants.keyCodes.backspace&&a.preventDefault()})};
h.getDateAsString=function(){if(f())return"";var a=h.controls.dateInput.val();return e(a)?a:""};h.isDateValid=function(){if(f())return!1;var a=h.controls.dateInput.val();return e(a)};h.getDate=function(){return f()?void 0:h.controls.dateInput.datepicker("getDate")};h.setDate=function(a){a&&e(a)?(h.controls.dateInput.removeClass(k.watermark),h.controls.dateInput.datepicker("setDate",a)):c()};h.setDefaultDate=function(a){var b=h.getDate();h.controls.dateInput.datepicker("option","defaultDate",a);h.setDate(b);
f()&&c()};h.clearDateAndTime=function(b){f()||b||h.setDate("");p&&a().resetTimes()};h.setFilteringMode=function(a){r=a};h.setFilterId=function(a){z=a};return h}
(function(d,e){function f(a,b){b=b?b:0;if(b<a.length)for(var d=c.length-1;0<=d;d--)if(c[d].jQueryInput.get(0)===a.get(b))return c[d].datePickerFunction;return e}var c=[];d.DatePickerPool={add:function(a,b){c.push({jQueryInput:a,datePickerFunction:b})},getDateAsString:function(a){return(a=f(a))?a.getDateAsString():""},isDateValid:function(a){return(a=f(a))?a.isDateValid():!1},getDate:function(a){return f(a)?f(a).getDate():e},setDate:function(a,b){for(var c=a.length-1;0<=c;c--){var d=f(a,c);d&&d.setDate(b)}}}})(window);
function DateTimeActivation(d){function e(){b||(b=window[f.settings.datePickerClientInstanceName]);return b}window[d]=this;var f=this,c,a,b,g,h,l,k;f.initialize=function(){c=f.settings;a=c.cssClasses;g=c.dateFilteringInUse;h=f.controls.selectActivationMode.parent();k=c.modes;l=!!c.timeSlotPickerClientInstanceName;f.controls.selectActivationMode.change(function(){var b=f.controls.selectActivationMode.val();f.controls.dateTimeControlsContainer.toggle(b!=k.empty&&b!=k.infinity);$("."+a.timeControlsContainer,
h).toggleClass(a.hiddenTimeControlsContainer,b!=k.date);f.controls.endOfDayLabel.toggle(b==k.endOfDay);var d=g&&b==k.filtering;f.controls.datePickerFilterHolder.toggle(d);e().setFilteringMode(d);g&&e().clearDateAndTime(b!=k.filtering);l&&window[c.timeSlotPickerClientInstanceName].toggle(b==k.filtering);if(f.onChangeActivationModeFunction)f.onChangeActivationModeFunction()});g&&(f.controls.filterDropDown.change(function(){var a=f.controls.filterDropDown.val();f.controls.filterHidden.val(a);e().clearDateAndTime();
e().setFilterId(a)}),e()&&(e().setFilterId(f.controls.filterHidden.val()),e().setFilteringMode(g&&f.controls.selectActivationMode.val()==k.filtering)))};f.getMode=function(){return f.controls.selectActivationMode.val()};f.isDateSelected=function(){return f.getMode()==(k.empty||k.infinity)?!1:e().isDateValid()};return f}
function Dialog(d){function e(){r&&(k.show(),c(),CommonFunctions.safeExecuteFunction(g.customScripts.afterOpenDialog),IframeResizer.reportSetIframeDefaultHeight(),r=!1)}function f(){l.scrollLeft(J);l.scrollTop(y);IframeResizer.reportSetIframeDefaultHeight();z=!1}function c(){var a=function(a,b,c,d){c=Math.max((a-c)/2,10);a<d&&(c+=b);return 0>c?0:c},b=$(document);k.offset({left:a(l.width(),l.scrollLeft(),k.width(),b.width()),top:a(l.height(),l.scrollTop(),k.height(),b.height())})}function a(){g.settings.useInProgressFunctionality?
(l.unload(function(){g.close()}),n.attr("title",g.settings.okButtonInProgressTitle),n.addClass(g.settings.inProgressCssClass),g.disableDialog(),setTimeout(function(){CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick);k.find("input,button").prop("disabled",!0)},100)):CommonFunctions.safeExecuteFunction(g.customScripts.afterOkClick)&&g.close()}function b(){CommonFunctions.safeExecuteFunction(g.customScripts.afterCancelClick)&&g.close()}window[d]=this;var g=this,h=$("#mask"),l=$(window),
k,m,n,q,s,t,p,r=!1,z=!1,y,J,E=CommonWindowMessages.MessageNames.contentAreaFrameHasExpanded,ba=CommonWindowMessages.MessageNames.contentAreaFrameHasCollapsed,B=!1;g.initialize=function(){k=g.controls.container;m=g.controls.iframe;n=g.controls.okButton;q=g.settings.showBackgroundMask;s=g.settings.useTransparentMask;t=g.settings.expandToAllWindowSize;p=g.settings.ignoreKeyDown;B=!t||window==window.top;k.css("z-index",g.settings.zIndex).keydown(function(a){return g.keyDown(a)}).keypress(function(a){return g.keyPress(a)});
g.controls.closeLink.click(function(){b();return!1}).keydown(function(a){return a.which===CommonConstants.keyCodes.enter?(b(),!1):!0});n.click(function(){a();return!1});g.controls.cancelLink.click(function(){b();return!1});t&&CommonFunctions.attachPostMessageEventListener(l,[E,ba],function(a){a.messageName===E&&r?e():a.messageName===ba&&z&&f()});g.settings.openDialogAfterLoading&&g.open()};g.openWithTitle=function(a){g.setNewTitle(a);g.open()};g.open=function(){r=!0;J=l.scrollLeft();y=l.scrollTop();
q&&(0==h.length&&(h=$("<div id='mask'></div>").appendTo("body").addClass(g.settings.maskCssClass)),h.css({opacity:s?"0":"0.5",filter:"alpha(opacity="+(s?"0":"50")+")","z-index":g.settings.backgroundMaskZIndex}),h.show());CommonFunctions.safeExecuteFunction(g.customScripts.beforeOpenDialog);B?e():t&&g.toggleContentAreaFrame(!0);setTimeout(e,100)};g.close=function(){z=!0;CommonFunctions.safeExecuteFunction(g.customScripts.beforeCloseDialog);q&&h.hide();k.hide();CommonFunctions.safeExecuteFunction(g.customScripts.afterCloseDialog);
B?f():t&&g.toggleContentAreaFrame(!1)};g.setupIframe=function(a,b,c,d){m.attr("width",b?b:m.attr("width")).attr("height",c?c:m.attr("height")).attr("scrolling",d?d:m.attr("scrolling"));g.setIframeSrc(a)};g.setIframeSrc=function(a){g.settings.frameLoadingText&&m.contents().find("body").empty().text(g.settings.frameLoadingText);document.getElementById(m.prop("id")).contentWindow.location.href=a};g.setNewAfterOkClickFunction=function(a){g.customScripts.afterOkClick=a};g.setNewAfterCancelClickFunction=
function(a){g.customScripts.afterCancelClick=a};g.setNewBeforeCloseDialogFunction=function(a){g.customScripts.beforeCloseDialog=a};g.setNewTitle=function(a){g.controls.titleContainer.text(a)};g.enableOrDisableOkButton=function(a){n.prop("disabled",!a)};g.disableDialog=function(){g.enableOrDisableOkButton(!1);g.controls.cancelLink.unbind("click").attr("disabled",!0);g.controls.closeLink.unbind("click").attr("disabled",!0);g.controls.closeLink.find("img").prop("src",g.settings.closeImageDisabledUrl)};
g.getContainerJQueryElement=function(){return k};g.focusOnCloseLink=function(){g.controls.closeLink.focus()};g.keyDown=function(c){if(c.target&&c.target.className&&0<=c.target.className.indexOf("cke_source")||p)return!0;c.which===CommonConstants.keyCodes.escape?b():c.which!==CommonConstants.keyCodes.enter||c.shiftKey||c.srcElement&&"A"===c.srcElement.tagName||a();return!0};g.keyPress=function(a){return!0};g.scrollWindowToCenter=function(){var a=k.offset().top,b=l.height(),c=k.height();window.scrollTo(0,
a-(b/2-c/2))};g.toggleContentAreaFrame=function(a){CommonFunctions.makePostMessageCall(window.top,new CommonWindowMessages.GenericMessage(a?CommonWindowMessages.MessageNames.expandContentAreaFrame:CommonWindowMessages.MessageNames.collapseContentAreaFrame));IframeResizer.reportSetIframeDefaultHeight()};g.setWidth=function(a){k.css("width",a);c()};return g}
function DivToggler(d){var e=this;e.settings=d;e.div=e.settings.divControl?$(e.settings.divControl):$("#"+e.settings.divId);void 0==e.settings.changeDivVisibility&&(e.settings.changeDivVisibility=!0);e.initialize=function(){e.settings.isCollapsed?e.collapseDiv():e.expandDiv();return e};e.afterToggle=function(){e.settings.afterToggle&&"function"===typeof e.settings.afterToggle&&e.settings.afterToggle()};e.toggleDiv=function(d){e.settings.isCollapsed?e.expandDiv():e.collapseDiv();d&&"function"===typeof d&&
d()};e.collapseDiv=function(){e.settings.changeDivVisibility&&e.div.hide();e.settings.isCollapsed=!0;e.afterToggle()};e.expandDiv=function(){e.settings.changeDivVisibility&&e.div.show();e.settings.isCollapsed=!1;e.afterToggle()};return e}
function DropboxUploaderCallbacks(d){var e={},f={getFunctionByName:function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;for(var b=c.split("."),d=b.pop(),e=0;e<b.length;e++)a=a[b[e]];return a[d]}}};e.controlInitialized=f.getFunctionByName(d?d.OnControlInitialization:void 0);e.fileSelected=f.getFunctionByName(d?d.OnFileSelected:void 0);e.fileSelectionCanceled=f.getFunctionByName(d?d.OnFileSelectionCanceled:void 0);e.fileUploadSuccess=f.getFunctionByName(d?d.OnFileUploadSuccess:void 0);
e.fileUploadError=f.getFunctionByName(d?d.OnFileUploadError:void 0);e.controlInitializationError=f.getFunctionByName(d?d.OnControlInitializationError:void 0);e.fileUploadAborted=f.getFunctionByName(d?d.OnFileUploadAborted:void 0);return e}
function DropboxUploaderControl(d,e,f,c,a,b,g,h){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(f.dropboxLink),"controls.dropboxLink is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'sender' is not defined");
contract.require(!objectState.isNullOrUndefined(b),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'fileList' is not defined");var l={},k={currentFileId:null,uploadInProgress:!1};if(void 0===h||null===h)h={};if(objectState.isNullOrUndefined(a))h.controlInitializationError&&h.controlInitializationError("dropbox is not available");else return k.getDropboxOptions=function(){return{success:k.onFileSelected,cancel:k.onFileSelectionCanceled,linkType:"direct",
multiselect:d.allowMultipleFiles&&l.isMultipleFilesModeEnabled}},k.delayRequest=function(a){var b={},c={callbacks:[],current:0,signalled:0,running:!1};b.data=a;c.runCallbacks=function(){if(!c.running){for(c.running=!0;c.current<c.signalled&&c.current<c.callbacks.length;)c.callbacks[c.current](b),c.current+=1;c.running=!1}};b.wait=function(a){c.callbacks.push(a);c.runCallbacks();return b};b.signal=function(){c.signalled+=1;c.runCallbacks()};return b},k.openUploadStateChannel=function(a,c){b.openChannel({onChannelOpened:c,
onSuccess:null,onFail:null,onProgress:k.onProgress,onAbort:k.onAbort})},k.getFileInfo=function(a){var b={};b.fileId=guidFactory.newGuid();1===a.length?(b.size=a[0].size,b.name=a[0].name):(b.size=a.reduce(function(a,b){return a+b.size},0),b.name=e.files);return b},k.addFilesToFileList=function(a){a=k.getFileInfo(a);g.addFile(a,k.abort);return a.fileId},k.removeFromList=function(a){g.removeFile(a);k.currentFileId=null;k.uploadInProgress=!1},k.onFileSelected=function(a){!0!==k.uploadInProgress&&(k.uploadInProgress=
!0,k.prepareSendRequest(a).wait(k.executeFileSelectedCallback).wait(k.getUploadStateChannelId).wait(k.onUploadRequestReady))},k.prepareSendRequest=function(a){var b={files:[]};b.files=a.map(function(a){return{url:a.link,name:a.name,size:a.bytes}});k.currentFileId=k.addFilesToFileList(b.files);a=k.delayRequest({request:b});a.signal();return a},k.executeFileSelectedCallback=function(a){var b=c.getOptions(),d=a.data.request.files,g=1<d.length;void 0!==h.fileSelected&&h.fileSelected(d,g,b);a.data.options=
b;a.signal()},k.getUploadStateChannelId=function(a){var b=a.data.request;1===b.files.length?k.openUploadStateChannel(b.files,function(c){b.uploadStateChannelId=c.channelId;a.signal()}):a.signal()},k.onUploadRequestReady=function(a){var b=a.data.request;a=a.data.options;g.setFileStatusToInProgress(k.currentFileId);c.send(b,a)},k.onFileSelectionCanceled=function(){void 0!==h.fileSelectionCanceled&&h.fileSelectionCanceled()},k.onFileUploadSuccess=function(a,b){g.setFileStatusToSuccess(k.currentFileId,
k.removeFromList);h.fileUploadSuccess&&h.fileUploadSuccess(a,b||{});k.uploadInProgress=!1},k.onFileUploadError=function(a){g.setFileStatusToError(k.currentFileId,a,k.removeFromList);h.fileUploadError&&h.fileUploadError(a);k.uploadInProgress=!1},k.onProgress=function(a){g.updateFileProgress(k.currentFileId,a/100)},k.onAbort=function(){g.removeFile(k.currentFileId);h.fileUploadAborted&&h.fileUploadAborted();k.uploadInProgress=!1},k.abort=function(){b.abortUpload()},k.sendUrlsSuccess=function(a,b){k.onFileUploadSuccess(a,
b)},k.sendUrlsFail=function(a){k.onFileUploadError(a)},k.handleButtonClick=function(){if(!k.uploadInProgress){var b=k.getDropboxOptions();a.choose(b)}},k.initialize=function(){c.onFilesUrlsSendSuccess(k.sendUrlsSuccess);c.onFilesUrlsSendError(k.sendUrlsFail);f.dropboxLink.click(k.handleButtonClick);void 0!==h.controlInitialized&&h.controlInitialized(l)},l.isMultipleFilesModeEnabled=!0,l.enableMultipleFilesMode=function(){l.isMultipleFilesModeEnabled=!0},l.disableMultipleFilesMode=function(){l.isMultipleFilesModeEnabled=
!1},k.initialize(),l}function DropboxUploaderControlInitialization(d,e,f,c){var a=UploaderSenderOptionsFactory(),a=FilesUrlsSender(d,e,$,a),b=UploaderFileItemFactory(e),b=UploaderFileList(f.fileList,b,e),g=UploadStateService({signalR:$.signalR,endpoint:d.uploadStateServiceEndpoint});DropboxUploaderControl(d,e,f,a,window.Dropbox,g,b,c)}
function DropboxUploaderControls(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");var e={},f={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,a){var b=f.getJQuerySafeId(c),b=$(b);if(f.jQElementExists(b))return b;if(void 0!==a)throw a;}};e.dropboxLink=f.getJQElement(d.DropboxLink,"DropboxLink not found");e.fileList=f.getJQElement(d.FileList,"FileList not found");
return e}function DropboxUploaderLiterals(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'translations' is not defined");var e={};e.chooseFromDropbox=d.ChooseFromDropbox;e.maxFileSizeForUpload=d.MaxFileSizeForUpload;e.kb=d.Kb;e.mb=d.Mb;e.unknown=d.Unknown;e.files=d.Files;e.getFormattedFileSize=function(d){return"number"!==typeof d?"":1048576<=d?(d/1048576).toFixed(2)+" "+e.mb:(d/1024).toFixed(2)+" "+e.kb};return e}
function DropboxUploaderSettings(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");var e={};e.pathToCdn=d.PathToCdn;e.dropboxAppKey=d.DropboxAppKey;e.maxFileSize=parseInt(d.MaxFileSize);e.minFileSize=parseInt(d.MinFileSize||0);e.allowMultipleFiles=/^true$/i.test(d.AllowMultipleFiles);e.uploadUrl=d.UploadUrl;e.uploadStateServiceEndpoint=d.UploadStateServiceEndpoint;return e}
function DropDownMenu(d,e){function f(b,c){m&&clearTimeout(m);m=setTimeout(function(){var b=c.relatedTarget||document.activeElement,d=$(b),g=b===h[0]||1===d.closest(h).length,b=b===l[0]||1===d.closest(l).length;g||b||a()},b)}function c(){n.scroll(b);l.addClass(g.settings.selectedHolderCssClass);var a=g.settings.useTargetPosition?k.position():k.offset();g.settings.setMinWidthByTarget&&h.css("min-width",k.outerWidth()+"px");var c=a.top+k.outerHeight(!1),d="auto",e="auto";switch(g.settings.horizontalPosition){case DropDownMenuCommonSettings.horizontalPositions.rightEdge:d=
a.left+k.outerWidth(!1)-h.outerWidth(!1);0>d&&(d=a.left);break;case DropDownMenuCommonSettings.horizontalPositions.rightEdgeRightOffset:e=n.width()-n.scrollLeft()-a.left-k.outerWidth(!1);0>e&&(e=0);break;case DropDownMenuCommonSettings.horizontalPositions.auto:break;case DropDownMenuCommonSettings.horizontalPositions.leftEdgeParentRightBorder:var d=a.left,a=k.offsetParent(),a=a.outerWidth(!1)+(g.settings.useTargetPosition?0:a.offset().left),f=h.outerWidth(!1);a<d+f&&(d=a-f);break;default:d=a.left}var m=
{top:g.settings.useFixedPosition?c-n.scrollTop():c,left:d,right:e,"z-index":g.settings.zIndex};g.settings.useFixedPosition&&(m.position="fixed");g.settings.autofitHeight&&(c=n.height()-c-(h.outerHeight(!0)-h.height()),m["max-height"]=0>c?0:c,m["overflow-y"]="auto");n.scroll(function(){h.css(m)});h.css(m).show()}function a(){n.unbind("scroll",b);h.hide();l.removeClass(g.settings.selectedHolderCssClass)}function b(){var a=g.settings.useTargetPosition?k.position():k.offset();h.css({top:a.top+k.outerHeight(!1)})}
window[d]=this;var g=this,h,l,k,m,n=$(window);e&&DropDownMenu.instances.push(this);g.initialize=function(){h||g.initializeControls($("#"+g.controls.menuContainerId),$("#"+g.controls.targetLinkId),$("#"+g.controls.layoutAlignmentControlId))};g.initializeControls=function(b,d,e){if(!h){h=b;l=d;k=e;if(!g.settings.showMenuOnHover||g.settings.isIos)$(document).on((g.settings.isIos?"touchend":"click")+" "+CommonTriggers.clickInInnerFrame,function(b){b.target===l[0]||1===l.find(b.target).length?h.is(":visible")?
a():c():h.is(":visible")&&b.target!==h[0]&&1!==h.find(b.target).length&&a()});else l.on("focusin mouseover",function(){c()}),h.add(l).on("focusout mouseout",function(a){f(250,a)});g.settings.closeMenuWhenClickingOnLink&&h.find("li").click(function(){a()});g.settings.closeMenuWhenClickingInside&&h.click(function(){a()});$(document).ready(function(){g.settings.appendToBody&&h.appendTo("body")})}};return g}DropDownMenu.instances=[];
DropDownMenu.initialize=function(){for(var d=0,e=this.instances.length;d<e;d+=1)this.instances[d].initialize()};ExpandableContainer.defaults={isExpanded:!1,expander:".ccl-expandable-container-header",target:".ccl-expandable-container-content",keepStateInCookie:!1,cookieName:"ExpandableContainerState",accessibleExpander:"a",expandTooltip:void 0,collapseTooltip:void 0};
function ExpandableContainer(d,e){function f(a){g.settings.collapseTooltip&&g.settings.expandTooltip&&n.attr("title",a?g.settings.collapseTooltip:g.settings.expandTooltip)}function c(){var a=b();a?h.addClass("expanded"):m.hide();f(a)}function a(){var a=$.cookie(g.settings.cookieName);return null===a||""===a?{}:JSON.parse(a)}function b(){if(g.settings.isExpanded)return!0;if(!g.settings.keepStateInCookie)return!1;var b=h.attr("Id");return void 0===b?!1:!0===a()[b]||!1}var g=this,h=$(d);g.settings={};
$.extend(g.settings,ExpandableContainer.defaults);$.extend(g.settings,e);var l=$(g.settings.expander,d),k=l.attr("data-expander-target")||g.settings.target,m=$(k,d),n=$(g.settings.accessibleExpander,l);g.toggle=function(){var b=!g.getIsExpandedState();b?(h.addClass("expanded"),m.slideDown()):(h.removeClass("expanded"),m.slideUp());$(document).trigger("expandablecontainer:toggled",[d,b]);f(b);if(g.settings.keepStateInCookie){var c=h.attr("Id");if(void 0!==c){var e=a();e[c]=b;$.cookie(g.settings.cookieName,
JSON.stringify(e),{path:"/"})}}return!1};g.getIsExpandedState=function(){return h.hasClass("expanded")};(function(){if(g.settings.keepStateInCookie&&void 0===$.cookie)throw Error("keepStateInCookie option requires $.cookie to be defined.");l.addClass("ccl-expandable-container-expander");if((0===m.length||0===l.length)&&g.settings.throwOnMissingTarget)throw"Targets not found";c();l.click(function(){g.toggle()})})();return g}
function ExpandableList(d){function e(){try{var a=parent.document.getElementsByTagName("iframe");if(void 0!=a)for(var c=0,d=a.length;c<d;c++){var e=a[c];if((e.contentDocument||e.contentWindow.document)===document)return e}}catch(f){}return null}window[d]=this;var f=this,c,a;f.initialize=function(){c=f.controls;a=f.settings};f.expand=function(b){var d=$(c.showlink).position(),h=d.top,l=$(window).scrollTop(),f=null,m=!1;CommonFunctions.isIos()&&(m=!0,d=e(),null!==d&&(f=d.parentNode,null!==f&&(l=f.scrollTop)));
c.list.children("li").show().removeClass(a.lastVisibleItemCssClass);c.showlink.hide();c.hidelink.show();d=$(c.hidelink).position();l+=d.top-h;m?null!==f&&(f.scrollTop=l):$(window).scrollTop(l);b()};f.collapse=function(b){var d=$(c.hidelink).position(),h=d.top,f=$(window).scrollTop(),k=null,m=!1;CommonFunctions.isIos()&&(m=!0,d=e(),null!==d&&(k=d.parentNode,null!==k&&(f=k.scrollTop)));0<a.maxItemsShown?(d=c.list.children("li").eq(a.maxItemsShown-1),d.addClass(a.lastVisibleItemCssClass),d.nextAll().hide()):
c.list.children("li").hide();c.hidelink.hide();c.showlink.show();d=$(c.showlink).position();f-=h-d.top;m?null!==k&&(k.scrollTop=f):$(window).scrollTop(f);b()};return f}
$.widget("itslccl.extendedTextBox",{options:{watermarkText:"",watermarkCssClass:""},_input:void 0,_isWatermarkMode:!1,_create:function(){var d=this;this._input=this.element;this._input.is(":focus")?this._input.setCursorPosition(this._input.val().length):this._showWatermark();this._input.keypress(function(e){e=e?e:window.event;d._hideWatermark();return e.which!==CommonConstants.keyCodes.enter||e.shiftKey});this._input.blur(function(){d._input.is(":visible")&&d._showWatermark()});this._input.focus(function(){d._hideWatermark()});
this._input.on("paste",function(){d._hideWatermark()})},_showWatermark:function(){this._isWatermarkMode||this._input.val()||(this._input.val(this.options.watermarkText),this._input.addClass(this.options.watermarkCssClass),this._isWatermarkMode=!0)},_hideWatermark:function(){this._isWatermarkMode&&(this._input.val(""),this._input.removeClass(this.options.watermarkCssClass),this._isWatermarkMode=!1)},isEmpty:function(){return this._isWatermarkMode||0==$.trim(this._input.val()).length}});
function ExternalStorageAvailabilityChecker(){return{isDropboxAvailable:function(){return void 0!==window.Dropbox?!0:!1},isGoogleDriveAvailable:function(){return void 0!==window.gapi?!0:!1}}}
function Feedback(d){window[d]=this;var e=this;e.showMessage=function(d,c){var a=e.controls;a.container.removeClass(e.settings.cssClasses.join(" ")).addClass(e.settings.feedbackCssClass).addClass(e.settings.cssClasses[d]).show();c?a.textSpan.html(c).show():a.textSpan.hide();e.hideUndo()};e.hide=function(d){e.controls.container.hide();if((void 0==d||d)&&e.functions.onClose)e.functions.onClose()};e.hideUndo=function(){e.controls.undoLink.hide()};e.show=function(){e.controls.container.show()};e.toggleCloseLink=
function(d){e.controls.closeLink.toggle(d)};e.undo=function(){if(e.functions.onUndo)if(e.settings.undoConfirmationText){if(confirm(e.settings.undoConfirmationText))e.functions.onUndo()}else e.functions.onUndo()};return e}
function FileList(d){window[d]=this;var e={},f=this;e.getTitle=function(c){return f.settings.titleText+" "+c};e.setTitle=function(c){$(f.controls.title).html(c)};e.urlHasQueryParams=function(c){return-1===c.indexOf("?")?!1:!0};e.appendQueryParamsToUrl=function(c,a){return c+="?"+$.param(a)};e.getUrl=function(c,a,b,d){var h=f.settings.serviceMethodUrl;e.urlHasQueryParams(h)?(h=h.replace("{fileName}",encodeURIComponent(c)),h=h.replace("{viewOnly}",d.toString()),h=h.replace("{fileRepoId}",encodeURIComponent(a)),
h=h.replace("{uniqueId}",b)):h=e.appendQueryParamsToUrl(h,{fileName:c,fileId:a,uniqueFileId:b,viewOnly:d});return h};e.openInModalDialog=function(c,a,b,d){var e=f.controls.dialog.replace("#","");window[e].setAjaxUrl(b);window[e].setContentMinSize(c,a);window[e].openDialog(d)};e.checkIfBrowserIsOldIE=function(){var c=navigator.userAgent.toLowerCase();return-1!=c.indexOf("msie")?9>=parseInt(c.split("msie")[1])?!0:!1:!1};e.attachEventForOldIE=function(c,a,b){c.addEventListener?c.addEventListener(a,b,
!1):c.attachEvent?c.attachEvent(a,b):c[a]=b};e.openInWindow=function(c){var a=window.open(c,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");e.checkIfBrowserIsOldIE()&&e.attachEventForOldIE(a,"onload",function(){$("head",a.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};e.getFileExtension=function(c){return(/[.]/.exec(c)?/[^.]+$/.exec(c):
void 0).pop()};e.allowedWopiFileExtensionsExist=function(){return"undefined"===typeof f.settings.allowedWopiFileExtensions||null===f.settings.allowedWopiFileExtensions?!1:!0};e.isOwasFileType=function(c){c=e.getFileExtension(c);return 0<=f.settings.allowedWopiFileExtensions.indexOf(c)};f.showPreview=function(c,a,b,d,h,l,k){var m=e.getTitle(c);e.setTitle(m);a=e.getUrl(c,a,b,d);b=!1;e.allowedWopiFileExtensionsExist()&&(b=e.isOwasFileType(c));if(b){if(f.settings.useModalForOWASFiles){e.openInModalDialog(h,
l,a,b);return}}else if(f.settings.useModalForFilesDifferentThanOWAS){e.openInModalDialog(h,l,a,k);return}e.openInWindow(a)};return f}
function FilesUrlsSender(d,e,f,c){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'jQuery' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'optionsFactory' is not defined");e={};var a={};a.baseUrl=d.uploadUrl;a.successCallbacks=[];a.errorCallbacks=[];a.executeSuccessCallbacks=function(b,
c){a.successCallbacks.forEach(function(a){a(b,c)})};a.executeErrorCallbacks=function(b){a.errorCallbacks.forEach(function(a){a(b)})};a.getErrorMesage=function(a,c,d){if(a.responseText)try{var e=JSON.parse(a.responseText);if(!objectState.isNullOrWhitespace(e.errorMessage))return e.errorMessage}catch(f){}return d};e.getOptions=function(){return c.create({url:a.baseUrl})};e.send=function(b,c){contract.require(!objectState.isNullOrUndefined(b),"argument 'sendRequest' is not defined");contract.require(!objectState.isNullOrUndefined(b.files)&&
0<b.files.length,"'sendRequest.files' contains no data to send");var e;e=c&&c.hasChanged?c.getProcessedOptions().url:a.baseUrl;var l=!1;objectState.isNullOrUndefined(d.originUrl)||(l=!0);f.ajax({url:e,type:"POST",data:encodeURIComponent(JSON.stringify(b)),dataType:"json",crossDomain:l,xhrFields:{withCredentials:!0},success:function(c,d,g){a.executeSuccessCallbacks(b.files,c)},error:function(b,c,d){b=a.getErrorMesage(b,c,d);a.executeErrorCallbacks(b)}})};e.onFilesUrlsSendSuccess=function(b){a.successCallbacks.push(b)};
e.onFilesUrlsSendError=function(b){a.errorCallbacks.push(b)};return e}
(function(d){"function"===typeof define&&define.amd?define(["jquery","tmpl","load-image","./jquery.fileupload-fp"],d):d(window.jQuery,window.tmpl,window.loadImage)})(function(d,e,f){d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{autoUpload:!0,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:void 0,acceptFileTypes:/.+$/i,previewSourceFileTypes:/^image\/(gif|jpeg|png)$/,previewSourceMaxFileSize:5E6,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,filesContainer:void 0,prependFiles:!1,
dataType:"json",kbText:"KB",mbText:"MB",confirmReplaceFile:function(){return!0},customErrors:void 0,drop:function(c,a){var b=(d(this).data("blueimp-fileupload")||d(this).data("fileupload")).options,g=[],e=!1;d.each(a.files,function(a,b){!b.type&&(void 0===b.size||1>b.size||0==b.size%4096&&2>b.name.split(".").length)?e=!0:g.push(b)});e&&(a.files=g);b.singleFileMode&&1<a.files.length&&(a.files=a.files.slice(0,1))},add:function(c,a){var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),
g=b.options,e=a.files;d(this).fileupload("process",a).done(function(){if(g.singleFileMode&&0==g.maxNumberOfFiles)if(g.confirmReplaceFile())b.emptyFileList();else return!1;b._adjustMaxNumberOfFiles(-e.length);a.maxNumberOfFilesAdjusted=!0;a.files.valid=a.isValidated=b._validate(e);0<a.files.length&&b.options.defaultThumbnailUrl&&(a.files[0].thumbnailUrl=b.options.defaultThumbnailUrl);a.context=b._renderUpload(e).data("data",a);g.filesContainer[g.prependFiles?"prepend":"append"](a.context);b._renderPreviews(a);
b._forceReflow(a.context);b._transition(a.context).done(function(){!1!==b._trigger("added",c,a)&&(g.autoUpload||a.autoUpload)&&!1!==a.autoUpload&&a.isValidated&&a.submit()})})},send:function(c,a){var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload");if(b._additionalClientValidationCallback&&!b._additionalClientValidationCallback(a)||!a.isValidated&&(a.maxNumberOfFilesAdjusted||(b._adjustMaxNumberOfFiles(-a.files.length),a.maxNumberOfFilesAdjusted=!0),!b._validate(a.files)))return!1;
a.context&&a.dataType&&"iframe"===a.dataType.substr(0,6)&&(a.context.find(".ccl-progressbar").addClass(!d.support.transition&&"progress-animated").find(".ui-progressbar-value").css("width","100%"),a.context.find(".ccl-progressbar-labelcontainer").html("100%"));b._addUploadToList(c,a);return b._trigger("sent",c,a)},done:function(c,a){var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),g=b._getFilesFromResponse(a),e,f;a.context?a.context.each(function(f){var l=g[f]||{error:"Empty file upload result"},
n=b._addFinishedDeferreds();l.error||b._addFilesToList(g);b._transition(d(this)).done(function(){var g=d(this);e=b._renderDownload([l]).replaceAll(g);b._forceReflow(e);b._transition(e).done(function(){a.context=d(this);b._renderPreviews(a);b._trigger("completed",c,a);b._trigger("finished",c,a);n.resolve()})})}):(g.length&&(d.each(g,function(c,d){a.maxNumberOfFilesAdjusted&&d.error?b._adjustMaxNumberOfFiles(1):a.maxNumberOfFilesAdjusted||d.error||b._adjustMaxNumberOfFiles(-1)}),a.maxNumberOfFilesAdjusted=
!0),e=b._renderDownload(g).appendTo(b.options.filesContainer),b._renderPreviews(a),b._forceReflow(e),f=b._addFinishedDeferreds(),b._transition(e).done(function(){a.context=d(this);b._trigger("completed",c,a);b._trigger("finished",c,a);f.resolve()}))},fail:function(c,a){var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),g,e;a.maxNumberOfFilesAdjusted&&b._adjustMaxNumberOfFiles(a.files.length);a.context?a.context.each(function(f){if("abort"!==a.errorThrown){var k=a.files[f],m;if(a.jqXHR&&
a.jqXHR.responseText)try{m=d.parseJSON(a.jqXHR.responseText).message}catch(n){m=void 0}else m=void 0;k.error=k.error||m||a.errorThrown||b.options.customErrors.unknownError;e=b._addFinishedDeferreds();b._transition(d(this)).done(function(){var f=d(this);g=b._renderDownload([k]).replaceAll(f);b._forceReflow(g);b._transition(g).done(function(){a.context=d(this);b._trigger("failed",c,a);b._trigger("finished",c,a);e.resolve()})})}else e=b._addFinishedDeferreds(),b._transition(d(this)).done(function(){d(this).remove();
b._trigger("failed",c,a);b._trigger("finished",c,a);e.resolve()})}):"abort"!==a.errorThrown?(a.context=b._renderUpload(a.files).appendTo(b.options.filesContainer).data("data",a),b._forceReflow(a.context),e=b._addFinishedDeferreds(),b._transition(a.context).done(function(){a.context=d(this);b._trigger("failed",c,a);b._trigger("finished",c,a);e.resolve()})):(b._trigger("failed",c,a),b._trigger("finished",c,a),b._addFinishedDeferreds().resolve())},progress:function(c,a){if(a.context){var b=parseInt(a.loaded/
a.total*100,10);a.context.find(".ccl-progressbar .ui-progressbar-value").css("width",b+"%");a.context.find(".ccl-progressbar-labelcontainer").html(b+"%")}},progressall:function(c,a){var b=d(this),g=parseInt(a.loaded/a.total*100,10),e=b.find(".fileupload-progress"),f=e.find(".progress-extended");f.length&&f.html((b.data("blueimp-fileupload")||b.data("fileupload"))._renderExtendedProgress(a));e.find(".ccl-progressbar .ui-progressbar-value").css("width",g+"%");e.find(".ccl-progressbar-labelcontainer").html(g+
"%")},start:function(c){var a=d(this).data("blueimp-fileupload")||d(this).data("fileupload");a._resetFinishedDeferreds();a._transition(d(this).find(".fileupload-progress")).done(function(){a._trigger("started",c)});a._startUploadCallback&&a._startUploadCallback()},stop:function(c){var a=d(this).data("blueimp-fileupload")||d(this).data("fileupload"),b=a._addFinishedDeferreds();d.when.apply(d,a._getFinishedDeferreds()).done(function(){a._trigger("stopped",c)});a._transition(d(this).find(".fileupload-progress")).done(function(){var a=
d(this);a.find(".ccl-progressbar .ui-progressbar-value").css("width","0");a.find(".ccl-progressbar-labelcontainer").html("0%");a.find(".progress-extended").html("&nbsp;");b.resolve()});a._stopUploadCallback&&a._stopUploadCallback()},destroy:function(c,a){var b=d(this).data("blueimp-fileupload")||d(this).data("fileupload");a.url&&d.ajax(a);a.filekey&&b._adjustMaxNumberOfFiles(1);b._removeFilesFromList(a.filekey);b._transition(a.context).done(function(){d(this).remove();b._trigger("destroyed",c,a)})}},
_addFilesToList:function(c){var a=this;a._fileList||(a._fileList=[],a._fileListKeys=[]);d.each(c,function(b,c){a._fileList.push(c);a._fileListKeys.push(c.id)});a.options.stateHiddenField.val(JSON.stringify(a._fileList));a._notifyAboutResultChanges();a._addFileCallback&&a._addFileCallback()},_addUploadToList:function(c,a){this._uploadsList||(this._uploadsList=[]);this._uploadsList.push({element:c,data:a})},_removeFilesFromList:function(c){this._fileList&&0<this._fileList.length&&(c=this._fileListKeys.indexOf(c),
-1<c&&(this._fileList.splice(c,1),this._fileListKeys.splice(c,1)));this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback()},_notifyAboutResultChanges:function(){this._trigger("resultschanged",null,{results:this._fileList})},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(c){c||(c=d.Deferred());this._finishedUploads.push(c);return c},_getFinishedDeferreds:function(){return this._finishedUploads},
_getFilesFromResponse:function(c){return c.result&&d.isArray(c.result.files)?c.result.files:[]},_enableDragToDesktop:function(){var c=d(this),a=c.prop("href"),b=c.prop("download");c.bind("dragstart",function(c){try{c.originalEvent.dataTransfer.setData("DownloadURL",["application/octet-stream",b,a].join(":"))}catch(d){}})},_adjustMaxNumberOfFiles:function(c){"number"===typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=c,1>this.options.maxNumberOfFiles&&!this.options.singleFileMode?
this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(c){return"number"!==typeof c?"":1048576<=c?(c/1048576).toFixed(2)+" "+this.options.mbText:(c/1024).toFixed(2)+" "+this.options.kbText},_formatBitrate:function(c){return"number"!==typeof c?"":1E9<=c?(c/1E9).toFixed(2)+" Gbit/s":1E6<=c?(c/1E6).toFixed(2)+" Mbit/s":1E3<=c?(c/1E3).toFixed(2)+" kbit/s":c.toFixed(2)+" bit/s"},_formatTime:function(c){var a=new Date(1E3*c);c=parseInt(c/86400,10);return(c?c+"d ":"")+("0"+
a.getUTCHours()).slice(-2)+":"+("0"+a.getUTCMinutes()).slice(-2)+":"+("0"+a.getUTCSeconds()).slice(-2)},_formatPercentage:function(c){return(100*c).toFixed(2)+" %"},_renderExtendedProgress:function(c){return this._formatBitrate(c.bitrate)+" | "+this._formatTime(8*(c.total-c.loaded)/c.bitrate)+" | "+this._formatPercentage(c.loaded/c.total)+" | "+this._formatFileSize(c.loaded)+" / "+this._formatFileSize(c.total)},_hasError:function(c){return c.error?c.error:0>this.options.maxNumberOfFiles?this.options.customErrors&&
this.options.customErrors.maxNumberOfFilesExceeded?this.options.customErrors.maxNumberOfFilesExceeded:"Maximum number of files exceeded":this.options.acceptFileTypes.test(c.type)||this.options.acceptFileTypes.test(c.name)?this.options.maxFileSize&&c.size>this.options.maxFileSize?(this._errorCallback&&this._errorCallback(),this.options.customErrors&&this.options.customErrors.fileIsTooBig?this.options.customErrors.fileIsTooBig:"File is too big"):"number"===typeof c.size&&c.size<this.options.minFileSize?
this.options.customErrors&&this.options.customErrors.fileIsTooSmall?this.options.customErrors.fileIsTooSmall:"File is too small":null:this.options.customErrors&&this.options.customErrors.fileTypeNotAllowed?this.options.customErrors.fileTypeNotAllowed:"Filetype not allowed"},_validate:function(c){var a=this,b=!!c.length;d.each(c,function(c,d){d.error=a._hasError(d);d.error&&(b=!1)});return b},_renderTemplate:function(c,a){if(!c)return d();var b=c({files:a,formatFileSize:this._formatFileSize,options:this.options});
return b instanceof d?b:d(this.options.templatesContainer).html(b).children()},_renderPreview:function(c,a){var b=this,e=this.options,h=d.Deferred();return(f&&f(c,function(c){a.empty();a.append(c);b._forceReflow(a);b._transition(a).done(function(){h.resolveWith(a)});d.contains(b.document[0].body,a[0])||h.resolveWith(a)},{maxWidth:e.previewMaxWidth,maxHeight:e.previewMaxHeight,canvas:e.previewAsCanvas})||h.resolveWith(a))&&h},_renderPreviews:function(c){var a=this,b=this.options;c.context.find(".preview span").each(function(e,
h){var f=c.files[e];b.previewSourceFileTypes.test(f.type)&&("number"!==d.type(b.previewSourceMaxFileSize)||f.size<b.previewSourceMaxFileSize)&&(a._processingQueue=a._processingQueue.pipe(function(){var b=d.Deferred(),e=d.Event("previewdone",{target:h});a._renderPreview(f,d(h)).done(function(){a._trigger(e.type,e,c);b.resolveWith(a)});return b.promise()}))});return this._processingQueue},_renderUpload:function(c){return this._renderTemplate(this.options.uploadTemplate,c)},_renderDownload:function(c){return this._renderTemplate(this.options.downloadTemplate,
c).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(c){c.preventDefault();c=d(c.currentTarget);var a=c.closest(".template-upload").data("data");a&&a.submit&&!a.jqXHR&&a.submit()&&c.prop("disabled",!0)},_cancelHandler:function(c){c.preventDefault();var a=d(c.currentTarget).closest(".template-upload").data("data")||{};this._notifyAboutResultChanges();this._removeFileCallback&&this._removeFileCallback();a.jqXHR?a.jqXHR.abort():(a.errorThrown="abort",this._trigger("fail",
c,a))},_deleteHandler:function(c){c.preventDefault();var a=d(c.currentTarget);this._trigger("destroy",c,d.extend({context:a.closest(".template-download"),type:"POST",dataType:this.options.dataType},a.data()))},_forceReflow:function(c){return d.support.transition&&c.length&&c[0].offsetWidth},_transition:function(c){var a=d.Deferred();d.support.transition&&c.hasClass("fade")?c.bind(d.support.transition.end,function(b){b.target===c[0]&&(c.unbind(d.support.transition.end),a.resolveWith(c))}).toggleClass("in"):
(c.toggleClass("in"),a.resolveWith(c));return a},_initButtonBarEventHandlers:function(){var c=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(c.find(".start"),{click:function(b){b.preventDefault();a.find(".start button").click()}});this._on(c.find(".cancel"),{click:function(b){b.preventDefault();a.find(".cancel button").click()}});this._on(c.find(".delete"),{click:function(b){b.preventDefault();a.find(".delete input:checked").siblings("button").click();c.find(".toggle").prop("checked",
!1)}});this._on(c.find(".toggle"),{change:function(b){a.find(".delete input").prop("checked",d(b.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar button"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start button":this._startHandler,"click .cancel button":this._cancelHandler,"click .delete .button":this._deleteHandler});
this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!1).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".ccl-fileuploader-button input").prop("disabled",!0).parent().addClass("disabled")},_initTemplates:function(){var c=this.options;c.templatesContainer=
this.document[0].createElement(c.filesContainer.prop("nodeName"));e&&(c.uploadTemplateId&&(c.uploadTemplate=e(c.uploadTemplateId)),c.downloadTemplateId&&(c.downloadTemplate=e(c.downloadTemplateId)))},_initFilesContainer:function(){var c=this.options;void 0===c.filesContainer?c.filesContainer=this.element.find(".files"):c.filesContainer instanceof d||(c.filesContainer=d(c.filesContainer))},_stringToRegExp:function(c){c=c.split("/");var a=c.pop();c.shift();return new RegExp(c.join("/"),a)},_initRegExpOptions:function(){var c=
this.options;"string"===d.type(c.acceptFileTypes)&&(c.acceptFileTypes=this._stringToRegExp(c.acceptFileTypes));"string"===d.type(c.previewSourceFileTypes)&&(c.previewSourceFileTypes=this._stringToRegExp(c.previewSourceFileTypes))},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates();this._initRegExpOptions()},_setOption:function(c,a){this._super(c,a);"maxNumberOfFiles"===c&&this._adjustMaxNumberOfFiles(0)},_create:function(){this._super();this._refreshOptionsList.push("filesContainer",
"uploadTemplateId","downloadTemplateId");this._processingQueue||(this._processingQueue=d.Deferred().resolveWith(this).promise(),this.process=function(){return this._processingQueue});this._resetFinishedDeferreds()},enable:function(){var c=!1;this.options.disabled&&(c=!0);this._super();c&&(this.element.find("input, button").prop("disabled",!1),this._enableFileInputButton())},disable:function(){this.options.disabled||(this.element.find("input, button").prop("disabled",!0),this._disableFileInputButton());
this._super()},emptyFileList:function(){this.options.filesContainer.find(".delete .button, .cancel button").click()},clearResults:function(){d(this.options.filesContainer[0]).find("tr").each(function(){var c=d(this);c.hasClass("clearme")||0===c.find(".error").length?c.remove():c.addClass("clearme")});this._fileList&&(this._adjustMaxNumberOfFiles(this._fileList.length),this._fileList.length=0,this._fileListKeys.length=0);this.options.stateHiddenField.val(JSON.stringify(this._fileList));this._notifyAboutResultChanges()},
allowHide:function(){return 0===d(this.options.filesContainer[0]).find("tr .error").length},abortAllUploads:function(){if(this._uploadsList){var c=this;d.each(this._uploadsList,function(a,b){b.data.jqXHR?b.data.jqXHR.abort():(b.data.errorThrown="abort",c._trigger("fail",b,b.data))})}},getUploadedFiles:function(){return this._fileList||[]},setStartUploadCallback:function(c){"function"==typeof c&&(this._startUploadCallback=c)},setStopUploadCallback:function(c){"function"==typeof c&&(this._stopUploadCallback=
c)},setAddFileCallback:function(c){"function"==typeof c&&(this._addFileCallback=c)},setRemoveFileCallback:function(c){"function"==typeof c&&(this._removeFileCallback=c)},setErrorCallback:function(c){"function"==typeof c&&(this._errorCallback=c)},setAdditionalClientValidationCallback:function(c){"function"==typeof c&&(this._additionalClientValidationCallback=c)},renderHiddenFieldContent:function(){var c=this.options,a=this.options.stateHiddenField.val();if((a=a?JSON.parse(a):[])&&0<a.length){var b=
this._renderDownload(a);b.appendTo(c.filesContainer);var e=[];d.each(a,function(a,b){b.error&&0!=b.error.length||e.push(b)});0<e.length&&this._addFilesToList(e);this._adjustMaxNumberOfFiles(c.singleFileMode?-a.length:-e.length);var h=[];d.each(a,function(a,b){b.type&&c.previewSourceFileTypes.test(b.type)&&b.fileUrl&&(h.push(b),h[h.length-1].toString=function(){return b.fileUrl})});0<h.length&&(a=b.data("data",{files:a}),this._renderPreviews({context:a,files:h}))}}})});var FixedHeader;
(function(d,e,f){FixedHeader=function(c,a){if(c)if(!this instanceof FixedHeader)alert("FixedHeader warning: FixedHeader must be initialised with the 'new' keyword.");else{var b={aoCache:[],oSides:{top:!0,bottom:!1,left:0,right:0},oZIndexes:{top:104,bottom:103,left:102,right:101,topLeft:105},oCloneOnDraw:{top:!1,bottom:!1,left:!0,right:!0},oMes:{iTableWidth:0,iTableHeight:0,iTableLeft:0,iTableRight:0,iTableTop:0,iTableBottom:0},oOffset:{top:0},nTable:null,bFooter:!1,bInitComplete:!1};this.fnGetSettings=
function(){return b};this.fnUpdate=function(){this._fnUpdateClones();this._fnUpdatePositions()};this.fnPosition=function(){this._fnUpdatePositions()};this.fnInit(c,a);"function"==typeof c.fnSettings&&(c._oPluginFixedHeader=this)}};FixedHeader.prototype={fnInit:function(c,a){var b=this.fnGetSettings(),e=this;this.fnInitSettings(b,a);b.nTable=c;b.bFooter=0<f(">tfoot",b.nTable).length?!0:!1;b.oSides.left&&b.aoCache.push(e._fnCloneTable("fixedLeft","FixedHeader_Left",e._fnCloneTLeft,b.oSides.left));b.oSides.top&&
b.oSides.left&&b.aoCache.push(e._fnCloneTable("fixedTopLeft","FixedHeader_TopLeft",e._fnCloneTTopLeft,b.oSides.left));b.oSides.top&&b.aoCache.push(e._fnCloneTable("fixedHeader","FixedHeader_Header",e._fnCloneThead));FixedHeader.afnScroll.push(function(){e._fnUpdatePositions.call(e)});f(d).resize(function(){FixedHeader.fnCalculatePosition()});b.frameSizeChangedEvent&&f(d).bind(b.frameSizeChangedEvent,function(){FixedHeader.fnCalculatePosition()});f(b.nTable).on("column-reorder column-visibility",function(){FixedHeader.fnMeasure();
e._fnUpdateClones(!0);e._fnUpdatePositions()}).on("row-resize",function(){e._fnFindEqualiseTLeftRowsHeight()});FixedHeader.fnMeasure();e._fnUpdateClones();e._fnUpdatePositions();e._fnRemoveExcessIdentifiers();b.bInitComplete=!0},fnInitSettings:function(c,a){void 0!==a&&(void 0!==a.top&&(c.oSides.top=a.top),void 0!==a.bottom&&(c.oSides.bottom=a.bottom),"boolean"==typeof a.left?c.oSides.left=a.left?1:0:void 0!==a.left&&(c.oSides.left=a.left),"boolean"==typeof a.right?c.oSides.right=a.right?1:0:void 0!==
a.right&&(c.oSides.right=a.right),void 0!==a.zTop&&(c.oZIndexes.top=a.zTop),void 0!==a.zBottom&&(c.oZIndexes.bottom=a.zBottom),void 0!==a.zLeft&&(c.oZIndexes.left=a.zLeft),void 0!==a.zRight&&(c.oZIndexes.right=a.zRight),void 0!==a.offsetTop&&(c.oOffset.top=a.offsetTop),void 0!==a.alwaysCloneTop&&(c.oCloneOnDraw.top=a.alwaysCloneTop),void 0!==a.alwaysCloneBottom&&(c.oCloneOnDraw.bottom=a.alwaysCloneBottom),void 0!==a.alwaysCloneLeft&&(c.oCloneOnDraw.left=a.alwaysCloneLeft),void 0!==a.alwaysCloneRight&&
(c.oCloneOnDraw.right=a.alwaysCloneRight),void 0!=a.frameSizeChangedEvent&&(c.frameSizeChangedEvent=a.frameSizeChangedEvent))},_fnCloneTable:function(c,a,b,d){var h=this.fnGetSettings(),f;f=h.nTable.cloneNode(!1);f.removeAttribute("id");var k=e.createElement("div");k.style.position="absolute";k.style.top="0px";k.style.left="0px";k.className+=" FixedHeader_Cloned "+c+" "+a;"fixedHeader"==c&&(k.style.zIndex=h.oZIndexes.top);"fixedLeft"==c&&(k.style.zIndex=h.oZIndexes.left);"fixedTopLeft"==c&&(k.style.zIndex=
h.oZIndexes.topLeft);f.style.margin="0";k.appendChild(f);e.body.appendChild(k);return{nNode:f,nWrapper:k,sType:c,sPosition:"",sTop:"",sLeft:"",fnClone:b,iCells:d}},_fnMeasure:function(){var c=this.fnGetSettings(),a=c.oMes,b=f(c.nTable),d=b.offset(),e=this._fnSumScroll(c.nTable.parentNode,"scrollTop");this._fnSumScroll(c.nTable.parentNode,"scrollLeft");a.iTableWidth=b.outerWidth();a.iTableHeight=b.outerHeight();a.iTableLeft=d.left+c.nTable.parentNode.scrollLeft;a.iTableTop=d.top+e;a.iTableRight=a.iTableLeft+
a.iTableWidth;a.iTableRight=FixedHeader.oDoc.iWidth-a.iTableLeft-a.iTableWidth;a.iTableBottom=FixedHeader.oDoc.iHeight-a.iTableTop-a.iTableHeight},_fnSumScroll:function(c,a){for(var b=c[a];(c=c.parentNode)&&"HTML"!=c.nodeName&&"BODY"!=c.nodeName;)b=c[a];return b},_fnUpdatePositions:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,b=c.aoCache.length;a<b;a++)"fixedHeader"==c.aoCache[a].sType?this._fnScrollFixedHeader(c.aoCache[a]):"fixedLeft"==c.aoCache[a].sType?this._fnScrollHorizontalLeft(c.aoCache[a]):
"fixedTopLeft"==c.aoCache[a].sType&&this._fnScrollHorisontalOrVerticalTopLeft(c.aoCache[a])},_fnRemoveExcessIdentifiers:function(){var c=this.fnGetSettings();f("thead",c.nTable).find(":not(input[type=hidden])").removeAttr("id").removeAttr("name");f("td:nth-child(-n+"+c.oSides.left+")",c.nTable).find(":not(input[type=hidden])").andSelf().removeAttr("id").removeAttr("name");for(var a=0,b=c.aoCache.length;a<b;a++){var d=c.aoCache[a].nNode;f("input[type=hidden]",d).remove();switch(c.aoCache[a].sType){case "fixedHeader":f("th:nth-child(-n+"+
c.oSides.left+")",d).children().andSelf().removeAttr("id").removeAttr("name");break;case "fixedLeft":f("thead",d).find("*").removeAttr("id").removeAttr("name")}}},_fnUpdateClones:function(c){var a=this.fnGetSettings();c&&(a.bInitComplete=!1);for(var b=0,d=a.aoCache.length;b<d;b++)a.aoCache[b].fnClone.call(this,a.aoCache[b]);c&&(a.bInitComplete=!0)},_fnClearTableColumnWidths:function(){},_fnScrollHorizontalLeft:function(c){var a=this.fnGetSettings().oMes,b=FixedHeader.oWin,d=c.nWrapper,e=f(d).outerWidth();
b.iScrollLeft<a.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",d.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+"px","left",d.style)):b.iScrollLeft<a.iTableLeft+a.iTableWidth-e?(this._fnUpdateCache(c,"sPosition","fixed","position",d.style),this._fnUpdateCache(c,"sTop",a.iTableTop-b.iScrollTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft","0px","left",d.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",
d.style),this._fnUpdateCache(c,"sTop",a.iTableTop+"px","top",d.style),this._fnUpdateCache(c,"sLeft",a.iTableLeft+a.iTableWidth-e+"px","left",d.style))},_fnScrollHorisontalOrVerticalTopLeft:function(c){var a=this.fnGetSettings(),b=a.oMes,d=FixedHeader.oWin,e=c.nWrapper,l=f(e).outerWidth();a.nTable.getElementsByTagName("tbody");d.iScrollLeft<b.iTableLeft&&b.iTableTop>d.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop+
"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft+"px","left",e.style)):b.iTableTop>d.iScrollTop+a.oOffset.top?d.iScrollLeft<b.iTableLeft?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop+"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft+"px","left",e.style)):d.iScrollLeft<b.iTableLeft+b.iTableWidth-l?(this._fnUpdateCache(c,"sPosition","fixed","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop-d.iScrollTop+
"px","top",e.style),this._fnUpdateCache(c,"sLeft","0px","left",e.style)):(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop+"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft+b.iTableWidth-l+"px","left",e.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",e.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",e.style),d.iScrollLeft<b.iTableLeft?this._fnUpdateCache(c,"sLeft",b.iTableLeft-d.iScrollLeft+"px","left",
e.style):this._fnUpdateCache(c,"sLeft","0px","left",e.style))},_fnScrollFixedHeader:function(c){for(var a=this.fnGetSettings(),b=a.oMes,d=FixedHeader.oWin,e=c.nWrapper,f=0,k=a.nTable.getElementsByTagName("tbody"),m=0;m<k.length;++m)f+=k[m].offsetHeight;b.iTableTop>d.iScrollTop+a.oOffset.top?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop+"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft+"px","left",e.style)):d.iScrollTop+a.oOffset.top>
b.iTableTop+f?(this._fnUpdateCache(c,"sPosition","absolute","position",e.style),this._fnUpdateCache(c,"sTop",b.iTableTop+f+"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft+"px","left",e.style)):(this._fnUpdateCache(c,"sPosition","fixed","position",e.style),this._fnUpdateCache(c,"sTop",a.oOffset.top+"px","top",e.style),this._fnUpdateCache(c,"sLeft",b.iTableLeft-d.iScrollLeft+"px","left",e.style))},_fnUpdateCache:function(c,a,b,d,e){c[a]!=b&&(e[d]=b,c[a]=b)},_fnClassUpdate:function(c,
a){var b=this;if("TR"===c.nodeName.toUpperCase()||"TH"===c.nodeName.toUpperCase()||"TD"===c.nodeName.toUpperCase()||"SPAN"===c.nodeName.toUpperCase())a.className=c.className;f(c).children().each(function(d){b._fnClassUpdate(f(c).children()[d],f(a).children()[d])})},_fnCloneThead:function(c){var a=this.fnGetSettings(),b=c.nNode;if(a.bInitComplete&&!a.oCloneOnDraw.top)this._fnClassUpdate(f("thead",a.nTable)[0],f("thead",b)[0]);else{var d=f(a.nTable).outerWidth();c.nWrapper.style.width=d+"px";for(b.style.width=
d+"px";0<b.childNodes.length;)f("thead th",b).unbind("click"),b.removeChild(b.childNodes[0]);c=f("thead",a.nTable).clone(!0,!0)[0];b.appendChild(c);var e=[],l=[];f("thead>tr th",a.nTable).each(function(a){e.push(f(this).width())});f("thead>tr td",a.nTable).each(function(a){l.push(f(this).width())});f("thead>tr th",a.nTable).each(function(a){f("thead>tr th:eq("+a+")",b).width(e[a]);f(this).width(e[a])});f("thead>tr td",a.nTable).each(function(a){f("thead>tr td:eq("+a+")",b).width(l[a]);f(this).width(l[a])})}},
_fnCloneTLeft:function(c){for(var a=this.fnGetSettings(),b=c.nNode,d=f("tbody",a.nTable)[0];0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.appendChild(f("thead",a.nTable).clone(!0)[0]);b.appendChild(f("tbody",a.nTable).clone(!0)[0]);var e="gt("+(c.iCells-1)+")";f("thead tr",b).each(function(a){f("th:"+e,this).remove()});f("tbody tr",b).each(function(a){f("td:"+e,this).remove()});this._fnEqualiseRowsHeight(a,c,d,b);for(var l=d=0;l<c.iCells;l++)d+=f("thead tr th:eq("+l+")",a.nTable).outerWidth();
b.style.width=d+"px";c.nWrapper.style.width=d+"px"},_fnEqualiseRowsHeight:function(c,a,b,d){f("tr",d).removeClass("ccl-table-highlight");f("tr",c.nTable).height("auto");this._fnEqualiseHeights("thead",b.parentNode,d);this._fnEqualiseHeights("tbody",b.parentNode,d)},_fnFindEqualiseTLeftRowsHeight:function(){var c=this.fnGetSettings();this._fnMeasure();for(var a=0,b=c.aoCache.length;a<b;a++)if("fixedLeft"==c.aoCache[a].sType){var d=c.aoCache[a],e=f("tbody",c.nTable)[0];this._fnEqualiseRowsHeight(c,
d,e,d.nNode)}},_fnCloneTTopLeft:function(c){var a=this.fnGetSettings(),b=c.nNode;for(f("tbody",a.nTable);0<b.childNodes.length;)b.removeChild(b.childNodes[0]);b.appendChild(f("thead",a.nTable).clone(!0)[0]);var d="gt("+(c.iCells-1)+")";f("thead tr",b).each(function(a){f("th:"+d,this).remove()});for(var e=0,l=0;l<c.iCells;l++)e+=f("thead tr th:eq("+l+")",a.nTable).outerWidth();b.style.width=e+"px";c.nWrapper.style.width=e+"px"},_fnEqualiseHeights:function(c,a,b){var d=f(c+" tr",a),e;f(c+" tr",b).each(function(a){e=
d.eq(a).css("height");"Microsoft Internet Explorer"==navigator.appName&&(e=parseInt(e,10)+1);f(this).css("height",e);d.eq(a).css("height",e)})}};FixedHeader.oWin={iScrollTop:0,iScrollRight:0,iScrollBottom:0,iScrollLeft:0,iHeight:0,iWidth:0};FixedHeader.oDoc={iHeight:0,iWidth:0};FixedHeader.afnScroll=[];FixedHeader.fnMeasure=function(){var c=f(d),a=f(e),b=FixedHeader.oWin,g=FixedHeader.oDoc;g.iHeight=a.height();g.iWidth=a.width();b.iHeight=c.height();b.iWidth=c.width();b.iScrollTop=c.scrollTop();b.iScrollLeft=
c.scrollLeft();b.iScrollRight=g.iWidth-b.iScrollLeft-b.iWidth;b.iScrollBottom=g.iHeight-b.iScrollTop-b.iHeight};FixedHeader.VERSION="2.1.0-dev";FixedHeader.prototype.VERSION=FixedHeader.VERSION;FixedHeader.fnCalculatePosition=function(){FixedHeader.fnMeasure();for(var c=0,a=FixedHeader.afnScroll.length;c<a;c++)FixedHeader.afnScroll[c]()};f(d).scroll(function(){FixedHeader.fnCalculatePosition()})})(window,document,jQuery);
function FolderSelector(d){window[d.clientId]=this;var e=this;e.id=d.clientId;e.rootId="0";e.rootTitle="";e.hideRootCrumb=!1;e.selectedId="";e.parentId="";e.cache={};e.loadingTreshold=d.loadingTreshold;e.insertFeedbackClientId=d.insertFeedbackClientId;e.showBreadCrumbs="true"===d.showBreadCrumbs;e.closeOnlyAfterSelectionSaved="true"===d.closeOnlyAfterSelectionSaved;e.needToClose=!1;e.controls={dialog:window[d.dialogClientId],grid:window[d.gridClientId]};e.dialogContainer=$("#"+d.dialogClientId);e.gridContainer=
e.dialogContainer.find("."+d.cssClasses.gridContainer);e.treeContainer=e.dialogContainer.find("."+d.cssClasses.treeContainer);e.navigation=e.dialogContainer.find("."+d.cssClasses.navigation);e.loadingIndicator=e.dialogContainer.find("."+d.cssClasses.loadingIndicator);e.dialogContainer.addClass(d.cssClasses.folderSelector);e.gridContainer.addClass(d.cssClasses.hidecontents);e.treeContainer.addClass(d.cssClasses.hidecontents);e.selectButton=$("."+d.cssClasses.selectButton);e.selectAndCloseButton=$("."+
d.cssClasses.selectAndCloseButton);e.navigateUpLink=$("a."+d.cssClasses.navigateUpLink);e.openDialog=function(a){e.toggleSelectButtons(!1);e.needToClose=!1;e.hideSelectFeedback();e.initializeCurrentView(a);window[d.dialogClientId].openDialog()};e.buildStructure=function(){e.reinitialize();$(e).trigger(d.eventNames.open);return!1};e.disposeStructure=function(){$(e).trigger(d.eventNames.close);e.treeContainer.empty();delete e.controls.tree};e.reinitialize=function(a,b){a&&(e.cache={});e.treeContainer.empty();
delete e.controls.tree;e.selectedId="";e.parentId="";e.toggleNavigateUpLink(!(e.selectedId===e.rootId||!e.parentId&&!e.selectedId));e.showBreadCrumbs&&c(0);e.hideSelectFeedback();e.initializeCurrentView(b);e.createTreeMenu()};e.initializeCurrentView=function(a){a&&(e.rootId="0",""!=a.ReadDataServiceUrl&&(e.controls.grid.dataSourceWebMethodUrl=a.ReadDataServiceUrl))};e.createTreeMenu=function(){e.treeContainer.empty();e.treeContainer.jstree({json_data:{data:e._loadTreeData},plugins:["ui","json_data"],
core:{animation:0,strings:{loading:" "}}}).bind("select_node.jstree",function(a,b){e.navigateToNode(b.rslt.obj.attr("nodeId"))});e.controls.tree=$.jstree._reference(e.treeContainer)};e.showEmptyContentFeedback=function(){e.dialogContainer.find("."+d.cssClasses.content).hide();e.navigation.hide();e.dialogContainer.find("."+d.cssClasses.emptyContent).show()};e.controls.grid.refresh=function(){e.navigateToPage(e.controls.grid.pageNumber,e.controls.grid.pageSize)};e.baseToggleSelect=e.controls.grid.toggleSelect;
e.controls.grid.toggleSelect=function(a){e.baseToggleSelect(a);a=e.controls.grid.getSelectedValues();$(e).trigger("gridSelectionChange",[{nodeIds:a}])};e.baseToggleSelectAll=e.controls.grid.toggleSelectAll;e.controls.grid.toggleSelectAll=function(a){e.baseToggleSelectAll(a);a=e.controls.grid.getSelectedValues();$(e).trigger("gridSelectionChange",[{nodeIds:a}])};$(e).on("gridSelectionChange",function(a,b){e.toggleSelectButtons(0<b.nodeIds.length)});e.toggleSelectButtons=function(a){e.selectButton.toggleHyperlink(a);
e.selectAndCloseButton.toggleHyperlink(a)};var f=function(){var a=e.controls.grid.getSelectedValues();$(e).trigger(d.eventNames.select,[{selectedId:e.selectedId,nodeIds:a}])};e.saveSelection=function(){if(!e.selectButton.getIfHyperLinkEnabled())return!1;e.needToClose=!1;f();return!1};e.saveSelectionAndClose=function(){if(!e.selectAndCloseButton.getIfHyperLinkEnabled())return!1;e.needToClose=!0;f();e.closeOnlyAfterSelectionSaved?e.toggleSelectButtons(!1):CssModal.closeDialog();return!1};$(document).on(d.eventNames.selectionSaved,
function(){e.needToClose&&(CssModal.closeDialog(),e.toggleSelectButtons(!0))});e.gridContainer.on("click","a."+d.cssClasses.folderLink,function(){e.navigateToNode($(this).attr("folderId"));return!1});e.navigateUp=function(){if(!e.navigateUpLink.getIfHyperLinkEnabled())return!1;if(e.parentId&&"0"!=e.parentId||"0"==e.parentId&&"0"==e.rootId)e.selectedId==e.rootId?(e.rootId=e.parentId,e.reinitialize(),e.showBreadCrumbs&&c()):e.navigateToNode(e.parentId);return!1};e.toggleNavigateUpLink=function(a){e.navigateUpLink.toggleHyperlink(a)};
e._loadTreeData=function(a,b){var c=(a.data?a.attr("nodeId"):void 0)||e.rootId;e.getData(c,1,e.controls.grid.pageSize,function(a){a=e.getCachedFolderData(a);if(e.showFeedbackOnEmpty&&e.isContentEmpty(c,a))e.showEmptyContentFeedback();else{for(var d=-1,f=[],m=a.folders.length,n=0;n<m;n++){var q=a.folders[n];f.push({data:{title:q.title,icon:q.cssClass},attr:{nodeId:q.id},state:"closed"});q.selectedByDefault&&0>d&&(d=n)}b(f);""===e.selectedId&&(e.selectedId=e.rootId,e.renderGrid(e.selectedId,1,e.controls.grid.pageSize),
0<=d&&d<m&&(e.hideRootCrumb=!0,e.navigateToNode(a.folders[d].id,!0)))}})};e.isContentEmpty=function(a,b){return"0"==a?0==b.folders.length&&0==b.items.pages[1].length:!1};e.navigateToNode=function(a,b){if(a!=e.selectedId){e.hideSelectFeedback();e.treeContainer.find("li").removeClass(d.cssClasses.selected);var g=e.treeContainer.find("li[nodeId="+a+"]");g.addClass(d.cssClasses.selected);e.showBreadCrumbs&&c(g);e.getData(a,1,e.controls.grid.pageSize,function(a){e.selectedId=a;b&&(e.rootId=a);e.toggleNavigateUpLink(!(e.selectedId===
e.rootId||!e.parentId&&!e.selectedId));e.renderGrid(a,1,e.controls.grid.pageSize);g[0]&&e.controls.tree.open_node(g)})}};e.navigateToPage=function(a,b){e.hideSelectFeedback();e.getData(e.selectedId,a,b,function(){e.renderGrid(e.selectedId,a,b);e.controls.dialog.adjustWindowSize()})};e.getData=function(a,b,g,f){b=b||e.controls.grid.page;g=g||e.controls.grid.pageSize;e.hasCachedFolderData(a)&&e.hasCachedItemData(a,b,g)?f(a):(e.showLoadingIndicator(),$(e).trigger(d.eventNames.loadStart,[{nodeId:a,page:b,
pageSize:g}]),$.ajax({type:"GET",url:e.controls.grid.dataSourceWebMethodUrl,data:e.getRequestData(a,b,g),dataType:"jsonp",success:function(l){var k=$.Event(d.eventNames.loadComplete);$(e).trigger(k,[{success:!0,data:l}]);k.isPropagationStopped()||(a==e.rootId&&(e.rootId=l.Id,e.rootTitle=l.Title,e.showBreadCrumbs&&c()),e.cacheData(l,l.Id,b,g),f(l.Id),e.hideLoadingIndicator())},error:function(){$(e).trigger(d.eventNames.loadComplete,[{success:!1}]);e.hideLoadingIndicator()}}))};e.showLoadingIndicator=
function(){clearTimeout(e.loadingTimeout);e.loadingTimeout=setTimeout(function(){e.loadingIndicator.show()},e.loadingTreshold)};e.hideLoadingIndicator=function(){clearTimeout(e.loadingTimeout);e.loadingIndicator.hide();e.gridContainer.removeClass(d.cssClasses.hidecontents);e.treeContainer.removeClass(d.cssClasses.hidecontents)};e.getCachedFolderData=function(a){return e.cache[a]};e.getCachedItemData=function(a,b,c){a=e.cache[a];if(void 0!==a&&null!==a&&(a=a.items||{},a.pageSize===c&&a.pages))return a.pages[b.toString()]};
e.hasCachedFolderData=function(a){a=e.getCachedFolderData(a);return void 0!==a&&null!==a};e.hasCachedItemData=function(a,b,c){a=e.getCachedItemData(a,b,c);return void 0!==a&&null!==a};e.getRequestData=function(a,b,c){return{nodeId:a,page:b,pageSize:c,omitItems:e.hasCachedItemData(a,b,c),omitFolders:e.hasCachedFolderData(a)}};e.cacheData=function(a,b,c,d){var f=e.cache[b]||{};f.description=a.Description;f.parentId=a.ParentId;f.title=a.Title;if(null!=a.Folders){f.folders=[];for(var k=a.Folders.length,
m=0;m<k;m++){var n=a.Folders[m];f.folders.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectedByDefault:n.SelectedByDefault})}}if(null!=a.Items){for(var k=[],q=a.Items.length,m=0;m<q;m++)n=a.Items[m],k.push({id:n.Id,title:n.Title,description:n.Description,cssClass:n.CssClass,isFolder:n.IsFolder,selectable:n.Selectable,selectedByDefault:n.SelectedByDefault});f.items=f.items||{};d!==f.items.pageSize&&(f.items={});f.items.pageSize=d;f.items.pages=f.items.pages||
{};f.items.pages[c.toString()]=k;f.virtualItemCount=a.VirtualItemCount}e.cache[b]=f};e.renderTypeCell=function(a){return"<div class='"+a.cssClass+"'></div>"};e.renderItemCell=function(a){var b="<span class='"+a.cssClass+"'>"+CommonFunctions.htmlEncode(a.title)+"</span>",c="";a.description&&void 0!==a.description&&(c="<div class='"+d.cssClasses.itemDescription+"'>"+CommonFunctions.htmlEncode(a.description)+"</div>");return a.isFolder?"<a href='#' class='"+d.cssClasses.folderLink+"' folderId='"+a.id+
"'>"+b+"</a>"+c:b+c};e.getItemXML=function(a){var b=[];b.push("<Item>");b.push("<Id>"+a.id+"</Id>");b.push("<Item>"+CommonFunctions.htmlEncode(e.renderItemCell(a))+"</Item>");b.push("<Selectable>"+(!0===a.selectable?"true":"false")+"</Selectable>");b.push("</Item>");return b.join("")};e.renderGrid=function(a,b,c){a=e.cache[a];e.controls.grid.pageNumber=b;e.controls.grid.pageSize=c;c=e.gridContainer.find("."+d.cssClasses.gridHeader+" > h2");var f=e.gridContainer.find("."+d.cssClasses.gridHeader+" > span");
c.text(a.title);f.text(a.description);e.parentId=a.parentId;c=e.gridContainer.find("."+d.cssClasses.navigateUpLink);""===e.parentId?c.addClass(d.cssClasses.disabled):c.removeClass(d.cssClasses.disabled);e.controls.grid.clearSelection();e.toggleSelectButtons(!1);c=a.items.pages[b].length;f=[];f.push("<Data>");f.push("<Items>");for(var l=0;l<c;l++)f.push(e.getItemXML(a.items.pages[b][l]));f.push("</Items>");f.push("<VirtualCount>"+a.virtualItemCount+"</VirtualCount>");f.push("</Data>");e.controls.grid.render(f.join(""),
!1);$(e).trigger(d.eventNames.gridRender,[e.controls.grid,a])};e.showSuccessFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(d.feedbackTypes.info,d.terms.insertSuccessFeedbackText)};e.showErrorFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].showMessage(d.feedbackTypes.error,d.terms.insertErrorFeedbackText)};e.showProgressFeedback=function(){if("undefined"!=e.insertFeedbackClientId){var a=$("<span></span>").addClass(d.cssClasses.progressMessage).html(d.terms.insertProgressFeedbackText);
window[e.insertFeedbackClientId].showMessage(d.feedbackTypes.info,a)}};e.hideSelectFeedback=function(){"undefined"!=e.insertFeedbackClientId&&window[e.insertFeedbackClientId].hide()};var c=function(a){var b=[];a&&(null!=a.attr("nodeid")&&b.push([a.attr("nodeid"),a.children("a:first").contents().last().text()]),a.parentsUntil("."+d.cssClasses.treeContainer,"li").each(function(){var a=$(this);b.push([a.attr("nodeid"),a.children("a:first").contents().last().text()])}));e.hideRootCrumb||b.push([e.rootId,
e.rootTitle]);var c=$("<ul />").addClass(d.cssClasses.crumbs);a=$("<nav />").addClass(d.cssClasses.crumbsWrapper).append(c);$.each(b,function(a,b){var e=$("<li />").append($("<span />").addClass(d.cssClasses.crumbsSeparator).text(d.breadCrumbsSeparator));0<a?e.append($("<span />").append($("<a />").addClass(d.cssClasses.crumb).attr("href","#").data("node-id",b[0]).text(b[1]))):e.append($("<span />").text(b[1]));e.prependTo(c)});e.navigation.children("."+d.cssClasses.crumbsWrapper).remove().end().append(a)};
e.navigation.on("click","a."+d.cssClasses.leftMenuToggler,function(){768<$(window).width()?e.dialogContainer.toggleClass(d.cssClasses.desktopTreeContainerVisible).toggleClass(d.cssClasses.desktopTreeContainerHidden):e.dialogContainer.toggleClass(d.cssClasses.mobileTreeContainerVisible).toggleClass(d.cssClasses.mobileTreeContainerHidden);return!1});e.navigation.on("click","."+d.cssClasses.crumb,function(){e.navigateToNode($(this).data("node-id"));return!1});return e}
function GoogleDriveUploaderApiInitializer(d,e,f,c){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'onReadyCallback' is not defined");var a={pickerApiLoaded:!1,authApiLoaded:!1,oAuthToken:null,retried:!1,onInitializationError:function(a){c&&c(a)},loadAuthApi:function(){e.load("auth",{callback:a.onAuthApiLoaded})},loadPickerApi:function(){e.load("picker",{callback:a.onPickerApiLoaded})},initialize:function(){objectState.isNullOrUndefined(e)?
(window.safeConsoleLogger.error("Loading of Google Picker API failed. Most probably https://apis.google.com/js/api.js was block by firewall, proxy or adds blocking software."),a.onInitializationError("gapi is not available")):(a.loadAuthApi(),a.loadPickerApi())},onAuthApiLoaded:function(){a.authApiLoaded=!0;a.ifReadyCallOnReady()},onPickerApiLoaded:function(){a.pickerApiLoaded=!0;a.ifReadyCallOnReady()},ifReadyCallOnReady:function(){a.pickerApiLoaded&&a.authApiLoaded&&f&&f(e.auth)}};a.initialize();
return{}}
function GoogleDriveUploaderCallbacks(d){var e={},f={getFunctionByName:function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;for(var b=c.split("."),d=b.pop(),e=0;e<b.length;e++)a=a[b[e]];return a[d]}}};e.controlInitialized=f.getFunctionByName(d?d.OnControlInitialization:void 0);e.pickerOpened=f.getFunctionByName(d?d.OnPickerOpened:void 0);e.fileSelected=f.getFunctionByName(d?d.OnFileSelected:void 0);e.fileSelectionCanceled=f.getFunctionByName(d?d.OnFileSelectionCanceled:void 0);
e.fileUploadSuccess=f.getFunctionByName(d?d.OnFileUploadSuccess:void 0);e.fileUploadError=f.getFunctionByName(d?d.OnFileUploadError:void 0);e.controlInitializationError=f.getFunctionByName(d?d.OnControlInitializationError:void 0);e.fileUploadAborted=f.getFunctionByName(d?d.OnFileUploadAborted:void 0);return e}
function GoogleDriveUploaderControl(d,e,f,c,a,b,g,h,l){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'controls' is not defined");contract.require(!objectState.isNullOrUndefined(e.googleDriveLink),"controls.googleDriveLink is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");contract.require(!objectState.isNullOrUndefined(c),"argument 'pickerNamespace' is not defined");
contract.require(!objectState.isNullOrUndefined(a),"argument 'authApi' is not defined");contract.require(!objectState.isNullOrUndefined(b),"argument 'sender' is not defined");contract.require(!objectState.isNullOrUndefined(g),"argument 'uploadStateService' is not defined");contract.require(!objectState.isNullOrUndefined(h),"argument 'fileList' is not defined");l=l||{};var k={},m={baseDownloadUrl:"https://www.googleapis.com/drive/v2/files/{fileId}?key={developerKey}",pickerBase:null,currentFileId:null,
retryAuthorization:!1,oAuthToken:null,uploadInProgress:!1,getAuthHeader:function(){return{Authorization:"Bearer "+m.oAuthToken}},initializeBaseDownloadUrl:function(){m.baseDownloadUrl=m.baseDownloadUrl.replace("{developerKey}",d.developerKey)},setOriginUrlIfNeeded:function(a){objectState.isNullOrUndefined(d.originUrl)||a.setOrigin(d.originUrl)},prepareView:function(a){a=new c.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a},preparePickerBase:function(){var a=new c.PickerBuilder;a.addViewGroup((new c.ViewGroup(m.prepareView(c.ViewId.DOCS))).addView(m.prepareView(c.ViewId.DOCS_IMAGES)).addView(m.prepareView(c.ViewId.DOCS_VIDEOS)).addView(m.prepareView(c.ViewId.DOCUMENTS)).addView(m.prepareView(c.ViewId.DRAWINGS)).addView(m.prepareView(c.ViewId.FOLDERS)).addView(m.prepareView(c.ViewId.PDFS)).addView(m.prepareView(c.ViewId.PHOTOS)).addView(m.prepareView(c.ViewId.PRESENTATIONS)).addView(m.prepareView(c.ViewId.SPREADSHEETS))).setOAuthToken(m.oAuthToken).setDeveloperKey(d.developerKey).setCallback(m.googleDrivePickerCallback);
m.setOriginUrlIfNeeded(a);return a},createPicker:function(a){d.allowMultipleFiles&&k.isMultipleFilesModeEnabled?a.enableFeature(c.Feature.MULTISELECT_ENABLED):a.disableFeature(c.Feature.MULTISELECT_ENABLED);return a.build()},tryAuthorize:function(b,c){a.authorize({client_id:d.clientId,scope:d.scope,immediate:b},function(a){m.onAuthResult(a,c)})},onAuthResult:function(a,b){var c=!1;if(a&&!a.error)m.oAuthToken=a.access_token,c=!0;else{var d=a&&a.error||"some auth error",e=a.error_subtype||"";m.retryAuthorization||
"origin_mismatch"===e?(window.safeConsoleLogger.error("Authorization of Google Picker API failed. Most probably Platform's subdomain wasn't registered at https://console.developers.google.com."),m.onControlInitializationError(d)):(window.safeConsoleLogger.warn("Authorization of Google Picker API failed. This might apparently happen when browser uses pop-up blocker. Authorization will be retried on upload button click."),c=m.retryAuthorization=!0)}c&&b&&b()},handleButtonClick:function(){m.uploadInProgress||
(m.retryAuthorization?m.tryAuthorize(!1,m.showPicker):m.showPicker())},showPicker:function(){var a=m.preparePickerBase();m.createPicker(a).setVisible(!0);l.pickerOpened&&l.pickerOpened(k)},bindPickerToLinkClick:function(){e.googleDriveLink.click(m.handleButtonClick)},initialize:function(){m.tryAuthorize(!0,function(){b.onFilesUrlsSendSuccess(m.sendUrlsSuccess);b.onFilesUrlsSendError(m.sendUrlsFail);m.bindPickerToLinkClick();m.initializeBaseDownloadUrl();l.controlInitialized&&l.controlInitialized(k)})},
googleDrivePickerCallback:function(a){switch(a.action){case c.Action.PICKED:m.onFileSelected(a);break;case c.Action.CANCEL:m.onFileSelectionCanceled(a)}},delayRequest:function(a){var b={},c={callbacks:[],current:0,signalled:0,running:!1};b.data=a;c.runCallbacks=function(){if(!c.running){for(c.running=!0;c.current<c.signalled&&c.current<c.callbacks.length;)c.callbacks[c.current](b),c.current+=1;c.running=!1}};b.wait=function(a){c.callbacks.push(a);c.runCallbacks();return b};b.signal=function(){c.signalled+=
1;c.runCallbacks()};return b},openUploadStateChannel:function(a,b){g.openChannel({onChannelOpened:b,onSuccess:null,onFail:null,onProgress:m.onProgress,onAbort:m.onAbort})},getFileDownloadUrl:function(a){return m.baseDownloadUrl.replace("{fileId}",a[c.Document.ID])},getFileInfo:function(a){var b={};b.fileId=guidFactory.newGuid();1===a.length?(b.size=a[0].size,b.name=a[0].name):(b.size=a.reduce(function(a,b){return a+b.size},0),b.name=f.files);return b},getParameterValue:function(a,b){for(var c=[],
d,e=a.slice(a.indexOf("?")+1).split("&"),g=0;g<e.length;g++)d=e[g].split("="),c.push(d[0]),c[d[0]]=d[1];return c[b]},signalIfDoneProcessing:function(a){a.processed+=1;a.processed>=a.total&&a.delayed.signal()},getMetadataUrl:function(a){return browserSniffer.isInternetExplorer9()?d.googleDriveProxy+encodeURIComponent(a.url):a.url},getDownloadUrl:function(a,b){$.ajax({url:m.getMetadataUrl(a),type:"GET",data:"",headers:m.getAuthHeader(),success:function(c){if(c.downloadUrl)a.url=c.downloadUrl+"&access_token="+
m.oAuthToken;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){var d;d=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.url=c.exportLinks[d]+"&access_token="+m.oAuthToken;if(c=m.getParameterValue(a.url,"exportFormat"))a.name+="."+c}m.signalIfDoneProcessing(b)},error:function(){m.signalIfDoneProcessing(b)}})},addFilesToFileList:function(a){a=m.getFileInfo(a);h.addFile(a,m.abort);return a.fileId},removeFromList:function(a){h.removeFile(a);m.currentFileId=null;
m.uploadInProgress=!1},onFileSelected:function(a){!0!==m.uploadInProgress&&(m.uploadInProgress=!0,m.getSendRequestData(a).wait(m.executeFileSelectedCallback).wait(m.processUrls).wait(m.getUploadStateChannelId).wait(m.onUploadRequestReady))},getSendRequestData:function(a){var b={};b.files=a[c.Response.DOCUMENTS].map(function(a){return{url:m.getFileDownloadUrl(a),name:a[c.Document.NAME],size:a.sizeBytes}});m.currentFileId=m.addFilesToFileList(b.files);a=m.delayRequest({request:b});a.signal();return a},
getOptionsProxy:function(a,b){var c=!1;return{addParameter:function(d,e){c||(c=!0,b.addParameter(d,e),a.signal())}}},executeFileSelectedCallback:function(a){var c=b.getOptions(),d=a.data.request.files,e=1<d.length;if(void 0!==l.fileSelected){var g=m.getOptionsProxy(a,c);l.fileSelected(d,e,g)}a.data.options=c},processUrls:function(a){var b=a.data.request.files,c={total:b.length,processed:0,delayed:a};b.forEach(function(a){m.getDownloadUrl(a,c)})},getUploadStateChannelId:function(a){var b=a.data.request;
1===b.files.length?m.openUploadStateChannel(b.files,function(c){b.uploadStateChannelId=c.channelId;a.signal()}):a.signal()},onUploadRequestReady:function(a){var c=a.data.request;a=a.data.options;h.setFileStatusToInProgress(m.currentFileId);b.send(c,a)},onControlInitializationError:function(a){l.controlInitializationError&&l.controlInitializationError(a)},onFileSelectionCanceled:function(a){l.fileSelectionCanceled&&l.fileSelectionCanceled()},onFileUploadSuccess:function(a,b){h.setFileStatusToSuccess(m.currentFileId,
m.removeFromList);l.fileUploadSuccess&&l.fileUploadSuccess(a,b||{});m.uploadInProgress=!1},onFileUploadError:function(a){h.setFileStatusToError(m.currentFileId,a,m.removeFromList);l.fileUploadError&&l.fileUploadError(a);m.uploadInProgress=!1},onProgress:function(a){h.updateFileProgress(m.currentFileId,a/100)},onAbort:function(){h.removeFile(m.currentFileId);l.fileUploadAborted&&l.fileUploadAborted();m.uploadInProgress=!1},abort:function(){g.abortUpload()},sendUrlsSuccess:function(a,b){m.onFileUploadSuccess(a,
b)},sendUrlsFail:function(a){m.onFileUploadError(a)}};k.isMultipleFilesModeEnabled=!0;k.enableMultipleFilesMode=function(){k.isMultipleFilesModeEnabled=!0};k.disableMultipleFilesMode=function(){k.isMultipleFilesModeEnabled=!1};m.initialize();return k}
function GoogleDriveUploaderControlInitialization(d,e,f,c){var a={onReadyCallback:function(a){var g=UploaderSenderOptionsFactory(),g=FilesUrlsSender(d,e,$,g),h=UploaderFileItemFactory(e),h=UploaderFileList(f.fileList,h,e),l=UploadStateService({signalR:$.signalR,endpoint:d.uploadStateServiceEndpoint});GoogleDriveUploaderControl(d,f,e,google.picker,a,g,l,h,c)},initialize:function(){GoogleDriveUploaderApiInitializer(d,window.gapi,a.onReadyCallback,c.controlInitializationError)}};a.initialize()}
function GoogleDriveUploaderControls(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'controls' is not defined");var e={},f={getJQuerySafeId:function(c){return"#"+c.replace(/(:|\.|\[|\])/g,"\\$1")},jQElementExists:function(c){return 0<c.length},getJQElement:function(c,a){var b=f.getJQuerySafeId(c),b=$(b);if(f.jQElementExists(b))return b;if(void 0!==a)throw a;}};e.googleDriveLink=f.getJQElement(d.GoogleDriveLink,"GoogleDriveLink not found");e.fileList=f.getJQElement(d.FileList,"FileList not found");
return e}function GoogleDriveUploaderLiterals(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'translations' is not defined");var e={};e.chooseFromGoogleDrive=d.ChooseFromGoogleDrive;e.kb=d.Kb;e.mb=d.Mb;e.unknown=d.Unknown;e.files=d.Files;e.getFormattedFileSize=function(d){return objectState.isNumber(d)?1048576<=d?(d/1048576).toFixed(2)+" "+e.mb:(d/1024).toFixed(2)+" "+e.kb:""};return e}
function GoogleDriveUploaderSettings(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'settings' is not defined");var e={};e.pathToCdn=d.PathToCdn;e.maxFileSize=parseInt(d.MaxFileSize);e.minFileSize=parseInt(d.MinFileSize||0);e.developerKey=d.DeveloperKey;e.clientId=d.ClientId;e.scope=d.Scope;e.immediate=d.Immediate;e.allowMultipleFiles=d.AllowMultipleFiles;e.uploadUrl=d.UploadUrl;e.googleDriveProxy=d.GoogleDriveProxy;e.uploadStateServiceEndpoint=d.UploadStateServiceEndpoint;e.originUrl=
d.OriginUrl;return e}function CclGridColumn(d,e,f,c,a,b,g,h){this.dataField=d;this.sortField=e;this.sortDescendingByDefault=a;this.headerHtml=f;this.width=c;this.title=b;this.className=g;this.renderTableDataCellValueInsideDiv=h}
function CclAjaxGrid(d){function e(c){return c.replace(/^\s+|\s+$/,"")}window[d]=this;var f=this;f.name=d;f.pageSize=null;f.pageNumber=null;f.mainColumn=null;f.sortingProperty=null;f.filteringPreference=null;f.sortingDirection=null;f.dataSourceWebMethodUrl=null;f.dataSourceWebMethodParams={};f.gridClientID=null;f.columnChooserDialogName=null;f.columnChooserClientID=null;f.pagerInstanceName=null;f.allowSelecting=!1;f.allowColumnChoosing=!0;f.dataKeyName=null;f.selectingHiddenClientID=null;f.pageNumberHiddenClientID=
null;f.pageSizeHiddenClientID=null;f.sortingHiddenClientID=null;f.filteringHiddenClientID=null;f.columnOrderHiddenClientID=null;f.gridContentHiddenClientID=null;f.preferenceCategoryName=null;f.visibleColumns=[];f.columns=[];f.totalCount=0;f.keepSelection=!0;f.allowRowExpanding=!0;f.expandedRowButtonTitle=null;f.emptyTableText=null;f.accordionDataSourceUrl=null;f.saveToPreferencesWebMethodUrl=null;f.gridEmbeddedInAccordionGridControlClientId=null;f.cclGridConstants=null;f.virtualCount=null;f._getColumnsCount=
function(){return f.visibleColumns.length+(f.allowColumnChoosing?1:0)+(f.allowSelecting?1:0)};f._saveToPreferences=function(c,a,b,d){f.saveToPreferencesWebMethodUrl&&$.ajax({type:"POST",url:f.saveToPreferencesWebMethodUrl,data:{category:c,name:a,value:b},success:d,error:null})};f._getInvisibleColumns=function(){for(var c=[],a=0;a<f.columns.length;a++)f.visibleColumns.contains(f.columns[a].dataField)||c.push(f.columns[a].dataField);return c};f._applySelectedRowClass=function(c,a){if(a){var b=f.cclGridConstants.cssClasses.selectedRow;
c.className=e(c.className.replace(b,""));c.className=e(c.className+" "+b)}else c.className=e(c.className.replace(f.cclGridConstants.cssClasses.selectedRow,""))};f._addRemoveSelectedValue=function(c,a){a?CommonFunctions.addIdToHidden(f.selectingHiddenClientID,c):CommonFunctions.removeIdFromHidden(f.selectingHiddenClientID,c)};f.toggleSelect=function(c){null!=c&&f._applySelectedRowClass(c.parentNode.parentNode,c.checked);var a=!0,b=$("#"+f.gridClientID);b.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+
" input:checkbox").each(function(b,d){d.checked||(a&=0);null!=c&&f._addRemoveSelectedValue(d.value,d.checked)});b.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",a)};f.toggleSelectById=function(c,a){var b=$("#"+f.gridClientID).find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox[value='"+c+"']");null!=b[0]&&(b.prop("checked",!0),a&&b.prop("disabled",!0),b[0].parentNode&&b[0].parentNode.parentNode&&f._applySelectedRowClass(b[0].parentNode.parentNode,
b[0].checked))};f.toggleSelectAll=function(c){var a=$("#"+f.gridClientID);a.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").each(function(a,d){d.checked=c;f._applySelectedRowClass(d.parentNode.parentNode,c);f._addRemoveSelectedValue(d.value,d.checked)});a.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox:enabled").prop("checked",c)};f.toggleEnableAll=function(c){var a=$("#"+f.gridClientID);a.find("tr td."+f.cclGridConstants.cssClasses.selectColumn+
" input:checkbox").prop("disabled",!c);a.find("tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("disabled",!c)};f.restoreState=function(){var c=document.getElementById(f.sortingHiddenClientID).value.split(":");f.pageSize=parseInt(document.getElementById(f.pageSizeHiddenClientID).value,10);f.pageNumber=parseInt(document.getElementById(f.pageNumberHiddenClientID).value,10);f.sortingProperty=c[0];f.sortingDirection=c[1];f.filteringPreference=document.getElementById(f.filteringHiddenClientID).value;
f.visibleColumns=document.getElementById(f.columnOrderHiddenClientID).value.split(",")};f.hidePagerDependingOnElementsNumberAndGridSettings=function(){var c=$("#"+f.pagerContainerClientId);c&&f.hidePagerWhenTotalCountLessMinPageSize&&f.virtualCount<=f.cclGridConstants.minRowCount&&c.hide()};f.saveState=function(){document.getElementById(f.sortingHiddenClientID).value=f.sortingProperty+":"+f.sortingDirection;document.getElementById(f.pageSizeHiddenClientID).value=f.pageSize;document.getElementById(f.pageNumberHiddenClientID).value=
f.pageNumber;document.getElementById(f.columnOrderHiddenClientID).value=f.visibleColumns.toString();document.getElementById(f.filteringHiddenClientID).value=f.filteringPreference};f._getParamsStr=function(){var c="",a;for(a in f.dataSourceWebMethodParams)c+="&"+a+"="+escape(f.dataSourceWebMethodParams[a]);return c};f.refresh=function(){f.saveState();if(f.dataSourceWebMethodUrl){var c="",a="";f.sortingProperty&&(c=f.sortingProperty+":"+f.sortingDirection,f.columns.findBySortField(f.sortingProperty).dataField!=
f.mainColumn&&(c+=","+f.columns.findByDataField(f.mainColumn).sortField+":asc"));f.filteringPreference&&(a=f.filteringPreference);if(0<f.gridEmbeddedInAccordionGridControlClientId.length&&0<f.getSelectedValues().length&&0<document.getElementById(f.gridContentHiddenClientID).value.length)f.render(document.getElementById(f.gridContentHiddenClientID).value,!1);else{if(0==f.totalCount&&f.gridEmbeddedInAccordionGridControlClientId.length){var b=$("#"+f.gridClientID+" ."+f.cclGridConstants.cssClasses.emptyTableCell);
1>$(b).length&&(b=$("#"+f.gridClientID+" > tbody"),$(b).empty(),$("#"+f.gridClientID+" > tfoot").empty(),f._addRowWithText(b,"<img class='"+f.cclGridConstants.cssClasses.gridEmbededInAccordionGridControlLoadingCssClass+"'src='"+f.cclGridConstants.onePixelTransparentImageUrl+"' />",f._getColumnsCount(),f.cclGridConstants.cssClasses.emptyTableCell))}$.ajax({type:"POST",url:f.dataSourceWebMethodUrl,data:"pageNumber="+f.pageNumber+"&pageSize="+f.pageSize+"&sort="+c+"&filter="+a+f._getParamsStr(),dataType:"xml",
success:function(a){0<f.gridEmbeddedInAccordionGridControlClientId.length&&(document.getElementById(f.gridContentHiddenClientID).value=a.xml?a.xml:f.XmlToString(a));f.render(a,!0)},error:null})}}else f.postbackFunction()};f.sort=function(c){f.sortingDirection=f.sortingProperty==c?"asc"==f.sortingDirection?"desc":"asc":f.columns.findBySortField(c).sortDescendingByDefault?"desc":"asc";f.sortingProperty=c;f.goToPage(1);c=f.sortingProperty+":"+f.sortingDirection;f.columns.findByDataField(f.mainColumn).sortField==
f.sortingProperty&&"asc"==f.sortingDirection&&(c=null);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.sorting,c)};f.filter=function(c){f.filteringPreference!=c&&(f.filteringPreference=c,f.goToPage(1),f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.filtering,c))};f.goToPage=function(c){f.keepSelection||c==f.pageNumber||(document.getElementById(f.selectingHiddenClientID).value="");f.pageNumber=c;f.refresh()};f.changePageSize=function(c){f.pageSize=
c;f.goToPage(1);f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.pagesize,c)};f._getPageHref=function(c){return"javascript:"+f.name+".goToPage("+c+");"};f._addPager=function(){var c=window[f.pagerInstanceName];c&&(c.totalCount=f.totalCount,c.pageSize=f.pageSize,c.pageNumber=f.pageNumber,f.hidePagerWhenTotalCountLessMinPageSize&&f.totalCount<=c.getMinAvailablePageSize()?$("#"+f.pagerContainerClientId).hide():($("#"+f.pagerContainerClientId).show(),c.createIn($("#"+f.pagerContainerClientId).empty())))};
f._addHeader=function(c){var a=$("<tr></tr>"),b;f.allowSelecting&&(b=$("<th></th>").attr("scope","col").attr("class",f.cclGridConstants.cssClasses.selectColumn),b.append($("<input type='checkbox'/>").attr("id",f.name+"_select").on("click",function(){f.toggleSelectAll(this.checked)})),b.append($("<label class='"+f.cclGridConstants.cssClasses.hiddenLabel+"'</label>").attr("for",f.name+"_select").text(f.cclGridConstants.terms.selectAllRows)),a.append(b));for(var d=0;d<f.visibleColumns.length;d++){var e=
f.columns.findByDataField(f.visibleColumns[d]);b=$("<th></th>").attr("scope","col");if(e.sortField){var l=$("<a></a>").attr("href","#").attr("title",e.title).click({sortField:e.sortField},function(a){f.sort(a.data.sortField);return!1}),k=$("<span></span>").attr("class",f.cclGridConstants.cssClasses.thText).html(e.headerHtml);if(f.sortingProperty==e.sortField){b.attr("class",f.cclGridConstants.cssClasses.thSelected);var m=f.cclGridConstants.cssClasses.sortingArrow;"asc"!=f.sortingDirection&&(m+=" "+
f.cclGridConstants.cssClasses.sortingArrowDesc);l.append($("<img />").attr("class",m).attr("src",f.cclGridConstants.onePixelTransparentImageUrl))}else b.attr("class",f.cclGridConstants.cssClasses.thSortable);l.append(k);b.append(l)}else b.html(e.headerHtml);e.className&&b.addClass(e.className);e.width&&b.css("width",e.width+"px");b.appendTo(a)}f.allowColumnChoosing&&(b=$("<a class='"+f.cclGridConstants.cssClasses.columnChooserLink+"'></a>").attr("href","javascript:"+f.name+".showColumnChooser();").attr("title",
f.cclGridConstants.terms.columnChooserToolTip),b.append($("<img />").attr("src",f.cclGridConstants.onePixelTransparentImageUrl).attr("alt",f.cclGridConstants.terms.columnChooserToolTip)),$("<th></th>").attr("class",f.cclGridConstants.cssClasses.columnChooserColumn).append(b).appendTo(a));c.append(a)};f.getSelectedValues=function(){var c=$("#"+f.selectingHiddenClientID).val();return 0==c.length?[]:c.slice(0,c.length-1).split(",")};f.clearSelection=function(){$("#"+f.selectingHiddenClientID).val("")};
f.clear=function(){f.totalCount=0;f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var c=$("#"+f.gridClientID+" > tbody");c.empty();var a=f._getColumnsCount();f._addRowWithText(c,f.emptyTableText,a,f.cclGridConstants.cssClasses.emptyTableCell);f._addEmptyRows(c,f.cclGridConstants.minRowCount-1,a);$("tr:nth-child(even)",c).addClass(f.cclGridConstants.cssClasses.alternateRow)};f.render=function(c,a){a||(c=f.StringToXml(c));f.totalCount=$("VirtualCount",c).last().text();var b=f.getSelectedValues();
f._addHeader($("#"+f.gridClientID+" > thead").empty());f._addPager();var d=$("#"+f.gridClientID+" > tbody");d.empty();var e=$(":first-child > Items > *",c),l=0<e.length;1>e.length&&""!=$(c).text()&&(e=$(c).children().children());1>f.totalCount&&(e.length=0,l=!1);e.each(function(a,c){var e=$("<tr></tr>"),h=$(f.dataKeyName,c).text(),k=$(f.cclGridConstants.rowTooltipTextProperty,c);0<k.length&&e.attr("title",k.text());f.allowRowExpanding&&(e.css("cursor","pointer"),e.on("click",function(a){f.expandCollapseRow(c,
a,h);return!0}));if(f.allowSelecting){k=b.contains(h);l&=k;var p=$("<td></td>").attr("class",f.cclGridConstants.cssClasses.selectColumn);0!=f.dataKeySelectionVisible.length&&"true"!==$(f.dataKeySelectionVisible,c).text()||p.append($("<input type='checkbox'/>").attr("id",f.name+"_select_"+h).attr("value",h).prop("checked",k).prop("defaultChecked",k).on("click",function(){f.toggleSelect(this)})).append($("<label class='"+f.cclGridConstants.cssClasses.hiddenLabel+"'</label>").attr("for",f.name+"_select_"+
h).text(f.cclGridConstants.terms.selectOneRow+" "+$(f.mainColumn,this).text()));e.append(p);k&&e.addClass(f.cclGridConstants.cssClasses.selectedRow)}for(k=0;k<f.visibleColumns.length;k++){var p=f.columns.findByDataField(f.visibleColumns[k]),r=$(f.visibleColumns[k],c),z=$("<td></td>");z.html(p.renderTableDataCellValueInsideDiv?"<div title='"+r.text()+"'>"+r.text()+"</div>":r.text());p.className&&z.addClass(p.className);z.appendTo(e)}f.allowColumnChoosing&&e.append($("<td></td>"));d.append(e)});f.allowSelecting&&
$("thead tr th."+f.cclGridConstants.cssClasses.selectColumn+" input:checkbox").prop("checked",l);var k=f._getColumnsCount();0==e.length&&f._addRowWithText(d,f.emptyTableText,k,f.cclGridConstants.cssClasses.emptyTableCell);e.length<f.cclGridConstants.minRowCount&&f._addEmptyRows(d,f.cclGridConstants.minRowCount-Math.max(e.length,1),k);$("tr:nth-child(even)",d).addClass(f.cclGridConstants.cssClasses.alternateRow)};f._addRowWithText=function(c,a,b,d){c.append($("<tr></tr>").append($("<td></td>").attr("class",
d).attr("colSpan",b).html(a)))};f._addEmptyRows=function(c,a,b){for(var d=0;d<a;d++)f._addRowWithText(c,"&nbsp;",b,"")};f.createColumnChooser=function(c){f.columnChooserClientID&&$("#"+f.columnChooserClientID).sortable({opacity:.8,placeholder:c,tolerance:"pointer"})};f.showColumnChooser=function(){$("#"+f.columnChooserClientID).empty();for(var c=f.visibleColumns.concat(f._getInvisibleColumns()),a=0;a<c.length;a++){var b=f.columns.findByDataField(c[a]),d=f.visibleColumns.contains(b.dataField),b=$("<li />").attr("class",
f.cclGridConstants.cssClasses.columnChooser).append($("<input type='checkbox'/>").val(b.dataField).attr("id",f.name+"_"+b.dataField+"_chk").prop("checked",d).prop("defaultChecked",d)).append($("<label></label>").attr("for",f.name+"_"+b.dataField+"_chk").html(b.headerHtml));$("#"+f.columnChooserClientID).append(b)}window[f.columnChooserDialogName].open();(c=$("#"+this.columnChooserClientID).find("input:not(:disabled):first"))&&c.focus()};f.updateColumnsList=function(){var c=[];$(":checkbox","#"+f.columnChooserClientID).each(function(a,
d){var e=$(d);e.prop("checked")&&c.push(e.val())});0==c.length&&c.push(f.mainColumn);if(!c.isEqual(f.visibleColumns)){f.visibleColumns=c;f.visibleColumns.contains(f.columns.findBySortField(f.sortingProperty).dataField)?f.refresh():f.sort(f.columns.findByDataField(f.visibleColumns[0]).sortField);var a=null;c.isEqual(f.defaultColumnOrder)||(a=f.visibleColumns.toString());f._saveToPreferences(f.preferenceCategoryName,f.cclGridConstants.preferenceKeys.columnOrder,a)}return!0};f._collapseAll=function(){$("#"+
f.gridClientID+" > tbody > tr."+f.accordionRow).hide()};f.expandCollapseRow=function(c,a,b){if(a=a?a:window.event)if(a=a.srcElement||a.target,"TD"!=a.tagName&&"TR"!=a.tagName)return;if($(c).next().hasClass(f.cclGridConstants.cssClasses.accordionRow))d=$(c).next(),d.is(":hidden")?(f._collapseAll(),d.show(),d.removeAttr("style")):d.hide();else{f._collapseAll();var d=$("<tr class='"+f.cclGridConstants.cssClasses.accordionRow+"'></tr>").hide(),e=$("<td></td>").attr("colSpan",f._getColumnsCount());a=0<
this.accordionDataSourceUrl.indexOf("?")?"&":"?";$.get(f.accordionDataSourceUrl+a+f.accordionDataSourceUrlParameterName+"="+encodeURIComponent(b),{},function(a){e.html(a);d.show();d.removeAttr("style")},"html");d.append(e);$(c).after(d)}};f.getRow=function(c){return $("#"+f.gridClientID+" > tbody").find("tr:has(td:first input[value='"+c+"']:checkbox)")};Array.prototype.findByDataField=function(c){for(x in this)if(this[x].dataField==c)return this[x];return null};Array.prototype.findBySortField=function(c){for(x in this)if(this[x].sortField==
c)return this[x];return null};Array.prototype.isEqual=function(c){if(this.length!=c.length)return!1;for(var a=0;a<c.length;a++)if(this[a].compare&&!this[a].compare(c[a])||this[a]!==c[a])return!1;return!0};Array.prototype.contains=function(c){for(x in this)if(this[x]==c)return!0;return!1};f.StringToXml=function(c){var a;window.ActiveXObject?(a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(c)):a=(new DOMParser).parseFromString(c,"text/xml");return a};f.XmlToString=function(c){return window.ActiveXObject?
c.xml:(new XMLSerializer).serializeToString(c)}}
function CclGridSearchFilterInstance(d){window[d]=this;var e=this;this.inputEmptyCssClass=null;e.firstLoad=function(){e.isEmpty=e.settings.isEmpty;e.controls.searchInput.focus(function(){e.onFocus()}).keyup(function(d){return e.onKeyUp(d)}).keydown(function(d){d.which===CommonConstants.keyCodes.enter&&d.stopPropagation()}).keypress(function(d){return d.which!==CommonConstants.keyCodes.enter}).blur(function(){e.onBlur()});e.refresh()};e.onFocus=function(){e.isEmpty&&(e.isEmpty=!1,e.refresh(!0))};e.onBlur=
function(){if(0==e.controls.searchInput.val().length)e.isEmpty=!0,e.refresh(),e.filter("");else{var d=e.settings.preferenceWithoutValue+e.controls.searchInput.val();e.filter(d)}};e.onKeyUp=function(d){if(e.isEmpty)return e.isEmpty=!1,e.refresh(!0),!0;if(d.which===CommonConstants.keyCodes.enter)return d=e.settings.preferenceWithoutValue+e.controls.searchInput.val(),e.filter(d),!1};e.defineState=function(){e.isEmpty||0!=e.controls.searchInput.val().length||(e.isEmpty=!0)};e.refresh=function(d){e.isEmpty?
(e.controls.searchInput.addClass(e.inputEmptyCssClass),e.controls.searchInput.val(e.settings.searchText)):(d&&e.controls.searchInput.val(""),e.controls.searchInput.removeClass(e.inputEmptyCssClass))}}function GuidFactory(){return{newGuid:function(){function d(d){var f=(Math.random().toString(16)+"000000000").substr(2,8);return d?"-"+f.substr(0,4)+"-"+f.substr(4,4):f}return d()+d(!0)+d(!0)+d()}}}var guidFactory=GuidFactory();
function HtmlItemPicker(d){function e(){n.css("width",m.width()-t);n.removeClass(l.settings.cssClasses.hiddenClass)}function f(){return k.is(":visible")}function c(a){$(k).find("li[data-id='"+a+"']").addClass("ccl-htmlitempicker-highlighteditem")}function a(a){$(k).find("li[data-id='"+a+"']").removeClass("ccl-htmlitempicker-highlighteditem")}function b(b,d){var e;a(b.id);e=l.settings.items[d];c(e.id);q=e}function g(){k=$("<span></span>").attr("id",d+"_menu").addClass(l.settings.cssClasses.menu).insertAfter(m).hide();
var a=$(String.format("<ul class='{0}'></ul>",l.settings.cssClasses.alignment)).appendTo(k);$.each(l.settings.items,function(b,c){a.append($("<li></li>").attr("data-id",c.id.toString()).append($("<a></a>").attr("href","#").html(c.innerHtml).click(function(a){h();if(l.controls.selectedValueHidden.val()!==c.id.toString()){var b=c.innerHtml;l.controls.selectedValueHidden.val(c.id);l.setSelectedHtmlContainer(b);l.onValueChangedFunction(c,l)}a.preventDefault()})))})}function h(){k.hide();a(q.id)}window[d]=
this;var l=this,k,m,n,q,s=$(window),t;l.initialize=function(){m=l.controls.container;n=m.find("> span");m.find("> a");g();t=n.outerWidth(!0)-n.width();e();$(document).click(function(a){if(a.target===m[0]||1===$(a.target).closest(m).length){if(k.is(":visible"))h();else{a=m.offset();var b=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?a.top-k.outerHeight():a.top+m.outerHeight(),d=m.position(),b=l.settings.menuAlignment===l.settings.menuAlignmentEnum.top?0<b?d.top-k.outerHeight():d.top-
a.top:d.top+m.outerHeight(),d=d.left,e=s.width(),g=m.innerWidth();k.css("width",k.width()<=g?g:"auto");var n=k.outerWidth(),g=s.scrollLeft();n<e?(a=a.left+n,a>e+g&&(d-=a-e-g)):d=-a.left+g;k.css({top:b+"px",left:d+"px","z-index":l.settings.zIndex});null!==l.settings.listHeight&&k.css("max-height",l.settings.listHeight);k.show()}f()&&(q=l.getSelectedItem(),c(q.id))}else f()&&(b=k.offset(),a.clientX>b.left&&a.clientX<b.left+k.width()&&a.clientY>b.top&&a.clientY<b.top+k.height()||h())});$(document).keydown(function(a){if(f())switch(a.which){case CommonConstants.keyCodes.enter:if(l.controls.selectedValueHidden.val()!==
q.id.toString()){var c=q.innerHtml;l.controls.selectedValueHidden.val(q.id);l.setSelectedHtmlContainer(c);l.onValueChangedFunction(q,l)}h();a.preventDefault();return!1;case CommonConstants.keyCodes.escape:h();break;case CommonConstants.keyCodes.arrowUp:return f()&&(c=l.settings.items.indexOf(q),c=0==c?l.settings.items.length-1:c-1,b(q,c)),a.preventDefault(),!1;case CommonConstants.keyCodes.arrowDown:return f()&&(c=l.settings.items.indexOf(q),c=c==l.settings.items.length-1?0:c+1,b(q,c)),a.preventDefault(),
!1}});$(window).resize(function(a){n.addClass(l.settings.cssClasses.hiddenClass);e()})};l.getMenu=function(){return k};l.getSelectedItem=function(){var a=l.settings.items[0];$.each(l.settings.items,function(b,c){l.controls.selectedValueHidden.val()==c.id.toString()&&(a=c)});return a};l.setSelectedHtmlContainer=function(a){n.html("\n"+a+"\n")};l.setMenuItemContent=function(a,b){$(k.find("a")[a]).html(b);l.settings.items[a].innerHtml=b};return l}
(function(d,e){d(document).on("click","div[data-hybrid-editor-settings]>div.ccl-hybrideditoritem-text-container, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(e){var c=d(e.currentTarget).parent("div.ccl-hybrideditoritem");c.hybridEditorItem();c.hybridEditorItem("edit",e.currentTarget,e.target)});d(document).on("keydown","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",
null,function(d){d.which===CommonConstants.keyCodes.enter&&(d.preventDefault(),setTimeout(function(){d.target.click()},400))});d(document).on("mouseenter mouseleave focus","div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon-inline, div[data-hybrid-editor-settings]>a.ccl-hybrideditoritem-edit-icon",null,function(e){d(e.currentTarget).siblings("div.ccl-hybrideditoritem-text-container:first").toggleClass("ccl-hybrideditoritem-text-container-hovered","mouseenter"==e.type||"focusin"==e.type)});
d.widget("ccl.hybridEditor",{options:{editorClientId:e,editorSetContentFuncName:e,editorGetContentFuncName:e,dialogClientId:e,saveButtonClientId:e,modalDialogCloseHref:e,textUpdateCompleted:d.noop,ckePopupFixClass:e,isIos:!1},_create:function(){d("#"+this.options.saveButtonClientId).on("click",d.proxy(this._handleSaveClick,this));if(this.options.isIos){var e=this,c=d("html");d(document).on("cssmodal:show",function(a,b,d){d==e.options.dialogClientId&&c.addClass(e.options.ckePopupFixClass)}).on("cssmodal:hide",
function(a,b,d){d==e.options.dialogClientId&&c.removeClass(e.options.ckePopupFixClass)})}},_handleSaveClick:function(d){var c="";this.options.editorClientId&&this.options.editorGetContentFuncName&&(c=this.options.editorGetContentFuncName(this.options.editorClientId));this._trigger("textUpdateCompleted",d,c);this._closeDialog();return!1},_closeDialog:function(){window.location.href=this.options.modalDialogCloseHref},openEditor:function(d,c){this.updateEditorText(d);c&&""!=c&&window[this.options.dialogClientId].setTitle(c);
window.location.href="#"+this.options.dialogClientId},updateEditorText:function(d){this.options.editorClientId&&this.options.editorSetContentFuncName&&(this.options.editorSetContentFuncName(d,this.options.editorClientId),window[this.options.dialogClientId].adjustWindowSize())}})})(jQuery);
(function(d,e){d.widget("ccl.hybridEditorItem",{options:{groupSettingsFunctionName:e,groupSettingsFunctionParam:e,textContainerId:e,editLinkId:e,hybridEditorClientId:e,editModeEnabled:"hybrid",webMethodParams:e,webMethodDataParamName:e,saveContentWebUrl:e,inlineEditorOptions:e,editorDialogTitle:"",editToolTipText:e,textContainerWatermark:e,textContainerWatermarkCssClass:e,watermarkDataAttributeName:e,enable:!0},widgetState:{idle:0,inlineEditorOpened:1,savingPlainText:2,savingRichContent:3},_editor:e,
_inlineEditor:e,_textContainer:e,_editLink:e,_isAjaxEnabled:!1,_isWatermarkUsed:!1,_groupSettingsAreUsed:!1,_currentState:e,_create:function(){this._initializeSettings();this.options.webMethodParams=this._groupSettingsAreUsed?this.options.webMethodParams:JSON.parse(this.options.webMethodParams);this.options.webMethodDataParamName=this.options.webMethodDataParamName?this.options.webMethodDataParamName:"data";this._isAjaxEnabled=!!this.options.saveContentWebUrl;this._textContainer=d("#"+this.options.textContainerId);
this._textValueHidden=d("#"+this.options.textValueHiddenId);this._editLink=d("#"+this.options.editLinkId);this._isWatermarkUsed=this.options.textContainerWatermark!=e&&""!=this.options.textContainerWatermark;if(("hybrid"===this.options.editModeEnabled||"inline"===this.options.editModeEnabled)&&this.options.inlineEditorOptions){var f=this._groupSettingsAreUsed?this.options.inlineEditorOptions:JSON.parse(this.options.inlineEditorOptions);this._inlineEditor=new ClientInlineEditor(this._textContainer,
null,this._textValueHidden,f,d.proxy(this._savePlainText,this),d.proxy(this._inlineEditorModeChanged,this),null)}this.options.hybridEditorClientId&&(this._editor=d("#"+this.options.hybridEditorClientId));this._editor&&0!=this._editor.length||(this.options.editModeEnabled="inline");this._currentState=this.widgetState.idle},edit:function(e,c){if(this.options.enable){if(e===this._textContainer.get(0)){if(c&&0<d(c).closest("a,input,button,textarea").length)return;this._handleTextContainerClick()}e===
this._editLink.get(0)&&this._handleIconClick()}},updateTextContainer:function(d,c){this._updateText(d,c)},_initializeSettings:function(){var e=this.element.data("hybrid-editor-settings");if(d.isFunction(window[e.groupSettingsFunctionName])){var c;c=e.groupSettingsFunctionParam?window[e.groupSettingsFunctionName](e.groupSettingsFunctionParam):window[e.groupSettingsFunctionName]();d.extend(this.options,c);this.options.textContainerId=e.textContainerId;this.options.textValueHiddenId=e.textValueHiddenId;
this.options.editLinkId=e.editLinkId;this.options.hybridEditorClientId=e.hybridEditorClientId;this.options.watermarkDataAttributeName=e.watermarkDataAttributeName;d.extend(this.options.inlineEditorOptions,{supressOriginalBehaviour:!0,editFieldAutoWidth:!1});this._groupSettingsAreUsed=!0}else d.extend(this.options,e)},_handleTextContainerClick:function(){if(this._editor)switch(this.options.editModeEnabled){case "dialog":this._openHybridEditor();break;case "hybrid":var d=this._textContainer.html();
""===d||this._isWatermarkApplied()||CommonFunctions.isPlainText(d)?this._openInlineEditor():this._openHybridEditor();break;default:this._openInlineEditor()}else this._openInlineEditor()},_handleIconClick:function(){!this._editor||"hybrid"!==this.options.editModeEnabled&&"dialog"!==this.options.editModeEnabled?this._openInlineEditor():this._openHybridEditor()},_openInlineEditor:function(){this._inlineEditor&&this._currentState==this.widgetState.idle&&(this._removeWatermark(),this._inlineEditor.switchToEditMode(),
this._currentState=this.widgetState.inlineEditorOpened)},_openHybridEditor:function(){if(this._editor&&this._currentState!=this.widgetState.savingRichContent){var e=this._currentState==this.widgetState.inlineEditorOpened||this._currentState==this.widgetState.savingPlainText,c=d.proxy(this._saveRichContent,this);this._editor.off("hybrideditortextupdatecompleted").one("hybrideditortextupdatecompleted",c);c=this._textValueHidden.val();CommonFunctions.isPlainText(c)&&(c=this._textContainer.html());e&&
(c=CommonFunctions.replaceLineBreaksWithBrTags(this._inlineEditor.getEditFieldText()));this._editor.hybridEditor("openEditor",this._isWatermarkApplied()&&!e?"":c,this.options.editorDialogTitle)}},_savePlainText:function(e,c){var a=d.trim(e.actualText);if(!this._isAjaxEnabled)this._textUpdated(this._processPlainText(a),a),c(e);else if(this.options.saveContentWebUrl&&this.options.webMethodParams){var b=this,g={};g[this.options.webMethodDataParamName]=encodeURIComponent(this._processPlainText(a));a=
d.extend(this.options.webMethodParams,g);this._currentState=this.widgetState.savingPlainText;d.ajax({type:"POST",url:this.options.saveContentWebUrl,data:a,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(a){a&&(a.IsSuccessfull?(e.actualText=a.Value,b._textUpdated(a.SafeHtml,a.Value)):(e.isUpdateSuccess=!1,e.stopOnEdit=!0,b._handleError(a.ErrorText)))},error:function(a,c,d){e.isUpdateSuccess=!1;e.stopOnEdit=!0;b._handleAjaxError(a,c,d)},complete:function(){c(e)}})}},
_saveRichContent:function(e,c){d.isPlainObject(c)&&(c="");if(!this._isAjaxEnabled)this._textUpdated(c,c),this._addWatermark();else if(this.options.saveContentWebUrl&&this.options.webMethodParams){var a=this,b={};b[this.options.webMethodDataParamName]=encodeURIComponent(c);b=d.extend(this.options.webMethodParams,b);this._currentState=this.widgetState.savingRichContent;d.ajax({type:"POST",url:this.options.saveContentWebUrl,data:b,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(b){b&&
(b.IsSuccessfull?(a._textUpdated(b.SafeHtml,b.Value),CommonFunctions.isPlainText(b.SafeHtml)&&a._inlineEditor.setNewText(b.Value)):a._handleError(b.ErrorText));a._addWatermark();a._currentState=a.widgetState.idle},error:function(b,c,d){a._handleAjaxError(b,c,d)}})}},_addWatermark:function(){if(this._isWatermarkUsed&&!this._isWatermarkApplied()){var e=this._textContainer.html();e&&""!=e||(e=d("<span "+this.options.watermarkDataAttributeName+"='true'/>").text(this.options.textContainerWatermark),this.options.textContainerWatermarkCssClass&&
e.addClass(this.options.textContainerWatermarkCssClass),this._textContainer.prepend(e))}},_removeWatermark:function(){if(this._isWatermarkUsed){var d=this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]");0<d.length&&d.remove()}},_isWatermarkApplied:function(){return this._isWatermarkUsed&&0<this._textContainer.find("span["+this.options.watermarkDataAttributeName+"]").length},_inlineEditorModeChanged:function(d){d.isEditMode||(this._addWatermark(),this._currentState=this.widgetState.idle);
this._trigger("inlinemodechanged",null,d)},_textUpdated:function(d,c){this._updateText(d,c);this._trigger("textupdated",null,{html:d,value:c})},_updateText:function(d,c){this._textValueHidden.val(c);this._textContainer.html(d)},_processPlainText:function(d){return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/  /g," &nbsp;").replace(/\r?\n/g,"<br />\n")},_handleAjaxError:function(d,c,a){this._trigger("ajaxerror",null,{xhrObject:d})},_handleError:function(d){this._trigger("saveerror",
null,{errorText:d})},value:function(){return this._textValueHidden.val()},resetValue:function(){this._textUpdated("");this._inlineEditor.setNewText("");this._addWatermark()},setToolTip:function(d){this._inlineEditor.setToolTip(d);this._editLink.attr("title",d)},setEnable:function(d){this.options.enable=d;this._editLink.toggle(d);this._textContainer.toggleClass("ccl-hybrideditoritem-text-container-hovered",d);this._textContainer.toggleClass("h-cursor-default",!d);d?(this._addWatermark(),this._textContainer.attr("title",
this.options.editToolTipText)):(this._removeWatermark(),this._textContainer.attr("title",""))}})})(jQuery);
(function(d){var e=$(d.document);d.IframeClickEventHelper={registerDocumentClickBubblingOnTop:function(){var f="click touchstart";navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&(f="click");e.on(f,function(){var c=d.parent,a=d.top;a!=d&&(CommonFunctions.makePostMessageCall(a,{messageName:"iframeClickBubble"}),c!=a&&CommonFunctions.makePostMessageCall(c,{messageName:"iframeClickBubble"}))})},handleDocumentClickBubblingOnTop:function(){CommonFunctions.attachPostMessageEventListener($(d),
"iframeClickBubble",function(d){e.trigger(CommonTriggers.clickInInnerFrame)})}}})(window);
(function(d){d.IframeResizer={reportSetIframeDefaultHeight:function(){var e;(e=d.parent)&&d!=e&&CommonFunctions.makePostMessageCall(e,{messageName:"setIframeDefaultHeight"})},registerDefaultHeight:function(e,f){var c=$(d),a=$("#"+e.iframeClientId),b,g,h=CCL.CommonFunctions.calculateBottomOffset(a);g=d[e.setIframeDefaultHeightFunctionName]=function(){var b=IframeResizer.getIframeDefaultHeight(c,a,h)-8;a.height(b);f&&f(b+8)};g();c.resize(function(){b&&clearTimeout(b);b=setTimeout(g,200)});CommonFunctions.attachPostMessageEventListener(c,
"setIframeDefaultHeight",function(a){g()})},getIframeDefaultHeight:function(d,f,c){return d.innerHeight()-f.offset().top-c},registerExtensionIframeListener:function(e){var f=$("#"+e.iframeClientId);CommonFunctions.attachPostMessageEventListener($(d),[CommonWindowMessages.MessageNames.expandExtensionIframe,CommonWindowMessages.MessageNames.collapseExtensionIframe],function(c){var a=(c=c.messageName===CommonWindowMessages.MessageNames.expandExtensionIframe)?"0":"";f.css({position:c?"absolute":"",top:a,
right:a,bottom:a,left:a});IframeResizer.reportSetIframeDefaultHeight()})}}})(window);function InlineFeedback(d){window[d]=this;var e=this;e.show=function(d){var c=e.controls;c.container.css("visibility","visible");0<d&&c.container.delay(1E3*d).fadeTo("slow",0,function(){$(this).css("visibility","hidden").css("opacity",1)})}}
(function(d){d.InlineReplyManager={sendButtonClick:function(d,f){var c=$(d),a=c.parent().prev(),b=a.val();b&&(c.prop("disabled",!0),f({target:c,messageBody:CommonFunctions.replaceLineBreaksWithBrTags(CommonFunctions.htmlEncode(b)),sendMessageCompleteCallback:function(){c.prop("disabled",!1)},sendMessageSuccessCallback:function(){a.val("")}}))}}})(window);
(function(d){"function"===typeof define&&define.amd?define(["jquery"],d):d(jQuery)})(function(d){if(!d.support.cors&&d.ajaxTransport&&window.XDomainRequest){var e=/^https?:\/\//i,f=/^get|post$/i,c=new RegExp("^"+location.protocol,"i");d.ajaxTransport("* text html xml json",function(a,b,g){if(a.crossDomain&&a.async&&f.test(a.type)&&e.test(a.url)&&c.test(a.url)){var h=null;return{send:function(c,e){var g="",f=(b.dataType||"").toLowerCase();h=new XDomainRequest;/^\d+$/.test(b.timeout)&&(h.timeout=b.timeout);
h.ontimeout=function(){e(500,"timeout")};h.onload=function(){var a="Content-Length: "+h.responseText.length+"\r\nContent-Type: "+h.contentType,b=200,c="success",g={text:h.responseText};try{if("html"===f||/text\/html/i.test(h.contentType))g.html=h.responseText;else if("json"===f||"text"!==f&&/\/json/i.test(h.contentType))try{g.json=d.parseJSON(h.responseText)}catch(l){b=500,c="parseerror"}else if("xml"===f||"text"!==f&&/\/xml/i.test(h.contentType)){var m=new ActiveXObject("Microsoft.XMLDOM");m.async=
!1;try{m.loadXML(h.responseText)}catch(y){m=void 0}if(!m||!m.documentElement||m.getElementsByTagName("parsererror").length)throw b=500,c="parseerror","Invalid XML: "+h.responseText;g.xml=m}}catch(J){throw J;}finally{e(b,c,g,a)}};h.onprogress=function(){};h.onerror=function(){e(500,"error",{text:h.responseText})};b.data&&(g="string"===d.type(b.data)?b.data:d.param(b.data));h.open(a.type,a.url);h.send(g)},abort:function(){h&&h.abort()}}}})}});
function KeepAlive(){function d(){f&&f.webMethodUrl&&$.ajax({type:"POST",data:f.postData,url:f.webMethodUrl,contentType:"application/json; charset=utf-8",success:function(a){if(a&&(a=a.hasOwnProperty("d")?a.d:a,a.ErrorCode&&0>a.ErrorCode&&a.StopPolling&&1==a.StopPolling))return;c=0;setTimeout(function(){d()},1E3*f.intervalInSeconds)},error:function(){c++;c<f.maxNumberOfTries&&setTimeout(function(){d()},1E3*f.errorTimeoutInSeconds)}})}var e=this,f,c=0;e.initialize=function(){(f=e.settings)&&setTimeout(function(){d()},
1E3*f.intervalInSeconds)};return e}
function LabeledInput(d){function e(){return m.find("."+b.settings.itemClass)}function f(a,c){b.pushLabel(c.item.label,c.item.metadata);h.val("");return!1}function c(){h.prop("placeholder",e().length?"":b.settings.watermark);a();b.settings.onLabelsChangedHandler&&k.each(function(a){a()})}function a(){b.settings.watermark&&!h.val()&&0==e().length?(h.removeAttr("width"),h.attr("size",h.attr("placeholder").length),h.css("max-width",m.width()-40+"px")):(h.removeAttr("size"),h.attr("width","100"))}var b=
this,g,h,l,k=[],m;window[d]=b;b.initialize=function(){b.settings.onLabelsChangedHandler&&k.push(b.settings.onLabelsChangedHandler);g=b.settings.removeButtonTooltipFormat;m=$("#"+b.settings.containerId);m.on(b.settings.clickOrTouch,".ccl-labeled-input-remove",function(a){$(a.target).parent().remove();c()});h=$("#"+b.settings.inputId);l=h.parent();h.autocomplete({open:function(a,b){$(".ui-autocomplete").width(m.width())},focus:function(a,b){a.preventDefault()},position:{collision:"none flip",of:m},
source:b.settings.autocompleteCallback,select:f,delay:b.settings.autocomplete.delay,minLength:b.settings.autocomplete.minLength,messages:{noResults:"",results:function(){return""}},create:function(){b.settings.renderItem&&($(this).data("ui-autocomplete")._renderItem=b.settings.renderItem)}});h.keyup(function(){a()});h.keydown(function(a){a.which!==CommonConstants.keyCodes.backspace||b.hasText()||(a=e(),0<a.length&&(a.last().remove(),c()))});h.blur(function(){h.val("");a()});h.focus(function(){a()});
b.settings.autocomplete.autocompleteMenuCssClass&&h.data("ui-autocomplete").menu.activeMenu.addClass(b.settings.autocomplete.autocompleteMenuCssClass);l.append(h.data("ui-autocomplete").menu.activeMenu.detach());m.on(b.settings.clickOrTouch,function(a){h.is(":focus")||(a.preventDefault(),h.focus())});a()};b.pushLabel=function(a,d){var e=$("<span></span>"),f=$("<span>"+a+"</span>"),h=$('<a href="#" class="ccl-labeled-input-remove">\u00d7</a>');h.prop("title",g.replace("{0}",a));e.data("meta",d);f.addClass(b.settings.textClass);
e.addClass(b.settings.itemClass);e.append(f).append(h);e.insertBefore(l);c()};b.getLabelsMetadata=function(){return $.makeArray(e().map(function(a,b){return $(b).data("meta")}))};b.mapLabelsField=function(a){return b.getLabelsMetadata().map(function(b){return b[a]})};b.clear=function(){e().remove();h.val("");c()};b.hasText=function(){return""!==h.val().trim()};b.getText=function(){return h.val()};b.addLabelsChangedHandler=function(a){b.settings.onLabelsChangedHandler&&k.push(a)};b.focus=function(){h.focus()}}
function LearningObjectivesSelector(d,e,f,c,a,b){window[d]=this;var g=this;g.readLearningObjectivesUrl=a.readLearningObjectivesUrl;g.selectedIds=c;g.selectableCategory=a.selectableCategory;g.selectableObjective=a.selectableObjective;g.selectableSubject=a.selectableSubject;g.cutOffLoStructure=a.cutOffLoStructure;g.terms=f;g.language=a.language;g.updateContainerOnSelect=a.updateContainerOnSelect;e?(g.folderSelector=e,g.baseGetRequestData=e.getRequestData,g.editable=!0):g.editable=!1;g.placeHolderOnEmpty=
a.placeHolderOnEmpty;g.courseId=a.courseId;g.countryCode=a.countryCode;g.showTooltip=a.showTooltip;g.firstLoad=!0;g.cache={};g.cssClasses=b;g.filtersData={};""!=a.filtersData&&(g.filtersData=a.filtersData);g.defaultFilter=a.defaultFilter;g.filtersddl=$(".js-filter-ddl");g.GetCurrentFilter=function(){return 0<g.filtersddl.length?g.filtersddl.find(":selected").val():g.defaultFilter};g.folderSelector&&(g.folderSelector.dialogContainer.addClass(g.cssClasses.learningObjectivesSelector),g.folderSelector.showFeedbackOnEmpty=
0==g.filtersddl.length);g.selectedContainer=$("#"+d).find("."+g.cssClasses.selectedContainer);g.emptyContainer=$("#"+d).find("."+g.cssClasses.emptyContainer);g.addLink=$("#"+d).find("."+g.cssClasses.addLink);if(g.editable)g.selectedContainer.on("click","."+g.cssClasses.removeLink,function(){$(g).trigger(a.clientEvents.removeItem,$(this));g.removeSelectedIds([$(this).data("loId")]);return!1});g.openDialog=function(){g.folderSelector&&g.folderSelector.openDialog(g.filtersData[g.GetCurrentFilter()])};
g.updateSelectedItemsContainer=function(){g.updateContainerOnSelect&&(g.selectedContainer.empty(),g.emptyContainer.empty(),g.listIsEmpty()?g.toggleEmptyContentFeedback(!0):(g.setSelectedIds(g.selectedIds,!0),g.loadData(g.selectedIds,function(a){var b=[];$.each(a,function(a,c){g.renderSelectedItemHtml(c.id,c.title,c.description,c.type,c.options);b.push(c.id)});0===b.length&&g.toggleEmptyContentFeedback(!0)})))};g.createTooltip=function(a,b){var c=$("<span></span>");c.text(a);var d=new ToolTip(null,
c);d.title=$("<div/>").text(a).html();d.description=b;d.settings={showPopupTimeout:300,hidePopupTimeout:300,cssClasses:{tooltipPopup:"ccl-tooltip-popup",linkToTooltip:"ccl-tooltip-link",arrowUp:"ccl-tooltip-arrow-up",arrowDown:"ccl-tooltip-arrow-down",arrowContainer:"ccl-tooltip-arrow-container",tooltipTitle:"ccl-tooltip-popup-title",tooltipDescription:"ccl-tooltip-popup-description"}};d.initialize();return c};g.renderSelectedItemHtml=function(a,b,c,d,e){b=$("<div></div>").addClass(g.cssClasses.selectedItem).append($("<span></span>").addClass(g.cssClasses.selectedItemIcon).addClass(d)).append(g.showTooltip?
g.createTooltip(b,c):$("<span></span>").text(b));g.editable&&(a=$("<a></a>").data("loId",a).addClass(g.cssClasses.removeLink).attr("title",g.terms.deleteTooltip).attr("href","#").text("\u00d7"),void 0!==e&&a.data("options",e),b.append(a));g.selectedContainer.append(b)};g.getSelectedItemsSelector=function(){return String.format(".{0}",g.cssClasses.selectedItem)};g.listIsEmpty=function(){return 0==g.selectedIds.length};g.toggleEmptyContentFeedback=function(a){g.emptyContainer.text(a?g.placeHolderOnEmpty:
"")};g.showSuccessFeedback=function(){g.folderSelector.showSuccessFeedback()};g.showErrorFeedback=function(){g.folderSelector.showErrorFeedback()};g.showProgressFeedback=function(){g.folderSelector.showProgressFeedback()};g.addSelectedIds=function(b){var c={};$.each(g.selectedIds,function(a,b){c[b]=b});$.each(b,function(a,b){c[b]=b});g.selectedIds=[];$.each(c,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.removeSelectedIds=function(b){var c=
{};$.each(g.selectedIds,function(a,b){c[b]=b});$.each(b,function(a,b){delete c[b]});g.selectedIds=[];$.each(c,function(a){g.selectedIds.push(a)});$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.clearSelectedIds=function(){g.selectedIds=[];$(g).trigger(a.clientEvents.selectionChange);g.updateSelectedItemsContainer()};g.setSelectedIds=function(a,b){g.selectedIds=[];g.selectedIds=a;g.toggleFolderSelectById(g.selectedIds,b)};g.toggleFolderSelectById=function(a,b){g.folderSelector&&
($.each(a,function(a,c){g.folderSelector.controls.grid.toggleSelectById(c,b)}),b&&g.folderSelector.toggleSelectButtons(!1))};g.loadData=function(b,c){var d=[],e={};$.each(b,function(a,b){void 0===g.cache[b]?d.push(b):e[b]=g.cache[b]});0==d.length?c(e):$.ajax({type:"POST",url:g.readLearningObjectivesUrl,data:{ids:d.join(",")},dataType:"jsonp",success:function(a){$.each(a.Items,function(a,b){var c={id:b.Id,title:b.Title,description:b.Description,type:b.Type};g.cache[b.Id]=c;e[b.Id]=c});c(e)},error:function(){$(g).trigger(a.clientEvents.error)}})};
g.changeFilter=function(a){g.folderSelector.reinitialize(!0,g.filtersData[a])};if(e){var h=!1;e.getRequestData=function(a,b,c){a=g.baseGetRequestData(a,b,c);a.SelectableCategory=g.selectableCategory;a.SelectableLearningObjective=g.selectableObjective;a.SelectableSubject=g.selectableSubject;a.cutOffLoStructure=g.cutOffLoStructure;g.language&&(a.lan=g.language);return a};$(e).on(a.folderSelectorEvents.select,function(b,c){var d=h?[c.selectedId]:c.nodeIds;$(g).trigger(a.clientEvents.addItems,[d.filter(function(a){return 0>
g.selectedIds.indexOf(a)})]);g.addSelectedIds(d)});if(a.restrictInsertContext)$(e).on(a.folderSelectorEvents.gridRender,function(a,b,c){if(h=c.virtualItemCount>c.folders.length)b.toggleSelectAll(!0),b.toggleEnableAll(!1)});else $(e).on(a.folderSelectorEvents.gridRender,function(a,b,c){$.each(g.selectedIds,function(a,c){b.toggleSelectById(c,!0)})});if(g.filtersddl)g.filtersddl.on("change",function(){g.changeFilter($(this).val())})}g.updateSelectedItemsContainer();return g}
function ListCollapser(d,e,f,c,a){var b=this;b.showCount=e;b.showCountJquerySelector=e-1;b.hidden=!0;b.listHolder=d;b.listChangesEvents=f;b.showLinkText=c;b.hideLinkText=a;b.getList=function(){return b.listHolder.children("ul")};b.getLength=function(){return b.getList().children("li").length};b.restructure=function(){var c=b.getLength(),d=$("#showLink",b.listHolder),e=$("#hideLink",b.listHolder),f=Math.min(b.showCount,c);b.getList().children("li:lt("+f+")").show();b.showCount<c?(void 0==d[0]?(d=$("<a>").attr("href",
"javascript:void(0);").attr("id","showLink").css("display","none").insertAfter(b.getList()),d.click(function(){b.hidden=!1;b.getList().children("li").show();e.show();d.hide()})):d.insertAfter(b.getList()),void 0==e[0]?(e=$("<a>").html(a).attr("href","javascript:void(0);").attr("id","hideLink").css("display","none").insertAfter(b.getList()),e.click(function(){b.hidden=!0;b.getList().children("li:gt("+b.showCountJquerySelector+")").hide();e.hide();d.show().html(b.showLinkText+" ("+b.getLength()+")")})):
e.insertAfter(b.getList()),b.hidden?(b.getList().children("li:gt("+b.showCountJquerySelector+")").hide(),e.hide(),d.show().html(b.showLinkText+" ("+c+")")):(d.hide(),e.show())):(d.hide(),e.hide())};b.init=function(){b.restructure();if(b.listChangesEvents)b.listHolder.on(b.listChangesEvents,b.restructure)}}
function MetadataTranslationsList(d){window[d]=this;var e=this,f;e.firstLoad=function(){f=e.controls.table.find("tbody");var c=e.controls.languageDataHidden.val();e.settings.metadataLanguages=c?JSON.parse(c):[];e.controls.addLanguageLink.on("click",function(){e.addLanguageLinkClick()});e.controls.languageInput.on("change",function(){e.controls.languageIdHidden.val(e.controls.languageInput.val())});e.updateAddButton();$.each(e.metadataColumns,function(a,b){if(b.IsMultiLine){var c=e.getInputForMetadataColumn(b),
d=c.attr("rows")*c.attr("cols")*2;c.keypress(function(a){c.val().length>d&&a.preventDefault()});c.on("paste",function(){setTimeout(function(){c.val($.trim(c.val().replace(/[\n\r]+/g,"")));c.val(c.val().substring(0,d))},100)})}})};e.getInputForMetadataColumn=function(c){return $("#"+e.settings.modalDialogClientId+"_"+c.Name)};e.addLanguageLinkClick=function(){e.fillLanguageInfo(null)};e.editLanguageLinkClick=function(c,a){e.fillLanguageInfo(a)};e.dialogLoaded=function(){e.controls.languageInput.is(":visible")?
e.controls.languageInput.focus():e.getInputForMetadataColumn(e.metadataColumns[0]).focus()};e.saveLanguageClick=function(){e.clearValidators();var c={},a=!0,b=parseInt(e.controls.languageIdHidden.val());0>b&&(e.showValidationMessage(e.controls.languageInput,e.settings.requiredValidationMessage),a=!1);c[e.settings.metadataLanguageIdDataField]=b;$.each(e.metadataColumns,function(b,d){var g=$.trim(e.getInputForMetadataColumn(d).val());e.validateMetadataColumn(d,g)||(a=!1);c[d.DataField]=g});if(!a)return!1;
var d=e.findMetadataLanguageById(b);d?$.each(e.metadataColumns,function(a,b){d[b.DataField]=c[b.DataField]}):e.settings.metadataLanguages.push(c);e.saveLanguagesToHidden();e.fillTableRow(c);e.updateTable();e.updateAddButton();return!0};e.getTableRow=function(c){c=f.find("tr:has(td:first input[value='"+c+"']:hidden)");0==c.length&&(c=$("<tr></tr>").appendTo(f));return c};e.fillTableRow=function(c){var a=e.cssClasses,b=c[e.settings.metadataLanguageIdDataField],d=e.getTableRow(b);d.empty().append($("<td></td>").addClass(a.TableColumnLanguage).append($("<input />").attr("type",
"hidden").val(b)).append($("<a></a>").attr("href","javascript:void(0);").text(e.getLanguageTitleById(b)).on("click",function(){e.editLanguageLinkClick(this,b)})));$.each(e.metadataColumns,function(a,b){d.append($("<td></td>").addClass(b.CssClass).text(c[b.DataField]))});d.append($("<td></td>").addClass(a.TableColumnDelete).append($("<a></a>").addClass("ccl-iconlink").addClass(a.TableColumnDeleteImage).attr("href","javascript:void(0);").attr("title",e.settings.deleteRowTooltip).on("click",function(){e.removeLanguageClick(this,
b)}).append($("<img />").attr("src",e.settings.deleteImageUrl).attr("alt",e.settings.deleteRowTooltip).addClass(a.tableColumnDeleteImage))))};e.validateMetadataColumn=function(c,a){var b=!0;c.IsRequired&&0==a.length&&(b=!1,e.showValidationMessage(e.getInputForMetadataColumn(c),e.settings.requiredValidationMessage));return b};e.removeLanguageClick=function(c,a){var b=e.settings.metadataLanguages;$.each(b,function(c,d){return d[e.settings.metadataLanguageIdDataField]==a?(b.splice(c,1),e.saveLanguagesToHidden(),
!1):!0});$(c).parent().parent().remove();e.updateTable();e.updateAddButton()};e.saveLanguagesToHidden=function(){e.controls.languageDataHidden.val(JSON.stringify(e.settings.metadataLanguages))};e.findMetadataLanguageById=function(c){var a=null;$.each(e.settings.metadataLanguages,function(b,d){return d[e.settings.metadataLanguageIdDataField]==c?(a=d,!1):!0});return a};e.getAvailableLanguagesData=function(){return $.grep(e.settings.languages,function(c){return null==e.findMetadataLanguageById(c.Key)})};
e.disableSelectedLanguages=function(){var c=e.controls.languageInput;c.find("option").remove();$.each(e.getAvailableLanguagesData(),function(a,b){c.append($("<option></option>").val(b.Key).text(b.Value))})};e.getLanguageTitleById=function(c){for(index in e.settings.languages)if(e.settings.languages[index].Key==c)return e.settings.languages[index].Value;return""};e.showValidationMessage=function(c,a){$("<div></div>").text(a).addClass(e.cssClasses.ErrorMessage).appendTo(c.parent())};e.clearValidators=
function(){e.controls.modalDialogContainer.find("div."+e.cssClasses.ErrorMessage).remove()};e.fillLanguageInfo=function(c){var a=null;0<=c&&(a=e.findMetadataLanguageById(c));var b=!!a;e.clearValidators();window[e.settings.modalDialogName].setNewTitle(b?e.getLanguageTitleById(c):e.settings.addLanguageDialogTitle);e.controls.languageIdHidden.val(b?a[e.settings.metadataLanguageIdDataField]:-1);e.controls.languageInput.parent().toggle(!b);$.each(e.metadataColumns,function(c,d){e.getInputForMetadataColumn(d).val(b?
a[d.DataField]:"")});b||e.disableSelectedLanguages();window[e.settings.modalDialogName].open()};e.updateTable=function(){var c=e.cssClasses.TableRowAlternate;f.find("tr:even").removeClass(c);f.find("tr:odd").addClass(c);f.parent().toggle(0<f.find("tr:has(td)").length)};e.updateAddButton=function(){e.controls.addLanguageLink.toggle(e.settings.metadataLanguages.length<e.settings.languages.length-1)};return e}
function ObjectStateValidators(){var d={},e={isUndefinedSafe:function(d,c){return d===c}};d.isNull=function(d){return null===d};d.isUndefined=function(d){return e.isUndefinedSafe(d)};d.isNullOrUndefined=function(e){return d.isUndefined(e)||d.isNull(e)};d.isFunction=function(d){return"function"===typeof d};d.isArray=function(d){return Array.isArray(d)};d.isString=function(d){return"string"===typeof d};d.isNumber=function(d){return"number"===typeof d&&!isNaN(d)};d.isBoolean=function(d){return"boolean"===
typeof d};d.isWhitespace=function(e){return d.isString(e)&&/^\s*$/.test(e)};d.isNullOrWhitespace=function(e){return d.isNullOrUndefined(e)||d.isWhitespace(e)};d.isFileError=function(d){return"undefined"!==typeof FileError&&d instanceof FileError?!0:!1};return d}var objectState=ObjectStateValidators();
function OkOrCancel(d){window[d]=this;var e=this,f,c,a;e.initialize=function(){f=e.settings;c=e.scripts;a=e.controls;f.attachInProgressEventManually||a.okButton.click(function(){var a=$(this).parents("form:first");if(a.length&&"undefined"!==typeof a[0].checkValidity?a[0].checkValidity():1)e.toggleInProgressState(!0,f.toggleCancel),CommonFunctions.safeExecuteFunction(c.okButtonClick)})};e.toggleInProgressState=function(b,c){b?(a.okButton.addClass(e.settings.inProgressCssClass),a.okButton.attr("title",
e.settings.inProgressTitle)):(a.okButton.removeAttr("title"),a.okButton.removeClass(e.settings.inProgressCssClass));a.okButton.prop("disabled",b);c&&a.cancelButton.toggleHyperlink(!b)};return e}
function Pager(d){window[d]=this;var e=this,f,c;e.totalCount=0;e.pageSize=0;e.pageNumber=0;e.initialize=function(){f=e.settings.cssClasses;c=e.settings.terms};e.goToPage=function(a){e.customScripts.goToPage&&e.customScripts.goToPage({pageNumber:a})};e.changePageSize=function(a){e.customScripts.changePageSize&&e.customScripts.changePageSize({pageSize:a})};e.hide=function(){e.controls.pagerContainer.empty()};e.getMinAvailablePageSize=function(){return e.settings.pageSizes&&0<e.settings.pageSizes.length?
e.settings.pageSizes[0]:0};e.render=function(){var a=e.controls.pagerContainer,b=$("<ul></ul>").attr("class",f.pager),g=Math.ceil(e.totalCount/e.pageSize),h,l,k;a.empty();a.append(b);if(e.mode&e.settings.pagerMode.nextPrev&&0<g){if(1<e.pageNumber){k=$("<li></li>").attr("class",f.previousNext);var m=e.pageNumber-1;l=$("<a></a>").attr("href","#").attr("title",c.previous).click(function(){e.goToPage(m);return!1}).append($("<span></span>").html("&laquo;").attr("class",f.prevArrow));k.append(l)}else k=
$("<li></li>").attr("class",f.text).append($("<span></span>").html("&laquo;").attr("class",f.prevArrowDisabled));if(e.pageNumber<g){var n=e.pageNumber+1;l=$("<li></li>").attr("class",f.previousNext).append($("<a></a>").attr("href","#").attr("title",c.next).click(function(){e.goToPage(n);return!1}).append($("<span></span>").html("&raquo;").attr("class",f.nextArrow)))}else l=$("<li></li>").attr("class",f.text).append($("<span></span>").html("&raquo;").attr("class",f.nextArrowDisabled));b.append(k);
e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&b.append(l)}if(e.mode&e.settings.pagerMode.numericPages)for(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages&&b.append($("<li>|</li>").attr("class",f.text)),k=1;k<=g;k++)e.pageNumber==k?(h=!1,b.append($("<li></li>").attr("class",f.selectedItem).append($("<span></span>").text(k)))):e.pageNumber==k||1==k||k==g||Math.abs(e.pageNumber-k)<=e.settings.pageLinksNearSelectedCount?b.append($("<li></li>").append($("<a>"+k+"</a>").attr("href","#").click({actualPageNumber:k},
function(a){e.goToPage(a.data.actualPageNumber);return!1}))):h||(h=!0,b.append($("<li></li>").attr("class",f.text).append("<span>...</span>")));0==(e.mode&e.settings.pagerMode.nextPrevBeforeNumericPages)&&b.append(l);if(e.mode&e.settings.pagerMode.pageSize||e.mode&e.settings.pagerMode.pageSizeDropdown||e.mode&e.settings.pagerMode.pageSizeStaticLabel||e.mode&e.settings.pagerMode.pageInfo){b=$("<span></span>").attr("class",f.pageSizeChooser);a.append(b);if(e.mode&e.settings.pagerMode.pageInfo){k=e.pageSize*
e.pageNumber;k>e.totalCount&&(k=e.totalCount);a=1+e.pageSize*(e.pageNumber-1);if(0==e.pageNumber||0==e.totalCount)a=0;b.append($("<span></span>").text(c.pageInfoLabelTemplate.replace("{0}",a).replace("{1}",k).replace("{2}",e.totalCount)))}a=e.settings.pageSizes;if(e.mode&e.settings.pagerMode.pageSize)for(g=$("<ul></ul>"),b.append(g),g.append($("<li></li>").attr("class",f.pageSizeChooserLabel).text(c.pageSizeChooserLabel)),k=0;k<a.length;k++)h=a[k]==e.pageSize?$("<li></li>").attr("class",f.selectedItem).text(a[k]):
$("<li></li>").append($("<a></a>").attr("href","javascript:"+d+".changePageSize("+a[k]+");").text(a[k])),g.append(h);if(e.mode&e.settings.pagerMode.pageSizeDropdown){k=$("<select></select>");$(k).change(function(){window[d].changePageSize(this.options[this.selectedIndex].value)});b.append(k);for(g=0;g<a.length;g++)h=$("<option></option>").attr("value",a[g]).text(c.pageSizeItemPrefix+" "+a[g]),k.append(h);k.find("option").each(function(){var a=$(this);if(a.val()==e.pageSize)return a.prop("selected",
!0),!1})}e.mode&e.settings.pagerMode.pageSizeStaticLabel&&b.append($("<span/>").text(c.pageSizeItemPrefix+" "+e.pageSize).addClass(f.pageSizeStaticLabel))}};e.createIn=function(a){var b=$("<div></div>").prop("className",f.main);a.append(b);e.controls.pagerContainer=b;e.render()};return e}
(function(d,e){function f(b,d,e,f){var n={};n[e.format]=e.url;b.jPlayer("setMedia",n);if(e.isVideo){d.css({"line-height":0});var n=a(d),q=c(d);f.jPlayer.flash.used||q.add(n).removeAttr("style");f.jPlayer.status.noFullWindow&&(f=$(b.jPlayer("option","cssSelectorAncestor")),f.find(".jp-screen-control").hide(),f.find(".jp-bar").css({right:"0"}));e.width&&!e.cssClassSize&&$("#"+e.playerContainerId).css(e.autoResizable?"maxWidth":"width",e.width);0<q.length?(e=e.width?e.width:d.width(),f=Math.round(e/
16*9),b.jPlayer("option","size",{width:e+"px",height:f+"px"}),d.css({position:"relative"})):g.commonSettings.isIpad?0===d.find("canvas").length&&(b=$("<canvas>"),b.css({height:"auto"}),d.prepend(b),d.css({position:"relative","padding-top":"6.2%"})):n.css({position:"inherit"})}}function c(a){return a.find("object, embed")}function a(a){return a.find("video")}function b(a,b,c){$("#"+a).find(".jp-play").prop("title",b?c.pause:c.play)}var g=d.PlayerManager={commonSettings:e,addPlayer:function(d,e){$("#"+
e.playerContainerId).on("click",function(a){a.stopPropagation()});return d.jPlayer({ready:function(a){f($(this),d,e,a)},ended:function(a){f($(this),d,e,a)},error:function(a){a.jPlayer.error.type===$.jPlayer.error.URL&&(a='<div class="'+e.cssClassFeedback+'">'+e.terms.contentNotAvailable+"</div>",$(this).closest(".jp-flat-video, .jp-flat-audio").html(a).removeClass())},swfPath:g.commonSettings.swfPath,cssSelectorAncestor:"#"+e.playerContainerId,useStateClassSkin:!0,autoBlur:!1,smoothPlayBar:!0,remainingDuration:!0,
keyEnabled:!0,keyBindings:{loop:null,muted:null,volumeUp:null,volumeDown:null},supplied:e.format,size:e.isVideo?{width:"100%",height:0<c(d).length?"100%":"auto",cssClass:e.cssClassSize?e.cssClassSize:g.commonSettings.defaultCssClassSize}:{},sizeFull:e.isVideo?{cssClass:"jp-flat-video-full"}:{},autohide:e.isVideo?{full:!1,restored:!1}:{},noFullWindow:{msie:/msie/,ipad:/ipad.*?os [0-4]\./,iphone:/iphone/,ipod:/ipod/,android_pad:/android [0-3]\.(?!.*?mobile)/,android_phone:/android.*?mobile/,blackberry:/blackberry/,
windows_ce:/windows ce/,iemobile:/iemobile/,webos:/webos/}}).on($.jPlayer.event.play,function(f){e.isVideo&&!f.jPlayer.flash.used&&c(d).add(a(d)).removeAttr("style");e.isVideo&&$(this).jPlayer("option","autohide",{full:!0,restored:!0});g.commonSettings.isIpad||a(d).css({position:"inherit"});b(e.playerContainerId,!0,e.terms);$(this).jPlayer("pauseOthers")}).on($.jPlayer.event.pause,function(){e.isVideo&&$(this).jPlayer("option","autohide",{full:!1,restored:!1});b(e.playerContainerId,!1,e.terms)}).on($.jPlayer.event.resize,
function(b){if(e.isVideo&&!b.jPlayer.flash.used){c(d).add(a(d)).removeAttr("style");d.css({position:b.jPlayer.options.fullScreen||b.jPlayer.options.fullWindow?"":"relative"});g.commonSettings.isIpad||a(d).css({position:"inherit"});b=b.jPlayer.options.fullScreen||b.jPlayer.options.fullWindow;var f=e.terms;$("#"+e.playerContainerId).find(".jp-full-screen").prop("title",b?f.restoreScreen:f.fullScreen)}}).on($.jPlayer.event.click,function(a){e.isVideo&&(a.jPlayer.status.paused?$(this).jPlayer("play"):
$(this).jPlayer("pause"))})}}})(window);function ProgressBar(d){window[d]=this;var e=this,f=!0,c,a;e.initialize=function(){c=e.settings;a=e.controls;void 0!==c.showLabel&&(f=c.showLabel);a.bar.find(".ui-progressbar-value").remove();a.bar.progressbar({value:c.percent});f&&a.labelContainer.html(c.percent+"%")};e.setPercent=function(b){a.bar.progressbar("option",{value:b});f&&a.labelContainer.html(b+"%")};return e}
function CclResponsiveGrid(d){function e(a){return a.replace(/^\s+|\s+$/,"")}function f(a){var b=k.scrollTop(),c=k.scrollLeft(),d=g.offset();d.frameTop=0;d.frameLeft=0;if(m){var e=$('iframe[name="mainmenu"]',k[0].document).offset();d.frameTop=e.top;d.frameLeft=e.left}e=d.top+d.frameTop+g.outerHeight()-h.outerHeight();b>=d.top+d.frameTop&&b<e?(h.hasClass(n)||(l.height(h.height()).show(),h.css("width",h.width()).addClass(n)),a?h.css("top",b-d.frameTop):h.css("left",d.left-c)):h.hasClass(n)&&(l.hide(),
h.removeClass(n).css("top","").css("left","").css("width",""))}function c(){h.hasClass(n)&&(h.removeClass(n).css("width",""),l.height(h.height()),h.css("width",h.width()).addClass(n))}function a(a){return $.map(a.find("div > ul."+b.cclGridConstants.cssClasses.gridRow).parent(),function(a){var c=parseInt($(a).find("ul > li."+b.cclGridConstants.cssClasses.rowDetailsColumn+' > input[type="hidden"].'+b.cclGridConstants.cssClasses.orderValue).val()),d=parseInt($(a).index())+1+(b.pageNumber-1)*b.pageSize;
return c!==d?{elementPrimaryKey:$(a).find("ul > li."+b.cclGridConstants.cssClasses.rowDetailsColumn+' > input[type="hidden"].'+b.cclGridConstants.cssClasses.primaryKey).val(),elementNewIndex:$(a).index(),elementNewOrderValue:d}:null})}window[d]=this;var b=this;b.name=d;b.gridClientID=null;b.pageSize=null;b.pageNumber=null;b.pagerInstanceName=null;b.cclGridConstants=null;b.pageNumberHiddenClientID=null;b.pageSizeHiddenClientID=null;b.preferenceCategoryName=null;b.selectingHiddenClientID=null;b.sortingHiddenClientID=
null;b.filteringHiddenClientID=null;b.selectColumn=null;b.selectedRow=null;b.ajaxSettings=null;b.totalCount=0;b.freezeToolbar=!1;b.scrollToControlOnPagination=!1;b.filteringPreference=null;b.sortingProperty=null;b.isIos=!1;b.isReorderModeAvailable=!1;b.orderProperty=null;b.reorderTogglerClientId=null;b.isReorderModeOn=!1;b.isReorderModeHandlerAttached=!1;var g,h,l,k=$(window),m=!1,n,q=0;b.initialize=function(){g=$("#"+b.gridClientID);h=g.find("."+b.cclGridConstants.cssClasses.toolbar);b.restoreState();
b.attachEvents();b.ajaxSettings.useAjaxMode&&b.ajaxSettings.dataSourceWebMethodUrl&&!b.ajaxSettings.delayedInitialization&&b.refresh();if(b.freezeToolbar&&h.length){n=b.cclGridConstants.cssClasses.toolbarFreeze;l=$('<div style="display:none;"/>').attr("class",h.attr("class")).insertAfter(h);if(b.isIos&&(m=window.top!=window)){k=$(window.top);var a=function(){f(!0)};k.on("scroll",a);$(window).on("unload",function(){k.off("scroll",a)})}$(window).scroll(function(){f()}).resize(function(){c()})}};b.useAjaxMode=
function(){return b.ajaxSettings&&b.ajaxSettings.useAjaxMode};b.goToPage=function(a){document.getElementById(b.selectingHiddenClientID).value="";b.pageNumber=a;b.refresh();b.scrollAfterPagination()};b.sort=function(a){b.sortingProperty!=a&&(b.sortingProperty=a,b.goToPage(1))};b.filter=function(a){b.filteringPreference!=a&&(b.filteringPreference=a,b.goToPage(1))};b.changePageSize=function(a){b.pageSize=a;b.goToPage(1)};b.restoreState=function(){b.pageSize=parseInt(document.getElementById(b.pageSizeHiddenClientID).value,
10);b.pageNumber=parseInt(document.getElementById(b.pageNumberHiddenClientID).value,10);b.sortingProperty=document.getElementById(b.sortingHiddenClientID).value;b.filteringPreference=document.getElementById(b.filteringHiddenClientID).value};b.saveState=function(){document.getElementById(b.pageSizeHiddenClientID).value=b.pageSize;document.getElementById(b.pageNumberHiddenClientID).value=b.pageNumber;document.getElementById(b.sortingHiddenClientID).value=b.sortingProperty;document.getElementById(b.filteringHiddenClientID).value=
b.filteringPreference};b._addRemoveSelectedValue=function(a,c){c?CommonFunctions.addIdToHidden(b.selectingHiddenClientID,a):CommonFunctions.removeIdFromHidden(b.selectingHiddenClientID,a)};b.toggleSelect=function(a){b._applySelectedRowClass(a.parentNode.parentNode,a.checked);g.find("."+b.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(a,c){b._addRemoveSelectedValue(c.value,c.checked)})};b.getSelectedValues=function(){var a=$("#"+b.selectingHiddenClientID).val();return 0==
a.length?[]:a.slice(0,a.length-1).split(",")};b.replaceKeyValue=function(a,c){g.find("."+b.cclGridConstants.cssClasses.selectColumn+" input:checkbox[value='"+a+"']").each(function(d,e){e.value=c;e.checked&&(b._addRemoveSelectedValue(a,!1),b._addRemoveSelectedValue(c,!0))});var d=b.cclGridConstants.cssClasses.gridRow+"-";g.find("."+d+a+":first").removeClass(d+a).addClass(d+c)};b.getRowById=function(a){return g.find("."+b.cclGridConstants.cssClasses.gridRow+"-"+a+":first")};b.getRowsContainer=function(){return g.find("."+
b.cclGridConstants.cssClasses.gridRowsContainer+":first")};b.getRows=function(){return b.getRowsContainer().find("."+b.cclGridConstants.cssClasses.gridRow)};b.getRowsCount=function(){return b.getRows().length};b.toggleRowStatus=function(a,c){return b.getRowById(a).parent().toggleClass(b.cclGridConstants.cssClasses.inactiveRow,!c)};b.getGridElement=function(){return g};b.getToolbarElement=function(){return h};b.disableToolbarItem=function(a){a=b.getToolbarElement().find(a);0<a.length&&$(a.parent("li")).addClass("disabled")};
b.getFeedback=function(){return window[b.feedbackInstanceName]};b.clearSelection=function(){$("#"+b.selectingHiddenClientID).val("")};b._applySelectedRowClass=function(a,c){if(c){var d=b.cclGridConstants.cssClasses.selectedRow;a.className=e(a.className.replace(d,""));a.className=e(a.className+" "+d)}else a.className=e(a.className.replace(b.cclGridConstants.cssClasses.selectedRow,""))};b.toggleSelectAll=function(a){g.find("."+b.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(c,
d){d.checked=a;b._addRemoveSelectedValue(d.value,a);b._applySelectedRowClass(d.parentNode.parentNode,a)})};b.toggleDisableAll=function(a){g.find("."+b.cclGridConstants.cssClasses.selectColumn+" input:checkbox").each(function(b,c){c.disabled=a})};b.addGridMessage=function(a){b.removeGridMessage();b.removeEmptyText();var c=b.getRowsContainer();a=$("<div></div>").addClass(b.cclGridConstants.cssClasses.gridText).html(a);c.before(a)};b.removeGridMessage=function(){g.find("."+b.cclGridConstants.cssClasses.gridText+
":first").remove()};b.refresh=function(){b.saveState();b.updateFreezeState();if(b.ajaxSettings.useAjaxMode){b.addGridMessage(b.cclGridConstants.terms.ajaxLoadingText);if(b.ajaxSettings.useChunkLoading&&0<b.ajaxSettings.chunkSize){q=0;var a=b.getRowsContainer();a.empty();a.hide();return b.refreshChunks()}return $.ajax({type:"POST",url:b.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+b.pageNumber+"&pageSize="+b.pageSize+"&sort="+b.sortingProperty+"&filter="+b.filteringPreference+b._getParamsStr(),
dataType:"json",success:function(a){b.removeGridMessage();b.render(a);b.updateFreezeState()},error:function(){b.addGridMessage(b.cclGridConstants.terms.ajaxErrorText)}})}b.postbackFunction()};b.refreshChunks=function(){return $.when($.ajax({type:"POST",url:b.ajaxSettings.dataSourceWebMethodUrl,data:"pageNumber="+b.pageNumber+"&pageSize="+b.pageSize+"&sort="+b.sortingProperty+"&filter="+b.filteringPreference+"&chunkNumber="+q+"&chunkSize="+b.ajaxSettings.chunkSize+b._getParamsStr(),dataType:"json"})).done(function(a){"undefined"!==
typeof a.noChunks?a.noChunks?(b.removeGridMessage(),0==q&&b.render(a),b.getRowsContainer().show(),b.updateFreezeState()):(q++,b.render(a,!0),b.refreshChunks()):(b.removeGridMessage(),b.addGridMessage(b.cclGridConstants.terms.ajaxErrorText))}).fail(function(){b.removeGridMessage();b.addGridMessage(b.cclGridConstants.terms.ajaxErrorText)})};b.scrollAfterPagination=function(){!0===b.scrollToControlOnPagination?$(window).scrollTop($("#"+b.gridClientID).offset().top):$(window).scrollTop(0)};b._getParamsStr=
function(){var a="";$.each(b.ajaxSettings.dataSourceWebMethodParams,function(b,c){a+="&"+b+"="+escape(c)});return a};b.getRowPrimaryKeyValue=function(a){return b.getCurrentRow(a).find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.primaryKey).val()};b.getRowPrimaryKeyValueByIndex=function(a){return b.getRowsContainer().find("."+b.cclGridConstants.cssClasses.gridRow+":eq("+a+") ").find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.primaryKey).val()};
b.getRowIndex=function(a){return b.getCurrentRow(a).find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.rowIndex).val()};b.getCurrentRow=function(a){return $(a).parents("."+b.cclGridConstants.cssClasses.gridRow)};b.render=function(a,c){c="undefined"!==typeof c?c:!1;b.totalCount=c?b.totalCount+a.virtualCount:a.virtualCount;b.reInitializePager(b.pageNumber,b.pageSize,b.totalCount);var d=b.getRowsContainer();c?d.append(a.gridData):d.html(a.gridData);b.isReorderModeAvailable&&
$("#"+b.reorderTogglerClientId).parent("li").removeClass(b.cclGridConstants.cssClasses.selectedItem);0<b.orderProperty.length&&(b.isReorderModeAvailable=0<=b.sortingProperty.indexOf(b.orderProperty)&&1<b.totalCount,b.attachReorderModeHandler(),0<b.reorderTogglerClientId.length&&b.toggleReorderTogglerElement($("#"+b.reorderTogglerClientId),b.isReorderModeAvailable),"Auto"==b.reorderModeAjaxSettings.reorderMode&&b.toggleReorderMode());g.trigger("datachanged")};b.addNewRow=function(){$.ajax({type:"POST",
url:b.addNewSettings.webMethodUrl,data:b.addNewSettings.params||"{}",dataType:"json",success:function(a){b.render(a,!0);b.updateFreezeState();0<b.getRowsCount()&&b.getEmptyTextContainer().hide()},error:function(){b.addGridMessage(b.cclGridConstants.terms.ajaxErrorText)}})};b.attachEvents=function(){g.on("click","."+b.cclGridConstants.cssClasses.selectColumn+" input[type=checkbox]",function(){b.toggleSelect(this)});g.on("change","."+b.cclGridConstants.cssClasses.sorting+" > select",function(){var a=
$(this).val();b.sort(a)});if(b.freezeToolbar&&b.isIos)g.on("hybrideditoriteminlinemodechanged",function(a,b){b.isEditMode||f(!0)});b.isReorderModeAvailable&&b.attachReorderModeHandler()};b.reInitializePager=function(a,c,d){var e=window[b.pagerInstanceName];e&&(e.pageNumber=a,e.pageSize=c,e.totalCount=d,e.render(),b.hidePagerWhenTotalCountLessMinPageSize?e.controls.pagerContainer.toggle(0<d&&b.totalCount>e.getMinAvailablePageSize()):e.controls.pagerContainer.toggle(0<d))};b.updateFreezeState=function(a){b.freezeToolbar&&
h.length&&(f(a),c())};b.removeEmptyText=function(){b.getEmptyTextContainer().remove()};b.getEmptyTextContainer=function(){return b.getRowsContainer().children("."+b.cclGridConstants.cssClasses.emptyGridText)};b.getRowOrderPropertyValue=function(a){return a.find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.orderValue).val()};b.setRowOrderPropertyValue=function(a,c){return a.find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.orderValue).val(c)};
b.setRowIndexPropertyValue=function(a,c){return a.find("."+b.cclGridConstants.cssClasses.rowDetailsColumn+" ."+b.cclGridConstants.cssClasses.rowIndex).val(c)};b.attachReorderModeHandler=function(){!b.isReorderModeHandlerAttached&&b.isReorderModeAvailable&&($("."+b.cclGridConstants.cssClasses.reorderModeSelector).sortable({axis:"y",scrollSensitivity:100,handle:"."+b.cclGridConstants.cssClasses.reorderModeDragHandler,cursor:"move"}),$("."+b.cclGridConstants.cssClasses.reorderModeSelector).on("sortstart",
function(a,c){c.item.data("reorderItemEntityId",b.getRowPrimaryKeyValueByIndex(c.item.index()));c.item.data("oldOrderValue",b.getRowOrderPropertyValue(c.item));c.item.data("oldIndexValue",c.item.index())}),$("."+b.cclGridConstants.cssClasses.reorderModeSelector).on("sortchange",function(a,b){}),$("."+b.cclGridConstants.cssClasses.reorderModeSelector).on("sortstop",function(c,d){var e=parseInt(d.item.data("oldOrderValue")),g=parseInt(d.item.data("oldIndexValue")),f=parseInt(d.item.index());g!==f&&
(f>g?d.item.data("newOrderValue",e+(f-g)):d.item.data("newOrderValue",e-(g-f)),b.useAjaxMode()&&b.callReorderModeUpdateMethod(d.item,a($(this))))}),$("."+b.cclGridConstants.cssClasses.reorderModeSelector).on("sortupdate",function(a,b){}),b.isReorderModeHandlerAttached=!0)};b.toggleReorderMode=function(){b.isReorderModeOn="Auto"==b.reorderModeAjaxSettings.reorderMode?!0:!b.isReorderModeOn;$("#"+b.reorderTogglerClientId).parent("li").toggleClass(b.cclGridConstants.cssClasses.selectedItem,b.isReorderModeOn);
b.getRowsContainer().find("."+b.cclGridConstants.cssClasses.gridRow).toggleClass(b.cclGridConstants.cssClasses.reorderMode,b.isReorderModeOn);g.find("."+b.cclGridConstants.cssClasses.reorderModeColumnSelector+" div > img").toggleClass(b.cclGridConstants.cssClasses.hidden,!b.isReorderModeOn)};b._getReorderParamsStr=function(){var a="";$.each(b.reorderModeAjaxSettings.reorderModeWebMethodParams,function(b,c){a+="&"+b+"="+escape(c)});return a};b.callReorderModeUpdateMethod=function(a,c){return $.ajax({type:"POST",
url:b.reorderModeAjaxSettings.reorderModeWebMethodUrl,data:"entityId="+a.data("reorderItemEntityId")+"&oldValue="+a.data("oldOrderValue")+"&newValue="+a.data("newOrderValue")+b._getReorderParamsStr(),dataType:"json",success:function(a){for(var d=0;d<c.length;d++)b.setRowIndexPropertyValue(b.getRowById(c[d].elementPrimaryKey),c[d].elementNewIndex),b.setRowOrderPropertyValue(b.getRowById(c[d].elementPrimaryKey),parseInt(c[d].elementNewOrderValue));"undefined"!==typeof b.reorderModeAjaxSettings.reorderModeCallbackClientFunction&&
b.reorderModeAjaxSettings.reorderModeCallbackClientFunction(a)},error:function(a,c,d){$("."+b.cclGridConstants.cssClasses.reorderModeSelector).sortable("cancel")}})};b.toggleReorderTogglerElement=function(a,b){var c=a.attr("id"),d=a.html(),e=a.attr("class");b?(a.parent("li").removeClass("disabled"),a.replaceWith('<a href="#" id="'+c+'" class="'+e+'" onclick="javascript:'+this.name+'.toggleReorderMode();">'+d+"</a>")):(a.parent("li").addClass("disabled"),a.replaceWith('<span id="'+c+'" class="'+e+
'">'+d+"</span>"))}}
function RubricAssessmentCriteriaList(d){function e(a,b,d){Ja(a,b,d,!1);c();a.toggleSelectAll(!1)}function f(a,b,c,d,e){if(0<b){ha[a]={LearningObjectiveId:a,Status:b,MasteryOption:c,Comment:d};N.overriddenCriteriaAssessmentsHidden.val(JSON.stringify(ha));var g=e.find(String.format("> span.{0}",u.statusBox)),f=e.siblings("."+u.overrideMasterText).find("span."+u.masteredBoxHolder),h=f.find("> span"),f=f.find("> img"),l=e.siblings("."+u.overrideComment);e=l.find("."+u.overrideCommentText);l=l.find("."+
u.overrideCommentLabel);m(g,b);l.parent().toggle(""!=d);e.text(d);v.useMastery&&(va[a].BreaksRecurrence&&c!==Xa.mastered?k(h,f,!1):(d=va[a].AffectsByLevel,g=va[a].AffectsByResettingMastery,a=va[a].MasteredWithoutOverride,c===Xa.mastered?k(h,f,!0):g&&(d?(b=n(b),k(h,f,b>=v.masteryStartsAt)):k(h,f,a))))}}function c(){v.searchSharedCriteriaBox&&window[v.searchSharedCriteriaBox]&&window[v.searchSharedCriteriaBox].refresh()}function a(a,b){J(a);E(a,b);ba(a)}function b(a){a=$(a.data);var b=a.parent(),c=
a.hasClass(u.selectedBox);b.children("li."+u.selectedBox).removeClass(u.selectedBox);b.find("li span."+u.star).removeClass(u.starOn).addClass(u.starOff);var d=T(a.find("input[type=hidden]").val()),e=d.key,d=d.value;c?(Ba[e]=v.rubricAssessmentCustomNull,b.find("li."+u.criteriaDescriptionRow).hide()):(a.addClass(u.selectedBox),a.find("span."+u.star).removeClass(u.starOff).addClass(u.starOn),Ba[e]=d,b.find("li."+u.criteriaDescriptionRow).show());N.updatedCriteriaAssessmentsHidden.val(JSON.stringify(Ba));
v.showOverride&&(a=b.parents("."+u.criteriaContainer),b=a.find("div."+u.overrideStatusBoxContainer).data("learningobjectiveid").toString(),l(a.find("ul."+u.row),b));a=h();g(a)}function g(a){function b(a){if(-1!==a){a=v.assessmentUpdaterSettings.maxScore*a/100;var c=Math.pow(10,2);a=(Math.round(a*c)/c).toString();"."!==v.assessmentUpdaterSettings.numberDecimalSeparator&&0<a.indexOf(".")&&(a=a.replace(".",v.assessmentUpdaterSettings.numberDecimalSeparator));return a}return""}function c(a){var b=$.grep(Qa,
function(b,c){return a>=b});return v.assessmentUpdaterSettings.assessmentPercentage[b[b.length-1]]}v.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(v.assessmentUpdaterSettings.useScore&&H.callbacks.scoreSetValueFunction?H.callbacks.scoreSetValueFunction(b(a)):v.assessmentUpdaterSettings.useAssessment&&H.callbacks.assessmentSetValueFunction&&H.callbacks.assessmentSetValueFunction(c(a)),La.show())}function h(){var a=0,b=0,c=[];$("."+u.selectedBox).each(function(){var a=T($(this).find("input[type=hidden]").val());
c[a.key]=a.value});$.each(v.achievementLevelsPoints,function(d,e){if(c[d]&&0!=c[d]){var g=c[d],f=0;$.each(e,function(a,b){b>f&&(f=b)});a+=v.achievementLevelsPoints[d][g];b+=f}});return 0<b?a/b*100:-1}function l(a,b){if(v.showOverride){var c=0,d=a.length;a.each(function(){var a=$(this),b=a.find("li."+u.column),e=a.find("li."+u.selectedBox),a=b.index(e)+1;v.achivementLevelOrderDirection==Ra.lowestToHighest&&(a=$(b.get().reverse()).index(e)+1);1<=a?(b=b.length,c+=100*(b-a+1)/b):d--});var e=c/d,g=a.parents("."+
u.criteriaContainer),f=g.find(String.format("div.{0} > span.{1}",u.overrideStatusBoxContainer,u.statusBox)),h=g.find("span."+u.masteredBoxHolder),g=h.find("> span"),h=h.find("> img");1<=e?$.each(Ca,function(a,c){var d=a+1<Ca.length?Ca[a+1]:null,d=d?d.startsAt:v.maximumPercentageValue;e>=c.startsAt&&e<d&&(Da[b]=Ea[c.type].Title,N.assessmentStatusesByCriteriaHidden.val(JSON.stringify(Da)),null==ha[b]&&m(f,c.type))}):(Da[b]=Ea[la.notAssessed].Title,N.assessmentStatusesByCriteriaHidden.val(JSON.stringify(Da)),
null==ha[b]&&m(f,la.notAssessed));if(v.useMastery&&(null==ha[b]||!ha[b].MasteryOption))if(va[b].BreaksRecurrence)k(g,h,!1);else{var l=va[b],s=l.AffectsByLevel;l.AffectsByResettingMastery&&s&&(l=ha[b],l=null==l?e:n(l.Status),k(g,h,l>=v.masteryStartsAt))}}}function k(a,b,c){a.text(v.useMastery&&c?Na.mastered:Na.notMastered);a.removeClass(u.noPrint);a.addClass(v.useMastery&&c?"":u.noPrint);b.prop("src",v.useMastery&&c?Sa.masteredIcon:Sa.notMasteredIcon);b.removeClass(u.noPrint);b.addClass(v.useMastery&&
c?"":u.noPrint)}function m(a,b){$.each(Ea,function(b,c){a.removeClass(c.CssClass)});a.addClass(Ea[b].CssClass);a.text(Ea[b].Title)}function n(a){var b=0;$.each(Ca,function(c,d){d.type==a&&(b=d.startsAt)});return b}function q(a,b,c,d){c=a.getRowById(c);var e=c.parent(),g=c.find("."+u.row+":first").find("a."+u.criteriaWeight).text();b=$(b);b.find("a."+u.undoLink).click(function(){t(a,e,g?g:0,d)});b.find("a."+u.undoCloseImage).click(function(){e.remove()});c.replaceWith(b)}function s(b,c,d){var e=window[oa[b]].getRowsContainer(),
g=0===r(e);c=$(c).appendTo(e);g&&0<r(e)&&(e.children("."+u.gridEmptyText).remove(),$(document).trigger(v.emptyStateChangedEvent,{isAnyEmpty:p(),loUpdate:{id:b,isEmpty:!1}}));a(c,d);ya()}function t(b,c,d,e){var g=c.find("."+u.undoBox+":first").children("input:first").val();$.ajax({type:"post",url:v.webMethods.restoreCriteria,dataType:"html",data:{courseId:v.courseId,criteriaJson:g,showCriteriaWeights:v.showCriteriaWeights,criteriaWeightToRestore:d}}).done(function(g){g=$(g);var f=g.find("."+u.row+
":first");c.replaceWith(g);g.find("a."+u.criteriaWeight).text(d);f=f.next().val();ra(e,f,d);a(g,!1);g.scrollMinimal();g=b.getRowsContainer();1===r(g)&&(g.children("."+u.gridEmptyText).remove(),$(document).trigger(v.emptyStateChangedEvent,{isAnyEmpty:p(),loUpdate:{id:e,isEmpty:!1}}))}).fail(ua)}function p(){return 0<$("div."+u.criteriaContainer).filter(function(){return 0===r(this)}).length}function r(a){return $("."+u.row,a).length}function z(a){a=a.find("."+u.criteriaDescription);$.each(a,function(a,
b){var c={submitOnEnter:!0,multiline:!0,autoResize:!0,editFieldCssClass:u.inlineEditor,maxLength:1024};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),c,y,ma,void 0)})}function y(a,b){var c=a.source.parents("ul").next().val();Ya[c]=a.actualText;N.updatedCriteriaDecriptionsHidden.val(JSON.stringify(Ya));a.isUpdateSuccess=!0;b(a)}function J(a){a=a.find("."+u.criteriaItem);$.each(a,function(a,b){if(0<$(b).closest("."+u.officialCriteria).length)return!0;var c={submitOnEnter:!0,multiline:!0,
autoResize:!0,editFieldCssClass:u.inlineEditor,maxLength:v.criteriaItemDescriptionMaxLength};new ClientInlineEditor($(b),void 0,$(b).parent().find("input").last(),c,ga,ma,void 0)})}function E(a,b){var c=a.find("."+u.criteriaTitle);$.each(c,function(a,c){if(0<$(c).closest("."+u.officialCriteria).length)return!0;var d=new ClientInlineEditor(c,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:u.criteriaTitle,maxLength:64},B,void 0,void 0);b&&d.switchToEditMode().select()})}
function ba(a){a=a.find("."+u.criteriaWeight);$.each(a,function(a,b){new ClientInlineEditor(b,void 0,void 0,{submitOnEnter:!0,editFieldDisplayInline:!0,editFieldAutoWidth:!1,editFieldCssClass:u.criteriaWeight,maxLength:3},ca,na,void 0)})}function B(a,b){var c=a.source.parents("ul").next().val();$.trim(a.actualText).length?$.ajax({type:"post",url:v.webMethods.updateCriteria,dataType:"json",data:{courseId:v.courseId,criteriaId:c,title:a.actualText}}).done(function(b){a.isUpdateSuccess=!0;var d=a.source.parents("ul");
Ka(d);b&&(qa(b.learningObjectiveId,d,b.criteriaId),window[oa[b.learningObjectiveId]].replaceKeyValue(c,b.criteriaId))}).fail(function(b,c,d){a.isUpdateSuccess=!1;ua(b,c,d)}).always(function(){b(a)}):(a.isUpdateSuccess=!1,b(a))}function ca(a,b){var c=parseInt(a.source.parents("."+u.criteriaContainer).siblings("input[type=hidden]").val()),d=a.source.parents("ul").next().val(),e=a.source.parents("ul"),g=!$.trim(a.actualText).length||!/^[1-9][0-9]?$|^100$/.test(a.actualText);e.find("."+u.criteriaWeightValidationMessage).toggle(g);
g?(a.stopOnEdit=!0,a.isUpdateSuccess=!1):(M&&(g=parseInt(a.actualText),da(g,e),ra(c,d,g)),a.isUpdateSuccess=!0);b(a)}function na(a){a.isEditMode||a.source.parents("ul").find("."+u.criteriaWeightValidationMessage).hide()}function da(a,b){var c=b.find("."+u.criteriaItemWeight),d=v.achivementLevelOrderDirection==Ra.lowestToHighest?1:c.length;$.each(c,function(b,c){c.innerHTML=d*a;v.achivementLevelOrderDirection===Ra.lowestToHighest?d++:d--})}function ga(a,b){var c=a.source.parents("li"),c=T(c.find("input[type=hidden]").val()),
d=c.key,c=c.value;a.actualText=$.trim(a.actualText);$.ajax({type:"post",url:v.webMethods.updateCriteriaItem,dataType:"json",data:{courseId:v.courseId,criteriaId:d,levelId:c,text:a.actualText}}).done(function(b){a.isUpdateSuccess=!0;var c=a.source.parents("ul");Ka(c);b&&(qa(b.learningObjectiveId,c,b.criteriaId),window[oa[b.learningObjectiveId]].replaceKeyValue(d,b.criteriaId))}).fail(function(b,c,d){a.isUpdateSuccess=!1;ua(b,c,d)}).always(function(){b(a)})}function qa(a,b,c){S(a,b,c);b.next().val(c);
a=b.find("li."+u.column+" > input[type=hidden]");$.each(a,function(a,b){var d=$(b),e=T(d.val());e.key=c.toString();d.val(JSON.stringify(e))})}function S(a,b,c){if(M){var d=b.next().val();b=parseInt(b.find("."+u.criteriaWeight+":first").text());M&&M[a]&&delete M[a][d];ra(a,c,b)}}function ra(a,b,c){M&&0<c&&(M[a]||(M[a]={}),M[a][b]=c,ya())}function ya(){$(document).trigger(v.criteriaWeightsChangedEvent,{data:M,loCriteriaWeights:ka()})}function ka(){var a={};$("."+u.criteriaContainer).each(function(){var b=
$(this),c=parseInt(b.siblings("input[type=hidden]").val());a[c]=0;$("a."+u.criteriaWeight,b).each(function(){var b=$(this),d=b.siblings("input."+u.criteriaWeight);a[c]+=parseInt(d.length?d.val():b.text())})});return a}function ma(a){var b=a.source;a.isEditMode||b.parent().find("input").last().val()?b.removeClass(u.criteriaItemEmptyState):(b.addClass(u.criteriaItemEmptyState),b.text(v.watermark))}function fa(a,b){b.each(function(b){b=a.getRowById(b).find("."+u.row+":first");b.find("img."+u.shareLoadingIcon).show();
b.find("img."+u.shareIcon).hide()})}function Ja(a,b,c,d){c.each(function(c){var e=a.getRowById(c).find("."+u.row+":first"),g=e.find("img."+u.shareIcon);void 0!=b[c]&&(g.attr("title",d?b[c]:""),g.toggle(d),e.find("img."+u.reshareIcon).hide());e.find("img."+u.shareLoadingIcon).hide()})}function Ka(a){a.find("img."+u.reshareIcon).toggle(a.find("img."+u.shareIcon).is(":visible"))}function ua(a,b){400<=a.status&&alert(!0===b&&a.statusText.length?a.statusText:H.settings.terms.errorOccured)}function T(a){return JSON.parse(a||
"{}")}window[d]=this;var H=this,v,N,u,Ea,Ba,Ya,Ca,ha,Da,Ra,M={},oa,Za,la,Xa,Na,Sa,va,Qa=[],La;H.initialize=function(){v=H.settings;N=H.controls;u=v.cssClasses;Ea=v.assessmentStatuses;Ba=T(N.updatedCriteriaAssessmentsHidden.val());Ya=T(N.updatedCriteriaDecriptionsHidden.val());Ra=v.achievementLevelOrder;oa=T(v.grids);Za=T(v.officialCriteriaGrids);v.criteriaWeightsData&&(M=JSON.parse(v.criteriaWeightsData));if(v.assessMode){z(N.container);var c=N.container.find("ul li."+u.column);$.each(c,function(a,
c){$(c).click(c,b)});la=v.assessmentStatusType;Xa=v.learningObjectiveOverrideMasteryOption;Na=v.terms;Sa=v.imgUrls;Ca=T(N.activeAssessmentStatusesHidden.val());ha=T(N.overriddenCriteriaAssessmentsHidden.val());Da=T(N.assessmentStatusesByCriteriaHidden.val());va=T(N.possibleMasteredLearningObjectivesHidden.val());v.assessmentUpdaterSettings.connectAssessmentCriteriaToScale&&(v.assessmentUpdaterSettings.assessmentPercentage&&($.each(v.assessmentUpdaterSettings.assessmentPercentage,function(a,b){Qa.push(a)}),
Qa.sort(function(a,b){return a-b})),La=$("#"+v.assessmentUpdaterSettings.assessmentChangedWarningLabelClientId))}if(v.manageMode&&(a(N.container,!1),v.isIosDevice))$("input."+u.addButton).on("touchend",function(){$(this).click()});if(v.showOverride)N.changeReportStatusControl.on(H.settings.events.saveOverridingsEvent,function(a){H.saveOverridings()});$(function(){$(document).on(H.settings.events.addSharedCriteriaJsEvent,function(a,b){$.each(b.Criteria,function(a,b){s(a,b,!1)});b.IsThereMismatchBetweenLevelsCount&&
v.levelsMismatchWarningClientId&&$("#"+v.levelsMismatchWarningClientId).show()})})};H.deleteLearningObjective=function(a,b,c,d){$.ajax({type:"post",url:v.webMethods.deleteLearningObjective,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:v.courseId,entityId:c,learningObjectiveId:a})}).done(function(){oa[a]&&delete oa[a];document.getElementById(d).remove();var c=b||0===Object.keys(oa).length;$(document).trigger(v.deleteLearningObjectiveEvent,{learningObjectiveId:a,
reloadPage:c})}).fail(function(a){ua(a,!0)})};H.addCriteria=function(a){$.ajax({type:"post",url:v.webMethods.addCriteria,dataType:"html",data:{courseId:v.courseId,learningObjectiveId:a,showCriteriaWeights:v.showCriteriaWeights}}).done(function(b){s(a,b,!0)}).fail(ua)};H.saveStatusOverridings=function(a,b,c){v.showOverride&&(c=c.toString(),a=0<a.length?parseInt(a):0,f(c,a,0,"",b.controls.container.parents("div."+u.overrideStatusBoxContainer).first()))};H.saveOverridings=function(){if(v.showOverride){var a=
N.learningObjectiveIdHidden.val(),b=$(String.format(".{0} option:selected",u.overrideStatusDropdown)).val(),b=0<b.length?parseInt(b):0,c=parseInt(v.useMastery?$(String.format(".{0} option:selected",u.overrideMasteryDropdown)).val():0),d=$(String.format(".{0}",u.overrideStatusComment)).val().substring(0,v.maximumCommentLength);f(a,b,c,d,$("a[rel="+a+"]").parent())}};H.shareSelectedCriterias=function(a,b){var d=window[oa[a]],e=d.getSelectedValues();1>e.length?alert(v.terms.noSelectionForSharing):(fa(d,
e),$.ajax({type:"post",url:v.webMethods.shareCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:v.courseId,hierarchyId:b,criteriaIdsJson:JSON.stringify(e)})}).done(function(a){Ja(d,a.d,e,!0);c();d.toggleSelectAll(!1)}).fail(function(a){ua(a,!0)}).always(function(){$.find("img."+u.shareLoadingIcon+":visible").each(function(a){a.hide()})}))};H.stopSharingSelectedCriterias=function(a){var b=window[oa[a]],c=b.getSelectedValues();1>c.length?alert(v.terms.noSelectionForSharing):
(fa(b,c),$.ajax({type:"post",url:v.webMethods.stopSharingCriteria,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify({courseId:v.courseId,criteriaIdsJson:JSON.stringify(c)})}).done(function(a){e(b,a.d,c)}).fail(ua).always(function(){$.find("img."+u.shareLoadingIcon+":visible").each(function(a){a.hide()})}))};H.removeSelectedCriterias=function(a){var b=window[oa[a]],c=b.getSelectedValues();c.length?($.ajax({type:"post",url:v.webMethods.deleteCriteria,dataType:"html",
data:{courseId:v.courseId,criteriaIdsJson:JSON.stringify(c)}}).done(function(d){d=T(d);e(b,d.criteriaToUnshare,c);$.each(d.criterias,function(c,d){q(b,d,c,a);M&&M[a]&&delete M[a][c]});ya();d=b.getRowsContainer();if(0===r(d)){var g=b.getGridElement().find("."+u.criteriaEmptyGridText);0<g.length&&d.append(g.html());d=!1;(g=window[Za[a]])?(g=g.getRowsContainer(),0===r(g)&&(d=!0)):d=!0;d&&$(document).trigger(v.emptyStateChangedEvent,{isAnyEmpty:!0,loUpdate:{id:a,isEmpty:!0}})}}).fail(ua),b.toggleSelectAll(!1)):
alert(v.terms.noSelectionForRemoval)}}
function SafeConsoleLogger(){var d={},e={noop:function(){}};e.safeLogger={assert:e.noop,count:e.noop,dir:e.noop,error:e.noop,group:e.noop,groupEnd:e.noop,info:e.noop,log:e.noop,time:e.noop,timeEnd:e.noop,trace:e.noop,warn:e.noop};e.initialize=function(){objectState.isNullOrUndefined(window.console)||(e.safeLogger=window.console)};d.assert=function(d){e.safeLogger.assert(d)};d.count=function(d){e.safeLogger.count(d)};d.dir=function(d){e.safeLogger.dir(d)};d.error=function(d){e.safeLogger.error(d)};
d.group=function(d){e.safeLogger.group(d)};d.groupEnd=function(d){e.safeLogger.groupEnd(d)};d.info=function(d){e.safeLogger.info(d)};d.log=function(d){e.safeLogger.log(d)};d.time=function(d){e.safeLogger.time(d)};d.timeEnd=function(d){e.safeLogger.timeEnd(d)};d.trace=function(d){e.safeLogger.trace(d)};d.warn=function(d){e.safeLogger.warn(d)};e.initialize();return d}var safeConsoleLogger=SafeConsoleLogger();
$.widget("itslccl.searchTextBox",$.itslccl.extendedTextBox,{options:{searchInput:void 0,container:void 0,searchLink:void 0,fakeInput:void 0,searchKeyStorage:void 0,textSearchEvent:void 0,usePostBack:!1,clearByEsc:!1,postBackReference:void 0},_create:function(){this._super();var d=this,e=this.options.searchInput,f=this.options.searchLink,c=this.options.fakeInput;e.keydown(function(a){return a.which!==CommonConstants.keyCodes.enter||a.shiftKey?!0:(d._doSearch(),!1)});e.keyup(function(a){d.options.clearByEsc&&
a.which===CommonConstants.keyCodes.escape&&d._clearSearchBox();return!0});f&&f.click(function(a){a.preventDefault();d._doSearch()});c&&c.focus(function(){e.focus()})},_clearSearchBox:function(){this.options.searchInput.val("");this.options.searchInput.focus()},_doSearch:function(){this.options.searchInput.focus();var d=this._isWatermarkMode?"":$.trim(this.options.searchInput.val());this.options.usePostBack?(this._saveSearchTextToHiddenField(),eval(this.options.postBackReference)):this.options.container.trigger(this.options.textSearchEvent,
d)},_saveSearchTextToHiddenField:function(d){!this.options.usePostBack&&d?this.options.searchKeyStorage.val($.trim(d)):this.options.searchKeyStorage.val($.trim(this.options.searchInput.val()))}});
function SearchTextBox(d,e){window[d]=this;var f=this;e&&SearchTextBox.instances.push(this);f.initialize=function(){f.controls={searchInput:$("#"+f.controlIds.searchInputId),container:$("#"+f.controlIds.containerId),searchLink:$("#"+f.controlIds.searchLinkId),fakeInput:$("#"+f.controlIds.fakeInputId),searchKeyStorage:$("#"+f.controlIds.searchKeyStorageId)};var c=f.controls.searchInput;e&&c.hasClass(f.settings.focusRequiredCssClass)&&c.focus();c.searchTextBox({searchInput:f.controls.searchInput,container:f.controls.container,
searchLink:f.controls.searchLink,fakeInput:f.controls.fakeInput,searchKeyStorage:f.controls.searchKeyStorage,watermarkText:f.settings.watermarkText,watermarkCssClass:f.settings.watermarkCssClass,textSearchEvent:f.settings.textSearchEvent,clearByEsc:f.settings.clearByEsc,usePostBack:f.settings.usePostBack,postBackReference:f.settings.postBackReference,focusRequiredCssClass:f.settings.focusRequiredCssClass})};f.clearSearch=function(){f.controls.searchInput.val("")};f.autocompleteopen=function(c,a){var b=
f.controls.searchInput.autocomplete("widget");if(1<$(".ui-menu-item",b).length){var d=f.controls.searchInput.autocomplete("option","select");f.controls.searchInput.autocomplete({select:function(a,c){if(-1!==c.item.id)d(a,c);else{var e=[];$(".ui-menu-item:not(.ccl-searchtextbox-select-all)",b).each(function(){e.push($(this).data("ui-autocomplete-item"))});f.controls.searchInput.trigger("autocompleteselectall",{items:e});f.controls.searchInput.autocomplete("close")}}});var e=$("<li></li>").data("item.autocomplete",
{id:-1,value:""}).attr("class","ui-menu-item ccl-searchtextbox-select-all").appendTo(b);$("<a></a>").attr("href","#").text(f.settings.selectAllText).appendTo(e)}}}SearchTextBox.instances=[];SearchTextBox.initialize=function(){for(var d=0,e=this.instances.length;d<e;d+=1)this.instances[d].initialize()};
function StarsSelector(d){window[d]=this;var e=this,f,c;e.initialize=function(){function a(a){a=isNaN(a)?0:a;c.filter(":lt("+a+")").find("img").prop("src",e.settings.activeIconUrl);c.filter(":eq("+a+"), :gt("+a+")").find("img").prop("src",e.settings.inactiveIconUrl)}f=e.controls.ratingHidden;c=e.controls.starsContainer.find("a");c.click(function(b){b=c.index(this)+1;f.val()!=b&&(f.val(b).change(),a(b));return!1}).mouseover(function(b){a(c.index(this)+1)}).mouseout(function(b){a(parseInt(f.val()))});
$(document).on(e.settings.showRateEventName,function(b,c){f.val()!=c&&(f.val(c),a(c))});$(document).on(e.settings.rateSuccessEventName,function(a,d){for(var e=c.filter(":lt("+d+")"),f=0;2>f;f++)e.fadeTo("normal",.5).fadeTo("normal",1)})};return e}
function MakeTableHighlightable(d){function e(d){var c="mouseenter"==d.type;$("tr > :nth-child("+($(this).index()+1)+")",$(d.delegateTarget)).toggleClass("ccl-table-highlight",c);$(this).parent().toggleClass("ccl-table-highlight",c)}d.delegate("td","mouseenter mouseleave",e);d.delegate("tbody th","mouseenter mouseleave",e)}
(function(d,e){var f=d.TextBoxAutoCompleteManager={commonSettings:e,makeTextBoxAutocomplete:function(c,a,b,g){function h(a,b){var c=a.split(" "),d=b.split(" "),e=-1,g=!0,f=!1;$.each(c,function(a,b){f=!1;$.each(d,function(a,c){if(f=0==c.indexOf(b))return e=a,!1});-1<e&&(d.splice(e,1),e=-1);g=f&&g});return g}function l(){p.autocomplete("widget").is(":visible")?p.autocomplete("close"):($(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close"),p.autocomplete("option","minLength",0),p.autocomplete("search",
""));p.focus()}function k(){var a=p.get(0);c.isIos?a.setSelectionRange(0,a.value.length):a.select()}function m(a,b){var d=!1;$.each(a,function(a,e){var g=c.caseSensitiveSearch?b:b.toLowerCase();if((c.caseSensitiveSearch?e.value:e.value.toLowerCase())===g)return d=!0,!1});return d}function n(){c.allowCustomText||(m(c.values,p.val())?c.defaultText=p.val():(c.defaultText?p.val(c.defaultText):p.val(""),q(!1)));a&&a();c.isAutoPostBack&&p.closest("form").submit()}function q(a){c.useHighlight&&r.toggleClass(f.commonSettings.cssClasses.highlight,
a)}function s(a){var b=c.caseSensitiveSearch?$(this).val():$(this).val().toUpperCase(),d=p.data("ui-autocomplete");d.widget().children(".ui-menu-item").each(function(){var a=$(this).data("ui-autocomplete-item");if((c.caseSensitiveSearch?a.value:a.value.toUpperCase())===b)return d.selectedItem=a,!1});d.selectedItem&&d._trigger("select",a,{item:d.selectedItem})}var t=!0,p=$("#"+c.textboxId),r=p.parent(),z=d[c.textboxId]=p;c.isDropDown&&(c.minLength=0);p.autocomplete({autoFocus:!0,source:function(a,
b){b($.map(c.values,function(b){var d=c.caseSensitiveSearch?a.term:a.term.toLowerCase(),g=c.caseSensitiveSearch?b.value:b.value.toLowerCase();switch(c.filterType){case f.commonSettings.filterType.wordStartsWith:return h(d,g)?b:e;default:return 0<=g.indexOf(d)?b:e}}))},delay:c.delay,minLength:c.minLength,change:function(a,b){c.defaultText!==p.val()&&n()},close:function(a,c){b&&b();t=!0},select:function(a,b){z.selectValue(b.item);n()},open:function(a,b){c.zIndex&&p.autocomplete("widget").css("z-index",
c.zIndex);t=!1},create:function(a,b){p.data("autocompleteItemId",c.defaultValue)},messages:{noResults:c.terms.noResults,results:function(a){return 1==a?c.terms.oneResult:c.terms.resultsTemplate.replace("{0}",a.toString())}}});p.keyup(function(){q(!!p.val()&&!m(c.values,p.val()))}).keydown(function(a){a.which===CommonConstants.keyCodes.enter&&(t||a.preventDefault(),c.defaultText!==p.val()&&(a.preventDefault(),n()),p.autocomplete("close"))}).click(k).on("autocompletesearchcomplete",function(a,b){});
z.selectValue=function(a){q(!1);p.val(a.value);p.data("autocompleteItemId",a.id);$(".ui-autocomplete-input ui-autocomplete-loading").autocomplete("close");g&&g(a)};z.getValue=function(){return p.data("autocompleteItemId")};c.isDropDown&&($("#"+c.buttonId).click(l).click(k),p.click(l),p.blur(s))}}})(window);
(function(d){var e={},f=!1,c=d.TextEditorManager={commonSettings:void 0,addStartupFunction:function(a,b){e[a]=b},textEditorSetup:function(){function a(a,c,d){if(a=a.getButton(c))d=$("#"+a.domId).removeClass().addClass(d).removeAttr("title"),a=d.find("span").removeClass(),d.append(document.createTextNode(a.text())),a.text("")}f||(f=!0,d.CKEDITOR&&(CKEDITOR.on("dialogDefinition",function(b){b=b.data.definition;var d=b.onLoad;b.onLoad=function(){a(this,"ok",c.commonSettings.cssClasses.ok);a(this,"cancel",
c.commonSettings.cssClasses.cancel);if(d)return d.apply(this,arguments)}}),CKEDITOR.on("instanceReady",function(a){(a=e[a.editor.name])&&a()}),CommonFunctions.attachPostMessageEventListener($(d),CommonWindowMessages.MessageNames.textEditorInteraction,function(a,c){switch(a.interactionType){case CommonWindowMessages.TextEditorInteractionType.CloseDialog:CloseDialog();return;case CommonWindowMessages.TextEditorInteractionType.InsertHtml:InsertHtml(a.htmlContent,a.editorInstanceId);break;case CommonWindowMessages.TextEditorInteractionType.InsertLinkToFile:var d=
CKEDITOR,e=d.dialog.getCurrent()._.editor,f={href:a.linkUrl,target:"_blank"},m=e.getSelection(),n=m.getRanges(!0);if(1==n.length&&n[0].collapsed){var q=new d.dom.text(a.linkName,e.document);n[0].insertNode(q);n[0].selectNodeContents(q);m.selectRanges(n)}f=new d.style({element:"a",attributes:f});f.type=d.STYLE_INLINE;f.apply(e.document);break;case CommonWindowMessages.TextEditorInteractionType.UpdateItslPluginsList:e=a.editorInstanceId&&""!=a.editorInstanceId?CKEDITOR.instances[a.editorInstanceId]:
CKEDITOR.dialog.getCurrent()._.editor,e.plugins.dynamicinsertmenu?e.plugins.dynamicinsertmenu.update(e,a.pluginId):e.plugins.itslpluginlist&&e.plugins.itslpluginlist.update(e,a.pluginId)}a.closeDialogAfterPerformingOperation&&CloseDialog()})))},getIframeFromDialog:function(a){return $("#"+a._.contents.iframe.undefined.domId)},refreshCustomOpenPopupButtonPosition:function(a,b,c){""===b.val()?(c.html(unescape(c.attr("data-temp-html"))),b=(a.outerWidth()-c.outerWidth())/2,a=(a.outerHeight()-c.height())/
2):(c.html("&nbsp"),b=a.outerWidth()-c.width(),a=a.outerHeight()-c.height());c.css({"margin-top":a+"px","margin-left":b+"px"})}};c.getOnContentLoadFunctionForIframeDialog=function(a){return function(){var b=CKEDITOR.dialog.getCurrent();if(b){b=c.getIframeFromDialog(b).attr({webkitallowfullscreen:"true",mozallowfullscreen:"true",allowfullscreen:"true"});a&&a(b);try{b.contents().keydown(function(a){a.which===CommonConstants.keyCodes.escape&&d.CloseDialog()}),b[0].focus()}catch(e){}}}};c.setupIframePlugin=
function(a,b){var d=$.extend({addToolBarButton:!0,dialogName:void 0,dialogSrcReplacementFunction:void 0,beforeInitComplete:void 0},b);return{requires:["iframedialog"],init:function(b){var e=b.config[a],f=e.DialogWidth,m=e.DialogHeight,n=d.dialogName,q=0,s=c.getOnContentLoadFunctionForIframeDialog(function(a){e.IsEditorDialogTransparent&&e.IframeCssClass&&a.addClass(e.IframeCssClass)});b.addCommand(e.Id,{exec:function(a){var c=n+q++,r=d.dialogSrcReplacementFunction?d.dialogSrcReplacementFunction(b,
e,a):e.DialogSrc;CKEDITOR.dialog.addIframe(c,"",r,f,m,s,{onShow:function(){var a=CKEDITOR.dialog.getCurrent(),b=a.parts;b.close.hide();b.footer.hide();b.title.hide();e.IsEditorDialogTransparent&&a._.element.addClass("hiddenDialog");CKEDITOR.env.ie&&a._.element.addClass("noScrollbars")}});a.openDialog(c)}});d.addToolBarButton&&b.ui.addButton(e.Id,{label:e.Text,command:e.Id});d.beforeInitComplete&&d.beforeInitComplete(b,e)}}};c.setupContentForIframe=function(){$(d.document).keydown(function(a){a.which===
CommonConstants.keyCodes.escape&&CommonFunctions.makePostMessageCall(d.parent,new CommonWindowMessages.TextEditorCloseDialogMessage)});d.focus()};c.setupPopupSettings=function(a){var b=$("#"+a.popupSettings.containerId),e=$("#"+a.popupSettings.linkToEditId),f=$("#"+a.popupSettings.hiddenInputId);""===f.val()&&e.html(a.popupSettings.text);e.attr("data-temp-html",escape(a.popupSettings.text));$(d).resize(function(){c.refreshCustomOpenPopupButtonPosition(b,f,e)});c.refreshCustomOpenPopupButtonPosition(b,
f,e)}})(window);function InsertHtml(d,e){var f=null,f=e&&0<e.length?CKEDITOR.instances[e]:CKEDITOR.dialog.getCurrent()._.editor;null!=f&&(CKEDITOR.env.webkit?f.config.mask&&IsEditorEmpty(f.name,f.config.mask)?(SetHtml(d,e),checkForMaskAndDelete(f.name)):f.insertHtml(d):(CKEDITOR.env.gecko&&f.config.mask&&checkForMaskAndDelete(f.name),f.insertHtml(d)))}function CloseDialog(){window.CKEDITOR.env.webkit&&closeRecorderIfExists();CKEDITOR.dialog.getCurrent().hide()}
function SetHtml(d,e){e&&0<e.length?CKEDITOR.instances[e].setData(d,function(){CKEDITOR.instances[e].focus()}):CKEDITOR.dialog.getCurrent()._.editor.setData(d,function(){CKEDITOR.dialog.getCurrent()._.editor.focus()})}function GetTextEditorContent(d){return window.CKEDITOR?d&&0<d.length?CKEDITOR.instances[d].getData():CKEDITOR.dialog.getCurrent()?CKEDITOR.dialog.getCurrent()._.editor.getData():null:(d=$("div[data-ck-id="+d+"] > input[type=hidden]"),1===d.length?d.val():null)}
function SetTextEditorFocus(d){CKEDITOR.instances[d].focus()}function RemoveEditorInstance(d){if(CKEDITOR.instances[d]){var e=CKEDITOR.instances[d].editable();e.hasFocus&&(e.blur(),e.hasFocus=!1);CKEDITOR.instances[d].destroy()}}function IsEditorEmpty(d,e){var f=CKEDITOR.instances[d];if(f)return f=f.getData().replace("\n",""),""==f||e&&f===e||"<p>&nbsp;</p>"==f||"<div>&nbsp;</div>"==f||"<p>&#160;</p>"==f||"<p></p>"==f?!0:!1}
function isTextEditorDirty(d){var e;if(d&&0<d.length&&(e=CKEDITOR.instances[d]))return e.checkDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.checkDirty()}function resetEditorIsDirty(d){if(d&&0<d.length)return CKEDITOR.instances[d].resetDirty();if(CKEDITOR.dialog.getCurrent())return CKEDITOR.dialog.getCurrent()._.editor.resetDirty()}
function setTextEditorTextColor(d,e){var f=CKEDITOR.instances[d],c=new CKEDITOR.style(CKEDITOR.config.colorButton_foreStyle,{color:e});f.applyStyle(c)}function setTextEditorTextSize(d,e){var f=CKEDITOR.instances[d],c=new CKEDITOR.style(CKEDITOR.config.fontSize_style,{size:e});f.applyStyle(c)}
var focusListener=function(d){IsEditorEmpty(d.editor.name,d.editor.config.mask)&&(d.editor.document.getBody().setHtml(""),d.editor.mayBeDirty=!0,resetEditorIsDirty(d.editor.name))},blurListener=function(d){IsEditorEmpty(d.editor.name)&&d.editor.config.mask&&0<d.editor.config.mask.length&&(d.editor.document.getBody().setHtml(d.editor.config.mask),resetEditorIsDirty(d.editor.name))};
function cleanOnFocusEvent(d,e,f){var c=CKEDITOR.instances[e];c.config.mask=d;if(f||IsEditorEmpty(c.name))SetHtml(c.config.mask,c.name),c.mayBeDirty=!1,resetEditorIsDirty(c.name);c&&(c.on("focus",focusListener),c.on("blur",blurListener));window.CKEDITOR.env.ie&&AttachListenersToInsertEvents(e)}function closeRecorderIfExists(){var d=TextEditorManager.getIframeFromDialog(CKEDITOR.dialog.getCurrent()),e,f;try{e=d.contents(),(f=e.find("object"))&&f.hide()}catch(c){}}
function checkForMaskAndDelete(d){var e=null;d&&0<d.length?e=CKEDITOR.instances[d]:CKEDITOR.dialog.getCurrent()&&(e=CKEDITOR.dialog.getCurrent()._.editor);null!=e&&e.config.mask&&IsEditorEmpty(e.name,e.config.mask)&&e.document.getBody().setHtml("")}
function AttachListenersToInsertEvents(d){if(d&&0<d.length){var e=CKEDITOR.instances[d];e.on("insertText",function(e){checkForMaskAndDelete(d)});e.on("insertElement",function(e){checkForMaskAndDelete(d)});e.on("insertHtml",function(e){checkForMaskAndDelete(d)})}}
function TextEditorToolbar(d){function e(a){a.parent("ul").children("li").removeClass("active");a.addClass("active")}window[d]=this;var f=this,c,a,b;f.initialize=function(){a=f.controls.container.find("."+f.settings.fontColorSectionClass).find("li");b=f.controls.container.find("."+f.settings.fontSizeSectionClass).find("li");CKEDITOR.on("instanceReady",function(){c=CKEDITOR.instances[f.settings.editorId];c.on("selectionChange",function(){f.updateToolbarState()});a.find("a").click(function(){var a=
$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextColor(f.settings.editorId,b);e(a);return!1});b.find("a").click(function(){var a=$(this).parent("li"),b=a.find("input:hidden:first").val();SetTextEditorFocus(f.settings.editorId);setTextEditorTextSize(f.settings.editorId,b);e(a);return!1});f.updateToolbarState()})};f.insertImage=function(a){InsertHtml('<img src="'+a+'" alt="" />',f.settings.editorId)};f.updateToolbarState=function(){var d=
c.getSelection();if(d){var e,l;if(d=$(d.getStartElement().$))l=d.prop("style").color,l||(e=d.parents('span[style*="color:"]:first'))&&e.prop("style")&&(l=e.prop("style").color),e=l,(l=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/))?(e=[],e.push("#"),e.push(("0"+parseInt(l[1],10).toString(16)).slice(-2)),e.push(("0"+parseInt(l[2],10).toString(16)).slice(-2)),e.push(("0"+parseInt(l[3],10).toString(16)).slice(-2)),l=e.join("")):l=e,l=l.toLowerCase(),e=d.prop("style").fontSize,e||(d=d.parents('span[style*="font-size:"]:first'))&&
d.prop("style")&&(e=d.prop("style").fontSize);l||(l="#000000");e||(e=f.settings.defaultFontSizeStyle);a.removeClass("active");a.filter(":has(input[value='"+l+"']:hidden)").addClass("active");b.removeClass("active");e&&b.filter(":has(input[value='"+e+"']:hidden)").addClass("active")}}}
function TextEditorToolbarExtenderDialog(d){window[d]=this;var e=this;e.initialize=function(){e.controls.targetlink.on("click",function(d){d.preventDefault();e.show();return!1});e.controls.closelink.on("click",function(d){d.preventDefault();e.hide();return!1});e.controls.container.appendTo("body").on("click",function(d){d.preventDefault();return!1});e.controls.container.find("ul li a").on("click",function(d){e.hide();return!0});$(document).click(function(d){var c=e.controls.container;return 2>d.button&&
!c.is(":hidden")?(e.hide(),!1):!0})};e.show=function(){var d=e.controls.targetlink.offset();e.controls.container.css({top:d.top+e.controls.targetlink.height()+"px",left:d.left+"px"}).show()};e.hide=function(){e.controls.container.hide()};return e}
function TimeSlotPicker(d){function e(){g.val(a.val())}window[d]=this;var f=this,c,a,b,g,h;f.initialize=function(){c=$("#"+f.settings.clientIds.timeSlotPickerPanel);a=$("#"+f.settings.clientIds.timeSlotDropDown);b=$("#"+f.settings.clientIds.availableTimeSlotsHidden);g=$("#"+f.settings.clientIds.selectedTimeSlotIdHidden);a.change(function(){e()});var d=b.val();d&&(h=JSON.parse(d));f.toggle(!0)};f.toggle=function(a){c.toggle(a&&!!h)};f.updateFilteredTimeForDate=function(c,d){if(f.getAvailableTimeSlotsForDateFunction){var g=
{date:c,dateFilterId:d};f.getAvailableTimeSlotsForDateFunction(g);h=g.availableTimeSlots;b.val(h?JSON.stringify(h):"");if(h){a.empty();if(h&&h.length)for(g=0;g<h.length;g++)a.append("<option value='"+h[g].TimeSlotId+"'>"+h[g].Description+"</option>");f.toggle(!0);e()}else f.resetTimes()}};f.resetTimes=function(){a.empty();h=void 0;b.val(h?JSON.stringify(h):"");e();f.toggle(!1)};return f}
function Toggle(d){function e(){0<l.length&&"INPUT"==l[0].tagName&&"checkbox"==l.attr("type")&&(m.bind("mousedown",function(){return!1}),n.bind("mousedown",function(){return!1}),"true"===s&&(k.bind(h.options.clientClickEventName,c),l.bind("change",f)))}function f(){g()?a():b();l.trigger(h.options.clientStateChangedEventName,[{toggleInstanceId:d}])}function c(){l.is(":disabled")||(l.attr("checked",!g()),f())}function a(){"true"===q&&k.removeClass(t.toggleOff).addClass(t.toggleOn);n.removeClass(t.checkedLabel).addClass(t.uncheckedLabel);
m.removeClass(t.uncheckedLabel).addClass(t.checkedLabel)}function b(){"true"===q&&k.removeClass(t.toggleOn).addClass(t.toggleOff);m.removeClass(t.checkedLabel).addClass(t.uncheckedLabel);n.removeClass(t.uncheckedLabel).addClass(t.checkedLabel)}function g(){return"checked"==l.attr("checked")}window[d]=this;var h=this,l,k,m,n,q,s,t;h.initialize=function(){l=h.controls.checkbox;k=h.controls.toggleBox;m=h.controls.labelOn;n=h.controls.labelOff;q=h.options.onOffMode;s=h.options.enabled;t=h.options.cssClassess;
e()};h.revertStateAndDisable=function(){s&&k.unbind(h.options.clientClickEventName,c);g()?b():a();n.addClass(t.labelDisabled);m.addClass(t.labelDisabled)}}
function ToolTip(d,e){function f(a,b,d,e){fa=a;!b&&d&&(clearTimeout(ra),ra=setTimeout(function(){clearTimeout(S);e&&h();c(fa)},l.settings.showPopupTimeout))}function c(a){E=J.scrollLeft();ba=J.scrollTop();k.offset();m||(m=b(),m.appendTo("form"));$(document).trigger("hideTooltips");da=m.outerHeight(!0);ga=m.outerWidth(!0);n||(n=g(),n.insertAfter(m));na=n.outerHeight(!0);qa=n.outerWidth(!0);s=na+1;t=J.width()+E;p=J.height()+ba;k.height();if(0>=a.pageX&&0>=a.pageY){var c=$(a.target),d=c.offset();a.pageX=
d.left+c.outerWidth()/2;a.pageY=d.top+c.outerHeight()/2}z=a.pageX?a.pageX:a.originalEvent.touches[0].pageX;y=a.pageY?a.pageY:a.originalEvent.touches[0].pageY;ka=y-ba>da+s;ya=p-y>da+s;ma=ka&&!ya;q||(q=$("<div></div>").appendTo(n));q.attr("class",ma?B.arrowDown:B.arrowUp);m.show();n.show();q.show();a=ga/2;m.css({top:ma?y-da-s:y+s,left:z-a<E?E:z+a>t?t-ga:z-a});ca=m.offset();r=ca.left+m.outerWidth();a=ma?ca.top+da-1:ca.top+1-na;c=r-qa;c=z>c?c:z-qa/2;z<ca.left+qa/2&&(c=ca.left);n.css({top:a,left:c})}function a(){m&&
n&&(m.hide(),n.hide())}function b(){var b=$("<div></div>").addClass(B.tooltipPopup).hover(function(){clearTimeout(S)},function(){S=setTimeout(function(){a()},l.settings.hidePopupTimeout)});l.autoWidth&&$(b).addClass(B.tooltipAutoWidth);$("<div></div>").addClass(B.tooltipTitle).appendTo(b).html(l.title);$("<div></div>").addClass(B.tooltipDescription).appendTo(b).html(l.description);return b}function g(){return $("<div></div>").addClass(B.arrowContainer).hover(function(){clearTimeout(S)},function(){S=
setTimeout(function(){a()},l.settings.hidePopupTimeout)})}function h(){l.title=k.attr(l.settings.attributes.title);l.description=k.attr(l.settings.attributes.description);m&&(m.find("."+B.tooltipTitle).html(l.title?l.title:""),m.find("."+B.tooltipDescription).html(l.description?l.description:""))}window[d]=this;var l=this,k=e,m,n,q,s,t,p,r,z,y,J=$(window),E,ba,B,ca,na,da,ga,qa,S,ra,ya,ka,ma,fa;l.initialize=function(){l.dataSource&&(l.title=l.dataSource[l.dataKey].title,l.description=l.dataSource[l.dataKey].description,
l.autoWidth=l.dataSource[l.dataKey].autoWidth);B=l.settings.cssClasses;$(document).bind("hideTooltips",function(){a()});k.is("a")||k.addClass(B.linkToTooltip);var d=!!document.ontouchstart;k.hover(function(a){f(a,d,!0,!1)},function(){d||(clearTimeout(ra),S=setTimeout(function(){a()},l.settings.hidePopupTimeout))}).mousemove(function(a){f(a,d,m&&m.is(":visible"),!1)}).on("ensureTooltipExists",function(){m||(m=b(),m.appendTo("form"))}).on("click",function(b){clearTimeout(S);clearTimeout(ra);m&&m.is(":visible")?
a():c(b)})};l.initializeUnobtrusive=function(){B=l.settings.cssClasses;$(document).on("hideTooltips",function(){a()}).on("mouseenter","["+l.settings.attributes.title+"], ["+l.settings.attributes.description+"]",function(d){k=$(this);var e=!!document.ontouchstart;k.data("tooltip_initialized")||(k.is("a")||k.addClass(B.linkToTooltip),k.mousemove(function(a){f(a,e,m&&m.is(":visible"),!0)}).on("mouseleave",function(){clearTimeout(ra);S=setTimeout(function(){clearTimeout(S);a()},l.settings.hidePopupTimeout)}).on("ensureTooltipExists",
function(){m||(m=b(),m.appendTo("form"))}).on("click",function(b){clearTimeout(S);clearTimeout(ra);m&&m.is(":visible")?a():(h(),c(b))}),k.data("tooltip_initialized",!0));f(d,e,!0,!0)})};return l}
function TwoControlsSynchronizationObject(d){var e={},f={};f.callback=d;e.onFirstControlInitialized=function(c){f.control1=c;"undefined"!=typeof f.control2&&f.callback(f.control1,f.control2)};e.onSecondControlInitialized=function(c){f.control2=c;"undefined"!=typeof f.control1&&f.callback(f.control1,f.control2)};return e}
function UploaderFileItem(d,e){var f={},c={getProgressSafe:function(){return f.progress()||0}};f.name=d.name;f.size=d.size;f.fileId=d.fileId;f.sizeText=e.getFormattedFileSize(f.size);f.action=null;f.hasAction=ko.observable(!1);f.preview=ko.observable(null);f.progress=ko.observable(null);f.progressText=ko.pureComputed(function(){return parseInt(100*c.getProgressSafe(),10)+"%"});f.status=ko.observable(UploaderFileStatus.added);f.isActionEnabled=ko.observable(!0);f.errorMessage=ko.observable(null);f.messageColumnCss=
ko.pureComputed(function(){switch(f.status()){case UploaderFileStatus.error:return"error";case UploaderFileStatus.inProgress:return"progress";default:return"empty-col"}});f.buttonColumnCss=ko.pureComputed(function(){var a="";switch(f.status()){case UploaderFileStatus.success:a+="delete";break;default:a+="cancel"}f.isActionEnabled()||(a+=" transparent");return a});f.isError=ko.pureComputed(function(){return f.status()===UploaderFileStatus.error});f.isInProgress=ko.pureComputed(function(){return f.status()===
UploaderFileStatus.inProgress});f.isProgressSet=ko.pureComputed(function(){return objectState.isNumber(f.progress())});f.useDefaultPreview=ko.pureComputed(function(){return null===f.preview()});f.emptyAction=function(){return!1};return f}
function UploaderFileItemFactory(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'literals' is not defined");return{create:function(e){contract.require(!objectState.isNullOrUndefined(e),"argument 'fileData' is not defined");return UploaderFileItem(e,d)}}}
function UploaderFileList(d,e,f){contract.require(!objectState.isNullOrUndefined(d),"argument 'fileListElement' is not defined");contract.require(!objectState.isNullOrUndefined(e),"argument 'fileItemFactory' is not defined");contract.require(!objectState.isNullOrUndefined(f),"argument 'literals' is not defined");var c={},a={};a.files=ko.observableArray([]);a.findFileById=function(b){return ko.utils.arrayFirst(a.files(),function(a){return a.fileId===b})};a.setFileStatus=function(b,c,d){b=a.findFileById(b);
objectState.isNullOrUndefined(b)||(b.status(c),a.setActionCallback(b,d))};a.setActionCallback=function(a,c){c?(a.action=function(){c(a.fileId)},a.hasAction(!0)):null===c&&(a.action=null,a.hasAction(!1))};a.setErrorMessage=function(b,c){var d=a.findFileById(b);objectState.isNullOrWhitespace(c)&&(c=f.unknown);d.errorMessage(c)};a.initialize=function(){ko.applyBindings(a,d[0])};c.addFile=function(b,d){c.removeFiles();var h=e.create(b,f);a.setActionCallback(h,d);a.files.push(h)};c.removeFile=function(b){a.files.remove(function(a){return a.fileId===
b})};c.removeFiles=function(){a.files.removeAll()};c.setDefaultFileProgress=function(a){c.updateFileProgress(a,null)};c.updateFileProgress=function(b,c){a.findFileById(b).progress(c)};c.setFileStatusToInProgress=function(b){a.setFileStatus(b,UploaderFileStatus.inProgress)};c.setFileStatusToSuccess=function(b,c){a.setFileStatus(b,UploaderFileStatus.success,c)};c.setFileStatusToError=function(b,c,d){a.setFileStatus(b,UploaderFileStatus.error,d);a.setErrorMessage(b,c)};c.updateFilePreview=function(b,
c){a.findFileById(b).preview(c)};c.disableAction=function(b){a.findFileById(b).isActionEnabled(!1)};c.enableAction=function(b){a.findFileById(b).isActionEnabled(!0)};a.initialize();return c}var UploaderFileStatus={added:1,inProgress:2,success:3,error:4};
function UploaderSenderOptions(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'editableOptions' is not defined");var e={},f;f=URI(d.url).normalizeSearch();e.hasChanged=!1;e.addParameter=function(c,a){e.hasChanged=!0;f.addSearch(c,a)};e.getProcessedOptions=function(){return{url:f.normalizeSearch().toString()}};return e}function UploaderSenderOptionsFactory(){return{create:function(d){return UploaderSenderOptions(d)}}}
function UploadStateService(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR),"'options.signalR' is not defined");contract.require(!objectState.isNullOrUndefined(d.signalR.uploadProgressNotificationHub),"could not find progress notification hub");var e={},f={};f.signalR=d.signalR;f.specifyServiceUrl=function(){objectState.isNullOrUndefined(d.endpoint)||($.connection.hub.url=d.endpoint)};f.initialize=
function(){f.specifyServiceUrl();f.client=d.signalR.uploadProgressNotificationHub.client;f.server=d.signalR.uploadProgressNotificationHub.server;f.hub=d.signalR.hub};e.openChannel=function(c){c=c||{};f.uploadStateServiceClient=UploadStateServiceClient({client:f.client,hub:f.hub,onProgress:c.onProgress,onSuccess:c.onSuccess,onFail:c.onFail,onChannelOpened:c.onChannelOpened,onAbort:c.onAbort})};e.abortUpload=function(){f.server.abortUpload()};f.initialize();return e}
function UploadStateServiceClient(d){contract.require(!objectState.isNullOrUndefined(d),"argument 'options' is not defined");contract.require(!objectState.isNullOrUndefined(d.client),"'options.client' is not defined");contract.require(!objectState.isNullOrUndefined(d.hub),"'options.hub' is not defined");var e={},f={openChannel:function(){f.UsePreExistingChannel=!1;null!==$.connection.hub&&"undefined"!==typeof $.connection.hub.id&&(f.UsePreExistingChannel=!0);d.client.UpdateUploadProgress=function(c){f.onProgress(c)};
d.client.UploadCompleted=function(c){f.onSuccess(JSON.parse(c));f.UsePreExistingChannel||d.hub.stop()};d.client.UploadError=function(c){f.onFail(c);f.UsePreExistingChannel||d.hub.stop()};d.client.uploadAborted=function(){f.onAbort();f.UsePreExistingChannel||d.hub.stop()};f.UsePreExistingChannel?(e.channelId=$.connection.hub.id,f.onChannelOpened()):d.hub.start({transport:"longPolling"}).done(function(){e.channelId=d.hub.id;f.onChannelOpened()}).fail(function(){console.log("Could not connect to UploadProgressNotificationHub!")})},
initialize:function(){f.openChannel()},onProgress:function(c){if(d.onProgress)d.onProgress(c)},onSuccess:function(c){if(d.onSuccess)d.onSuccess(c)},onFail:function(c){if(d.onFail)d.onFail(c)},onAbort:function(){if(d.onAbort)d.onAbort()},onChannelOpened:function(){if(d.onChannelOpened)d.onChannelOpened(e)}};e.channelId=null;e.abort=function(){};f.initialize();return e}
(function(d){d.fn.autogrow=function(e){this.filter("textarea").each(function(){var f=this,c=d(f),a=c.height(),b,g=20;e&&e.hasOwnProperty("additionalHeight")&&(g=e.additionalHeight);var h=d("<div></div>").css({position:"absolute",top:-1E4,left:-1E4,fontSize:c.css("fontSize"),fontFamily:c.css("fontFamily"),font:c.css("font"),resize:"none"}).appendTo(document.body),l=function(){var b=c.css("word-wrap");h.css({width:c.width()-parseInt(c.css("paddingLeft"))-parseInt(c.css("paddingRight")),lineHeight:c.css("lineHeight"),
"word-wrap":b?b:"break-word"});b=f.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(a){for(var b="",c=0;c<a.length-1;c++)b+="&nbsp;";return b+" "});h.html(b);c.css("height",Math.max(h.height()+g,a))};c.bind("change keyup keydown input paste",l);d(window).resize(function(){b&&clearTimeout(b);b=setTimeout(function(){l.apply(f)},200)});l.apply(f)});return self}})(jQuery);
jQuery.cookie=function(d,e,f){if(1<arguments.length&&"[object Object]"!==String(e)){f=jQuery.extend({},f);if(null===e||void 0===e)f.expires=-1;if("number"===typeof f.expires){var c=f.expires,a=f.expires=new Date;a.setDate(a.getDate()+c)}e=String(e);return document.cookie=[encodeURIComponent(d),"=",f.raw?e:encodeURIComponent(e),f.expires?"; expires="+f.expires.toUTCString():"",f.path?"; path="+f.path:"",f.domain?"; domain="+f.domain:"",f.secure?"; secure":""].join("")}f=e||{};a=f.raw?function(a){return a}:
decodeURIComponent;return(c=(new RegExp("(?:^|; )"+encodeURIComponent(d)+"=([^;]*)")).exec(document.cookie))?a(c[1]):null};
!function(d,e,f){function c(b,c){this._defaults=a;this.element=b;this.setOptions(c);this.init()}var a={tagName:"a",newLine:"\n",target:"_blank",linkClass:null,linkClasses:[],linkAttributes:null};c.prototype={constructor:c,init:function(){1===this.element.nodeType?c.linkifyNode.call(this,this.element):this.element=c.linkify.call(this,this.element.toString())},setOptions:function(a){this.settings=c.extendSettings(a,this.settings)},toString:function(){return this.element.toString()}};c.extendSettings=
function(b,c){var d;c=c||{};for(d in a)c[d]||(c[d]=a[d]);for(d in b)c[d]=b[d];return c};c.linkMatch=RegExp('(\\s|[^a-zA-Z0-9.\\+_\\/"\\>\\-]|^)(?:([a-zA-Z0-9\\+_\\-]+(?:\\.[a-zA-Z0-9\\+_\\-]+)*@)?(http:\\/\\/|https:\\/\\/|ftp:\\/\\/)?((?:(?:[a-z0-9][a-z0-9_%\\-_+]*\\.)+))((?:com|loc|ca|co|edu|gov|net|org|dev|biz|cat|int|pro|tel|mil|aero|asia|coop|info|jobs|mobi|museum|name|post|travel|local|[a-z]{2}))((?::\\d{1,5}))?((?:[\\/|\\?](?:[\\-a-zA-Z0-9_%#*&+=~!?,;:.\\/\\[\\]@\'\\(\\)]*)*)[\\-\\/a-zA-Z0-9_%#*&+=~]|\\/?)?)([^a-zA-Z0-9\\+_\\/"\\<\\-]|$)',
"g");c.emailLinkMatch=/(<[a-z]+ href=\")(http:\/\/)?([a-zA-Z0-9\+_\-]+(?:\.[a-zA-Z0-9\+_\-]+)*@)/g;c.linkify=function(a,d){var e,f,k,m=[];this.constructor===c&&this.settings?(f=this.settings,d&&(f=c.extendSettings(d,f))):f=c.extendSettings(d);k=f.linkClass?f.linkClass.split(/\s+/):[];k.push.apply(k,f.linkClasses);a=a.replace(/</g,"&lt;").replace(/(\s)/g,"$1$1");m.push("$1<"+f.tagName,'href="$3://$2$4$5$6$7"');m.push('class="jq-linkified'+(0<k.length?" "+k.join(" "):"")+'"');f.target&&m.push('target="'+
f.target+'"');for(e in f.linkAttributes)m.push([e,'="',f.linkAttributes[e].replace(/\"/g,"&quot;").replace(/\$/g,"&#36;"),'"'].join(""));return m.push(">$2$3$4$5$6$7</"+f.tagName+">$8"),a=a.replace(c.linkMatch,m.join(" ")),a=a.replace(/(:\/\/){2}/g,"://"),a=a.replace(/href=\\?":\/\//g,'href="http://'),a=a.replace(c.emailLinkMatch,"$1mailto:$3"),a=a.replace(/(\s){2}/g,"$1"),a.replace(/\n/g,f.newLine)};c.linkifyNode=function(a){var d,e,l,k,m,n;if(a&&"object"==typeof a&&1===a.nodeType&&"a"!==a.tagName.toLowerCase()&&
!/\bjq-linkified\b/.test(a.className))for(m=c._dummyElement||f.createElement("div"),d=a.childNodes,l=0;l<d.length;l++)if(e=d[l],1===e.nodeType)c.linkifyNode.call(this,e);else if(3===e.nodeType){for(;m.firstChild;)m.removeChild(m.firstChild);k=0;n=c.linkify.call(this,e.textContent||e.innerText||e.nodeValue);for(m.innerHTML=n;m.firstChild;)k++,a.insertBefore(m.firstChild,e);a.removeChild(e);k--;l+=k}return a};c._dummyElement=f.createElement("div");d.fn.linkify=function(a){return this.each(function(){var e;
(e=d.data(this,"plugin-linkify"))?(e.setOptions(a),e.init()):d.data(this,"plugin-linkify",new c(this,a))})};d.fn.linkify.Constructor=c;d(e).on("load",function(){d("[data-linkify]").each(function(){var a=d(this),c=a.attr("data-linkify"),e={tagName:a.attr("data-linkify-tagname"),newLine:a.attr("data-linkify-newline"),target:a.attr("data-linkify-target"),linkClass:a.attr("data-linkify-linkclass")},f;for(f in e)"undefined"==typeof e[f]&&delete e[f];("this"===c?a:a.find(c)).linkify(e)})});d("body").on("click",
".linkified",function(){var a=d(this),c=a.attr("href"),f=/^mailto:/i.test(c),a=a.attr("target");return f?e.location.href=c:e.open(c,a),!1})}(jQuery,window,document);
(function(d){function e(e){if("string"===typeof e.data){var c=e.handler,a=e.data.toLowerCase().split(" ");e.handler=function(b){if(this===b.target||!/textarea|select/i.test(b.target.nodeName)&&"text"!==b.target.type&&"password"!==b.target.type){var e="keypress"!==b.type&&d.hotkeys.specialKeys[b.which],f=String.fromCharCode(b.which).toLowerCase(),l="",k={};b.altKey&&"alt"!==e&&(l+="alt+");b.ctrlKey&&"ctrl"!==e&&(l+="ctrl+");b.metaKey&&!b.ctrlKey&&"meta"!==e&&(l+="meta+");b.shiftKey&&"shift"!==e&&(l+=
"shift+");e?k[l+e]=!0:(k[l+f]=!0,k[l+d.hotkeys.shiftNums[f]]=!0,"shift+"===l&&(k[d.hotkeys.shiftNums[f]]=!0));e=0;for(f=a.length;e<f;e++)if(k[a[e]])return c.apply(this,arguments)}}}}d.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",
105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}};d.each(["keydown","keyup","keypress"],function(){d.event.special[this]={add:e}})})(jQuery);"use strict";
(function(){if(!jQuery||!jQuery.jstree){var d=!1,e=!1,f=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,b,c){a=a.toLowerCase();var d=c.cssRules||c.rules,e=0;do{if(d.length&&e>d.length+5)break;if(d[e].selectorText&&d[e].selectorText.toLowerCase()==a)return!0===b?(c.removeRule&&c.removeRule(e),c.deleteRule&&c.deleteRule(e),!0):d[e]}while(d[++e]);return!1},add_css:function(a,b){if(c.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,b){return c.vakata.css.get_css(a,!0,b)},add_sheet:function(a){var b=!1,d=!0;if(a.str)return a.title&&(b=c("style[id='"+a.title+"-stylesheet']")[0]),b?d=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?d?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),document.getElementsByTagName("head")[0].appendChild(b)),
b.sheet||b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(e){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var a=[],b=-1,g={},h={};c.fn.jstree=function(b){var d="string"==typeof b,e=Array.prototype.slice.call(arguments,1),f=this;if(d){if("_"==b.substring(0,1))return f;this.each(function(){var d=a[c.data(this,"jstree_instance_id")],
d=d&&c.isFunction(d[b])?d[b].apply(d,e):d;if("undefined"!==typeof d&&(0===b.indexOf("is_")||!0!==d&&!1!==d))return f=d,!1})}else this.each(function(){var d=c.data(this,"jstree_instance_id"),f=[],h=b?c.extend({},!0,b):{},k=c(this),n=!1,z=[],f=f.concat(e);k.data("jstree")&&f.push(k.data("jstree"));h=f.length?c.extend.apply(null,[!0,h].concat(f)):h;"undefined"!==typeof d&&a[d]&&a[d].destroy();d=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",d);h.plugins=c.isArray(h.plugins)?h.plugins:c.jstree.defaults.plugins.slice();
h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");n=c.extend(!0,{},c.jstree.defaults,h);n.plugins=h.plugins;c.each(g,function(a,b){-1===c.inArray(a,n.plugins)?(n[a]=null,delete n[a]):z.push(a)});n.plugins=z;a[d]=new c.jstree._instance(d,c(this).addClass("jstree jstree-"+d),n);c.each(a[d]._get_settings().plugins,function(b,c){a[d].data[c]={}});c.each(a[d]._get_settings().plugins,function(b,c){g[c]&&
g[c].__init.apply(a[d])});setTimeout(function(){a[d]&&a[d].init()},0)});return f};c.jstree={defaults:{plugins:[]},_focused:function(){return a[b]||null},_reference:function(b){if(a[b])return a[b];var d=c(b);d.length||"string"!==typeof b||(d=c("#"+b));return d.length?a[d.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,b,d){this.data={core:{}};this.get_settings=function(){return c.extend(!0,{},d)};this._get_settings=function(){return d};this.get_index=function(){return a};
this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){d=c.extend(!0,{},d,a)}},_fn:{},plugin:function(a,b){b=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},b);g[a]=b;c.jstree.defaults[a]=b.defaults;c.each(b._fn,function(b,d){d.plugin=a;d.old=c.jstree._fn[b];c.jstree._fn[b]=function(){var a,e=d,g=Array.prototype.slice.call(arguments);a=new c.Event("before.jstree");var f=!1;if(!0!==this.data.core.locked||
"unlock"===b||"is_locked"===b){do{if(e&&e.plugin&&-1!==c.inArray(e.plugin,this._get_settings().plugins))break;e=e.old}while(e);if(e){if(0===b.indexOf("_"))a=e.apply(this,g);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:g,plugin:e.plugin});if(!1===a)return;"undefined"!==typeof a&&(g=a);a=e.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:g,rslt:a,rlbk:f})},__rollback:function(){return f=this.get_rollback()},__call_old:function(a){return e.old.apply(this,
a?Array.prototype.slice.call(arguments,1):g)}}),g)}return a}}};c.jstree._fn[b].old=d.old;c.jstree._fn[b].plugin=a})},rollback:function(b){b&&(c.isArray(b)||(b=[b]),c.each(b,function(b,c){a[c.i].set_rollback(c.h,c.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),b=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],g=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(b,10)){d=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(h){}g+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(b,10)&&(e=!0,g+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(b,10)&&(f=!0,g+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:g,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+
this._get_string("loading")+"</a></li></ul>");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li > ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();
try{a.removeAllRanges(),a.collapse()}catch(b){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var d=this._get_node(b.rslt.obj),e=this;-1===d&&(d=this.get_container_ul());d.length&&d.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(b,d){e.data[b]&&c.isFunction(e["_"+b+"_notify"])&&e["_"+b+"_notify"].call(e,a,d)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,b){var d=this._get_node(b.rslt.obj),e=this;-1===d&&(d=this.get_container_ul());d.length&&d.find("li.jstree-open:not(:has(ul))").each(function(){e.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var d,e=this.get_index(),f=this._get_settings(),h=this;c.each(f.plugins,function(a,b){try{g[b].__destroy.apply(h)}catch(c){}});this.__callback();if(this.is_focused())for(d in a)if(a.hasOwnProperty(d)&&
d!=e){a[d].set_focus();break}e===b&&(b=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);a[e]=null;delete a[e]},_core_notify:function(a,b){b.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,d=!0,e=[],g=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,b){if("#"==b)return!0;c(b).length?e.push(b):g.push(b)}),e.length&&(this.data.core.to_load=g,c.each(e,function(a,c){b._is_loaded(c)||(b.load_node(c,function(){b.reload_nodes(!0)},function(){b.reload_nodes(!0)}),
d=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){b.open_node(c,!1,!0)});d&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(b,c){a.open_node(c,!1,!0)});this.__callback({})},refresh:function(a,b){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes();b&&"function"==typeof b&&b()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");b=this.get_index();this.__callback()}},is_focused:function(){return b==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),
b=-1);this.__callback()},_get_node:function(a){var b=c(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,b){a=this._get_node(a);return-1===a?this.get_container().find("> ul > li:first-child"):a.length?b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
b){a=this._get_node(a);if(-1===a)return this.get_container().find("> ul > li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".jstree","li:eq(0)");return c.length?c:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?a:-1},
_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,b){var c=[],d=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){c.push(b?this.id:d.get_text(this))});c.reverse();c.push(b?a.attr("id"):this.get_text(a));return c},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,b,c){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return b&&
b.call(),!1;var e=c||d?0:this._get_settings().core.animation,g=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){g.open_node(this,!1,!0)}),e&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),e?a.children("ul").stop(!0,!0).slideDown(e,function(){this.style.display="";g.after_open(a)}):g.after_open(a),this.__callback({obj:a}),b&&b.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){g.open_node(a,b,c)},b))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,b){a=this._get_node(a);var c=b||d?0:this._get_settings().core.animation,e=this;if(!a.length||!a.hasClass("jstree-open"))return!1;c&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");c?a.children("ul").stop(!0,!0).slideUp(c,function(){this.style.display="";e.after_close(a)}):
e.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,b,c){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());c?a=a.find("li.jstree-closed"):(c=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var d=this;a.each(function(){var a=this;
d._is_loaded(this)?d.open_node(this,!1,!b):d.open_node(this,function(){d.open_all(a,b,c)},!b)});0===c.find("li.jstree-closed").length&&this.__callback({obj:c})},close_all:function(a,b){var c=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){c.close_node(this,!b)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,b){this.get_container().empty().append(a);this.data=b;this.__callback()},load_node:function(a,b,c){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,b,d,e,g){a=this._get_node(a);b="undefined"===typeof b?
"last":b;var f=c("<li />"),h=this._get_settings().core,p;if(-1!==a&&!a.length)return!1;if(!g&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,d,e,!0)}),!1;this.__rollback();"string"===typeof d&&(d={data:d});d||(d={});d.attr&&f.attr(d.attr);d.metadata&&f.data(d.metadata);d.state&&f.addClass("jstree-"+d.state);d.data||(d.data=this._get_string("new_node"));c.isArray(d.data)||(p=d.data,d.data=[],d.data.push(p));c.each(d.data,function(a,b){p=c("<a />");c.isFunction(b)&&(b=b.call(this,
d));if("string"==typeof b)p.attr("href","#")[h.html_titles?"html":"text"](b);else b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),p.attr(b.attr)[h.html_titles?"html":"text"](b.title),b.language&&p.addClass(b.language);p.prepend("<ins class='jstree-icon'>&#160;</ins>");!b.icon&&d.icon&&(b.icon=d.icon);b.icon&&(-1===b.icon.indexOf("/")?p.children("ins").addClass(b.icon):p.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));f.append(p)});f.prepend("<ins class='jstree-icon'>&#160;</ins>");
-1===a&&(a=this.get_container(),"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(f);p=this._get_parent(a);break;case "after":a.after(f);p=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("<ul />");a.children("ul").prepend(f);p=a;break;case "last":a.children("ul").length||a.append("<ul />");a.children("ul").append(f);p=a;break;default:a.children("ul").length||a.append("<ul />"),b||(b=0),p=a.children("ul").children("li").eq(b),
p.length?p.before(f):a.children("ul").append(f),p=a}if(-1===p||p.get(0)===this.get_container().get(0))p=-1;this.clean_node(p);this.__callback({obj:f,parent:p});e&&e.call(this,f);return f},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b){a=this._get_node(a);
if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);
if(!a.length)return!1;this.__rollback();var b=this._get_parent(a),d=c([]),e=this;a.each(function(){d=d.add(e._get_prev(this))});a=a.detach();-1!==b&&0===b.find("> ul > li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:d,parent:b});return a},prepare_move:function(a,b,d,e,g){var f={};f.ot=c.jstree._reference(a)||this;f.o=f.ot._get_node(a);f.r=-1===b?-1:this._get_node(b);f.p="undefined"===typeof d||!1===d?"last":d;if(g||!h.o||
h.o[0]!==f.o[0]||h.r[0]!==f.r[0]||h.p!==f.p){f.ot=c.jstree._reference(f.o)||this;f.rt=c.jstree._reference(f.r)||this;if(-1!==f.r&&f.r){if(!/^(before|after)$/.test(f.p)&&!this._is_loaded(f.r))return this.load_node(f.r,function(){this.prepare_move(a,b,d,e,!0)});switch(f.p){case "before":f.cp=f.r.index();f.cr=f.rt._get_parent(f.r);break;case "after":f.cp=f.r.index()+1;f.cr=f.rt._get_parent(f.r);break;case "first":f.cp=0;f.cr=f.r;break;case "inside":case "last":f.cp=f.r.find(" > ul > li").length;f.cr=
f.r;break;default:f.cp=f.p,f.cr=f.r}}else switch(f.cr=-1,f.p){case "first":case "before":case "inside":f.cp=0;break;case "after":case "last":f.cp=f.rt.get_container().find(" > ul > li").length;break;default:f.cp=f.p}f.np=-1==f.cr?f.rt.get_container():f.cr;f.op=f.ot._get_parent(f.o);f.cop=f.o.index();-1===f.op&&(f.op=f.ot?f.ot.get_container():this.get_container());!/^(before|after)$/.test(f.p)&&f.op&&f.np&&f.op[0]===f.np[0]&&f.o.index()<f.cp&&f.cp++;f.or=f.np.find(" > ul > li:nth-child("+(f.cp+1)+
")");h=f}this.__callback(h);e&&e.call(this,h)},check_move:function(){var a=h,b=!0,c=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,b,d,e,f,g){if(!f)return this.prepare_move(a,b,d,function(a){this.move_node(a,!1,!1,e,!0,g)});e&&(h.cy=!0);if(!g&&!this.check_move())return!1;this.__rollback();b=!1;e?
(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.o;a.or.length?a.or.before(b):(a.np.children("ul").length||c("<ul />").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("> ul > li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(t){}e&&(h.cy=!0,h.oc=b);this.__callback(h);return h},_get_move:function(){return h}}})})(jQuery);(function(c){var a,
b,d;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(b=c('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=c('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=b.width()-d.width(),b.add(d).remove()):(b=c("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",
height:200}),a=100-b.width(),b.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||
this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,b){var d=this._get_settings().ui,e=this._get_node(b.rslt.obj),
f=e&&e.length?e.children("ul").find("a.jstree-clicked"):c(),g=this;!1!==d.selected_parent_close&&f.length&&f.each(function(){g.deselect_node(this);"select_parent"===d.selected_parent_close&&g.select_node(e)})},this)).bind("delete_node.jstree",c.proxy(function(a,b){var c=this._get_settings().ui.select_prev_on_delete,d=this._get_node(b.rslt.obj),d=d&&d.length?d.find("a.jstree-clicked"):[],e=this;d.each(function(){e.deselect_node(this)});c&&d.length&&b.rslt.prev.each(function(){if(this.parentNode)return e.select_node(this),
!1})},this)).bind("move_node.jstree",c.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(a,b){if("undefined"===typeof a||null===a)return b?this.data.ui.selected:this.data.ui.last_selected;var d=c(a,
this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},
reselect:function(){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(b,function(b,c){c&&"#"!==c&&a.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);
if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,b;if(!a||!a.length)return!1;b=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===b[0]&&(this.data.ui.hovered=null);this.__callback({obj:a})},select_node:function(a,b,c){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var d=this._get_settings().ui,
e="on"==d.select_multiple_modifier||!1!==d.select_multiple_modifier&&c&&c[d.select_multiple_modifier+"Key"],f=!1!==d.select_range_modifier&&c&&c[d.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],g=this.is_selected(a),t=!0,p=this;if(b){if(d.disable_selecting_children&&e&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;
t=!1;switch(!0){case f:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==d.select_limit||a.length<d.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==p.data.ui.last_selected[0]&&p.deselect_node(this)}),g=!1,t=!0):t=!1;break;case g&&!e:this.deselect_all();g=!1;t=!0;break;case !g&&!e:if(-1==d.select_limit||
0<d.select_limit)this.deselect_all(),t=!0;break;case g&&e:this.deselect_node(a);break;case !g&&e:if(-1==d.select_limit||this.data.ui.selected.length+1<=d.select_limit)t=!0}}t&&!g&&(f||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),d.selected_parent_open&&a.parents(".jstree-closed").each(function(){p.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:c}))},_fix_scroll:function(b){var c=this.get_container()[0];
c.scrollHeight>c.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,0>b&&(c.scrollTop=c.scrollTop+b-1),b+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?a:0)>c.offsetHeight&&(c.scrollTop+=b-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?a:0)))},deselect_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=
this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():
this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",c.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var c=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){c.open_node(this,
!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,b){a=this._get_node(a);var d=this._get_settings().core.rtl,e=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),k=a.find("> a:visible > ins").width()*a.find("> a:visible > ins").length,m=this.get_text(a),n=c("<div />",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),
q=a.css("position","relative").append(c("<input />",{value:m,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:d?"auto":f+k+4+"px",right:d?f+k+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=a.children(".jstree-rename-input"),d=c.val();""===d&&(d=m);n.remove();c.remove();this.set_text(a,m);this.rename_node(a,d);b.call(this,a,d,m);a.css("position","")},
this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=m,this.blur()):13==a?this.blur():q.width(Math.min(n.text("pW"+this.value).width(),e))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");n.css({fontFamily:q.css("fontFamily")||"",fontSize:q.css("fontSize")||"",fontWeight:q.css("fontWeight")||"",fontStyle:q.css("fontStyle")||"",fontStretch:q.css("fontStretch")||"",fontVariant:q.css("fontVariant")||"",letterSpacing:q.css("letterSpacing")||
"",wordSpacing:q.css("wordSpacing")||""});q.width(Math.min(n.text("pW"+q[0].value).width(),e))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,c,d){b.call(this,{obj:a,new_name:c,old_name:d})})},create:function(a,b,d,e,f){var k=this;(a=this._get_node(a))||(a=-1);this.__rollback();return this.create_node(a,b,d,function(a){var b=this._get_parent(a),d=c(a).index();e&&e.call(this,a);b.length&&b.hasClass("jstree-closed")&&this.open_node(b,
!1,!0);f?k.__callback({obj:a,name:this.get_text(a),parent:b,position:d}):this._show_input(a,function(a,c,e){k.__callback({obj:a,name:c,parent:b,position:d})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),c=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,prev:c,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,c,d,e,f){var m=
this._get_settings().crrm.move;if(!e)return"undefined"===typeof c&&(c=m.default_position),"inside"!==c||m.default_position.match(/^(before|after)$/)||(c=m.default_position),this.__call_old(!0,a,b,c,d,!1,f);if(!0===m.always_copy||"multitree"===m.always_copy&&a.rt.get_index()!==a.ot.get_index())d=!0;this.__call_old(!0,a,b,c,d,!0,f)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,
!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,
nodes:b})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,
icons:!0},_fn:{set_theme:function(b,d){if(!b)return!1;d||(d=c.jstree._themes+b+"/style.css");-1==c.inArray(d,a)&&(c.vakata.css.add_sheet({url:d}),a.push(d));this.data.themes.theme!=b&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=b);this.get_container().addClass("jstree-"+b);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},
show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},
toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===
typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(b,d){!1!==d&&-1==c.inArray(b,a)&&(c(document).bind("keydown",b,function(a){a:{var d=c.jstree._focused(),e;if(d&&d.data&&d.data.hotkeys&&d.data.hotkeys.enabled&&(e=d._get_settings().hotkeys[b])){a=e.call(d,a);break a}a=void 0}return a}),a.push(b))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?
this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();
return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled||(this.data.hotkeys.enabled=!0)},disable_hotkeys:function(){this.data.hotkeys.enabled&&
(this.data.hotkeys.enabled=!1)}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,b){b.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(a,b,c){var d=this;this.load_node_json(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var b=this._get_settings().json_data;
a=this._get_node(a);return-1==a||!a||!b.ajax&&!b.progressive_render&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var b=this._get_settings().json_data;a&&-1!==a&&b.progressive_unload&&(c.isFunction(b.data)||b.ajax)&&a.removeData("jstree_children");return this.__call_old()},load_node_json:function(a,b,d){var e=this.get_settings().json_data,f,k=function(){};f=function(){};if((a=this._get_node(a))&&-1!==a&&
(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(f=this._parse_json(a.data("jstree_children"),a))a.append(f),e.progressive_unload||a.removeData("jstree_children");this.clean_node(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,
a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),b&&b.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&this.correct_state(a)):e.correct_state&&this.get_container().children("ul").empty(),d&&d.call(this))},this));break;
case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||((f=this._parse_json(e.data,a))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):e.correct_state&&this.get_container().children("ul").empty());b&&b.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:k=function(b,c,f){var l=this.get_settings().json_data.ajax.error;l&&l.call(this,b,c,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
"success"===c&&e.correct_state&&this.correct_state(a)):"success"===c&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},f=function(d,f,g){var l=this.get_settings().json_data.ajax.success;l&&(d=l.call(this,d,f,g)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||!c.isArray(d)&&!c.isPlainObject(d))return k.call(this,g,f,"");(d=this._parse_json(d,a))?(-1!==a&&a?(a.append(d).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):
this.get_container().children("ul").empty().append(d.children()),this.clean_node(a),b&&b.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},e.ajax.context=this,e.ajax.error=k,e.ajax.success=f,e.ajax.dataType||(e.ajax.dataType="json"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),
c.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),c.ajax(e.ajax)}}},_parse_json:function(a,b,d){var e=!1,f=this._get_settings(),k=f.json_data,m=f.core.html_titles,n;if(!a)return e;k.progressive_unload&&b&&-1!==b&&b.data("jstree_children",e);if(c.isArray(a)){e=c();if(!a.length)return!1;f=0;for(k=a.length;f<k;f++)n=this._parse_json(a[f],b,!0),n.length&&(e=e.add(n))}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return e;e=c("<li />");a.attr&&e.attr(a.attr);a.metadata&&
e.data(a.metadata);a.state&&e.addClass("jstree-"+a.state);c.isArray(a.data)||(n=a.data,a.data=[],a.data.push(n));c.each(a.data,function(b,d){n=c("<a />");c.isFunction(d)&&(d=d.call(this,a));if("string"==typeof d)n.attr("href","#")[m?"html":"text"](d);else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),n.attr(d.attr)[m?"html":"text"](d.title),d.language&&n.addClass(d.language);n.prepend("<ins class='jstree-icon'>&#160;</ins>");!d.icon&&a.icon&&(d.icon=a.icon);d.icon&&(-1===d.icon.indexOf("/")?
n.children("ins").addClass(d.icon):n.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));e.append(n)});e.prepend("<ins class='jstree-icon'>&#160;</ins>");a.children&&(k.progressive_render&&"open"!==a.state?e.addClass("jstree-closed").data("jstree_children",a.children):(k.progressive_unload&&e.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(n=this._parse_json(a.children,b,!0),n.length&&(b=c("<ul />"),b.append(n),e.append(b)))))}d||(d=c("<ul />"),
d.append(e),e=d);return e},get_json:function(a,b,d,e){var f=[],k=this._get_settings(),m=this,n,q,s,t,p,r;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("> ul > li"));b=c.isArray(b)?b:["id","class"];!e&&this.data.types&&b.push(k.types.type_attr);d=c.isArray(d)?d:[];a.each(function(){s=c(this);n={data:[]};b.length&&(n.attr={});c.each(b,function(a,b){(q=s.attr(b))&&q.length&&q.replace(/jstree[^ ]*/ig,"").length&&(n.attr[b]=(" "+q).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))});s.hasClass("jstree-open")&&(n.state="open");s.hasClass("jstree-closed")&&(n.state="closed");s.data()&&(n.metadata=s.data());t=s.children("a");t.each(function(){p=c(this);d.length||-1!==c.inArray("languages",k.plugins)||p.children("ins").get(0).style.backgroundImage.length||p.children("ins").get(0).className&&p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(r=!1,-1!==c.inArray("languages",k.plugins)&&c.isArray(k.languages)&&k.languages.length&&c.each(k.languages,
function(a,b){if(p.hasClass(b))return r=b,!1}),q={attr:{},title:m.get_text(p,r)},c.each(d,function(a,b){q.attr[b]=(" "+(p.attr(b)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",k.plugins)&&c.isArray(k.languages)&&k.languages.length&&c.each(k.languages,function(a,b){if(p.hasClass(b))return q.language=b,!0}),p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(q.icon=p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,
"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),p.children("ins").get(0).style.backgroundImage.length&&(q.icon=p.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):q=m.get_text(p);1<t.length?n.data.push(q):n.data=q});s=s.find("> ul > li");s.length&&(n.children=m.get_json(s,b,d,!0));f.push(n)});return f}}})})(jQuery);(function(c){c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var b=this._get_settings().languages,
d=!1,e=".jstree-"+this.get_index()+" a";if(!c.isArray(b)||0===b.length)return!1;if(-1==c.inArray(a,b))if(b[a])a=b[a];else return!1;if(a==this.data.languages.current_language)return!0;d=c.vakata.css.get_css(e+"."+this.data.languages.current_language,!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=c.vakata.css.get_css(e+"."+a,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},
_get_string:function(a,b){var d=this._get_settings().languages,e=this._get_settings().core.strings;c.isArray(d)&&d.length&&(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language);return e[b]&&e[b][a]?e[b][a]:e[a]?e[a]:a},get_text:function(a,b){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,e=this._get_settings().core.html_titles;c.isArray(d)&&d.length?(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language,a=a.children("a."+
b)):a=a.children("a:eq(0)");if(e)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b,d){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,f=this._get_settings().core.html_titles;c.isArray(e)&&e.length?(d=d&&-1!=c.inArray(d,e)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");if(f)return e=a.children("INS").clone(),
a.html(b).prepend(e),this.__callback({obj:a,name:b,lang:d}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b,lang:d});return a.nodeValue=b},_load_css:function(){var a=this._get_settings().languages,b="/* languages css */",d=".jstree-"+this.get_index()+" a",e;if(c.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(e=0;e<a.length;e++)b+=d+"."+a[e]+" {",a[e]!=this.data.languages.current_language&&(b+=" display:none; "),b+=" } ";this.data.languages.language_css=
c.vakata.css.add_sheet({str:b,title:"jstree-languages"})}},create_node:function(a,b,d,e){return this.__call_old(!0,a,b,d,function(a){var b=this._get_settings().languages,d=a.children("a"),f;if(c.isArray(b)&&b.length){for(f=0;f<b.length;f++)d.is("."+b[f])||a.append(d.eq(0).clone().removeClass(b.join(" ")).addClass(b[f]));d.not("."+b.join(", .")).remove()}e&&e.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";
var a=this._get_settings().cookies,b;a.save_loaded&&(b=c.cookie(a.save_loaded))&&b.length&&(this.data.core.to_load=b.split(","));a.save_opened&&(b=c.cookie(a.save_opened))&&b.length&&(this.data.core.to_open=b.split(","));a.save_selected&&(b=c.cookie(a.save_selected))&&b.length&&this.data.ui&&(this.data.ui.to_select=b.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",
c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var b=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),
b.cookie_options));b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options));break;case "select_node":case "deselect_node":b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options))}else b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options)),b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),
b.cookie_options)),b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var c=this._get_node(b.rslt.obj),c=-1===c?this.get_container().children("ul"):c.children("ul");this.sort(c)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,b){this.sort(b.rslt.obj.parent())},
this)).bind("move_node.jstree",c.proxy(function(a,b){var c=-1==b.rslt.np?this.get_container():b.rslt.np;this.sort(c.children("ul"))},this))},defaults:function(a,b){return this.get_text(a)>this.get_text(b)?1:-1},_fn:{sort:function(a){var b=this._get_settings().sort,d=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(b,d)));a.find("> li > ul").each(function(){d.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,b=!1,d=!1,e=!1,f=!1,k=!1,m=!1,n=!1,q=!1;c.vakata.dnd={is_down:!1,
is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,b,d){c.vakata.dnd.is_drag&&c.vakata.dnd.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=b;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("<div id='vakata-dragged' />").html(d);
c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var b=c(document),d=c(window),e=b.scrollTop(),g=b.scrollLeft(),
h=c.jstree._focused();null!=h&&(h=h._get_settings().dnd.scroll_parent)&&(b=d=h,e=g=0);20>a.pageY-e?(k&&"down"===m&&(clearInterval(k),k=!1),k||(m="up",k=setInterval(function(){b.scrollTop(b.scrollTop()-c.vakata.dnd.scroll_spd)},150))):k&&"up"===m&&(clearInterval(k),k=!1);20>d.height()-(a.pageY-e)?(k&&"up"===m&&(clearInterval(k),k=!1),k||(m="down",k=setInterval(function(){b.scrollTop(b.scrollTop()+c.vakata.dnd.scroll_spd)},150))):k&&"down"===m&&(clearInterval(k),k=!1);20>a.pageX-g?(f&&"right"===n&&
(clearInterval(f),f=!1),f||(n="left",f=setInterval(function(){b.scrollLeft(b.scrollLeft()-c.vakata.dnd.scroll_spd)},150))):f&&"left"===n&&(clearInterval(f),f=!1);20>d.width()-(a.pageX-g)?(f&&"left"===n&&(clearInterval(f),f=!1),f||(n="right",f=setInterval(function(){b.scrollLeft(b.scrollLeft()+c.vakata.dnd.scroll_spd)},150))):f&&"right"===n&&(clearInterval(f),f=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",
{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);k&&clearInterval(k);c(document).unbind("mousemove",c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",
title:"vakata"})});c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(b){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),
b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target&&(b=c.jstree._reference(b.target),b.data.dnd.foreign?(b=b._get_settings().dnd.drag_check.call(this,{o:a,r:b.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(b.prepare_move(a,b.get_container(),"last"),b.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(b){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target){var d=c.jstree._reference(b.currentTarget);d.data.dnd.foreign?(b=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||d._get_settings().dnd.drag_finish.call(this,
{o:a,r:d.get_container(),is_root:!0})):d.move_node(a,d.get_container(),"last",b[d._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var b=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},b),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},b),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&d&&e&&(d.hide(),e.hide(),c(document).triggerHandler("dnd_hide.vakata",{inst:this}))},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&
this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(b&&b.length&&b.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",
c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;d&&d.hide();e&&e.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this});this.data.dnd.mto=setTimeout(function(b){return function(){b.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",
c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});
e&&e.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,b){if(b.data.jstree){var d=c(b.event.target);d.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(d)}},this));var f=this._get_settings().dnd;f.drag_target&&c(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(b){a=b.target;c.vakata.dnd.drag_start(b,{jstree:!0,obj:b.target},"<ins class='jstree-icon'></ins>"+c(b.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+
this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;b.preventDefault()},this));f.drop_target&&c(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),
c.proxy(function(b){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(b.target),e:b})&&c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&
this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(b.target),e:b})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}},scroll_parent:!1},_fn:{dnd_prepare:function(){if(b&&b.length){this.data.dnd.off=b.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+
b.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:b});this.data.dnd.after=c.after;this.data.dnd.before=c.before;this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,b,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,b,"after");this.data.dnd.after=this.check_move();this._is_loaded(b)?(this.prepare_move(a,b,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=
!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],b=!1,f=this._get_settings().core.rtl,a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,d){if(this.data.dnd[d])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),
b=d,!1},this));!1===b&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+10;switch(b){case "before":d.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:a+
(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:d.hide(),e&&e.hide()}c(document).triggerHandler("dnd_show.vakata",{data:this._get_move(),position:b,inst:this});return q=b}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(b,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(f){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:b,p:q}):
(this.dnd_prepare(),this.move_node(a,b,q,f[this._get_settings().dnd.copy_modifier+"Key"]));b=a=!1;d.hide();e&&e.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this})},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;b=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();
d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),b&&b.length&&b.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),d.open_timeout))):b&&b.length&&b.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();e&&e.hide();c(document).triggerHandler("dnd_hide.vakata",{inst:this});b&&b[0]===a.target.parentNode&&
(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(b,f){a=this._get_node(b);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var l=1<a.length?this._get_string("multiple_selection"):this.get_text(a),k=this.get_container();this._get_settings().core.html_titles||(l=l.replace(/</ig,"&lt;").replace(/>/ig,"&gt;"));c.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"<ins class='jstree-icon'></ins>"+
l);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=k.offset();this.data.dnd.cw=parseInt(k.width(),10);this.data.dnd.ch=parseInt(k.height(),10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=c("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(a){d.hide();e.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");e=c("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(b&&b.length)return b.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=c(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
b&&b.length)return b.children("a").trigger(a),d.hide(),e.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(d.show(),e&&e.show())});c(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(d.hide(),e&&e.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");if(!1!==a){var b,d=this,e,f=this._get_settings().checkbox.two_state,k=this._get_settings().checkbox.real_checkboxes,m=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=c(this);b=e.is("li")&&(e.hasClass("jstree-checked")||k&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var a=
c(this),e;a.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":b);k&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(e=m.call(d,a),a.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+e[0]+"' name='"+e[0]+"' value='"+e[1]+"' />")));f?(a.hasClass("jstree-checked")||a.children(":checked").length)&&
a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===b||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)})}},change_state:function(a,b){a=this._get_node(a);var d=!1,e=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;b=!1===b||!0===b?b:a.hasClass("jstree-checked");
if(this._get_settings().checkbox.two_state)b?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),e&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),e&&a.children(":checkbox").prop("checked",!0));else{if(b){d=a.find("li").andSelf();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&d.children(":checkbox").prop("checked",!1)}else{d=
a.find("li").andSelf();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&d.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(b){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
c=a.find("> ul > .jstree-checked").length,d=a.find("> ul > .jstree-undetermined").length,e=a.find("> ul > li").length;0===e?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===c&&0===d?this.change_state(a,!0):c===e?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var a=
this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(b,function(b,c){a.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+this.id)})}}});
c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,b,d){var e="",f;if(document.recalc)return f=document.createElement("xml"),e=document.createElement("xml"),f.innerHTML=a,e.innerHTML=b,c("body").append(f).append(e),setTimeout(function(a,b,d){return function(){d.call(null,a.transformNode(b.XMLDocument));setTimeout(function(a,b){return function(){c(a).remove();c(b).remove()}}(a,b),200)}}(f,e,
d),100),!0;"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),b=(new DOMParser).parseFromString(b,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){f=new XSLTProcessor;e=c.isFunction(f.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!e)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");b=(new DOMParser).parseFromString(b,"text/xml");c.isFunction(f.transformDocument)?(e=document.implementation.createDocument("","",null),f.transformDocument(a,b,e,null),d.call(null,(new XMLSerializer).serializeToString(e))):(f.importStylesheet(b),e=f.transformToFragment(a,document),d.call(null,c("<div />").append(e).html()));return!0}return!1};var a={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',
flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},
b=function(a){return a.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var d=this;this.load_node_xml(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var b=this._get_settings().xml_data;a=this._get_node(a);return-1==a||
!a||!b.ajax&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,b,d){var e=this.get_settings().xml_data,f=function(){},n=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,a,c.proxy(function(d){this.parse_xml(d,c.proxy(function(d){d&&(d=
d.replace(/ ?xmlns="[^"]*"/ig,""),10<d.length?(d=c(d),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()),e.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(e.data,c.proxy(function(d){d?(d=d.replace(/ ?xmlns="[^"]*"/ig,""),10<d.length&&(d=c(d),this.get_container().children("ul").empty().append(d.children()),e.clean_node&&this.clean_node(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:f=function(b,c,f){var h=this.get_settings().xml_data.ajax.error;
h&&h.call(this,b,c,f);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&e.correct_state&&this.correct_state(a)):"success"===c&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},n=function(d,l,n){d=n.responseText;var p=this.get_settings().xml_data.ajax.success;p&&(d=p.call(this,d,l,n)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,""))return f.call(this,n,l,"");this.parse_xml(d,
c.proxy(function(d){d&&(d=d.replace(/ ?xmlns="[^"]*"/ig,""),10<d.length?(d=c(d),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()),e.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},e.ajax.context=this,e.ajax.error=f,e.ajax.success=n,e.ajax.dataType||(e.ajax.dataType="xml"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),c.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),c.ajax(e.ajax)}},parse_xml:function(b,d){var e=this._get_settings().xml_data;c.vakata.xslt(b,a[e.xsl],d)},get_xml:function(a,d,e,f,m){var n="",q=this._get_settings(),s=this,t,p,r,z,y;a||(a="flat");m||(m=0);(d=this._get_node(d))&&-1!==d||(d=this.get_container().find("> ul > li"));
e=c.isArray(e)?e:["id","class"];!m&&this.data.types&&-1===c.inArray(q.types.type_attr,e)&&e.push(q.types.type_attr);f=c.isArray(f)?f:[];m||(q.xml_data.get_include_preamble&&(n+='<?xml version="1.0" encoding="UTF-8"?>'),n+="<root>");d.each(function(){n+="<item";r=c(this);c.each(e,function(a,c){var d=r.attr(c);q.xml_data.get_skip_empty&&"undefined"===typeof d||(n+=" "+c+'="'+b((" "+(d||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});r.hasClass("jstree-open")&&
(n+=' state="open"');r.hasClass("jstree-closed")&&(n+=' state="closed"');"flat"===a&&(n+=' parent_id="'+b(m)+'"');n+=">";n+="<content>";z=r.children("a");z.each(function(){t=c(this);y=!1;n+="<name";-1!==c.inArray("languages",q.plugins)&&c.each(q.languages,function(a,c){if(t.hasClass(c))return n+=' lang="'+b(c)+'"',y=c,!1});f.length&&c.each(f,function(a,c){var d=t.attr(c);q.xml_data.get_skip_empty&&"undefined"===typeof d||(n+=" "+c+'="'+b((" "+d||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,
"").replace(/ $/,""))+'"')});t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(n+=' icon="'+b(t.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');t.children("ins").get(0).style.backgroundImage.length&&(n+=' icon="'+b(t.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,"").replace(/"/ig,""))+'"');n+=">";n+="<![CDATA["+s.get_text(t,y)+"]]\x3e";
n+="</name>"});n+="</content>";p=r[0].id||!0;r=r.find("> ul > li");p=r.length?s.get_xml(a,r,e,f,p):"";"nest"==a&&(n+=p);n+="</item>";"flat"==a&&(n+=p)});m||(n+="</root>");return n}}})})(jQuery);(function(c){c.expr[":"].jstree_contains=function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())};c.expr[":"].jstree_title_contains=function(a,b,c){return 0<=(a.getAttribute("title")||"").toLowerCase().indexOf(c[3].toLowerCase())};c.jstree.plugin("search",{__init:function(){this.data.search.str=
"";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,b){c(this).children("ul").find("li").hide().removeClass("jstree-last");b.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",
show_only_matches:!1},_fn:{search:function(a,b){if(""===c.trim(a))this.clear_search();else{var d=this.get_settings().search,e=this,f=function(){};this.data.search.str=a;if(!b&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,c){var d=this.get_settings().search.ajax.success;d&&(a=d.call(this,a,b,c)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=
f;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,
!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var b=this;a=!0;var d=[],e=[];this.data.search.to_open.length&&(c.each(this.data.search.to_open,function(a,b){if("#"==b)return!0;c(b).length&&c(b).is(".jstree-closed")?d.push(b):e.push(b)}),d.length&&(this.data.search.to_open=e,c.each(d,function(a,c){b.open_node(c,
function(){b._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,b,d,e,f,k,m){c.vakata.context.rtl=!!m;if(a=c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=b;c.vakata.context.par=k||b||null;c.vakata.context.data=f||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,
top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",function(a){c.vakata.context.hide()});f=c.vakata.context.cnt.height();k=c.vakata.context.cnt.width();d+k>c(document).width()&&(d=c(document).width()-(k+5),c.vakata.context.cnt.find("li > ul").addClass("right"));e+f>c(document).height()&&(e-=f+b[0].offsetHeight,c.vakata.context.cnt.find("li > ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:e}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();
var b=c(document).height(),d=c(this).children("ul").show();a!==c(document).width()&&d.toggleClass("right");b!==c(document).height()&&d.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,b){if(!a)return!1;
var d="",e=!1,f=!0;b||(c.vakata.context.func={});d+="<ul>";c.each(a,function(a,b){if(!b)return!0;c.vakata.context.func[a]=b.action;!f&&b.separator_before&&(d+="<li class='vakata-separator vakata-separator-before'></li>");f=!1;d+="<li class='"+(b._class||"")+(b._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ";b.icon&&-1===b.icon.indexOf("/")&&(d+=" class='"+b.icon+"' ");b.icon&&-1!==b.icon.indexOf("/")&&(d+=" style='background:url("+b.icon+") center center no-repeat;' ");d+=">&#160;</ins><a href='#' rel='"+
a+"'>";b.submenu&&(d+="<span style='float:"+(c.vakata.context.rtl?"left":"right")+";'>&raquo;</span>");d+=b.label+"</a>";b.submenu&&(e=c.vakata.context.parse(b.submenu,!0))&&(d+=e);d+="</li>";b.separator_after&&(d+="<li class='vakata-separator vakata-separator-after'></li>",f=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="</ul>";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?
(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; } #vakata-contextmenu ul { min-width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var b=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var b=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){"input"===a.target.tagName.toLowerCase()&&"checkbox"===a.target.type.toLowerCase()||a.preventDefault()})});
c.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,b,d){a=this._get_node(a);var e=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)"),k=!1,k=!1;e.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),this.select_node(a,!0));
if(e.show_at_node||"undefined"===typeof b||"undefined"===typeof d)k=f.offset(),b=k.left,d=k.top+this.data.core.li_height;k=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;c.isFunction(k)&&(k=k.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(k,f,b,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var b=a.type_attr,d="",e=this;c.each(a.types,function(a,f){c.each(f,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||e.data.types.attach_to.push(a)});if(!f.icon)return!0;if(f.icon.image||f.icon.position)d="default"==a?d+(".jstree-"+e.get_index()+" a > .jstree-icon { "):d+(".jstree-"+e.get_index()+" li["+b+'="'+a+'"] > a > .jstree-icon { '),f.icon.image&&(d+=" background-image:url("+
f.icon.image+"); "),d=f.icon.position?d+(" background-position:"+f.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,d){var e,f;if((e=(e=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==e&&e.length?e.data("jstree"):!1)&&e.types&&!1===e.types[d.func]||-1!==c.inArray(d.func,this.data.types.attach_to)&&d.args[0]&&(d.args[0].tagName||d.args[0].jquery)&&(e=this._get_settings().types.types,
f=this._get_type(d.args[0]),(e[f]&&"undefined"!==typeof e[f][d.func]||e["default"]&&"undefined"!==typeof e["default"][d.func])&&!1===this._check(d.func,d.args[0])))return a.stopImmediatePropagation(),!1},this));d&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,d){var e=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),f=!1,k=this._get_settings().types;c.each(k.types,function(a,b){b.icon&&(b.icon.image||b.icon.position)&&
(f="default"===a?e.find("li > a > .jstree-icon"):e.find("li["+k.type_attr+"='"+a+"'] > a > .jstree-icon"),b.icon.image&&f.css("backgroundImage","url("+b.icon.image+")"),f.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,b){b.type&&this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=
this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var c=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;c&&this.__callback({obj:b,type:a});return c},_check:function(a,b,d){b=this._get_node(b);var e=!1,f=this._get_type(b),k=0,m=this,n=this._get_settings().types,q=!1;if(-1===b)if(n[a])e=n[a];else return;else{if(!1===f)return;(q=n.use_data?b.data("jstree"):!1)&&q.types&&"undefined"!==typeof q.types[a]?e=q.types[a]:
n.types[f]&&"undefined"!==typeof n.types[f][a]?e=n.types[f][a]:n.types["default"]&&"undefined"!==typeof n.types["default"][a]&&(e=n.types["default"][a])}c.isFunction(e)&&(e=e.call(this,b));"max_depth"===a&&-1!==b&&!1!==d&&-2!==n.max_depth&&0!==e&&b.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==n.max_depth&&0>=n.max_depth-(b+1))return e=0,!1;k=0===b?e:m._check(a,this,!1);if(-1!==k&&0>=k-(b+1))return e=0,!1;0<=k&&(k-(b+1)<e||0>e)&&(e=k-(b+1));0<=n.max_depth&&(n.max_depth-
(b+1)<e||0>e)&&(e=n.max_depth-(b+1))});return e},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),k=0,m=1;if("none"===f||c.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),f))return m=!1}),!1===m)||-2!==b.max_children&&-1!==d&&(k=-1===a.cr?this.get_container().find("> ul > li").not(a.o).length:a.cr.find("> ul > li").not(a.o).length,
k+a.o.length>d))return!1;if(-2!==b.max_depth&&-1!==e){m=0;if(0===e)return!1;if("undefined"===typeof a.o.d){for(b=a.o;0<b.length;)b=b.find("> ul > li"),m++;a.o.d=m}if(0>e-a.o.d)return!1}return!0},create_node:function(a,b,d,e,f,k){if(!k&&(f||this._is_loaded(a))){var m="string"==typeof b&&b.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),n=this._get_settings().types,q=this._check("max_children",m),s=this._check("max_depth",m),t=this._check("valid_children",m);"string"===typeof d&&
(d={data:d});d||(d={});if("none"===t)return!1;if(c.isArray(t))if(!d.attr||!d.attr[n.type_attr])d.attr||(d.attr={}),d.attr[n.type_attr]=t[0];else if(-1===c.inArray(d.attr[n.type_attr],t))return!1;if(-2!==n.max_children&&-1!==q&&(m=-1===m?this.get_container().find("> ul > li").length:m.find("> ul > li").length,m+1>q)||-2!==n.max_depth&&-1!==s&&0>s-1)return!1}return this.__call_old(!0,a,b,d,e,f,k)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=
this.get_container().find(" > ul > li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,c){var d=this;this.load_node_html(a,function(){d.__callback({obj:d._get_node(a)});b.call(this)},c)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||
a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,b,d){var e,f=this.get_settings().html_data,k=function(){};e=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(f.data):f.data.call(this,a,c.proxy(function(d){d&&""!==d&&d.toString&&""!==d.toString().replace(/^[\s\n]+$/,"")?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),
a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !f.data&&!f.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||
"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node());b&&b.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):a&&-1!=a||(e=c(f.data),e.is("ul")||(e=c("<ul />").append(e)),this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());b&&b.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:a=this._get_node(a),k=function(b,c,e){var h=this.get_settings().html_data.ajax.error;h&&h.call(this,b,c,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&f.correct_state&&this.correct_state(a)):"success"===c&&f.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},e=function(d,e,g){var h=this.get_settings().html_data.ajax.success;
h&&(d=h.call(this,d,e,g)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||""===d.toString().replace(/["']/g,""))return k.call(this,g,e,"");d?(d=c(d),d.is("ul")||(d=c("<ul />").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),f.correct_state&&
(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},f.ajax.context=this,f.ajax.error=k,f.ajax.success=e,f.ajax.dataType||(f.ajax.dataType="html"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=this._get_settings().themeroller;
this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(b){c(b.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",
c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(b,c){c.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(b,c){c.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
c.proxy(function(b,c){c.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_h).not(c.rslt.obj).removeClass(a.item_h);c.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,b=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(b=b.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+b.join(", .")).removeClass(b.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,
"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+
" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
c.proxy(function(a,b){var d=[],e=!0,f;"move_node"==b.func&&!0===b.args[4]&&b.args[0].o&&b.args[0].o.length&&(b.args[0].o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),e=this._check_unique(d,b.args[0].np.find("> ul > li").not(b.args[0].o),"move_node"));"create_node"==b.func&&(b.args[4]||this._is_loaded(b.args[0]))&&(e=this._get_node(b.args[0]),!b.args[1]||"before"!==b.args[1]&&"after"!==b.args[1]||(e=this._get_parent(b.args[0]))&&-1!==e||(e=this.get_container()),"string"===
typeof b.args[2]?d.push(b.args[2]):b.args[2]&&b.args[2].data?d.push(b.args[2].data):d.push(this._get_string("new_node")),e=this._check_unique(d,e.find("> ul > li"),"create_node"));"rename_node"==b.func&&(d.push(b.args[1]),f=this._get_node(b.args[0]),(e=this._get_parent(f))&&-1!==e||(e=this.get_container()),e=this._check_unique(d,e.find("> ul > li").not(f),"rename_node"));if(!e)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,b,d){var e=[];b.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,
""))});if(!e.length||!a.length)return!0;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,a,b,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=[];return a.o&&a.o.length?(a.o.children("a").each(function(){b.push(c(this).text().replace(/^\s+/g,
""))}),this._check_unique(b,a.np.find("> ul > li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,b){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,b){this._prepare_wholerow_span(b&&
b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,b){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+
(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,b){b.rslt.obj.each(function(){b.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((c(this).offset().top-b.inst.get_container().offset().top+b.inst.get_container()[0].scrollTop)/b.inst.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,
b){this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li",
"click.jstree",function(a){var b=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&b.closest("li").is(".jstree-open, .jstree-closed")||(b.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||
this.dehover_node(a.currentTarget)},this));(e||d)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("> ul > li");!1!==a&&a.each(function(){c(this).find("li").andSelf().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;
a.prepend("<span class='jstree-wholerow-span' style='width:"+18*a.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(a.parent()[0].scrollWidth).css("top",
-1*(a.height()+(e?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
f&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(e||d)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],b=function(a,b){var d=!0;a=a||{};b=[].concat(b);c.each(b,function(b,e){if(!c.isFunction(a[e]))return d=!1});return d};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,e){var f=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!b(f,a))return e.call(null,!1);this._get_settings().model.async?f.getChildren(c.proxy(function(a){this.model_done(a,
e)},this)):this.model_done(f.getChildren(),e)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,b){var d=[],e=this._get_settings(),f=this;c.isArray(a)||(a=[a]);c.each(a,function(a,b){var g=b.getProps()||{};g.attr=b.getAttr()||{};b.getChildrenCount()&&(g.state="closed");g.data=b.getName();c.isArray(g.data)||(g.data=[g.data]);f.data.types&&c.isFunction(b.getType)&&(g.attr[e.types.type_attr]=b.getType());g.attr.id&&e.model.id_prefix&&(g.attr.id=e.model.id_prefix+g.attr.id);g.metadata||
(g.metadata={});g.metadata.jstree_model=b;d.push(g)});b.call(null,d)}}})})(jQuery)}})();
(function(d,e){function f(a){d.extend(!0,ab,a)}function c(c,f,k){function m(){c.addClass("fc");f.isRTL?c.addClass("fc-rtl"):c.addClass("fc-ltr");f.theme&&c.addClass("ui-widget");X=d("<div class='fc-content' style='position:relative'/>").prependTo(c);P=new a(A,f);(ia=P.render())&&c.prepend(ia);s(f.defaultView);f.handleWindowResize&&"listWeek"!=w.name&&(d(window).resize(K),ja=d(document).width(),setTimeout(function(){ja!=d(document).width()&&(ja=d(document).width(),K())},200));d("body").is(":visible")||
n()}function n(){setTimeout(function(){!w.start&&d("body").is(":visible")&&t()},0)}function r(){return c.is(":visible")}function s(a){w&&a==w.name||(I++,w&&(y("viewDestroy",w,w,w.element),z(),w.triggerEventDestroy(),C(),w.element.remove(),P.deactivateButton(w.name)),P.activateButton(a),w=new za[a](d("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(X),A),t(),F(),I--,y("viewChange",A,a))}function t(a){(!w.start||a||O<w.start||O>=w.end)&&r()&&nb(a)}function nb(a){I++;w.start&&
(y("viewDestroy",w,w,w.element),z(),D());C();w.render(O,a||0);ib();F();(w.afterRender||S)();P.updateTitle(w.title);a=new Date;(a=a>=w.start&&a<w.end)?P.disableButton("today"):P.enableButton("today");y("updateTodayButton",Y,!a);y("viewRender",w,w,w.element);w.trigger("viewDisplay",Y);I--;!f.lazyFetching||B(w.visStart,w.visEnd)?L(w.visStart,w.visEnd):v()}function Oa(){r()&&(z(),D(),cb(),ib(),v())}function cb(){G=f.contentHeight?f.contentHeight:f.height?f.height-(ia?ia.height():0)-qa(X):Math.round(X.width()/
Math.max(f.aspectRatio,.5))}function ib(){G===e&&cb();I++;w.setHeight(G);w.setWidth(X.width());I--;V=c.outerWidth()}function K(){if(!I)if(w.start){var a=++Z;setTimeout(function(){a==Z&&!I&&r()&&V!=(V=c.outerWidth())&&(I++,Oa(),w.trigger("windowResize",Y),I--)},200)}else n()}function u(a){D();v(a)}function v(a){var b=[];if(r()){var c=d(document).height()>d(window).height();w.setEventData(R);b=w.renderEvents(R,a);null!=navigator.userAgent.match(/iPod|iPhone|iPad/i)&&d("div.fc-event").trigger("mouseover");
w.trigger("eventAfterAllRender");d(document).height()>d(window).height()!=c&&Oa()}return b}function D(){w.triggerEventDestroy();w.clearEvents();w.clearEventData()}function z(){w&&w.unselect()}function C(){X.css({width:"100%",height:X.height(),overflow:"hidden"})}function F(){X.css({width:"",height:"",overflow:""})}function y(a,b){if(f[a])return f[a].apply(b||Y,Array.prototype.slice.call(arguments,2))}var A=this;A.options=f;A.render=function(a){X?r()&&(cb(),nb(a)):m()};A.destroy=function(){w&&(y("viewDestroy",
w,w,w.element),w.triggerEventDestroy());d(window).unbind("resize",K);P.destroy();X.remove();c.removeClass("fc fc-rtl ui-widget")};A.refetchEvents=function(){D();L(w.visStart,w.visEnd)};A.reportEvents=function(a){R=a;W=v()};A.reportEventChange=function(a){u(a)};A.rerenderEvents=u;A.changeView=s;A.select=function(a,b,c){w.select(a,b,c===e?!0:c)};A.unselect=z;A.prev=function(){t(-1)};A.next=function(){t(1)};A.prevYear=function(){g(O,-1);t()};A.nextYear=function(){g(O,1);t()};A.today=function(){O=new Date;
t()};A.gotoDate=function(a,b,c){a instanceof Date?O=q(a):p(O,a,b,c);t()};A.incrementDate=function(a,b,c){a!==e&&g(O,a);b!==e&&h(O,b);c!==e&&l(O,c);t()};A.formatDate=function(a,b){return E(a,b,f)};A.formatDates=function(a,b,c){return ba(a,b,c,f)};A.getDate=function(){return q(O)};A.getView=function(){return w};A.option=function(a,b){if(b===e)return f[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)f[a]=b,Oa()};A.trigger=y;A.calcSize=cb;A.setSize=ib;A.refetchSource=function(a){J(w.visStart,
w.visEnd,a)};A.getSegmentsByRowAndColumn=function(a,b){for(var c=[],d=0;d<W.length;d++)W[d].row==a&&W[d].leftCol<=b&&b<=W[d].rightCol&&c.push(W[d]);return c};b.call(A,f,k);var B=A.isFetchNeeded,L=A.fetchEvents,J=A.refetchEventSource,Y=c[0],P,ia,X,w,V,G,Z=0,I=0,O=new Date,R=[],W=[],H,ja;p(O,f.year,f.month,f.date);f.droppable&&d(document).bind("dragstart",function(a,b){var c=a.target,e=d(c);if(!e.parents(".fc").length){var g=f.dropAccept;if(d.isFunction(g)?g.call(c,e):e.is(g))H=c,w.dragStart(H,a,b)}}).bind("dragstop",
function(a,b){H&&(w.dragStop(H,a,b),H=null)})}function a(a,b){function c(e){var g=d("<td class='fc-header-"+e+"'/>");(e=b.header[e])&&d.each(e.split(" "),function(c){0<c&&g.append("<span class='fc-header-space'/>");var e;d.each(this.split(","),function(c,h){if("title"==h)g.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),e&&e.addClass(f+"-corner-right"),e=null;else{var k;a[h]?k=a[h]:za[h]&&(k=function(){n.removeClass(f+"-state-hover");a.changeView(h)});if(k){var l=b.theme?ma(b.buttonIcons,
h):null,m=ma(b.buttonText,h),n=d("<span class='fc-button fc-button-"+h+" "+f+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/></span>":m)+"</span>").click(function(){n.hasClass(f+"-state-disabled")||k()}).mousedown(function(){n.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-down")}).mouseup(function(){n.removeClass(f+"-state-down")}).hover(function(){n.not("."+f+"-state-active").not("."+f+"-state-disabled").addClass(f+"-state-hover")},
function(){n.removeClass(f+"-state-hover").removeClass(f+"-state-down")}).appendTo(g);Ja(n);e||n.addClass(f+"-corner-left");e=n}}});e&&e.addClass(f+"-corner-right")});return g}this.render=function(){f=b.theme?"ui":"fc";if(b.header)return e=d("<table class='fc-header' style='width:100%'/>").append(d("<tr/>").append(c("left")).append(c("center")).append(c("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){d("#current-date-title").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+
a).addClass(f+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+a).addClass(f+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(f+"-state-disabled")};var e=d([]),f}function b(a,b){function c(b,e){f(b,function(c){if(e==B){if(c){a.eventDataTransform&&(c=d.map(c,a.eventDataTransform));b.eventDataTransform&&(c=d.map(c,b.eventDataTransform));for(var f=
0;f<c.length;f++)c[f].source=b,l(c[f]);L=L.concat(c)}A--;A||v(L)}})}function f(b,c){var e,g=aa.sourceFetchers,l;for(e=0;e<g.length;e++){l=g[e](b,C,F,c);if(!0===l)return;if("object"==typeof l){f(l,c);return}}if(e=b.events)d.isFunction(e)?(h(),e(q(C),q(F),function(a){c(a);k()})):d.isArray(e)?c(e):c();else if(b.url){var m=b.success,n=b.error,Aa=b.complete;e=d.isFunction(b.data)?b.data():b.data;e=d.extend({},e||{});g=H(b.startParam,a.startParam);l=H(b.endParam,a.endParam);g&&(e[g]=z(C));l&&(e[l]=z(F));
h();d.ajax(d.extend({},rb,b,{data:e,success:function(a){a=a||[];var b=T(m,this,arguments);d.isArray(b)&&(a=b);c(a)},error:function(){T(n,this,arguments);c()},complete:function(){T(Aa,this,arguments);k()}}))}else c()}function g(a){d.isFunction(a)||d.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),y.push(a),a}function h(){E++||t("loading",null,!0,u())}function k(){--E||t("loading",null,!1,u())}function l(b){var c=b.source||{},d=H(c.ignoreTimezone,a.ignoreTimezone);
b._id=b._id||(b.id===e?"_fc"+sb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=q(b.start=r(b.start,d));b.end=r(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?q(b.end):null;b.allDay===e&&(b.allDay=H(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function m(a){a.className?"string"==typeof a.className&&(a.className=a.className.split(/\s+/)):a.className=[];for(var b=aa.sourceNormalizers,
c=0;c<b.length;c++)b[c](a)}function n(a){d.isFunction(a)||d.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a)return m(a),a}function p(a,b){return a&&b&&s(a)==s(b)}function s(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!C||a<C||b>F};this.fetchEvents=function(a,b){C=a;F=b;L=[];var d=++B,e=y.length;A=e;for(var f=0;f<e;f++)c(y[f],d)};this.addEventSource=function(a){if(a=g(a))A++,c(a,B)};this.removeEventSource=function(a){y=d.grep(y,
function(b){return!p(b,a)});L=d.grep(L,function(b){return!p(b.source,a)});v(L)};this.updateEvent=function(a){var b,c=L.length,d,e=u().defaultEventEnd,f=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=L[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+f),d.end=a.end?d.end?new Date(+d.end+g):new Date(+e(d)+g):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroundColor=a.backgroundColor,d.borderColor=a.borderColor,
d.textColor=a.textColor,l(d));l(a);v(L)};this.renderEvent=function(a,b){l(a);a.source||(b&&(D.events.push(a),a.source=D),L.push(a));v(L)};this.removeEvents=function(a){if(a){if(!d.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}L=d.grep(L,a,!0);for(c=0;c<y.length;c++)d.isArray(y[c].events)&&(y[c].events=d.grep(y[c].events,a,!0))}else{L=[];for(var c=0;c<y.length;c++)d.isArray(y[c].events)&&(y[c].events=[])}v(L)};this.clientEvents=function(a){return d.isFunction(a)?d.grep(L,a):a?(a+="",d.grep(L,
function(b){return b._id==a})):L};this.normalizeEvent=l;this.refetchEventSource=function(a,b,e){if(e=n(e))C=a,F=b,L=d.grep(L,function(a){return!p(a.source,e)}),v(L),A++,c(e,B)};this.renderEventForSource=function(a,b){if(b=n(b))l(a),a.source=b,L.push(a);v(L)};for(var t=this.trigger,u=this.getView,v=this.reportEvents,D={events:[]},y=[D],C,F,B=0,A=0,E=0,L=[],J=0;J<b.length;J++)g(b[J])}function g(a,b,c){a.setFullYear(a.getFullYear()+b);c||n(a);return a}function h(a,b,c){if(+a){b=a.getMonth()+b;var d=
q(a);d.setDate(1);d.setMonth(b);a.setMonth(b);for(c||n(a);a.getMonth()!=d.getMonth();)a.setDate(a.getDate()+(a<d?1:-1))}return a}function l(a,b,c){if(+a){b=a.getDate()+b;var d=q(a);d.setHours(9);d.setDate(b);a.setDate(b);c||n(a);k(a,d)}return a}function k(a,b){if(+a)for(;a.getDate()!=b.getDate();)a.setTime(+a+(a<b?1:-1)*tb)}function m(a,b){a.setMinutes(a.getMinutes()+b);return a}function n(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function q(a,b){return b?n(new Date(+a)):
new Date(+a)}function s(){var a=0,b;do b=new Date(1970,a++,1);while(b.getHours());return b}function t(a,b){return Math.round((q(a,!0)-q(b,!0))/864E5)}function p(a,b,c,d){b!==e&&b!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(b));c!==e&&c!=a.getMonth()&&(a.setDate(1),a.setMonth(c));d!==e&&a.setDate(d)}function r(a,b){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));b===e&&
(b=!0);return y(a,b)||(a?new Date(a):null)}return null}function z(a){a=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate());return Math.round(+a/1E3)}function y(a,b){var c=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!c)return null;var d=new Date(c[1],0,1);if(b||!c[13]){var e=new Date(c[1],0,1,9,0);c[3]&&(d.setMonth(c[3]-1),e.setMonth(c[3]-1));c[5]&&(d.setDate(c[5]),e.setDate(c[5]));k(d,e);c[7]&&d.setHours(c[7]);
c[8]&&d.setMinutes(c[8]);c[10]&&d.setSeconds(c[10]);c[12]&&d.setMilliseconds(1E3*Number("0."+c[12]));k(d,e)}else d.setUTCFullYear(c[1],c[3]?c[3]-1:0,c[5]||1),d.setUTCHours(c[7]||0,c[8]||0,c[10]||0,c[12]?1E3*Number("0."+c[12]):0),c[14]&&(e=60*Number(c[16])+(c[18]?Number(c[18]):0),e*="-"==c[15]?1:-1,d=new Date(+d+6E4*e));return d}function J(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var b=parseInt(a[1],
10);a[3]&&(b%=12,"p"==a[3].toLowerCase().charAt(0)&&(b+=12));return 60*b+(a[2]?parseInt(a[2],10):0)}}function E(a,b,c){return ba(a,null,b,c)}function ba(a,b,c,d){d=d||ab;var e=a,f=b,g,h=c.length,l,k,m,n="";for(g=0;g<h;g++)if(l=c.charAt(g),"'"==l)for(k=g+1;k<h;k++){if("'"==c.charAt(k)){e&&(n=k==g+1?n+"'":n+c.substring(g+1,k),g=k);break}}else if("("==l)for(k=g+1;k<h;k++){if(")"==c.charAt(k)){g=E(e,c.substring(g+1,k),d);parseInt(g.replace(/\D/,""),10)&&(n+=g);g=k;break}}else if("["==l)for(k=g+1;k<h;k++){if("]"==
c.charAt(k)){l=c.substring(g+1,k);g=E(e,l,d);g!=E(f,l,d)&&(n+=g);g=k;break}}else if("{"==l)e=b,f=a;else if("}"==l)e=a,f=b;else{for(k=h;k>g;k--)if(m=mb[c.substring(g,k)]){e&&(n+=m(e,d));g=k-1;break}k==g&&e&&(n+=l)}return n}function B(a){if(a.end){var b=a.end;a=a.allDay;b=q(b);return a||b.getHours()||b.getMinutes()?l(b,1):n(b)}return l(q(a.start),1)}function ca(a,b,c){a.unbind("mouseover").mouseover(function(a){for(var f=a.target,g;f!=this;)g=f,f=f.parentNode;(f=g._fci)!==e&&(g._fci=e,g=b[f],c(g.event,
g.element,g),d(a.target).trigger(a));a.stopPropagation()})}function na(a,b,c){for(var e=0,f;e<a.length;e++)f=d(a[e]),f.width(Math.max(0,b-ga(f,c)))}function da(a,b,c){for(var e=0,f;e<a.length;e++)f=d(a[e]),f.height(Math.max(0,b-qa(f,c)))}function ga(a,b){var c=(parseFloat(d.css(a[0],"paddingLeft",!0))||0)+(parseFloat(d.css(a[0],"paddingRight",!0))||0),e;e=(parseFloat(d.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(d.css(a[0],"borderRightWidth",!0))||0);c+=e;e=b?(parseFloat(d.css(a[0],"marginLeft",
!0))||0)+(parseFloat(d.css(a[0],"marginRight",!0))||0):0;return c+e}function qa(a,b){var c=(parseFloat(d.css(a[0],"paddingTop",!0))||0)+(parseFloat(d.css(a[0],"paddingBottom",!0))||0),e;e=(parseFloat(d.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(d.css(a[0],"borderBottomWidth",!0))||0);c+=e;e=b?(parseFloat(d.css(a[0],"marginTop",!0))||0)+(parseFloat(d.css(a[0],"marginBottom",!0))||0):0;return c+e}function S(){}function ra(a,b){return a-b}function ya(a){return Math.max.apply(Math,a)}function ka(a){return(10>
a?"0":"")+a}function ma(a,b){if(a[b]!==e)return a[b];for(var c=b.split(/(?=[A-Z])/),d=c.length-1,f;0<=d;d--)if(f=a[c[d].toLowerCase()],f!==e)return f;return a[""]}function fa(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Ja(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Ka(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}
function ua(a,b){var c=a.source||{},d=a.color,e=c.color,f=b("eventColor"),g=a.backgroundColor||d||c.backgroundColor||e||b("eventBackgroundColor")||f,d=a.borderColor||d||c.borderColor||e||b("eventBorderColor")||f,c=a.textColor||c.textColor||b("eventTextColor"),e=[];g&&e.push("background-color:"+g);d&&e.push("border-color:"+d);c&&e.push("color:"+c);return e.join(";")}function T(a,b,c){d.isFunction(a)&&(a=[a]);if(a){var e,f;for(e=0;e<a.length;e++)f=a[e].apply(b,c)||f;return f}}function H(){for(var a=
0;a<arguments.length;a++)if(arguments[a]!==e)return arguments[a]}function v(a,b,c){var e=this;e.renderList=function(b,c,q){l=b;m=c;f("theme");f("columnFormat");f("weekNumbers");f("weekNumberShortTitle");f("weekNumberTitle");f("weekNumberCalculation");p=[];a.find(".fc-list-day").remove();b=d("<ul class='fc-list-day'></ul>").appendTo(a);c=n(new Date);for(q=0;q<m;q++){var r=h(0,q),s=d("<li class='fc-list-day-item' data-date='"+k(r,"yyyy-MM-dd")+"'></li>").appendTo(b);+r==+c?s.addClass("fc-today"):+r<
+c&&s.addClass("fc-past");s=d("<div class='fc-day-content'></div>").appendTo(s);g("dayRender",e,r,s);p.push(s)}};e.setHeight=function(a){};e.setWidth=function(a){};e.renderDayOverlay=function(a,b,c){};e.defaultSelectionEnd=function(a,b){};e.renderSelection=function(a,b,c){};e.clearSelection=function(){};e.reportDayClick=function(a,b,c){};e.dragStart=function(a,b,c){};e.dragStop=function(a,b,c){};e.defaultEventEnd=function(a){return q(a.start)};e.getHoverListener=function(){return hoverListener};e.colLeft=
function(a){return null};e.colRight=function(a){return null};e.colContentLeft=function(a){return null};e.colContentRight=function(a){return null};e.getIsCellAllDay=function(){return!0};e.allDayRow=function(a){return null};e.getRowCnt=function(){return l};e.getColCnt=function(){return m};e.getColWidth=function(){return colWidth};e.getDayItems=function(){return p};oa.call(e,a,b,c);Na.call(e);N.call(e);var f=e.opt,g=e.trigger,h=e.cellToDate,k=b.formatDate,l,m,p=[]}function N(){var a=this;a.renderEvents=
function(b,c){for(var e=a.getColCnt(),f=a.getDayItems(),g=0;g<e;g++){for(var h=a.cellToDate(0,g),k=[],l=[],m=0;m<b.length;m++){var n=b[m];n.allDay||0!==t(h,n.start)||k.push(n);n.allDay&&(n.start<=h&&n.end>=h||0===t(h,n.start))&&l.push(n)}l.sort(M);k.sort(M);h=l.concat(k);k=f[g];k.find(".fc-list-event").remove();if(0<h.length)for(l=d("<ul class='fc-list-event'></ul>").appendTo(k),m=0;m<h.length;m++)n=d("<li/>").addClass("fc-list-event-item").append(d("<div class='fc-event-inner'></div>")),a.trigger("eventRender",
h[m],h[m],n),l.append(n),CommonFunctions.executeScripts(h[m].description);k.parents(".fc-list-day-item:first").toggleClass("fc-day-empty",0===h.length)}};a.clearEvents=function(){}}function u(a,b,c){function e(){var b=f(),c;A&&A.remove();A=d(b).appendTo(a);J=A.find("thead");L=J.find(".fc-day-header");H=A.find("tbody");Y=H.find("tr");P=H.find(".fc-day");ia=Y.find("td:first-child");wa=H.find(".fc-week-number-link");X=Y.eq(0).find(".fc-day > div");w=Y.eq(0).find(".fc-day-content > div");Ka(J.add(J.find("tr")));
Ka(Y);Y.eq(0).addClass("fc-first");Y.filter(":last").addClass("fc-last");P.each(function(a,b){var e=B(Math.floor(a/W),a%W);c=d(b);t("dayRender",r,e,c);c.find(".fc-day-number:first").mousedown(h)});wa.click(k);P.click(g).mousedown(z)}function f(){var a=ta+"-widget-header",b,c,d;b="<thead><tr>";pa&&(b+="<th class='fc-week-number "+a+"'>"+fa(sa)+"</th>");for(c=0;c<W;c++)d=B(0,c),b+="<th class='fc-day-header fc-"+bb[d.getDay()]+" "+a+"'>"+fa(E(d,Pa))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+
(b+"</tr></thead>");b=ta+"-widget-content";var e,g;e="<tbody>";for(c=0;c<R;c++){e+="<tr class='fc-week'>";pa&&(d=g=B(c,0),d.getFullYear()<r.start.getFullYear()&&(d=new Date(r.start.getFullYear(),0,1)),d.getMonth()<r.start.getMonth()&&(d=new Date(r.start.getFullYear(),r.start.getMonth(),1)),e+="<td class='fc-week-number "+b+"'><div><a class='fc-week-number-link' href='javascript:void(0);' data-date='"+E(d,"yyyy-MM-dd")+"'>"+fa(E(g,$a))+"</a></div></td>");for(d=0;d<W;d++){g=B(c,d);var h=ta+"-widget-content",
k=r.start.getMonth(),l=n(new Date),m="",h=["fc-day","fc-"+bb[g.getDay()],h];g.getMonth()!=k&&h.push("fc-other-month");+g==+l?h.push("fc-today",ta+"-state-highlight"):g<l?h.push("fc-past"):h.push("fc-future");m+="<td class='"+h.join(" ")+"' data-date='"+E(g,"yyyy-MM-dd")+"'><div>";N&&(m+="<a class='fc-day-number' href='javascript:void(0);'>"+g.getDate()+"</a>");m+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";e+=m}e+="</tr>"}return a+(e+"</tbody>")+"</table>"}
function g(a){if(!s("selectable")){var b=y(d(this).data("date"));t("dayClick",this,b,!0,a)}}function h(){var a=d(this).parents(".fc-day:first").data("date");b.gotoDate(y(a));b.changeView("agendaDay")}function k(){var a=d(this).data("date");b.gotoDate(y(a));b.changeView("agendaWeek")}function m(a,b,c){c&&ja.build();a=F(a,b);for(b=0;b<a.length;b++)c=a[b],p(c.row,c.leftCol,c.row,c.rightCol).click(g).mousedown(z)}function p(b,c,d,e){b=ja.rect(b,c,d,e,a);return v(b,a)}var r=this;r.renderBasic=function(b,
c,f){R=b;W=c;N=f;ta=s("theme")?"ui":"fc";Pa=s("columnFormat");pa=s("weekNumbers");sa=s("weekNumberShortTitle");s("weekNumberTitle");$a="iso"!=s("weekNumberCalculation")?"w":"W";H||(V=d("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));e()};r.setHeight=function(a){Z=a;a=Z-J.height();var b,c,e;"variable"==s("weekMode")?b=c=Math.floor(a/(1==R?2:6)):(b=Math.floor(a/R),c=a-b*(R-1));ia.each(function(a,f){a<R&&(e=d(f),e.find("> div").css("min-height",(a==
R-1?c:b)-qa(e)))})};r.setWidth=function(a){G=a;ea.clear();Ga.clear();O=0;pa&&(O=J.find("th.fc-week-number").outerWidth());I=Math.floor((G-O)/W);na(L.slice(0,-1),I)};r.renderDayOverlay=m;r.defaultSelectionEnd=function(a,b){return q(a)};r.renderSelection=function(a,b,c){m(a,l(q(b),1),!0)};r.clearSelection=function(){u()};r.reportDayClick=function(a,b,c){var d=C(a);t("dayClick",P[d.row*W+d.col],a,b,c)};r.dragStart=function(a,b,c){M.start(function(a){u();a&&p(a.row,a.col,a.row,a.col)},b)};r.dragStop=
function(a,b,c){var d=M.stop();u();d&&(d=B(d),t("drop",a,d,!0,b,c))};r.defaultEventEnd=function(a){return q(a.start)};r.getHoverListener=function(){return M};r.colLeft=function(a){return ea.left(a)};r.colRight=function(a){return ea.right(a)};r.colContentLeft=function(a){return Ga.left(a)};r.colContentRight=function(a){return Ga.right(a)};r.getIsCellAllDay=function(){return!0};r.allDayRow=function(a){return Y.eq(a)};r.getRowCnt=function(){return R};r.getColCnt=function(){return W};r.getColWidth=function(){return I};
r.getDaySegmentContainer=function(){return V};oa.call(r,a,b,c);Sa.call(r);Na.call(r);Ea.call(r);var s=r.opt,t=r.trigger,v=r.renderOverlay,u=r.clearOverlays,z=r.daySelectionMousedown,B=r.cellToDate,C=r.dateToCell,F=r.rangeToSegments,E=b.formatDate,A,J,L,H,Y,P,ia,X,w,V,G,Z,I,O,R,W,N,ja,M,ea,Ga,ta,Pa,pa,sa,$a,wa;Ja(a.addClass("fc-grid"));ja=new va(function(a,b){var c,e,f;L.each(function(a,g){c=d(g);e=c.offset().left;a&&(f[1]=e);f=[e];b[a]=f});f[1]=e+c.outerWidth();Y.each(function(b,g){b<R&&(c=d(g),e=
c.offset().top,b&&(f[1]=e),f=[e],a[b]=f)});f[1]=e+c.outerHeight()});M=new Qa(ja);ea=new La(function(a){return X.eq(a)});Ga=new La(function(a){return w.eq(a)})}function Ea(){var a=this;a.renderEvents=function(b,c){return a.renderDayEvents(b,c)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};Za.call(a)}function Ba(a,b,c){function f(){var b;b=Ha+"-widget-header";var c,e="",g,h=n(new Date),e=e+"<thead><tr>";la?(c=ia(0,0),c=V(c,ma),c=aa?c+ka:ka+" "+c,e+="<th class='fc-agenda-axis fc-week-number "+
b+"'>"+fa(c)+"</th>"):e+="<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";var l=1<xa;for(g=0;g<xa;g++){c=ia(0,g);var m=+c==+h;m&&l&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>");e+="<th class='fc-"+bb[c.getDay()]+" fc-col"+g+" "+b;m&&l&&(e+=" "+Ha+"-state-highlight fc-today");e+="'>";e=l?e+("<a class='fc-day-number' href='javascript:void(0);' data-date='"+V(c,"yyyy-MM-dd")+"'>"+fa(V(c,ha))+"</a>"):e+fa(V(c,ha));e+="</th>";m&&l&&(e+="<th style='width: 1px; position: relative; z-index: 3;' class='fc-state-hightlight-border'></th>")}b=
"<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(e+("<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead>"));c=Ha+"-widget-header";var e=Ha+"-widget-content",q,h=n(new Date),r,l=""+("<tbody><tr><th class='fc-agenda-axis "+c+"'>&nbsp;</th>");g="";m=1<xa;for(c=0;c<xa;c++){q=ia(0,c);var p=+q==+h;r=["fc-col"+c,"fc-"+bb[q.getDay()],e];p&&m?r.push(Ha+"-state-highlight","fc-today"):q<h?r.push("fc-past"):r.push("fc-future");q="<td class='"+r.join(" ")+"'";p&&
m&&(q+="style='border-width: 0px !important; border-bottom-width: 1px !important;'");q+=" ><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";p&&m&&(q="<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>"+q+"<td style='position: relative; z-index: 3; width: 1px;' class='fc-state-hightlight-border'></td>");g+=q}l=l+g+("<td class='fc-agenda-gutter "+e+"'>&nbsp;</td></tr></tbody>");b=b+l+"</table>";G&&G.remove();
G=d(b).appendTo(a);Z=G.find("thead");I=Z.find("th:not(.fc-state-hightlight-border)").slice(1,-1);O=G.find("tbody");R=O.find("td:not(.fc-state-hightlight-border)").slice(0,-1);W=R.find("> div");T=R.find(".fc-day-content > div");ja=R.eq(0);ba=W.eq(0);Ka(Z.add(Z.find("tr")));Ka(O.add(O.find("tr")));I.find(".fc-day-number").click(k)}function g(){function a(){pa.scrollTop(d)}var b=s(),c=q(b);c.setHours(F("firstHour"));var d=K(b,c)+1;a();setTimeout(a,0)}function h(a){if(!F("selectable")){var b=Math.min(xa-
1,Math.floor((a.pageX-G.offset().left-Ua)/db)),c=ia(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*F("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+S),H("dayClick",R[b],c,!1,a)):H("dayClick",R[b],c,!0,a)}}function k(){var a=d(this).data("date");b.gotoDate(y(a));b.changeView("agendaDay")}function r(a,b,c){c&&Ia.build();a=w(a,b);for(b=0;b<a.length;b++)c=a[b],p(c.row,c.leftCol,c.row,c.rightCol).click(h).mousedown(Y)}function p(a,b,c,d){a=Ia.rect(a,b,c,d,ea);
return A(a,ea)}function t(a,b){for(var c=0;c<xa;c++){var d=ia(0,c),e=l(q(d),1),f=new Date(Math.max(d,a)),g=new Date(Math.min(e,b));f<g&&(e=Ia.rect(0,c,0,c,sa),f=K(d,f),d=K(d,g),e.top=f,e.height=d-f,A(e,sa).click(h).mousedown(D))}}function u(a){return F("allDaySlot")&&!a.row}function v(a){var b=ia(0,a.col);a=a.row;F("allDaySlot")&&a--;m(b,60*C.minVisibleHour);0<=a&&m(b,a*Va);return b}function K(a,b){a=q(a,!0);if(b<m(q(a),S))return 0;if(b>=m(q(a),60*(C.maxVisibleHour+1)))return wa.height();var c=F("slotMinutes"),
d=60*b.getHours()+b.getMinutes()-S,f=Math.floor(d/c),g=ca[f];g===e&&(g=ca[f]=wa.find("tr").eq(f).find("td div")[0].offsetTop);return Math.max(0,Math.round(g-1+d%c/c*jb))}function z(a,b){var c=F("selectHelper");Ia.build();if(c){var e=X(a).col;if(0<=e&&e<xa){var e=Ia.rect(0,e,0,e,sa),f=K(a,a),g=K(a,b);if(g>f){e.top=f;e.height=g-f;e.left+=2;e.width-=5;if(d.isFunction(c)){if(c=c(a,b))e.position="absolute",Q=d(c).css(e).appendTo(sa)}else e.isStart=!0,e.isEnd=!0,Q=d(P({title:"",start:a,end:b,className:["fc-select-helper"],
editable:!1},e)),Q.css("opacity",F("dragOpacity"));Q&&(Q.click(h).mousedown(D),sa.append(Q),na(Q,e.width,!0),da(Q,e.height,!0))}}}else t(a,b)}function B(){M();Q&&(Q.remove(),Q=null)}function D(a){if(1==a.which&&F("selectable")){N(a);var b;Wa.start(function(a,c){B();if(a&&a.col==c.col&&!u(a)){var d=v(c),e=v(a);b=[d,m(q(d),Va),e,m(q(e),Va)].sort(ra);z(b[0],b[3])}else b=null},a);d(document).one("mouseup",function(a){Wa.stop();b&&(+b[0]==+b[1]&&E(b[0],!1,a),L(b[0],b[3],!1,a))})}}function E(a,b,c){H("dayClick",
R[X(a).col],a,b,c)}var C=this;C.renderAgenda=function(b){xa=b;Ha=F("theme")?"ui":"fc";aa=F("isRTL");S=J(F("minTime"));ga=J(F("maxTime"));ha=F("columnFormat");la=F("weekNumbers");ka=F("weekNumberTitle");F("weekNumberShortTitle");ma="iso"!=F("weekNumberCalculation")?"w":"W";Va=F("snapMinutes")||F("slotMinutes");if(G)f();else{b=Ha+"-widget-header";var c=Ha+"-widget-content",e,g,k,l,n,r=0==F("slotMinutes")%15;f();ea=d("<div style='position:absolute; left:0; width:100%'/>").appendTo(a);F("allDaySlot")?
(Ga=d("<div class='fc-event-container' style='position:absolute; z-index:8; top:0; left:0'/>").appendTo(ea),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+F("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",ta=d(e).appendTo(ea),Pa=ta.find("tr"),Pa.find("td").click(h).mousedown(Y),ea.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):
Ga=d([]);pa=d("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ea);sa=d("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(pa);$a=d("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(sa);e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";g=s();l=m(q(g),ga);m(g,S);for(k=lb=0;g<l;k++)n=g.getMinutes(),e+="<tr class='fc-slot"+k+" "+(n?"fc-minor":"")+"'><th class='fc-agenda-axis "+
b+"'>"+(r&&n?"&nbsp;":V(g,F("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",m(g,F("slotMinutes")),lb++;wa=d(e+"</tbody></table>").appendTo(sa);wa.find("td").click(h).mousedown(D)}};C.setWidth=function(a){fb.clear();gb.clear();a=Z.find("th:first");ta&&(a=a.add(ta.find("th:first")));a=a.add(wa.find("th").filter(":visible:first"));Ua=0;na(a.width("").each(function(a,b){Ua=Math.max(Ua,d(b).outerWidth())}),Ua);a=G.find(".fc-agenda-gutter");ta&&(a=a.add(ta.find("th.fc-agenda-gutter")));
var b=pa[0].clientWidth;(pb=pa.width()-b)?(na(a,pb),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");db=Math.floor((b-Ua)/xa);na(I.slice(0,-1),db)};C.setHeight=function(a){a===e&&(a=ob);ob=a;ca={};var b=O.position().top,c=pa.position().top;a=Math.min(a-b,wa.height()+c+1);ba.height(a-qa(ja));ea.css("top",b);pa.height(a-c-1);jb=wa.find("tr:visible:first").height();kb=F("slotMinutes")/Va;eb=jb/kb};C.afterRender=function(){g()};C.defaultEventEnd=function(a){var b=q(a.start);
return a.allDay?b:m(b,F("defaultEventMinutes"))};C.timePosition=K;C.getIsCellAllDay=u;C.allDayRow=function(a){return Pa};C.getCoordinateGrid=function(){return Ia};C.getHoverListener=function(){return Wa};C.colLeft=function(a){return fb.left(a)};C.colRight=function(a){return fb.right(a)};C.colContentLeft=function(a){return gb.left(a)};C.colContentRight=function(a){return gb.right(a)};C.getDaySegmentContainer=function(){return Ga};C.getSlotSegmentContainer=function(){return $a};C.getMinMinute=function(){return S};
C.getMaxMinute=function(){return ga};C.getSlotContainer=function(){return sa};C.getRowCnt=function(){return 1};C.getColCnt=function(){return xa};C.getColWidth=function(){return db};C.getSnapHeight=function(){return eb};C.getSnapMinutes=function(){return Va};C.defaultSelectionEnd=function(a,b){return b?q(a):m(q(a),F("slotMinutes"))};C.renderDayOverlay=r;C.renderSelection=function(a,b,c){c?F("allDaySlot")&&r(a,l(q(b),1),!0):z(a,b)};C.clearSelection=B;C.reportDayClick=E;C.dragStart=function(a,b,c){Wa.start(function(a){M();
if(a)if(u(a))p(a.row,a.col,a.row,a.col);else{a=v(a);var b=m(q(a),F("defaultEventMinutes"));t(a,b)}},b)};C.dragStop=function(a,b,c){var d=Wa.stop();M();d&&H("drop",a,v(d),u(d),b,c)};oa.call(C,a,b,c);Sa.call(C);Na.call(C);Ya.call(C);var F=C.opt,H=C.trigger,A=C.renderOverlay,M=C.clearOverlays,L=C.reportSelection,N=C.unselect,Y=C.daySelectionMousedown,P=C.slotSegHtml,ia=C.cellToDate,X=C.dateToCell,w=C.rangeToSegments,V=b.formatDate,G,Z,I,O,R,W,T,ja,ba,ea,Ga,ta,Pa,pa,sa,$a,wa,Q,ob,Ua,db,pb,jb,Va,kb,eb,
xa,lb,Ia,Wa,fb,gb,ca={},Ha,aa,S,ga,ha,la,ka,ma;Ja(a.addClass("fc-agenda"));Ia=new va(function(a,b){var c,e,f;I.each(function(a,g){c=d(g);e=c.offset().left;a&&(f[1]=e);f=[e];b[a]=f});f[1]=e+c.outerWidth();F("allDaySlot")&&(c=Pa,e=c.offset().top,a[0]=[e,e+c.outerHeight()]);for(var g=sa.offset().top,h=pa.offset().top,k=h+pa.outerHeight(),l=0;l<lb*kb;l++)a.push([Math.max(h,Math.min(k,g+eb*l)),Math.max(h,Math.min(k,g+eb*(l+1)))])});Wa=new Qa(Ia);fb=new La(function(a){return W.eq(a)});gb=new La(function(a){return T.eq(a)})}
function Ya(){function a(b){var c=n("minDefaultDayStartHour"),e=n("maxDefaultDayEndHour");b&&d.each(b,function(a,b){var d=b.start.getHours(),f=b.end.getHours();c>d&&(c=d);e<f&&(e=f)});k.minVisibleHour=c;k.maxVisibleHour=e;b="";for(var f=0;f<2*c;f++)b.length&&(b+=", "),b+="tr.fc-slot"+f;for(f=2*e+2;48>f;f++)b.length&&(b+=", "),b+="tr.fc-slot"+f;d(".fc-agenda-slots tr").show();d(b).hide();ja.calcSize();ja.setSize()}function b(a){return a.end?q(a.end):m(q(a.start),n("defaultEventMinutes"))}function c(a,
b){var d="<",e=a.url,f=ua(a,n),g=["fc-event","fc-event-vert"];p(a)&&g.push("fc-event-draggable");b.isStart&&g.push("fc-event-start");b.isEnd&&g.push("fc-event-end");g=g.concat(a.className);a.source&&(g=g.concat(a.source.className||[]));var d=e?d+("a href='"+fa(a.url)+"'"):d+"div",h=n("timeFormat");"agendaWeek"===ja.getView().name&&(h=ja.option("timeFormat")[""]);d+=" class='"+g.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+f+"'><div class='fc-event-inner'><span class='fc-event-time'>"+
fa(ea(a.start,a.end,h))+"</span><span class='fc-event-title'>"+fa(a.title||"")+"</span></div><div class='fc-event-bg'></div>";b.isEnd&&s(a)&&(d+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return d+("</"+(e?"a":"div")+">")}function f(a,b,c){var d=b.find("div.fc-event-time");p(a)&&g(a,b,d);c.isEnd&&s(a)&&h(a,b,d);v(a,b)}function g(a,b,c){function d(){W();if(V)if(D&&u)c.hide(),b.draggable("option","grid",null),R(l(q(a.start),Ma),l(B(a),Ma));else{var e=y,f=m(q(a.start),e),g;a.end&&(g=
m(q(a.end),e));c.text(ea(f,g,n("timeFormat")));c.css("display","");b.draggable("option","grid",[h,p])}}var e=k.getCoordinateGrid(),f=Y(),h=P(),p=ia(),s=X(),Aa,Fa,V,hb,u,v,K,z,Ma,y,w,D=n("dragBetweenAllDayAndSlots");b.draggable({scroll:!1,grid:[h,p],axis:1==f?"y":!1,opacity:n("dragOpacity"),revertDuration:n("dragRevertDuration"),start:function(c,d){r("eventDragStart",b,a,c,d);Z(a,b);e.build();Aa=b.position();Fa=e.cell(c.pageX,c.pageY);V=hb=!0;u=v=A(Fa);y=w=Ma=K=z=0},drag:function(a,c){var g=e.cell(a.pageX,
a.pageY);if(V=!!g){u=A(g);if(D||!u){if(K=Math.round((c.position.left-Aa.left)/h),K!=z){var g=N(0,Fa.col),k=Fa.col+K,k=Math.max(0,k),k=Math.min(f-1,k),k=N(0,k);Ma=t(k,g)}}else V=!1;u||(y=Math.round((c.position.top-Aa.top)/p)*s)}if(V!=hb||u!=v||K!=z||y!=w)d(),hb=V,v=u,z=K,w=y;b.draggable("option","revert",!V)},stop:function(c,e){W();r("eventDragStop",b,a,c,e);V&&(u||Ma||y)?I(this,a,Ma,u?0:y,u,c,e):(V=!0,u=!1,y=Ma=K=0,d(),b.css("filter",""),b.css(Aa),G(a,b))}})}function h(a,b,c){var d,e,f=ia(),g=X();
b.resizable({minHeight:f*n("minHeightInSlots"),handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;Z(a,b);r("eventResizeStart",this,a,c,f)},resize:function(h,k){d=Math.round((Math.max(f,b.height())-k.originalSize.height)/f);d!=e&&(c.text(ea(a.start,d||a.end?m(u(a),g*d):null,n("timeFormat"))),e=d)},stop:function(c,e){r("eventResizeStop",this,a,c,e);d?O(this,a,0,g*d,c,e):G(a,b)}})}var k=this;k.renderEvents=function(g,h){var l,p=g.length,s=[],t=[],u=d(".fc-agenda-allday, .fc-agenda-divider.fc-widget-header");
for(l=0;l<p;l++){var Q=g[l];Q.allDay?(Q.start>=k.start&&Q.start<=k.end||Q.end>=k.start&&Q.end<=k.end||Q.start<k.start&&Q.end>k.end)&&s.push(Q):t.push(Q)}n("allDaySlot")&&(0<s.length?(u.show(),S(s,h)):(S(s,h),u.hide()),z());var p=Y(),s=F(),u=C(),v,Q=d.map(t,b),G,K,y,w;l=[];for(G=0;G<p;G++){v=N(0,G);m(v,s);K=t;y=Q;w=v;v=m(q(v),u-s);for(var U=[],A=void 0,I=K.length,B=void 0,Z=void 0,Ta=void 0,O=Ta=Z=void 0,Oa=void 0,A=0;A<I;A++)B=K[A],Z=B.start,Ta=y[A],Ta>w&&Z<v&&(Z<w?(Z=q(w),O=!1):O=!0,Ta>v?(Ta=q(v),
Oa=!1):Oa=!0,U.push({event:B,start:Z,end:Ta,isStart:O,isEnd:Oa,title:B.title,sortKey:B.sortKey}));y=w=U.sort(M);K=void 0;K=[];U=v=w=void 0;for(w=0;w<y.length;w++){v=y[w];for(U=0;U<K.length&&Da(v,K[U]).length;U++);(K[U]||(K[U]=[])).push(v)}y=K[0];I=A=U=v=w=w=void 0;for(w=0;w<K.length;w++)for(v=K[w],U=0;U<v.length;U++)for(A=v[U],A.forwardSegs=[],I=w+1;I<K.length;I++)Da(A,K[I],A.forwardSegs);if(y){for(w=0;w<y.length;w++)Ca(y[w]);for(w=0;w<y.length;w++)ha(y[w],0,0)}y=[];U=v=w=void 0;for(w=0;w<K.length;w++)for(v=
K[w],U=0;U<v.length;U++)y.push(v[U]);w=y;for(K=0;K<w.length;K++)y=w[K],y.col=G,l.push(y)}a(l);p=l.length;G="";Q=D();K=n("isRTL");for(t=0;t<p;t++)s=l[t],u=s.event,y=m(q(s.start),n("minHeightInSlots")*n("slotMinutes")),s.end<y&&(s.end=y),y=H(s.start,s.start),w=H(s.start,s.end),v=J(s.col),U=L(s.col),I=U-v,U-=.025*I,I=U-v,A=I*(s.forwardCoord-s.backwardCoord),n("slotEventOverlap")&&(A=Math.max(2*(A-10),A)),K?(B=U-s.backwardCoord*I,I=B-A):(I=v+s.backwardCoord*I,B=I+A),I=Math.max(I,v),B=Math.min(B,U),A=
B-I,s.top=y,s.left=I,s.outerWidth=A,s.outerHeight=w-y,G+=c(u,s);Q[0].innerHTML=G;K=Q.children();for(t=0;t<p;t++)s=l[t],u=s.event,G=d(K[t]),y=r("eventRender",u,u,G),!1===y?G.remove():(y&&!0!==y&&(G.remove(),G=d(y).css({position:"absolute",top:s.top,left:s.left}).appendTo(Q)),s.element=G,u._id===h?f(u,G,s):G[0]._fci=t,V(u,G));ca(Q,l,f);for(t=0;t<p;t++)if(s=l[t],G=s.element)s.vsides=qa(G,!0),s.hsides=ga(G,!0),u=G.find(".fc-event-title"),u.length&&(s.contentTop=u[0].offsetTop);for(t=0;t<p;t++)if(s=l[t],
G=s.element)G[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",Q=Math.max(0,s.outerHeight-s.vsides),G[0].style.height=Q+"px",u=s.event,s.contentTop!==e&&10>Q-s.contentTop&&(G.find("div.fc-event-time").text(T(u.start,n("timeFormat"))+" - "+u.title),G.find("div.fc-event-title").remove()),r("eventAfterRender",u,u,G)};k.clearEvents=function(){y().empty();D().empty()};k.slotSegHtml=c;Za.call(k);var n=k.opt,r=k.trigger,p=k.isEventDraggable,s=k.isEventResizable,u=k.eventEnd,v=k.eventElementHandlers,
z=k.setHeight,y=k.getDaySegmentContainer,D=k.getSlotSegmentContainer,E=k.getHoverListener,C=k.getMaxMinute,F=k.getMinMinute,H=k.timePosition,A=k.getIsCellAllDay,J=k.colContentLeft,L=k.colContentRight,N=k.cellToDate,Y=k.getColCnt,P=k.getColWidth,ia=k.getSnapHeight,X=k.getSnapMinutes,w=k.getSlotContainer,V=k.reportEventElement,G=k.showEvents,Z=k.hideEvents,I=k.eventDrop,O=k.eventResize,R=k.renderDayOverlay,W=k.clearOverlays,S=k.renderDayEvents,ja=k.calendar,T=ja.formatDate,ea=ja.formatDates;k.draggableDayEvent=
function(a,b,c){function d(){h||(b.width(f).height("").draggable("option","grid",null),h=!0)}var e=c.isStart,f,g,h=!0,k,m=E(),s=P(),p=ia(),Aa=X(),Fa=F(),u=n("dragBetweenAllDayAndSlots");b.draggable({opacity:n("dragOpacity","month"),revertDuration:n("dragRevertDuration"),start:function(c,Fa){r("eventDragStart",b,a,c,Fa);Z(a,b);f=b.width();m.start(function(c,f){W();if(c){g=!1;var m=N(0,f.col),r=N(0,c.col);k=t(r,m);c.row?u&&e?h&&(b.width(s-10),da(b,p*Math.round((a.end?(a.end-a.start)/6E4:n("defaultEventMinutes"))/
Aa)),b.draggable("option","grid",[s,1]),h=!1):g=!0:(R(l(q(a.start),k),l(B(a),k)),d());g=g||h&&!k}else d(),g=!0;b.draggable("option","revert",g)},c,"drag")},stop:function(c,e){m.stop();W();r("eventDragStop",b,a,c,e);if(g)d(),b.css("filter",""),G(a,b);else{var f=0;u&&!h&&(f=Math.round((b.offset().top-w().offset().top)/p)*Aa+Fa-(60*a.start.getHours()+a.start.getMinutes()));I(this,a,k,f,h,c,e)}}})}}function Ca(a){var b=a.forwardSegs,c=0,d,f;if(a.forwardPressure===e){for(d=0;d<b.length;d++)f=b[d],Ca(f),
c=Math.max(c,1+f.forwardPressure);a.forwardPressure=c}}function ha(a,b,c){var d=a.forwardSegs;if(a.forwardCoord===e)for(d.length?(d.sort(Ra),ha(d[0],b+1,c),a.forwardCoord=d[0].backwardCoord):a.forwardCoord=1,a.backwardCoord=a.forwardCoord-(a.forwardCoord-c)/(b+1),b=0;b<d.length;b++)ha(d[b],0,a.forwardCoord)}function Da(a,b,c){c=c||[];for(var d=0;d<b.length;d++){var e=b[d];a.end>e.start&&a.start<e.end&&c.push(b[d])}return c}function Ra(a,b){return b.forwardPressure-a.forwardPressure||(a.backwardCoord||
0)-(b.backwardCoord||0)||M(a,b)}function M(a,b){return a.start-b.start||(a.sortKey||0)-(b.sortKey||0)||b.end-b.start-(a.end-a.start)||(a.title||"").localeCompare(b.title)}function oa(a,b,c){function f(a,b){var e=L[a];return d.isPlainObject(e)?ma(e,b||c):e}function g(a,c){return b.trigger.apply(b,[a,c||D].concat(Array.prototype.slice.call(arguments,2),[D]))}function h(a){return a.end?q(a.end):B(a)}function k(a,b,c){a=A[a._id];var d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function n(a,
b,c,d){c=c||0;for(var f,g=a.length,h=0;h<g;h++)f=a[h],d!==e&&(f.allDay=d),m(l(f.start,b,!0),c),f.end&&(f.end=m(l(f.end,b,!0),c)),C(f,L)}function r(a,b,c){c=c||0;for(var d,e=a.length,f=0;f<e;f++)d=a[f],d.end=m(l(h(d),b,!0),c),C(d,L)}function s(a,b){var c=D.getColCnt(),d=w?-1:1,e=w?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*d+e)}function p(a){var b=D.visStart.getDay();a+=M[b];return 7*Math.floor(a/P)+X[(a%P+P)%P]-b}function u(a){var b=q(D.visStart);l(b,a);return b}function v(a){return t(a,
D.visStart)}function y(a){var b=D.visStart.getDay();a+=b;return Math.floor(a/7)*P+M[(a%7+7)%7]-M[b]}function z(a){var b=D.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(w?-1:1)+(w?b-1:0)}}var D=this;D.element=a;D.calendar=b;D.name=c;D.opt=f;D.trigger=g;D.isEventDraggable=function(a){var b=a.source||{};return H(a.startEditable,b.startEditable,f("eventStartEditable"),a.editable,b.editable,f("editable"))&&!f("disableDragging")};D.isEventResizable=function(a){var b=a.source||{};return H(a.durationEditable,
b.durationEditable,f("eventDurationEditable"),a.editable,b.editable,f("editable"))&&!f("disableResizing")};D.setEventData=function(a){E={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],E[d._id]?E[d._id].push(d):E[d._id]=[d]};D.clearEventData=function(){E={};A={};J=[]};D.eventEnd=h;D.reportEventElement=function(a,b){J.push({event:a,element:b});A[a._id]?A[a._id].push(b):A[a._id]=[b]};D.triggerEventDestroy=function(){d.each(J,function(a,b){D.trigger("eventDestroy",b.event,b.event,b.element)})};D.eventElementHandlers=
function(a,b){b.on("click",function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return g("eventClick",this,a,c)}).hover(function(b){g("eventMouseover",this,a,b)},function(b){g("eventMouseout",this,a,b)})};D.showEvents=function(a,b){k(a,b,"show")};D.hideEvents=function(a,b){k(a,b,"hide")};D.eventDrop=function(a,b,c,d,e,f,h){var k=b.allDay,l=b._id;n(E[l],c,d,e);g("eventDrop",a,b,c,d,e,function(){n(E[l],-c,-d,k);F(l)},f,h);F(l)};D.eventResize=function(a,b,c,d,e,f){var h=
b._id,k=b._start,l=b._end;r(E[h],c,d);g("eventResize",a,b,c,d,function(){b.start=k;b.end=l;C(b);F(h)},e,f);F(h)};var B=D.defaultEventEnd,C=b.normalizeEvent,F=b.reportEventChange,E={},A={},J=[],L=b.options;D.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return Y[a]};D.skipHiddenDays=function(a,b,c){for(b=b||1;Y[(a.getDay()+(c?b:0)+7)%7];)l(a,b)};D.getCellsPerWeek=function(){return P};D.dateToCell=function(a){a=v(a);a=y(a);return z(a)};D.dateToDayOffset=v;D.dayOffsetToCellOffset=y;D.cellOffsetToCell=
z;D.cellToDate=function(){var a=s.apply(null,arguments),a=p(a);return u(a)};D.cellToCellOffset=s;D.cellOffsetToDayOffset=p;D.dayOffsetToDate=u;D.rangeToSegments=function(a,b){for(var c=D.getRowCnt(),d=D.getColCnt(),e=[],f=v(a),g=v(b),h=y(f),k=y(g)-1,l=0;l<c;l++){var m=l*d,n=m+d-1,m=Math.max(h,m),n=Math.min(k,n);if(m<=n){var q=z(m),r=z(n),q=[q.col,r.col].sort(),m=p(m)==f,n=p(n)+1==g;e.push({row:l,leftCol:q[0],rightCol:q[1],isStart:m,isEnd:n})}}return e};var N=f("hiddenDays")||[],Y=[],P,M=[],X=[],w=
f("isRTL");(function(){!1===f("weekends")&&N.push(0,6);for(var a=0,b=0;7>a;a++)M[a]=b,Y[a]=-1!=d.inArray(a,N),Y[a]||(X[b]=a,b++);P=b;if(!P)throw"invalid hiddenDays";})()}function Za(){function a(c,d,e){c=b([c],!0,!1);var f=[];la(c,function(a,b){a.row===d&&b.css("top",e);f.push(b[0])});return f}function b(a,k,l){var m=Z(),n=k?d("<div/>"):m;a=c(a);var q;e(a);q=f(a);n[0].innerHTML=q;n=n.children();k&&m.append(n);g(a,n);la(a,function(a,b){a.hsides=ga(b,!0)});la(a,function(a,b){b.width(Math.max(0,a.outerWidth-
a.hsides))});la(a,function(a,b){a.outerHeight=b.outerHeight(!0)});h(a,l);return a}function c(a){for(var b=[],d=0;d<a.length;d++){for(var e=a[d],f=e.start,g=B(e),f=ba(f,g),g=0;g<f.length;g++)f[g].event=e;b.push.apply(b,f)}return b}function e(a){for(var b=u("isRTL"),c=0;c<a.length;c++){var d=a[c],f=(b?d.isStart:d.isEnd)?G:w,g=((b?d.isEnd:d.isStart)?V:X)(d.leftCol),f=f(d.rightCol);d.left=g;d.outerWidth=f-g}}function f(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e="",g=u("isRTL"),h=d.event,k=h.url,
l=["fc-event","fc-event-hori"];y(h)&&l.push("fc-event-draggable");d.isStart&&l.push("fc-event-start");d.isEnd&&l.push("fc-event-end");l=l.concat(h.className);h.source&&(l=l.concat(h.source.className||[]));var m=ua(h,u),e=k?e+("<a href='"+fa(k)+"'"):e+"<div",e=e+(" class='"+l.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+m+"'><div class='fc-event-inner'>");if(h.allDay||d.isStart)e+="<span class='fc-event-time'>"+fa(I(h.start,h.end,h.allDay&&"month"!=p.name?u("timeFormat","allDay"):u("timeFormat")))+
"</span>";e+="<span class='fc-event-title'>"+fa(h.title||"")+"</span></div>";d.isEnd&&z(h)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(g?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");e+="</"+(k?"a":"div")+">";b+=e}return b}function g(a,b){for(var c=0;c<a.length;c++){var e=a[c],f=e.event,h=b.eq(c),f=v("eventRender",f,f,h);!1===f?h.remove():(f&&!0!==f&&(f=d(f).css({position:"absolute",left:e.left}),h.replaceWith(f),h=f),e.element=h)}}function h(a,b){var c=k(a),e=n(),f=[],g=P();if(b)for(var l=0;l<
e.length;l++){e[l].height(ya(c[l].map(function(a){return a.columnHeight})));for(var m=0;m<g;m++)if(d(e[l][m]).nextAll().remove(),0<c[l][m].hiddenSegmentsCount){var q=d("<a class='fc-show-more-link' href='#'>+"+c[l][m].hiddenSegmentsCount+" "+p.calendar.options.eventLimitText+"</a>");q.data("row",l);q.data("column",m);d(e[l][m]).after(q);q.mousedown(function(a){var b=q.data("row"),c=q.data("column"),b=p.calendar.getSegmentsByRowAndColumn(b,c);v("showMoreMousedown",a,a,b)})}}for(l=0;l<e.length;l++)f.push(e[l].position().top);
la(a,function(a,b){b.css("top",f[a.row]+a.top)})}function k(a){var b=p.calendar.options.eventLimit&&"number"!==typeof p.calendar.options.eventLimitt?p.calendar.options.eventLimit:!1;p.calendar.options.hiddenElements=[];var c=M(),e=P(),f=[];a=m(a);for(var g=0;g<c;g++){var h=a[g];f[g]=[];for(r=0;r<e;r++)f[g][r]={columnHeight:0,popupHeight:0,segmentsCount:0,hiddenSegmentsCount:0};for(r=0;r<h.length;r++){var l=h[r];l.top=ya(f[g].map(function(a){return a.popupHeight}).slice(l.leftCol,l.rightCol+1));for(var n=
l.top+l.outerHeight,q=l.leftCol;q<=l.rightCol;q++)f[g][q].popupHeight=n,f[g][q].segmentsCount++,b&&f[g][l.leftCol].segmentsCount>=b||(f[g][q].columnHeight=n);b&&f[g][l.leftCol].segmentsCount>=b&&(l.element.hide(),f[g][l.leftCol].hiddenSegmentsCount++,p.calendar.options.hiddenElements[g]||(p.calendar.options.hiddenElements[g]=[]),p.calendar.options.hiddenElements[g][l.leftCol]||(p.calendar.options.hiddenElements[g][l.leftCol]=[]),p.calendar.options.hiddenElements[g][l.leftCol].push(l.element.get(0)))}}for(g=
0;g<c;g++)for(var r=0;r<e;r++)b&&f[g][r].segmentsCount==b&&d(p.calendar.options.hiddenElements[g][r]).show();return f}function m(a){var b=M(),c=[],d,e,f;for(d=0;d<a.length;d++)e=a[d],f=e.row,e.element&&(c[f]?c[f].push(e):c[f]=[e]);for(f=0;f<b;f++){a=f;var g=c[f]||[];d=[];g.sort(Xa);e=[];for(var h=0;h<g.length;h++){for(var k=g[h],l=0;l<e.length;l++){var n;a:{n=e[l];for(var q=0;q<n.length;q++){var p=n[q];if(p.leftCol<=k.rightCol&&p.rightCol>=k.leftCol){n=!0;break a}}n=!1}if(!n)break}e[l]?e[l].push(k):
e[l]=[k]}for(g=0;g<e.length;g++)d.push.apply(d,e[g]);c[a]=d}return c}function n(){var a,b=M(),c=[];for(a=0;a<b;a++)c[a]=S(a).find("div.fc-day-content > div");return c}function r(a,b){var c=Z();la(a,function(a,c,d){var e=a.event;e._id===b?s(e,c,a):c[0]._fci=d});ca(c,a,s)}function s(a,b,c){y(a)&&p.draggableDayEvent(a,b,c);c.isEnd&&z(a)&&p.resizableDayEvent(a,b,c);H(a,b)}var p=this;p.renderDayEvents=function(a,c){var d=b(a,!1,!0);la(d,function(a,b){E(a.event,b)});r(d,c);la(d,function(a,b){v("eventAfterRender",
a.event,a.event,b)});return d};p.draggableDayEvent=function(a,b){var c=T(),d;b.draggable({delay:50,opacity:u("dragOpacity"),revertDuration:u("dragRevertDuration"),start:function(e,f){v("eventDragStart",b,a,e,f);J(a,b);c.start(function(c,e,f,g){b.draggable("option","revert",!c||!f&&!g);R();c?(e=aa(e),c=aa(c),d=t(c,e),O(l(q(a.start),d),l(B(a),d))):d=0},e,"drag")},stop:function(e,f){c.stop();R();v("eventDragStop",b,a,e,f);d?L(this,a,d,0,a.allDay,e,f):(b.css("filter",""),A(a,b))}})};p.resizableDayEvent=
function(b,c,e){var f=u("isRTL")?"w":"e",g=c.find(".ui-resizable-"+f),h=!1;Ja(c);c.mousedown(function(a){a.preventDefault()}).click(function(a){h&&(a.preventDefault(),a.stopImmediatePropagation())});g.mousedown(function(g){function k(a){v("eventResizeStop",this,b,a);d("body").css("cursor","");m.stop();R();q&&N(this,b,q,0,a);setTimeout(function(){h=!1},0)}if(1==g.which){h=!0;var m=T();M();P();var n=c.css("top"),q,p,r=d.extend({},b),s=ka(ha(b.start));W();d("body").css("cursor",f+"-resize").one("mouseup",
k);v("eventResizeStart",this,b,g);m.start(function(c,g){if(c){var h=ea(g),k=ea(c),k=Math.max(k,s);(q=da(k)-da(h))?(r.end=l(C(b),q,!0),h=p,p=a(r,e.row,n),p=d(p),p.find("*").css("cursor",f+"-resize"),h&&h.remove(),J(b)):p&&(A(b),p.remove(),p=null);R();O(b.start,l(B(b),q))}},g)}})};var u=p.opt,v=p.trigger,y=p.isEventDraggable,z=p.isEventResizable,C=p.eventEnd,E=p.reportEventElement,H=p.eventElementHandlers,A=p.showEvents,J=p.hideEvents,L=p.eventDrop,N=p.eventResize,M=p.getRowCnt,P=p.getColCnt,S=p.allDayRow,
X=p.colLeft,w=p.colRight,V=p.colContentLeft,G=p.colContentRight,Z=p.getDaySegmentContainer,I=p.calendar.formatDates,O=p.renderDayOverlay,R=p.clearOverlays,W=p.clearSelection,T=p.getHoverListener,ba=p.rangeToSegments,aa=p.cellToDate,ea=p.cellToCellOffset,da=p.cellOffsetToDayOffset,ha=p.dateToDayOffset,ka=p.dayOffsetToCellOffset}function la(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.element;e&&b(d,e,c)}}function Xa(a,b){return b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay||
a.event.start-b.event.start||(a.event.sortKey||0)-(b.event.sortKey||0)||(a.event.title||"").localeCompare(b.event.title)}function Na(){function a(b){l&&(l=!1,k(),f("unselect",null,b))}function b(a,c,d,e){l=!0;f("select",null,a,c,d,e)}var c=this;c.select=function(c,d,e){a();d||(d=g(c,e));h(c,d,e);b(c,d,e)};c.unselect=a;c.reportSelection=b;c.daySelectionMousedown=function(f){var g=c.cellToDate,l=c.getIsCellAllDay,m=c.getHoverListener(),n=c.reportDayClick;if(1==f.which&&e("selectable")){a(f);var q;m.start(function(a,
b){k();a&&l(a)?(q=[g(b),g(a)].sort(ra),h(q[0],q[1],!0)):q=null},f);d(document).one("mouseup",function(a){m.stop();q&&(+q[0]==+q[1]&&n(q[0],!0,a),b(q[0],q[1],!0,a))})}};var e=c.opt,f=c.trigger,g=c.defaultSelectionEnd,h=c.renderSelection,k=c.clearSelection,l=!1;e("selectable")&&e("unselectAuto")&&d(document).mousedown(function(b){var c=e("unselectCancel");c&&d(b.target).closest(c).length||a(b)})}function Sa(){this.renderOverlay=function(c,e){var f=b.shift();f||(f=d("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));
f[0].parentNode!=e[0]&&f.appendTo(e);a.push(f.css(c).show());return f};this.clearOverlays=function(){for(var c;c=a.shift();)b.push(c.hide().unbind())};var a=[],b=[]}function va(a){var b,c;this.build=function(){b=[];c=[];a(b,c)};this.cell=function(a,d){var e=b.length,f=c.length,g,h=-1,k=-1;for(g=0;g<e;g++)if(d>=b[g][0]&&d<b[g][1]){h=g;break}for(g=0;g<f;g++)if(a>=c[g][0]&&a<c[g][1]){k=g;break}return 0<=h&&0<=k?{row:h,col:k}:null};this.rect=function(a,d,e,f,g){g=g.offset();return{top:b[a][0]-g.top,left:c[d][0]-
g.left,width:c[f][1]-c[d][0],height:b[e][1]-b[a][0]}}}function Qa(a){function b(c){c.pageX===e&&(c.pageX=c.originalEvent.pageX,c.pageY=c.originalEvent.pageY);c=a.cell(c.pageX,c.pageY);if(!c!=!h||c&&(c.row!=h.row||c.col!=h.col))c?(g||(g=c),f(c,g,c.row-g.row,c.col-g.col)):f(c,g),h=c}var c,f,g,h;this.start=function(e,k,l){f=e;g=h=null;a.build();b(k);c=l||"mousemove";d(document).bind(c,b)};this.stop=function(){d(document).unbind(c,b);return h}}function La(a){var b=this,c={},d={},f={};b.left=function(b){return d[b]=
d[b]===e?(c[b]=c[b]||a(b)).position().left:d[b]};b.right=function(d){return f[d]=f[d]===e?b.left(d)+(c[d]=c[d]||a(d)).width():f[d]};b.clear=function(){c={};d={};f={}}}var ab={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberShortTitle:"W",weekNumberTitle:"Week",allDayDefault:!0,ignoreTimezone:!0,dragBetweenAllDayAndSlots:!0,minHeightInSlots:1,lazyFetching:!0,startParam:"start",endParam:"end",
titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0,eventLimit:!1,eventLimitText:"more"},qb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",
next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},aa=d.fullCalendar={version:"1.6.4"},za=aa.views={};d.fn.fullCalendar=function(a){if("string"==typeof a){var b=Array.prototype.slice.call(arguments,1),f;this.each(function(){var c=d.data(this,"fullCalendar");c&&d.isFunction(c[a])&&(c=c[a].apply(c,b),f===e&&(f=c),"destroy"==a&&
d.removeData(this,"fullCalendar"))});return f!==e?f:this}a=a||{};var g=a.eventSources||[];delete a.eventSources;a.events&&(g.push(a.events),delete a.events);a=d.extend(!0,{},ab,a.isRTL||a.isRTL===e&&ab.isRTL?qb:{},a);this.each(function(b,e){var f=d(e),h=new c(f,a,g);f.data("fullCalendar",h);h.render()});return this};aa.sourceNormalizers=[];aa.sourceFetchers=[];var rb={dataType:"json",cache:!1},sb=1;aa.addDays=l;aa.cloneDate=q;aa.parseDate=r;aa.parseISO8601=y;aa.parseTime=J;aa.formatDate=E;aa.formatDates=
ba;aa.clearTime=n;var bb="sun mon tue wed thu fri sat".split(" "),tb=36E5,mb={s:function(a){return a.getSeconds()},ss:function(a){return ka(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ka(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ka(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ka(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ka(a.getDate())},ddd:function(a,b){return b.dayNamesShort[a.getDay()]},
dddd:function(a,b){return b.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return ka(a.getMonth()+1)},MMM:function(a,b){return b.monthNamesShort[a.getMonth()]},MMMM:function(a,b){return b.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>
a.getHours()?"AM":"PM"},u:function(a){return E(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,b){return b.weekNumberCalculation(a)},W:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));a=b.getTime();b.setMonth(0);b.setDate(1);return Math.floor(Math.round((a-b)/864E5)/7)+1}};aa.dateFormatters=mb;aa.applyAll=T;za.month=function(a,b){var c=this;c.render=function(a,b){b&&(h(a,b),a.setDate(1));
var m=d("firstDay"),n=q(a,!0);n.setDate(1);var p=h(q(n),1),r=q(n);l(r,-((r.getDay()-m+7)%7));f(r);var s=q(p);l(s,(7-s.getDay()+m)%7);f(s,-1,!0);var m=g(),u=Math.round(t(s,r)/7);"fixed"==d("weekMode")&&(l(s,7*(6-u)),u=6);c.title=k(n,d("titleFormat"));c.start=n;c.end=p;c.visStart=r;c.visEnd=s;e(u,m,!0)};u.call(c,a,b,"month");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=c.getCellsPerWeek,k=b.formatDate};za.basicWeek=function(a,b){var c=this;c.render=function(a,b){b&&l(a,7*b);var k=l(q(a),-((a.getDay()-
d("firstDay")+7)%7)),m=l(q(k),7),n=q(k);f(n);var p=q(m);f(p,-1,!0);var r=g();c.start=k;c.end=m;c.visStart=n;c.visEnd=p;c.title=h(n,l(q(p),-1),d("titleFormat"));e(1,r,!1)};u.call(c,a,b,"basicWeek");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDates};za.listWeek=function(a,b){var c=this;c.render=function(a,b){b&&l(a,7*b);var k=l(q(a),-((a.getDay()-d("firstDay")+7)%7)),m=l(q(k),7),n=q(k);f(n);var p=q(m);f(p,-1,!0);var r=g();c.start=k;c.end=m;c.visStart=n;c.visEnd=p;c.title=
h(n,l(q(p),-1),d("titleFormat"));e(1,r,!1)};v.call(c,a,b,"listWeek");var d=c.opt,e=c.renderList,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDates};za.basicDay=function(a,b){var c=this;c.render=function(a,b){b&&l(a,b);f(a,0>b?-1:1);var h=q(a,!0),k=l(q(h),1);c.title=g(a,d("titleFormat"));c.start=c.visStart=h;c.end=c.visEnd=k;e(1,1,!1)};u.call(c,a,b,"basicDay");var d=c.opt,e=c.renderBasic,f=c.skipHiddenDays,g=b.formatDate};f({weekMode:"fixed"});za.agendaWeek=function(a,b){var c=this;c.render=function(a,
b){b&&l(a,7*b);var k=l(q(a),-((a.getDay()-d("firstDay")+7)%7)),m=l(q(k),7),n=q(k);f(n);var p=q(m);f(p,-1,!0);var r=g();c.title=h(n,l(q(p),-1),d("titleFormat"));c.start=k;c.end=m;c.visStart=n;c.visEnd=p;e(r)};Ba.call(c,a,b,"agendaWeek");var d=c.opt,e=c.renderAgenda,f=c.skipHiddenDays,g=c.getCellsPerWeek,h=b.formatDates};za.agendaWeekFive=function(a,b){var c=this;c.render=function(a,b){b&&l(a,7*b);var h=l(q(a),-((a.getDay()-d("firstDay")+7)%7)),k=l(q(h),7),m=q(h);f(m);var n=q(k);f(n,-1,!0);c.title=
g(m,l(q(n),-1),d("titleFormat"));c.start=h;c.end=k;c.visStart=m;c.visEnd=n;e(5)};Ba.call(c,a,b,"agendaWeekFive");var d=c.opt,e=c.renderAgenda,f=c.skipHiddenDays,g=b.formatDates};za.agendaDay=function(a,b){var c=this;c.render=function(a,b){b&&l(a,b);f(a,0>b?-1:1);var h=q(a,!0),k=l(q(h),1);c.title=g(a,d("titleFormat"));c.start=c.visStart=h;c.end=c.visEnd=k;e(1)};Ba.call(c,a,b,"agendaDay");var d=c.opt,e=c.renderAgenda,f=c.skipHiddenDays,g=b.formatDate};f({allDaySlot:!0,allDayText:"all-day",firstHour:6,
slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24,minDefaultDayStartHour:0,maxDefaultDayStartHour:24,slotEventOverlap:!0})})(jQuery);
(function(d){function e(a,b){b=b?b:"";return a?e(--a,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+b):b}function f(a,b){var c=a.apiendpoint,d="",e,c=c+(0>=c.indexOf("?")?"?":"&"),c=c.replace("#","%23");null===a.maxWidth||"undefined"!==typeof a.params.maxwidth&&null!==a.params.maxwidth||(a.params.maxwidth=a.maxWidth);null===a.maxHeight||"undefined"!==typeof a.params.maxheight&&null!==a.params.maxheight||(a.params.maxheight=a.maxHeight);for(e in a.params)e!=
a.callbackparameter&&null!==a.params[e]&&(d+="&"+escape(e)+"="+a.params[e]);c+="format="+a.format+"&url="+escape(b)+d;"json"!=a.dataType&&(c+="&"+a.callbackparameter+"=?");return c}function c(a,b,c){d("#jqoembeddata").data(b,a.code);g.beforeEmbed.call(c,a);g.onEmbed.call(c,a);g.afterEmbed.call(c,a)}function a(a,b,k){if(void 0!=d("#jqoembeddata").data(b)&&"iframe"!=k.embedtag.tag){var m={code:d("#jqoembeddata").data(b)};c(m,b,a)}else if(k.yql){var m=k.yql.from||"htmlstring",n=k.yql.url?k.yql.url(b):
b,q="SELECT * FROM "+m+' WHERE url="'+n+'" and '+(/html/.test(m)?"xpath":"itemPath")+"='"+(k.yql.xpath||"/")+"'";"html"==m&&(q+=" and compat='html5'");m=d.extend({url:"//query.yahooapis.com/v1/public/yql",dataType:"jsonp",data:{q:q,format:"json",env:"store://datatables.org/alltableswithkeys",callback:"?"},success:function(e){if(k.yql.xpath&&"//meta|//title|//link"==k.yql.xpath){var f={};null==e.query&&(e.query={});null==e.query.results&&(e.query.results={meta:[]});for(var g=0,m=e.query.results.meta.length;g<
m;g++){var q=e.query.results.meta[g].name||e.query.results.meta[g].property||null;null!=q&&(f[q.toLowerCase()]=e.query.results.meta[g].content)}f.hasOwnProperty("title")&&f.hasOwnProperty("og:title")||null==e.query.results.title||(f.title=e.query.results.title);if(!f.hasOwnProperty("og:image")&&e.query.results.hasOwnProperty("link"))for(g=0,m=e.query.results.link.length;g<m;g++)e.query.results.link[g].hasOwnProperty("rel")&&"apple-touch-icon"==e.query.results.link[g].rel&&("/"==e.query.results.link[g].href.charAt(0)?
f["og:image"]=n.match(/^(([a-z]+:)?(\/\/)?[^\/]+\/).*$/)[1]+e.query.results.link[g].href:f["og:image"]=e.query.results.link[g].href);e=k.yql.datareturn(f)}else e=k.yql.datareturn?k.yql.datareturn(e.query.results):e.query.results.result;!1!==e&&(f=d.extend({},e),f.code=e,c(f,b,a))},error:function(){g.onError.call(a,b,k)}},g.ajaxOptions||{});d.ajax(m)}else if(k.templateRegex)if(""!==k.embedtag.tag){var m=k.embedtag.flashvars||"",q=k.embedtag.tag||"embed",s=k.embedtag.width||"auto",t=k.embedtag.height||
"auto",p=b.replace(k.templateRegex,k.apiendpoint);k.nocache||(p+="&jqoemcache="+e(5));k.apikey&&(p=p.replace("_APIKEY_",g.apikeys[k.name]));s=d("<"+q+"/>").attr("src",p).attr("width",s).attr("height",t).attr("allowfullscreen",k.embedtag.allowfullscreen||"true").attr("allowscriptaccess",k.embedtag.allowfullscreen||"always").css("max-height",g.maxHeight||"auto").css("max-width",g.maxWidth||"auto");"embed"==q&&s.attr("type",k.embedtag.type||"application/x-shockwave-flash").attr("flashvars",b.replace(k.templateRegex,
m));"iframe"==q&&s.attr("scrolling",k.embedtag.scrolling||"no").attr("frameborder",k.embedtag.frameborder||"0");c({code:s},b,a)}else k.apiendpoint?(k.apikey&&(k.apiendpoint=k.apiendpoint.replace("_APIKEY_",g.apikeys[k.name])),m=d.extend({url:b.replace(k.templateRegex,k.apiendpoint),dataType:"jsonp",success:function(e){var f=d.extend({},e);f.code=k.templateData(e);c(f,b,a)},error:function(){g.onError.call(a,b,k)}},g.ajaxOptions||{}),d.ajax(m)):c({code:b.replace(k.templateRegex,k.template)},b,a);else m=
f(k,b),m=d.extend({url:m,dataType:k.dataType||"jsonp",success:function(e){e=d.extend({},e);switch(e.type){case "file":case "photo":e.code=d.fn.oembed.getPhotoCode(b,e);break;case "video":case "rich":e.code=d.fn.oembed.getRichCode(b,e);break;default:e.code=d.fn.oembed.getGenericCode(b,e)}c(e,b,a)},error:function(){g.onError.call(a,b,k)}},g.ajaxOptions||{}),d.ajax(m)}function b(a){if(null===a)return null;var b,c={};for(b in a)null!==b&&(c[b.toLowerCase()]=a[b]);return c}d.fn.oembed=function(c,e,f){g=
d.extend(!0,d.fn.oembed.defaults,e);var m="0rz.tw 1link.in 1url.com 2.gp 2big.at 2tu.us 3.ly 307.to 4ms.me 4sq.com 4url.cc 6url.com 7.ly a.gg a.nf aa.cx abcurl.net ad.vu adf.ly adjix.com afx.cc all.fuseurl.com alturl.com amzn.to ar.gy arst.ch atu.ca azc.cc b23.ru b2l.me bacn.me bcool.bz binged.it bit.ly bizj.us bloat.me bravo.ly bsa.ly budurl.com canurl.com chilp.it chzb.gr cl.lk cl.ly clck.ru cli.gs cliccami.info clickthru.ca clop.in conta.cc cort.as cot.ag crks.me ctvr.us cutt.us dai.ly decenturl.com dfl8.me digbig.com http://digg.com/[^/]+$ disq.us dld.bz dlvr.it do.my doiop.com dopen.us easyuri.com easyurl.net eepurl.com eweri.com fa.by fav.me fb.me fbshare.me ff.im fff.to fire.to firsturl.de firsturl.net flic.kr flq.us fly2.ws fon.gs freak.to fuseurl.com fuzzy.to fwd4.me fwib.net g.ro.lt gizmo.do gl.am go.9nl.com go.ign.com go.usa.gov goo.gl goshrink.com gurl.es hex.io hiderefer.com hmm.ph href.in hsblinks.com htxt.it huff.to hulu.com hurl.me hurl.ws icanhaz.com idek.net ilix.in is.gd its.my ix.lt j.mp jijr.com kl.am klck.me korta.nu krunchd.com l9k.net lat.ms liip.to liltext.com linkbee.com linkbun.ch liurl.cn ln-s.net ln-s.ru lnk.gd lnk.ms lnkd.in lnkurl.com lru.jp lt.tl lurl.no macte.ch mash.to merky.de migre.me miniurl.com minurl.fr mke.me moby.to moourl.com mrte.ch myloc.me myurl.in n.pr nbc.co nblo.gs nn.nf not.my notlong.com nsfw.in nutshellurl.com nxy.in nyti.ms o-x.fr oc1.us om.ly omf.gd omoikane.net on.cnn.com on.mktw.net onforb.es orz.se ow.ly ping.fm pli.gs pnt.me politi.co post.ly pp.gg profile.to ptiturl.com pub.vitrue.com qlnk.net qte.me qu.tc qy.fi r.ebay.com r.im rb6.me read.bi readthis.ca reallytinyurl.com redir.ec redirects.ca redirx.com retwt.me ri.ms rickroll.it riz.gd rt.nu ru.ly rubyurl.com rurl.org rww.tw s4c.in s7y.us safe.mn sameurl.com sdut.us shar.es shink.de shorl.com short.ie short.to shortlinks.co.uk shorturl.com shout.to show.my shrinkify.com shrinkr.com shrt.fr shrt.st shrten.com shrunkin.com simurl.com slate.me smallr.com smsh.me smurl.name sn.im snipr.com snipurl.com snurl.com sp2.ro spedr.com srnk.net srs.li starturl.com stks.co su.pr surl.co.uk surl.hu t.cn t.co t.lh.com ta.gd tbd.ly tcrn.ch tgr.me tgr.ph tighturl.com tiniuri.com tiny.cc tiny.ly tiny.pl tinylink.in tinyuri.ca tinyurl.com tk. tl.gd tmi.me tnij.org tnw.to tny.com to.ly togoto.us totc.us toysr.us tpm.ly tr.im tra.kz trunc.it twhub.com twirl.at twitclicks.com twitterurl.net twitterurl.org twiturl.de twurl.cc twurl.nl u.mavrev.com u.nu u76.org ub0.cc ulu.lu updating.me ur1.ca url.az url.co.uk url.ie url360.me url4.eu urlborg.com urlbrief.com urlcover.com urlcut.com urlenco.de urli.nl urls.im urlshorteningservicefortwitter.com urlx.ie urlzen.com usat.ly use.my vb.ly vevo.ly vgn.am vl.am vm.lc w55.de wapo.st wapurl.co.uk wipi.es wp.me x.vu xr.com xrl.in xrl.us xurl.es xurl.jp y.ahoo.it yatuc.com ye.pe yep.it yfrog.com yhoo.it yiyd.com youtu.be yuarel.com z0p.de zi.ma zi.mu zipmyurl.com zud.me zurl.ws zz.gd zzang.kr \u203a.ws \u2729.ws \u273f.ws \u2765.ws \u2794.ws \u279e.ws \u27a1.ws \u27a8.ws \u27af.ws \u27b9.ws \u27bd.ws".split(" ");
0===d("#jqoembeddata").length&&d('<span id="jqoembeddata"></span>').appendTo("body");return this.each(function(){var e=d(this),l=!c||c.indexOf("http://")&&c.indexOf("https://")?e.attr("href"):c,s;f?g.onEmbed=f:g.onEmbed||(g.onEmbed=function(a){d.fn.oembed.insertCode(this,g.embedMethod,a)});if(null!==l&&void 0!==l){for(var t=0,p=m.length;t<p;t++)if(null!==l.match(new RegExp("://"+m[t]+"/","i")))return t=d.extend({q:l},g.ajaxOptions||{}),d.get("https://longurlplease.appspot.com/api/v1.1",t,function(c){l=
c[l];null==l?g.onError.call(e,l):(l=encodeURI(l),s=d.fn.oembed.getOEmbedProvider(l),null==s?g.onError.call(e,l):(!1===!!g.fallback&&(s="opengraph"===s.name.toLowerCase()?null:s),null!==s?(s.params=b(g[s.name])||{},s.maxWidth=g.maxWidth,s.maxHeight=g.maxHeight,a(e,l,s)):g.onProviderNotFound.call(e,l)))},"jsonp"),e;s=d.fn.oembed.getOEmbedProvider(l);if(null==s){g.onError.call(e,l);return}!1===!!g.fallback&&(s="opengraph"===s.name.toLowerCase()?null:s);null!==s?(s.params=b(g[s.name])||{},s.maxWidth=
g.maxWidth,s.maxHeight=g.maxHeight,a(e,l,s)):g.onProviderNotFound.call(e,l)}return e})};var g;d.fn.oembed.defaults={fallback:!0,maxWidth:null,maxHeight:null,includeHandle:!0,embedMethod:"auto",onProviderNotFound:function(){},beforeEmbed:function(){},afterEmbed:function(){},onEmbed:!1,onError:function(a,b,c,d){console.log("err:",a,b,c,d)},ajaxOptions:{}};d.fn.oembed.insertCode=function(a,b,c){if(null!==c)switch("auto"===b&&null!==a.attr("href")?b="append":"auto"==b&&(b="replace"),b){case "replace":a.replaceWith(c.code);
break;case "fill":a.html(c.code);break;case "append":a.wrap('<div class="oembedall-container"></div>');b=a.parent();g.includeHandle&&d('<span class="oembedall-closehide">&darr;</span>').insertBefore(a).click(function(){var a=encodeURIComponent(d(this).text());d(this).html("%E2%86%91"==a?"&darr;":"&uarr;");d(this).parent().children().last().toggle()});b.append("<br/>");try{c.code.clone().appendTo(b)}catch(e){b.append(c.code)}if(g.maxWidth){var f=b.parent().width();f<g.maxWidth?(a=d("iframe",b).width(),
c=d("iframe",b).height(),f=a/f,d("iframe",b).width(a/f),d("iframe",b).height(c/f)):(g.maxWidth&&d("iframe",b).width(g.maxWidth),g.maxHeight&&d("iframe",b).height(g.maxHeight))}}};d.fn.oembed.getPhotoCode=function(a,b){var c;c=b.title?b.title:"";c+=b.author_name?" - "+b.author_name:"";c+=b.provider_name?" - "+b.provider_name:"";if(b.url)c='<div><a href="'+a+"\" target='_blank'><img src=\""+b.url+'" alt="'+c+'"/></a></div>';else if(b.thumbnail_url){var d=b.thumbnail_url.replace("_s","_b");c='<div><a href="'+
a+"\" target='_blank'><img src=\""+d+'" alt="'+c+'"/></a></div>'}else c="<div>Error loading this picture</div>";b.html&&(c+="<div>"+b.html+"</div>");return c};d.fn.oembed.getRichCode=function(a,b){return b.html};d.fn.oembed.getGenericCode=function(a,b){var c='<a href="'+a+'">'+(b.title&&null!==b.title?b.title:a)+"</a>";b.html&&(c+="<div>"+b.html+"</div>");return c};d.fn.oembed.getOEmbedProvider=function(a){for(var b=0;b<d.fn.oembed.providers.length;b++)for(var c=0,e=d.fn.oembed.providers[b].urlschemes.length;c<
e;c++)if(null!==a.match(new RegExp(d.fn.oembed.providers[b].urlschemes[c],"i")))return d.fn.oembed.providers[b];return null};d.fn.oembed.OEmbedProvider=function(a,b,c,d,e){this.name=a;this.type=b;this.urlschemes=c;this.apiendpoint=d;this.maxWidth=500;this.maxHeight=400;e=e||{};e.useYQL&&(e.yql="xml"==e.useYQL?{xpath:"//oembed/html",from:"xml",apiendpoint:this.apiendpoint,url:function(a){return this.apiendpoint+"?format=xml&url="+a},datareturn:function(a){return a.html.replace(/.*\[CDATA\[(.*)\]\]>$/,
"$1")||""}}:{from:"json",apiendpoint:this.apiendpoint,url:function(a){return this.apiendpoint+"?format=json&url="+a},datareturn:function(a){return"video"!=a.json.type&&(a.json.url||a.json.thumbnail_url)?'<img src="'+(a.json.url||a.json.thumbnail_url)+'" />':a.json.html||""}},this.apiendpoint=null);for(var f in e)this[f]=e[f];this.format=this.format||"json";this.callbackparameter=this.callbackparameter||"callback";this.embedtag=this.embedtag||{tag:""}};d.fn.updateOEmbedProvider=function(a,b,c,e,f){for(var g=
0;g<d.fn.oembed.providers.length;g++)if(d.fn.oembed.providers[g].name===a&&(null!==b&&(d.fn.oembed.providers[g].type=b),null!==c&&(d.fn.oembed.providers[g].urlschemes=c),null!==e&&(d.fn.oembed.providers[g].apiendpoint=e),null!==f)){d.fn.oembed.providers[g].extraSettings=f;for(var s in f)null!==s&&null!==f[s]&&(d.fn.oembed.providers[g][s]=f[s])}};d.fn.oembed.providers=[new d.fn.oembed.OEmbedProvider("youtube","video",["youtube\\.com/watch.+v=[\\w-]+&?","youtu\\.be/[\\w-]+","youtube.com/embed"],"https://www.youtube.com/embed/$1?wmode=transparent",
{templateRegex:/.*(?:v\=|be\/|embed\/)([\w\-]+)&?.*/,embedtag:{tag:"iframe",width:"425",height:"349"}}),new d.fn.oembed.OEmbedProvider("wistia","video",["wistia.com/medias/.+","wistia.com/m/.+","wistia.com/embed/.+","wi.st/m/.+","wi.st/embed/.+"],"http://fast.wistia.com/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("xtranormal","video",["xtranormal\\.com/watch/.+"],"http://www.xtranormal.com/xtraplayr/$1/$2",{templateRegex:/.*com\/watch\/([\w\-]+)\/([\w\-]+).*/,embedtag:{tag:"iframe",width:"320",
height:"269"}}),new d.fn.oembed.OEmbedProvider("scivee","video",["scivee.tv/node/.+"],"http://www.scivee.tv/flash/embedCast.swf?",{templateRegex:/.*tv\/node\/(.+)/,embedtag:{width:"480",height:"400",flashvars:"id=$1&type=3"}}),new d.fn.oembed.OEmbedProvider("veoh","video",["veoh.com/watch/.+"],"http://www.veoh.com/swf/webplayer/WebPlayer.swf?version=AFrontend.5.7.0.1337&permalinkId=$1&player=videodetailsembedded&videoAutoPlay=0&id=anonymous",{templateRegex:/.*watch\/([^\?]+).*/,embedtag:{width:"410",
height:"341"}}),new d.fn.oembed.OEmbedProvider("gametrailers","video",["gametrailers\\.com/video/.+"],"http://media.mtvnservices.com/mgid:moses:video:gametrailers.com:$2",{templateRegex:/.*com\/video\/([\w\-]+)\/([\w\-]+).*/,embedtag:{width:"512",height:"288"}}),new d.fn.oembed.OEmbedProvider("funnyordie","video",["funnyordie\\.com/videos/.+"],"http://player.ordienetworks.com/flash/fodplayer.swf?",{templateRegex:/.*videos\/([^\/]+)\/([^\/]+)?/,embedtag:{width:512,height:328,flashvars:"key=$1"}}),
new d.fn.oembed.OEmbedProvider("colledgehumour","video",["collegehumor\\.com/video/.+"],"http://www.collegehumor.com/moogaloop/moogaloop.swf?clip_id=$1&use_node_id=true&fullscreen=1",{templateRegex:/.*video\/([^\/]+).*/,embedtag:{width:600,height:338}}),new d.fn.oembed.OEmbedProvider("metacafe","video",["metacafe\\.com/watch/.+"],"http://www.metacafe.com/fplayer/$1/$2.swf",{templateRegex:/.*watch\/(\d+)\/(\w+)\/.*/,embedtag:{width:400,height:345}}),new d.fn.oembed.OEmbedProvider("bambuser","video",
["bambuser\\.com/channel/.*/broadcast/.*"],"http://static.bambuser.com/r/player.swf?vid=$1",{templateRegex:/.*bambuser\.com\/channel\/.*\/broadcast\/(\w+).*/,embedtag:{width:512,height:339}}),new d.fn.oembed.OEmbedProvider("twitvid","video",["twitvid\\.com/.+"],"http://www.twitvid.com/embed.php?guid=$1&autoplay=0",{templateRegex:/.*twitvid\.com\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360}}),new d.fn.oembed.OEmbedProvider("aniboom","video",["aniboom\\.com/animation-video/.+"],"http://api.aniboom.com/e/$1",
{templateRegex:/.*animation-video\/(\d+).*/,embedtag:{width:594,height:334}}),new d.fn.oembed.OEmbedProvider("vzaar","video",["vzaar\\.com/videos/.+","vzaar.tv/.+"],"http://view.vzaar.com/$1/player?",{templateRegex:/.*\/(\d+).*/,embedtag:{tag:"iframe",width:576,height:324}}),new d.fn.oembed.OEmbedProvider("snotr","video",["snotr\\.com/video/.+"],"http://www.snotr.com/embed/$1",{templateRegex:/.*\/(\d+).*/,embedtag:{tag:"iframe",width:400,height:330},nocache:1}),new d.fn.oembed.OEmbedProvider("youku",
"video",["v.youku.com/v_show/id_.+"],"http://player.youku.com/player.php/sid/$1/v.swf",{templateRegex:/.*id_(.+)\.html.*/,embedtag:{width:480,height:400},nocache:1}),new d.fn.oembed.OEmbedProvider("tudou","video",["tudou.com/programs/view/.+/"],"http://www.tudou.com/v/$1/v.swf",{templateRegex:/.*view\/(.+)\//,embedtag:{width:480,height:400},nocache:1}),new d.fn.oembed.OEmbedProvider("embedr","video",["embedr\\.com/playlist/.+"],"http://embedr.com/swf/slider/$1/425/520/default/false/std?",{templateRegex:/.*playlist\/([^\/]+).*/,
embedtag:{width:425,height:520}}),new d.fn.oembed.OEmbedProvider("blip","video",["blip\\.tv/.+"],"//blip.tv/oembed/"),new d.fn.oembed.OEmbedProvider("minoto-video","video",["http://api.minoto-video.com/publishers/.+/videos/.+","http://dashboard.minoto-video.com/main/video/details/.+","http://embed.minoto-video.com/.+"],"http://api.minoto-video.com/services/oembed.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("animoto","video",["animoto.com/play/.+"],"http://animoto.com/services/oembed"),new d.fn.oembed.OEmbedProvider("hulu",
"video",["hulu\\.com/watch/.*"],"//www.hulu.com/api/oembed.json"),new d.fn.oembed.OEmbedProvider("ustream","video",["ustream\\.tv/recorded/.*"],"http://www.ustream.tv/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("videojug","video",["videojug\\.com/(film|payer|interview).*"],"http://www.videojug.com/oembed.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("sapo","video",["videos\\.sapo\\.pt/.*"],"http://videos.sapo.pt/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("vodpod",
"video",["vodpod.com/watch/.*"],"http://vodpod.com/oembed.js",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("vimeo","video",["www.vimeo.com/groups/.*/videos/.*","www.vimeo.com/.*","vimeo.com/groups/.*/videos/.*","vimeo.com/.*"],"//vimeo.com/api/oembed.json"),new d.fn.oembed.OEmbedProvider("dailymotion","video",["dailymotion\\.com/.+"],"//www.dailymotion.com/services/oembed"),new d.fn.oembed.OEmbedProvider("5min","video",["www\\.5min\\.com/.+"],"http://api.5min.com/oembed.xml",{useYQL:"xml"}),new d.fn.oembed.OEmbedProvider("National Film Board of Canada",
"video",["nfb\\.ca/film/.+"],"http://www.nfb.ca/remote/services/oembed/",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("qik","video",["qik\\.com/\\w+"],"http://qik.com/api/oembed.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("revision3","video",["revision3\\.com"],"http://revision3.com/api/oembed/"),new d.fn.oembed.OEmbedProvider("dotsub","video",["dotsub\\.com/view/.+"],"http://dotsub.com/services/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("clikthrough","video",["clikthrough\\.com/theater/video/\\d+"],
"http://clikthrough.com/services/oembed"),new d.fn.oembed.OEmbedProvider("Kinomap","video",["kinomap\\.com/.+"],"http://www.kinomap.com/oembed"),new d.fn.oembed.OEmbedProvider("VHX","video",["vhx.tv/.+"],"http://vhx.tv/services/oembed.json"),new d.fn.oembed.OEmbedProvider("bambuser","video",["bambuser.com/.+"],"http://api.bambuser.com/oembed/iframe.json"),new d.fn.oembed.OEmbedProvider("justin.tv","video",["justin.tv/.+"],"http://api.justin.tv/api/embed/from_url.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("vine",
"video",["vine.co/v/.*"],null,{templateRegex:/https?:\/\/w?w?w?.?vine\.co\/v\/([a-zA-Z0-9]*).*/,template:'<iframe src="https://vine.co/v/$1/embed/postcard" width="600" height="600" allowfullscreen="true" allowscriptaccess="always" scrolling="no" frameborder="0"></iframe><script async src="//platform.vine.co/static/scripts/embed.js" charset="utf-8">\x3c/script>',nocache:1}),new d.fn.oembed.OEmbedProvider("boxofficebuz","video",["boxofficebuz\\.com\\/embed/.+"],"http://boxofficebuz.com/embed/$1/$2",
{templateRegex:[/.*boxofficebuz\.com\/embed\/(\w+)\/([\w*\-*]+)/],embedtag:{tag:"iframe",width:480,height:360}}),new d.fn.oembed.OEmbedProvider("clipsyndicate","video",["clipsyndicate\\.com/video/play/.+","clipsyndicate\\.com/embed/iframe?.+"],"http://eplayer.clipsyndicate.com/embed/iframe?pf_id=1&show_title=0&va_id=$1&windows=1",{templateRegex:[/.*www\.clipsyndicate\.com\/video\/play\/(\w+)\/.*/,/.*eplayer\.clipsyndicate\.com\/embed\/iframe\?.*va_id=(\w+).*.*/],embedtag:{tag:"iframe",width:480,height:360},
nocache:1}),new d.fn.oembed.OEmbedProvider("coub","video",["coub\\.com/.+"],"http://www.coub.com/embed/$1?muted=false&autostart=false&originalSize=false&hideTopBar=false&noSiteButtons=false&startWithHD=false",{templateRegex:[/.*coub\.com\/embed\/(\w+)\?*.*/,/.*coub\.com\/view\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("discoverychannel","video",["snagplayer\\.video\\.dp\\.discovery\\.com/.+"],"http://snagplayer.video.dp.discovery.com/$1/snag-it-player.htm?auto=no",
{templateRegex:[/.*snagplayer\.video\.dp\.discovery\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new d.fn.oembed.OEmbedProvider("telly","video",["telly\\.com/.+"],"http://www.telly.com/embed.php?guid=$1&autoplay=0",{templateRegex:[/.*telly\.com\/embed\.php\?guid=(\w+).*/,/.*telly\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new d.fn.oembed.OEmbedProvider("minilogs","video",["minilogs\\.com/.+"],"http://www.minilogs.com/e/$1",{templateRegex:[/.*minilogs\.com\/e\/(\w+).*/,
/.*minilogs\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("viddy","video",["viddy\\.com/.+"],"http://www.viddy.com/embed/video/$1",{templateRegex:[/.*viddy\.com\/embed\/video\/(\.*)/,/.*viddy\.com\/video\/(\.*)/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("worldstarhiphop","video",["worldstarhiphop\\.com/embed/.+"],"http://www.worldstarhiphop.com/embed/$1",{templateRegex:/.*worldstarhiphop\.com\/embed\/(\w+).*/,
embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("zapiks","video",["zapiks\\.fr/.+"],"http://www.zapiks.fr/index.php?action=playerIframe&media_id=$1&autoStart=fals",{templateRegex:/.*zapiks\.fr\/index.php\?[\w\=\&]*media_id=(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("official.fm","rich",["official.fm/.+"],"http://official.fm/services/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("chirbit","rich",
["chirb.it/.+"],"http://chirb.it/oembed.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("chirbit","audio",["chirb\\.it/.+"],"http://chirb.it/wp/$1",{templateRegex:[/.*chirb\.it\/wp\/(\w+).*/,/.*chirb\.it\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("Huffduffer","rich",["huffduffer.com/[-.\\w@]+/\\d+"],"http://huffduffer.com/oembed"),new d.fn.oembed.OEmbedProvider("Spotify","rich",["open.spotify.com/(track|album|user)/"],"https://embed.spotify.com/oembed/"),
new d.fn.oembed.OEmbedProvider("shoudio","rich",["shoudio.com/.+","shoud.io/.+"],"http://shoudio.com/api/oembed"),new d.fn.oembed.OEmbedProvider("mixcloud","rich",["mixcloud.com/.+"],"http://www.mixcloud.com/oembed/",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("rdio.com","rich",["rd.io/.+","rdio.com"],"http://www.rdio.com/api/oembed/"),new d.fn.oembed.OEmbedProvider("Soundcloud","rich",["soundcloud.com/.+","snd.sc/.+"],"//soundcloud.com/oembed",{format:"js"}),new d.fn.oembed.OEmbedProvider("bandcamp",
"rich",["bandcamp\\.com/album/.+"],null,{yql:{xpath:"//meta[contains(@content, \\'EmbeddedPlayer\\')]",from:"html",datareturn:function(a){return a.meta?'<iframe width="400" height="100" src="'+a.meta.content+'" allowtransparency="true" frameborder="0"></iframe>':!1}}}),new d.fn.oembed.OEmbedProvider("deviantart","photo",["deviantart.com/.+","fav.me/.+","deviantart.com/.+"],"//backend.deviantart.com/oembed",{format:"jsonp"}),new d.fn.oembed.OEmbedProvider("skitch","photo",["skitch.com/.+"],null,{yql:{xpath:"json",
from:"json",url:function(a){return"http://skitch.com/oembed/?format=json&url="+a},datareturn:function(a){return d.fn.oembed.getPhotoCode(a.json.url,a.json)}}}),new d.fn.oembed.OEmbedProvider("mobypicture","photo",["mobypicture.com/user/.+/view/.+","moby.to/.+"],"http://api.mobypicture.com/oEmbed"),new d.fn.oembed.OEmbedProvider("flickr","photo",["flickr\\.com/photos/.+"],"//flickr.com/services/oembed",{callbackparameter:"jsoncallback"}),new d.fn.oembed.OEmbedProvider("photobucket","photo",["photobucket\\.com/(albums|groups)/.+"],
"http://photobucket.com/oembed/"),new d.fn.oembed.OEmbedProvider("instagram","photo",["instagr\\.?am(\\.com)?/.+"],"//api.instagram.com/oembed"),new d.fn.oembed.OEmbedProvider("SmugMug","photo",["smugmug.com/[-.\\w@]+/.+"],"http://api.smugmug.com/services/oembed/"),new d.fn.oembed.OEmbedProvider("dribbble","photo",["dribbble.com/shots/.+"],"http://api.dribbble.com/shots/$1?callback=?",{templateRegex:/.*shots\/([\d]+).*/,templateData:function(a){return a.image_teaser_url?'<img src="'+a.image_teaser_url+
'"/>':!1}}),new d.fn.oembed.OEmbedProvider("chart.ly","photo",["chart\\.ly/[a-z0-9]{6,8}"],"http://chart.ly/uploads/large_$1.png",{templateRegex:/.*ly\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new d.fn.oembed.OEmbedProvider("circuitlab","photo",["circuitlab.com/circuit/.+"],"https://www.circuitlab.com/circuit/$1/screenshot/540x405/",{templateRegex:/.*circuit\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new d.fn.oembed.OEmbedProvider("23hq","photo",["23hq.com/[-.\\w@]+/photo/.+"],"http://www.23hq.com/23/oembed",
{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("img.ly","photo",["img\\.ly/.+"],"//img.ly/show/thumb/$1",{templateRegex:/.*ly\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new d.fn.oembed.OEmbedProvider("twitgoo.com","photo",["twitgoo\\.com/.+"],"http://twitgoo.com/show/thumb/$1",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"img"},nocache:1}),new d.fn.oembed.OEmbedProvider("imgur.com","photo",["imgur\\.com/gallery/.+"],"http://imgur.com/$1l.jpg",{templateRegex:/.*gallery\/([^\/]+).*/,embedtag:{tag:"img"},
nocache:1}),new d.fn.oembed.OEmbedProvider("visual.ly","rich",["visual\\.ly/.+"],null,{yql:{xpath:"//a[@id=\\'gc_article_graphic_image\\']/img",from:"htmlstring"}}),new d.fn.oembed.OEmbedProvider("achewood","photo",["achewood\\.com\\/index.php\\?date=.+"],"http://www.achewood.com/comic.php?date=$1",{templateRegex:/.*achewood\.com\/index.php\?date=(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("fotokritik","photo",["fotokritik\\.com/.+"],"http://www.fotokritik.com/embed/$1",
{templateRegex:[/.*fotokritik\.com\/embed\/(\w+).*/,/.*fotokritik\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("giflike","photo",["giflike\\.com/.+"],"http://www.giflike.com/embed/$1",{templateRegex:[/.*giflike\.com\/embed\/(\w+).*/,/.*giflike\.com\/a\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("twitter","rich",["twitter.com/.+"],"https://api.twitter.com/1/statuses/oembed.json"),new d.fn.oembed.OEmbedProvider("gmep",
"rich",["gmep.imeducate.com/.*","gmep.org/.*"],"http://gmep.org/oembed.json"),new d.fn.oembed.OEmbedProvider("urtak","rich",["urtak.com/(u|clr)/.+"],"http://oembed.urtak.com/1/oembed"),new d.fn.oembed.OEmbedProvider("cacoo","rich",["cacoo.com/.+"],"http://cacoo.com/oembed.json"),new d.fn.oembed.OEmbedProvider("dailymile","rich",["dailymile.com/people/.*/entries/.*"],"http://api.dailymile.com/oembed"),new d.fn.oembed.OEmbedProvider("dipity","rich",["dipity.com/timeline/.+"],"http://www.dipity.com/oembed/timeline/",
{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("sketchfab","rich",["sketchfab.com/show/.+"],"http://sketchfab.com/oembed",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("speakerdeck","rich",["speakerdeck.com/.+"],"http://speakerdeck.com/oembed.json",{useYQL:"json"}),new d.fn.oembed.OEmbedProvider("popplet","rich",["popplet.com/app/.*"],"http://popplet.com/app/Popplet_Alpha.swf?page_id=$1&em=1",{templateRegex:/.*#\/([^\/]+).*/,embedtag:{width:460,height:460}}),new d.fn.oembed.OEmbedProvider("pearltrees",
"rich",["pearltrees.com/.*"],"http://cdn.pearltrees.com/s/embed/getApp?",{templateRegex:/.*N-f=1_(\d+).*N-p=(\d+).*/,embedtag:{width:460,height:460,flashvars:"lang=en_US&amp;embedId=pt-embed-$1-693&amp;treeId=$1&amp;pearlId=$2&amp;treeTitle=Diagrams%2FVisualization&amp;site=www.pearltrees.com%2FF"}}),new d.fn.oembed.OEmbedProvider("prezi","rich",["prezi.com/.*"],"//prezi.com/bin/preziloader.swf?",{templateRegex:/.*com\/([^\/]+)\/.*/,embedtag:{width:550,height:400,flashvars:"prezi_id=$1&amp;lock_to_path=0&amp;color=ffffff&amp;autoplay=no&amp;autohide_ctrls=0"}}),
new d.fn.oembed.OEmbedProvider("tourwrist","rich",["tourwrist.com/tours/.+"],null,{templateRegex:/.*tours.([\d]+).*/,template:function(a,b){setTimeout(function(){loadEmbeds&&loadEmbeds()},2E3);return"<div id='"+b+"' class='tourwrist-tour-embed direct'></div> <script type='text/javascript' src='http://tourwrist.com/tour_embed.js'>\x3c/script>"}}),new d.fn.oembed.OEmbedProvider("meetup","rich",["meetup\\.(com|ps)/.+"],"http://api.meetup.com/oembed"),new d.fn.oembed.OEmbedProvider("ebay","rich",["ebay\\.*"],
"http://togo.ebay.com/togo/togo.swf?2008013100",{templateRegex:/.*\/([^\/]+)\/(\d{10,13}).*/,embedtag:{width:355,height:300,flashvars:"base=http://togo.ebay.com/togo/&lang=en-us&mode=normal&itemid=$2&query=$1"}}),new d.fn.oembed.OEmbedProvider("wikipedia","rich",["wikipedia.org/wiki/.+"],"http://$1.wikipedia.org/w/api.php?action=parse&page=$2&format=json&section=0&callback=?",{templateRegex:/.*\/\/([\w]+).*\/wiki\/([^\/]+).*/,templateData:function(a){if(!a.parse)return!1;var b=a.parse.text["*"].replace(/href="\/wiki/g,
'href="http://en.wikipedia.org/wiki');return'<div id="content"><h3><a class="nav-link" href="http://en.wikipedia.org/wiki/'+a.parse.displaytitle+'">'+a.parse.displaytitle+"</a></h3>"+b+"</div>"}}),new d.fn.oembed.OEmbedProvider("imdb","rich",["imdb.com/title/.+"],"http://www.imdbapi.com/?i=$1&callback=?",{templateRegex:/.*\/title\/([^\/]+).*/,templateData:function(a){return a.Title?'<div id="content"><h3><a class="nav-link" href="http://imdb.com/title/'+a.imdbID+'/">'+a.Title+"</a> ("+a.Year+")</h3><p>Rating: "+
a.imdbRating+"<br/>Genre: "+a.Genre+"<br/>Starring: "+a.Actors+'</p></div>  <div id="view-photo-caption">'+a.Plot+"</div></div>":!1}}),new d.fn.oembed.OEmbedProvider("livejournal","rich",["livejournal.com/"],"http://ljpic.seacrow.com/json/$2$4?jsonp=?",{templateRegex:/(http:\/\/(((?!users).)+)\.livejournal\.com|.*users\.livejournal\.com\/([^\/]+)).*/,templateData:function(a){return a.username?'<div><img src="'+a.image+'" align="left" style="margin-right: 1em;" /><span class="oembedall-ljuser"><a href="http://'+
a.username+'.livejournal.com/profile"><img src="http://www.livejournal.com/img/userinfo.gif" alt="[info]" width="17" height="17" /></a><a href="http://'+a.username+'.livejournal.com/">'+a.username+"</a></span><br />"+a.name+"</div>":!1}}),new d.fn.oembed.OEmbedProvider("circuitbee","rich",["circuitbee\\.com/circuit/view/.+"],"http://c.circuitbee.com/build/r/schematic-embed.html?id=$1",{templateRegex:/.*circuit\/view\/(\d+).*/,embedtag:{tag:"iframe",width:"500",height:"350"}}),new d.fn.oembed.OEmbedProvider("googlecalendar",
"rich",["www.google.com/calendar/embed?.+"],"$1",{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"800",height:"600"}}),new d.fn.oembed.OEmbedProvider("jsfiddle","rich",["jsfiddle.net/[^/]+/?"],"http://jsfiddle.net/$1/embedded/result,js,resources,html,css/?",{templateRegex:/.*net\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",height:"300"}}),new d.fn.oembed.OEmbedProvider("jsbin","rich",["jsbin.com/.+"],"http://jsbin.com/$1/?",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",
height:"300"}}),new d.fn.oembed.OEmbedProvider("jotform","rich",["form.jotform.co/form/.+"],"$1?",{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"100%",height:"507"}}),new d.fn.oembed.OEmbedProvider("reelapp","rich",["reelapp\\.com/.+"],"http://www.reelapp.com/$1/embed",{templateRegex:/.*com\/(\S{6}).*/,embedtag:{tag:"iframe",width:"400",height:"338"}}),new d.fn.oembed.OEmbedProvider("linkedin","rich",["linkedin.com/pub/.+"],"https://www.linkedin.com/cws/member/public_profile?public_profile_url=$1&format=inline&isFramed=true",
{templateRegex:/(.*)/,embedtag:{tag:"iframe",width:"368px",height:"auto"}}),new d.fn.oembed.OEmbedProvider("timetoast","rich",["timetoast.com/timelines/[0-9]+"],"http://www.timetoast.com/flash/TimelineViewer.swf?passedTimelines=$1",{templateRegex:/.*timelines\/([0-9]*)/,embedtag:{width:550,height:400},nocache:1}),new d.fn.oembed.OEmbedProvider("pastebin","rich",["pastebin\\.com/[\\S]{8}"],"http://pastebin.com/embed_iframe.php?i=$1",{templateRegex:/.*\/(\S{8}).*/,embedtag:{tag:"iframe",width:"100%",
height:"auto"}}),new d.fn.oembed.OEmbedProvider("mixlr","rich",["mixlr.com/.+"],"http://mixlr.com/embed/$1?autoplay=ae",{templateRegex:/.*com\/([^\/]+).*/,embedtag:{tag:"iframe",width:"100%",height:"auto"}}),new d.fn.oembed.OEmbedProvider("pastie","rich",["pastie\\.org/pastes/.+"],null,{yql:{xpath:'//pre[@class="textmate-source"]'}}),new d.fn.oembed.OEmbedProvider("github","rich",["gist.github.com/.+"],"https://github.com/api/oembed"),new d.fn.oembed.OEmbedProvider("github","rich",["github.com/[-.\\w@]+/[-.\\w@]+"],
"https://api.github.com/repos/$1/$2?callback=?",{templateRegex:/.*\/([^\/]+)\/([^\/]+).*/,templateData:function(a){return a.data.html_url?'<div class="oembedall-githubrepos"><ul class="oembedall-repo-stats"><li>'+a.data.language+'</li><li class="oembedall-watchers"><a title="Watchers" href="'+a.data.html_url+'/watchers">&#x25c9; '+a.data.watchers+'</a></li><li class="oembedall-forks"><a title="Forks" href="'+a.data.html_url+'/network">&#x0265; '+a.data.forks+'</a></li></ul><h3><a href="'+a.data.html_url+
'">'+a.data.name+'</a></h3><div class="oembedall-body"><p class="oembedall-description">'+a.data.description+'</p><p class="oembedall-updated-at">Last updated: '+a.data.pushed_at+"</p></div></div>":!1}}),new d.fn.oembed.OEmbedProvider("facebook","rich",["facebook.com"],null,{templateRegex:/.*\/([^\/]+)\/([^\/]+).*/,template:function(a){if(!d.fn.oembed.facebokScriptHasBeenAdded){d('<div id="fb-root"></div>').appendTo("body");var b=document.createElement("script");b.type="text/javascript";b.text='(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0];if (d.getElementById(id)) return;js = d.createElement(s); js.id = id;js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.0";fjs.parentNode.insertBefore(js, fjs);}(document, "script", "facebook-jssdk"));';
document.body.appendChild(b);d.fn.oembed.facebokScriptHasBeenAdded=!0}return'<div class="fb-post" data-href="'+a+'" data-width="520"><div class="fb-xfbml-parse-ignore"><a href="'+a+'"></div></div>'}}),new d.fn.oembed.OEmbedProvider("stackoverflow","rich",["stackoverflow.com/questions/[\\d]+"],"http://api.stackoverflow.com/1.1/questions/$1?body=true&jsonp=?",{templateRegex:/.*questions\/([\d]+).*/,templateData:function(a){if(!a.questions)return!1;a=a.questions[0];var b=d(a.body).text(),b='<div class="oembedall-stoqembed"><div class="oembedall-statscontainer"><div class="oembedall-statsarrow"></div><div class="oembedall-stats"><div class="oembedall-vote"><div class="oembedall-votes"><span class="oembedall-vote-count-post"><strong>'+
(a.up_vote_count-a.down_vote_count)+'</strong></span><div class="oembedall-viewcount">vote(s)</div></div></div><div class="oembedall-status"><strong>'+a.answer_count+'</strong>answer</div></div><div class="oembedall-views">'+a.view_count+' view(s)</div></div><div class="oembedall-summary"><h3><a class="oembedall-question-hyperlink" href="http://stackoverflow.com/questions/'+a.question_id+'/">'+a.title+'</a></h3><div class="oembedall-excerpt">'+b.substring(0,100)+'...</div><div class="oembedall-tags">';
for(i in a.tags)b+='<a title="" class="oembedall-post-tag" href="http://stackoverflow.com/questions/tagged/'+a.tags[i]+'">'+a.tags[i]+"</a>";return b+='</div><div class="oembedall-fr"><div class="oembedall-user-info"><div class="oembedall-user-gravatar32"><a href="http://stackoverflow.com/users/'+a.owner.user_id+"/"+a.owner.display_name+'"><img width="32" height="32" alt="" src="http://www.gravatar.com/avatar/'+a.owner.email_hash+'?s=32&amp;d=identicon&amp;r=PG"></a></div><div class="oembedall-user-details"><a href="http://stackoverflow.com/users/'+
a.owner.user_id+"/"+a.owner.display_name+'">'+a.owner.display_name+'</a><br><span title="reputation score" class="oembedall-reputation-score">'+a.owner.reputation+"</span></div></div></div></div></div>"}}),new d.fn.oembed.OEmbedProvider("wordpress","rich",["wordpress\\.com/.+","blogs\\.cnn\\.com/.+","techcrunch\\.com/.+","wp\\.me/.+"],"http://public-api.wordpress.com/oembed/1.0/?for=jquery-oembed-all"),new d.fn.oembed.OEmbedProvider("screenr","rich",["screenr.com"],"http://www.screenr.com/embed/$1",
{templateRegex:/.*\/([^\/]+).*/,embedtag:{tag:"iframe",width:"650",height:396}}),new d.fn.oembed.OEmbedProvider("gigpans","rich",["gigapan\\.org/[-.\\w@]+/\\d+"],"http://gigapan.org/gigapans/$1/options/nosnapshots/iframe/flash.html",{templateRegex:/.*\/(\d+)\/?.*/,embedtag:{tag:"iframe",width:"100%",height:400}}),new d.fn.oembed.OEmbedProvider("scribd","rich",["scribd\\.com/.+"],"http://www.scribd.com/embeds/$1/content?start_page=1&view_mode=list",{templateRegex:/.*doc\/([^\/]+).*/,embedtag:{tag:"iframe",
width:"100%",height:600}}),new d.fn.oembed.OEmbedProvider("kickstarter","rich",["kickstarter\\.com/projects/.+"],"$1/widget/card.html",{templateRegex:/([^\?]+).*/,embedtag:{tag:"iframe",width:"220",height:380}}),new d.fn.oembed.OEmbedProvider("amazon","rich",["amzn.com/B+","amazon.com.*/(B\\S+)($|\\/.*)"],"http://rcm.amazon.com/e/cm?t=_APIKEY_&o=1&p=8&l=as1&asins=$1&ref=qf_br_asin_til&fc1=000000&IS2=1&lt1=_blank&m=amazon&lc1=0000FF&bc1=000000&bg1=FFFFFF&f=ifr",{apikey:!0,templateRegex:/.*\/(B[0-9A-Z]+)($|\/.*)/,
embedtag:{tag:"iframe",width:"120px",height:"240px"}}),new d.fn.oembed.OEmbedProvider("slideshare","rich",["slideshare.net"],"//www.slideshare.net/api/oembed/2",{format:"jsonp"}),new d.fn.oembed.OEmbedProvider("roomsharejp","rich",["roomshare\\.jp/(en/)?post/.*"],"http://roomshare.jp/oembed.json"),new d.fn.oembed.OEmbedProvider("lanyard","rich",["lanyrd.com/\\d+/.+"],null,{yql:{xpath:'(//div[@class="primary"])[1]',from:"htmlstring",datareturn:function(a){return a.result?'<div class="oembedall-lanyard">'+
a.result+"</div>":!1}}}),new d.fn.oembed.OEmbedProvider("asciiartfarts","rich",["asciiartfarts.com/\\d+.html"],null,{yql:{xpath:"//pre/font",from:"htmlstring",datareturn:function(a){return a.result?'<pre style="background-color:#000;">'+a.result+"</div>":!1}}}),new d.fn.oembed.OEmbedProvider("coveritlive","rich",["coveritlive.com/"],null,{templateRegex:/(.*)/,template:'<iframe src="$1" allowtransparency="true" scrolling="no" width="615px" frameborder="0" height="625px"></iframe>'}),new d.fn.oembed.OEmbedProvider("polldaddy",
"rich",["polldaddy.com/"],null,{templateRegex:/(?:https?:\/\/w?w?w?.?polldaddy.com\/poll\/)([0-9]*)\//,template:'<script async type="text/javascript" charset="utf-8" src="http://static.polldaddy.com/p/$1.js">\x3c/script>',nocache:1}),new d.fn.oembed.OEmbedProvider("360io","rich",["360\\.io/.+"],"http://360.io/$1",{templateRegex:/.*360\.io\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("bubbli","rich",["on\\.bubb\\.li/.+"],"http://on.bubb.li/$1",{templateRegex:/.*on\.bubb\.li\/(\w+).*/,
embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("cloudup","rich",["cloudup\\.com/.+"],"http://cloudup.com/$1?chromeless",{templateRegex:[/.*cloudup\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360}}),new d.fn.oembed.OEmbedProvider("codepen","rich",["codepen.io/.+"],"http://codepen.io/$1/embed/$2",{templateRegex:[/.*io\/(\w+)\/pen\/(\w+).*/,/.*io\/(\w+)\/full\/(\w+).*/],embedtag:{tag:"iframe",width:"100%",height:"300"},nocache:1}),new d.fn.oembed.OEmbedProvider("googleviews",
"rich",["(.*maps\\.google\\.com\\/maps\\?).+(output=svembed).+(cbp=(.*)).*"],"https://maps.google.com/maps?layer=c&panoid=$3&ie=UTF8&source=embed&output=svembed&cbp=$5",{templateRegex:/(.*maps\.google\.com\/maps\?).+(panoid=(\w+)&).*(cbp=(.*)).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("googlemaps","rich",["google\\.com/maps/place/.+"],"http://maps.google.com/maps?t=m&q=$1&output=embed",{templateRegex:/.*google\.com\/maps\/place\/([\w\+]*)\/.*/,embedtag:{tag:"iframe",
width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("imajize","rich",["embed\\.imajize\\.com/.+"],"http://embed.imajize.com/$1",{templateRegex:/.*embed\.imajize\.com\/(.*)/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("mapjam","rich",["mapjam\\.com/.+"],"http://www.mapjam.com/$1",{templateRegex:/.*mapjam\.com\/(.*)/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("polar","rich",["polarb\\.com/.+"],"http://assets-polarb-com.a.ssl.fastly.net/api/v4/publishers/unknown/embedded_polls/iframe?poll_id=$1",
{templateRegex:/.*polarb\.com\/polls\/(\w+).*/,embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("ponga","rich",["ponga\\.com/.+"],"https://www.ponga.com/embedded?id=$1",{templateRegex:[/.*ponga\.com\/embedded\?id=(\w+).*/,/.*ponga\.com\/(\w+).*/],embedtag:{tag:"iframe",width:480,height:360},nocache:1}),new d.fn.oembed.OEmbedProvider("opengraph","rich",[".*"],null,{yql:{xpath:"//meta|//title|//link",from:"html",datareturn:function(a){!a["og:title"]&&a.title&&
a.description&&(a["og:title"]=a.title);if(!a["og:title"]&&!a.title)return!1;var b=d("<p/>");if(a["og:video"]){var c=d('<embed src="'+a["og:video"]+'"/>');c.attr("type",a["og:video:type"]||"application/x-shockwave-flash").css("max-height",g.maxHeight||"auto").css("max-width",g.maxWidth||"auto");a["og:video:width"]&&c.attr("width",a["og:video:width"]);a["og:video:height"]&&c.attr("height",a["og:video:height"]);b.append(c)}else a["og:image"]&&(c=d('<img src="'+a["og:image"]+'">'),c.css("max-height",
g.maxHeight||"auto").css("max-width",g.maxWidth||"auto"),a["og:image:width"]&&c.attr("width",a["og:image:width"]),a["og:image:height"]&&c.attr("height",a["og:image:height"]),b.append(c));a["og:title"]&&b.append("<b>"+a["og:title"]+"</b><br/>");a["og:description"]?b.append(a["og:description"]+"<br/>"):a.description&&b.append(a.description+"<br/>");return b}}})]})(jQuery);
(function(d){var e=function(){function d(){this.data=[]}d.prototype.set=function(c,a){this["delete"](c);this.data.push({key:c,value:a})};d.prototype.get=function(c){return(c=this.getArrayItem(c))?c.value:void 0};d.prototype["delete"]=function(c){(c=this.getArrayItem(c))&&this.data.splice(this.data.indexOf(c),1)};d.prototype.forEach=function(c){var a=[];this.data.forEach(function(b,c,d){a.push(b.value)});a.forEach(c)};d.prototype.getArrayItem=function(c){var a;this.data.some(function(b,d,e){return b.key===
c?(a=b,!0):!1});return a};return d}();d.MapHelper=e})(CCL||(CCL={}));var __extends=this.__extends||function(d,e){function f(){this.constructor=d}for(var c in e)e.hasOwnProperty(c)&&(d[c]=e[c]);f.prototype=e.prototype;d.prototype=new f};
(function(d){(function(d){var f=function(){function c(){}c.backspace=8;c.enter=13;c.escape=27;c.space=32;c.arrowLeft=37;c.arrowUp=38;c.arrowRight=39;c.arrowDown=40;c.del=46;return c}();d.keyCodes=f;f=function(){function c(){}c.mobile=568;c.iPadPortraitMode=768;c.iPadLandscapeMode=1024;return c}();d.mediaScreenSizes=f;d.onePixelTransparentImageSource="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCB1jYAAAAAIAAc/INeUAAAAASUVORK5CYII="})(d.CommonConstants||
(d.CommonConstants={}));(function(d){function f(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];var e=Array.prototype.slice.call(c,0);return b.replace(a,function(a,b){return b in e?e[b]:a})}function c(a,b){var c=parseInt(a.css(b));return isNaN(c)?0:c}var a=/\{(\d+)\}/g,b=/\r?\n/g;d.formatString=f;d.replaceLineBreaksWithBrTags=function(a){return a.replace(b,"<br />")};d.htmlEncode=function(a){return void 0===a?"":$("<div/>").text(a).html()};d.htmlDecode=function(a){return void 0===
a?"":$("<div/>").html(a).text()};d.isIosDevice=function(){return/(iPod|iPhone|iPad)/i.test(navigator.userAgent)};d.makePostMessageCall=function(a,b){a.postMessage(JSON.stringify(b),"*")};d.attachPostMessageEventListener=function(a,b,c){a.on("message",function(a){var d,e=a.originalEvent.source;try{a.originalEvent.data&&(d=JSON.parse(a.originalEvent.data))&&d.messageName&&("string"===typeof b?d.messageName===b:-1!=b.indexOf(d.messageName))&&c(d,e)}catch(f){}})};d.checkScreenSize=function(a,b){return window.matchMedia&&
window.matchMedia(f("({0}-width: {1}px)",b?"min":"max",a)).matches};d.executeScripts=function(a){if(null!==a){var b=[],c=a.match(/<script[^>]*?>/g);if(null!==c){var d=0,e=0,f,q=a.toLowerCase();for(f=0;f<c.length;f++)d=a.indexOf(c[f],e)+c[f].length,e=q.indexOf("\x3c/script>",d),d=a.substring(d,e),b.push(d);for(f=0;f<b.length;f++)(new Function(b[f]))()}}};d.safeParseCssValue=c;d.calculateBottomOffset=function(a){var b=0;a.parentsUntil("html").each(function(a,d){var e=$(d);b+=c(e,"padding-bottom")+c(e,
"margin-bottom")+c(e,"border-bottom-width")});return b};d.alertAjaxError=function(a,b,c){400<=a.status&&a.responseText&&alert($("<div/>").html(a.responseText).text())}})(d.CommonFunctions||(d.CommonFunctions={}));(function(d){var f=function(){function a(){}a.collapseContentAreaFrame="collapseContentAreaFrame";a.expandContentAreaFrame="expandContentAreaFrame";a.contentAreaFrameHasCollapsed="contentAreaFrameHasCollapsed";a.contentAreaFrameHasExpanded="contentAreaFrameHasExpanded";a.collapseExtensionIframe=
"collapseExtensionIframe";a.expandExtensionIframe="expandExtensionIframe";a.collapseLeftMenu="collapseLeftMenu";a.extensionContentSaved="extensionContentSaved";a.unreadNotificationCounterChanged="unreadNotificationCounterChanged";a.extensionContentChanged="extensionContentChanged";a.extensionAssignmentAnswerOpened="extensionAssignmentAnswerOpened";a.textEditorInteraction="textEditorInteraction";a.extensionCancelActionPerformed="extensionCancelActionPerformed";a.extensionContentViewed="extensionContentViewed";
a.extensionContentOpened="extensionContentOpened";a.extensionAssignmentAnswerAssessed="extensionAssignmentAnswerAssessed";a.nestedCssModalDialogExpanded="nestedCssModalDialogExpanded";a.nestedCssModalDialogCollapsed="nestedCssModalDialogCollapsed";return a}();d.MessageNames=f;var c=function(){return function(a){this.messageName=a}}();d.GenericMessage=c;var a=function(a){function c(d,e){a.call(this,d);this.extendedData=e}__extends(c,a);return c}(c);d.GenericMessageWithData=a;c=function(a){function c(d,
e,g){"undefined"===typeof e&&(e=!1);"undefined"===typeof g&&(g="");a.call(this,f.textEditorInteraction);this.interactionType=d;this.closeDialogAfterPerformingOperation=e;this.editorInstanceId=g}__extends(c,a);return c}(c);d.TextEditorBaseInteractionMessage=c;a=function(a){function c(){a.call(this,0,!0)}__extends(c,a);return c}(c);d.TextEditorCloseDialogMessage=a;a=function(a){function c(d,e,f){"undefined"===typeof e&&(e=!1);"undefined"===typeof f&&(f="");a.call(this,1,e);this.htmlContent=d;this.editorInstanceId=
f}__extends(c,a);return c}(c);d.TextEditorInsertHtmlMessage=a;a=function(a){function c(d,e,f){"undefined"===typeof f&&(f=!1);a.call(this,2,f);this.linkUrl=d;this.linkName=e}__extends(c,a);return c}(c);d.TextEditorInsertLinkToFileMessage=a;c=function(a){function c(d){a.call(this,3,!0);this.pluginId=d}__extends(c,a);return c}(c);d.TextEditorUpdateItslPluginListMessage=c;(function(a){a[a.CloseDialog=0]="CloseDialog";a[a.InsertHtml=1]="InsertHtml";a[a.InsertLinkToFile=2]="InsertLinkToFile";a[a.UpdateItslPluginsList=
3]="UpdateItslPluginsList"})(d.TextEditorInteractionType||(d.TextEditorInteractionType={}))})(d.CommonWindowMessages||(d.CommonWindowMessages={}));(function(d){d.clickInInnerFrame="clickInInnerFrame"})(d.CommonTriggers||(d.CommonTriggers={}))})(CCL||(CCL={}));
(function(d){var e={},f=function(){function c(a,b){"undefined"===typeof b&&(b="");this._elem=$("#"+a);this._eventsPrefix=b;e[a]=this}c.GetInstanceForElement=function(a){return e[a]};c.prototype.Trigger=function(a){for(var b=[],c=0;c<arguments.length-1;c++)b[c]=arguments[c+1];this._elem.trigger(this._eventsPrefix+a,b)};return c}();d.DomElementClass=f})(CCL||(CCL={}));
(function(d){var e=function(d){function c(a,b,c,e){var l=this;d.call(this,a);this.settings=b;this.mainList=e.mainList;this.placeholderList=e.placeholderList;this.getItemHandler=c;this.mainList.sortable({axis:"y",containment:"#"+a,handle:b.DragHandleSelector,placeholder:{element:function(a,b){return $(l.settings.PlaceholderPrototype).addClass(l.settings.CssClasses.SortPlaceholder)},update:function(a,b){}},update:function(a,b){if(l.isAlien(b.item)){var c=l.createItem(b.item);b.item.replaceWith(c);l.getItemHandler().createItemCompleted(c)}else l.getItemHandler().itemMoved(b.item)},
receive:function(a,b){l.getItemHandler().itemAdded(b.sender)},change:function(a,b){l.placeholderList.css("visibility","hidden")},start:function(a,b){l.placeholderList.css("visibility","hidden")},deactivate:function(a,c){l.placeholderList.css("visibility","visible");l.placeholderList.removeClass(b.CssClasses.DropStateActive)},out:function(a,b){l.isAlien(b.item)&&l.placeholderList.css("visibility","visible")},stop:function(a,b){if(l.isAlien(b.item)){var c=l.getItemHandler().getDroppedItemData(b.item).Id;
l.getItemHandler().itemAddedComplete(c,l.getItemModel(l.mainList.children("li:last-child")).Id===c)}}});this.placeholderList.droppable({scope:b.DropScope,activeClass:b.CssClasses.DropStateActive,hoverClass:b.CssClasses.DropStateHover,tolerance:"touch",drop:function(a,b){var c=l.createItem(b.draggable);c.appendTo(l.mainList);var d=l.getItemHandler();d.createItemCompleted(c);d.itemAdded(b.draggable);d.itemAddedComplete(d.getDroppedItemData(b.draggable).Id,!0)}})}__extends(c,d);c.prototype.getItemsData=
function(){var a=this,b=[];this.mainList.find(">li").each(function(c,d){var e=a.getItemModel($(d));e.OrderNo=c;b.push(e)});return b};c.prototype.updateItemData=function(a,b){var c=this;this.mainList.find(">li").toArray().every(function(d){d=c.getItemModel($(d));return d.Id==a?(b(d),!1):!0})};c.prototype.getItemModel=function(a){return a.data("model")};c.prototype.isAlien=function(a){return!a.data("drop-zone-item")};c.prototype.setItemModel=function(a,b){a.data("model",b)};c.prototype.createItem=function(a){a=
this.getItemHandler().getDroppedItemData(a);var b=this.getItemHandler().createItem(a,this.getItemTemplate());this.setItemModel(b,a);return b};c.prototype.getItemTemplate=function(){return $(this.settings.ItemPrototype)};return c}(d.DomElementClass);d.DropZoneList=e})(CCL||(CCL={}));
(function(d){var e=function(){function d(c,a){this._controls={link:$(),label:$(),hidden:$()};this._settings=c;this._controls.link=$("#"+c.LinkClientId);this._controls.label=this._controls.link.prev();this._controls.hidden=this._controls.link.next();this.changeStateFunction=a;this._isActive=c.IsInitiallyActive;var b=this;this._controls.link.click(function(a){b._controls.link.getIfHyperLinkEnabled()&&(b.changeStateFunction?(b._controls.link.toggleHyperlink(!1),b.changeStateFunction({isActive:!b._isActive,
changeSuccess:!0},function(a){a.changeSuccess&&(b._isActive=a.isActive,b.applyState(b._isActive));b._controls.link.toggleHyperlink(!0)})):(b._isActive=!b._isActive,b.applyState(b._isActive)));a.preventDefault()})}d.prototype.applyState=function(c){var a=c?this._settings.ActiveState:this._settings.InactiveState;this._controls.link.text(a.ActionText);this._controls.label.removeClass().addClass(a.CssClass).text(a.Title);this._controls.hidden.val(c?"1":"0")};return d}();d.ToggleActivation=e})(CCL||(CCL=
{}));(function(d){var e=function(){function d(){}d.GetFunctionByName=function(c,a){if(void 0!==c&&null!==c){if(void 0===a||null===a)a=window;for(var b=c.split("."),d=b.pop(),e=0;e<b.length;e++)a=a[b[e]];return a[d]}};return d}();d.Callbacks=e})(CCL||(CCL={}));
(function(d){d.PickerEvent={Initialized:"PickerInitialized",Added:"PickerFilesAdded",Started:"PickerUploadStarted",Stopped:"PickerUploadStopped",ResultsChanged:"PickerResultsChanged"};var e=function(d){function c(a,b){d.call(this,a);this._settings=b}__extends(c,d);c.prototype.ToggleOkButton=function(a){$(".ccl-button-ok, .ccl-button-pause").each(function(){var b={},b=$(this);a?(void 0===this.previouslyDisabled&&(b.attr("disabled")?this.previouslyDisabled=!0:this.previouslyDisabled=!1),b.prop("disabled",
a)):b.prop("disabled",this.previouslyDisabled)})};c.prototype.ClearResults=function(a){};c.prototype.AllowHide=function(){};c.prototype.AddChildElementsToTheTabOrder=function(){};c.prototype.RemoveChildElementsFromTheTabOrder=function(){};c.prototype.isSecure=function(){return"https:"==window.location.protocol};c.prototype.trimStart=function(a,b){if(!a||0==a.length)return a;b=b?b:" ";for(var c=0;c<a.length&&a.charAt(c)==b;c++);return a.substring(c)};c.prototype.trimEnd=function(a,b){if(!a||0==a.length)return a;
b=b?b:" ";for(var c=a.length-1;0<=c&&a.charAt(c)==b;c--);return a.substring(0,c+1)};c.prototype.trim=function(a,b){return a&&0!=a.length?this.trimEnd(this.trimStart(a,b),b):a};return c}(d.DomElementClass);d.ItemPickerBase=e})(CCL||(CCL={}));
(function(d){var e=function(e){function c(a,b){e.call(this,a,b);this._stateHidden=$("#"+this._settings.StateHiddenFieldClientId);this._resultsTable=$("#"+this._settings.FileListTableClientId);this._fileListItemTemplate=$("#"+this._settings.FileListItemTemplateId).html();this.Init();this.Trigger(d.PickerEvent.Initialized);0<this.GetFiles().length&&this.Trigger(d.PickerEvent.ResultsChanged,{results:this.GetFiles()})}__extends(c,e);c.prototype.Init=function(){};c.prototype.getParameterValue=function(a,
b){for(var c=[],d,e=a.slice(a.indexOf("?")+1).split("&"),f=0;f<e.length;f++)d=e[f].split("="),c.push(d[0]),c[d[0]]=d[1];return c[b]};c.prototype.removeParameter=function(a,b){var c=a.split("#"),d=c[0].split("?");if(2<=d.length){for(var e=d.shift(),f=d.join("?"),d=encodeURIComponent(b)+"=",f=f.split(/[&;]/g),m=f.length;0<m--;)-1!==f[m].lastIndexOf(d,0)&&f.splice(m,1);a=e+"?"+f.join("&");c[1]&&(a+="#"+c[1])}return a};c.prototype.ReplaceUrlToken=function(a,b,c){var d="{"+b+"}";null!=c&&""!=c?-1!=a.indexOf(d)&&
(a=a.replace(d,c)):a=this.removeParameter(a,b);return a};c.prototype.ReplaceUrlTokens=function(a,b,c){a=this.ReplaceUrlToken(a,this._settings.FileRepoFileNameToken,encodeURIComponent(b));return a=this.ReplaceUrlToken(a,this._settings.FileRepoFileIdToken,encodeURIComponent(c))};c.prototype.GetFullFileRepoUrl=function(){return this.trimEnd(this._settings.FileRepoProxy,"/")};c.prototype.ProcessFileName=function(a){if(/^\.([^\.]+)$/.test(a)){var b=new Date,c=b.getFullYear(),d=b.getMonth()+1,d=10>d?"0"+
d.toString():d.toString(),b=b.getDate();a=c+"-"+d+"-"+(10>b?"0"+b.toString():b.toString())+a}return a};c.prototype.GetFileRepoUrlForFileName=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),a,"");a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.GetFileRepoUrl=function(a){a=this.ReplaceUrlTokens(this.GetFullFileRepoUrl(),"",a);a+=-1<a.indexOf("?")?"&":"?";return a+="ts="+(new Date).getTime()};c.prototype.ValidateSelectedFiles=function(a,b){for(var c=a.length-
1;0<=c;c--)null!=b&&0<b.length&&(-1===a[c].name.indexOf(".")||-1===$.inArray(a[c].name.split(".").pop().toLowerCase(),b))&&(a[c].error=this._settings.ErrorTextNotAllowedFileType),a[c].error||(0<this._settings.MaxNumberOfFiles&&c>=this._settings.MaxNumberOfFiles?a[c].error=this._settings.MaxNumberOfFilesExceededText:a[c].size>this._settings.MaxFileSize?a[c].error=this._settings.FileSizeExceededText:a[c].size<this._settings.MinFileSize&&(a[c].error=this._settings.FileSizeTooSmallText));this.SetFiles(a);
return a};c.prototype.SetFiles=function(a){this._stateHidden.val(JSON.stringify(a))};c.prototype.GetFiles=function(){return JSON.parse(this._stateHidden.val()||"[]")};c.prototype.UpdateFileList=function(a){var b=this;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);0===a.find(".error").length&&a.remove()});if(a.length){this._settings.ReadOnly||this._chooseButton.hide();for(var c=0;c<a.length;c++){var e=a[c],f=this._fileListItemTemplate.replace("{file.name}",e.name).replace("{file.bytes}",
d.Utils.FormatFileSize(e.size||0,this._settings.KbText,this._settings.MbText)),f=$(f),k=f.find("td.preview img");f.find("td.delete button").click(function(a){a=$(a.target).closest("tr");var c=a.find("td.name > span").text();b.RemoveFile(c,a);return!1});e.thumbnailUrl?k.attr("src",e.thumbnailUrl):k.attr("src",e.icon).attr("height","24").attr("width","24");this._resultsTable.append(f)}}else this._settings.ReadOnly||this._resultsTable.find("tbody").find("tr").length||this._chooseButton.show()};c.prototype.GetSelectedFile=
function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles[b]};c.prototype.GetSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].fileId===a)return this._selectedFiles[b]};c.prototype.RemoveSelectedFile=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].name===a)return this._selectedFiles.splice(b,
1)[0]};c.prototype.RemoveSelectedFileByFileId=function(a){if(this._selectedFiles)for(var b=this._selectedFiles.length;b--;)if(this._selectedFiles[b].id===a)return this._selectedFiles.splice(b,1)[0]};c.prototype.RemoveFile=function(a,b){for(var c=this.GetFiles(),e=0===b.siblings().length,f=c.length;f--;)if(c[f].name===a){c[f].deleteUrl&&$.ajax({url:c[f].deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}});c.splice(f,1);break}c=this.ValidateSelectedFiles(c,
null);b.remove();this.RemoveSelectedFile(a);this.Trigger(d.PickerEvent.ResultsChanged,{results:c});c=!c.length&&!this._settings.MultiselectAllowed;e=e&&this._settings.MultiselectAllowed&&this.AllUploadsFinished();if(c||e)this._settings.ReadOnly||this._chooseButton.show(),this.HandleStopped({results:[]})};c.prototype.AllUploadsFinished=function(){var a=!0;this._selectedFiles&&this._selectedFiles.forEach(function(b){b.error||(a=!1)});return a};c.prototype.HandleStopped=function(a){this.stopPolling();
this.Trigger(d.PickerEvent.Stopped,a);this.ToggleOkButton(!1)};c.prototype.SetFileErrorText=function(a,b){a.error=b;this.SetFileStatusText(a,b);this.GetRowInResultsTableByText(a.name).find("td.status").addClass("error");this.GetRowInResultsTableByText(a.name).find("td.status span").addClass("label").addClass("label-important")};c.prototype.SetFileStatusText=function(a,b){this.GetRowInResultsTableByText(a.name).find("td.status > span").text(b)};c.prototype.UpdateFileSize=function(a){this.GetRowInResultsTableByText(a.name).find("td.size").text(d.Utils.FormatFileSize(a.size||
0,this._settings.KbText,this._settings.MbText))};c.prototype.UpdateFileName=function(a,b){for(var c=this.GetFiles(),d=c.length;d--;)if(c[d].name===b){c[d].name=a.name;break}this.SetFiles(c);this.GetFileNameElement(b).text(a.name)};c.prototype.GetRowInResultsTableByText=function(a){return this.GetFileNameElement(a).closest("tr")};c.prototype.GetFileNameElement=function(a){return this._resultsTable.find("td.name > span").filter(function(){return $(this).text()===a})};c.prototype.HandleRequestError=
function(){var a=this;this.stopPolling();this._selectedFiles.forEach(function(b){a.SetFileErrorText(b,a._settings.UploadErrorText)});this.HandleStopped({results:this._uploadedFiles})};c.prototype.HandleError=function(a){this.SetFileErrorText(a,this._settings.UploadErrorText);this.AllUploadsFinished()&&0<this._uploadedFiles.length&&this.HandleStopped({results:this._uploadedFiles})};c.prototype.CheckFileDownloadsComplete=function(){var a=this;if(!this._isPolling){this._isPolling=!0;var b=[],c=0;this._selectedFiles.forEach(function(a){!a.error&&
a.signedId&&a.isNew&&(b.push(a.signedId),c++)});var d,e;1===b.length?e=this.GetFileRepoUrl(b[0]):1<=b.length?(e=this.GetFileRepoUrl("batch"),d=b.join()):this.CompleteFileDownloads();if(e){var f={};d&&(f[this._settings.FileRepoHeaderFileBatch]=d);$.ajax({url:e+"&"+this._settings.FileRepoInfoParam+"=true",type:"get",dataType:"json",headers:f,xhrFields:{withCredentials:!0},success:function(b){var c=!1;b?(b=[].concat(b),b.forEach(function(b){if(b&&b.status)if("DownloadCompleted"===b.status||"Available"===
b.status){var d=a.RemoveSelectedFileByFileId(b.fileId);d&&(d.id=b.fileId,d.signedId=b.signature,d.name=b.fileName,d.type=b.mimeType,d.size=b.fileSize,d.fileUrl=a.GetFileRepoUrl(b.signature),d.deleteUrl=a.GetFileRepoUrl(b.signature),a._uploadedFiles.push(d),a.SetFileStatusText(d,""))}else"Error"===b.status?(d=a.RemoveSelectedFileByFileId(b.fileId),a.SetFileErrorText(d,b.statusMessage)):"Downloading"===b.status&&(d=a.GetSelectedFile(b.fileName),a.SetFileStatusText(d,a._settings.FileIsBeingDownloadedText+
" "+b.statusProgress+"%"));else c=!0})):c=!0;c?a.HandleRequestError():a.AllUploadsFinished()?a.CompleteFileDownloads():a._checkFileDownloadsCompleteTask=setTimeout(function(){a._isPolling=!1;a.CheckFileDownloadsComplete()},1E3)},error:function(){a.HandleRequestError()}})}}};c.prototype.CompleteFileDownloads=function(){this.stopPolling();var a=this.ValidateSelectedFiles(this._uploadedFiles,null);this.UpdateFileList(a);this.Trigger(d.PickerEvent.ResultsChanged,{results:a});this.HandleStopped({results:a});
this._resultsTable.find("tbody").find("tr").length&&this._settings.MultiselectAllowed&&this.Trigger(d.PickerEvent.ResultsChanged,{results:[{}]})};c.prototype.StartUploadFiles=function(a){var b=this;this.ToggleOkButton(!0);this.Trigger(d.PickerEvent.Started);this.Trigger(d.PickerEvent.Added,{files:a});this._selectedFiles=a;this._uploadedFiles=[];var c=!1;this._selectedFiles.forEach(function(a){if(a.error)b.SetFileErrorText(a,a.error);else if(a.fileUrl){b.SetFileStatusText(a,b._settings.FileIsBeingDownloadedText+
" 0%");var d=b.GetFileRepoUrlForFileName(a.name),d=d+("&"+b._settings.FileRepoHeaderDownloadFrom+"=1"),e=b.buildDownloadRequestData(a);c=!0;$.ajax({url:d,type:"post",dataType:"json",data:e,xhrFields:{withCredentials:!0},success:function(c){c&&c.fileId&&c.signature?(a.id=c.fileId,a.signedId=c.signature,a.isNew=!0,b.CheckFileDownloadsComplete()):b.HandleError(a)},error:function(){b.HandleError(a)}})}});a&&a.length&&!c&&this._settings.MultiselectAllowed&&(this.SetFiles([]),this.HandleStopped({results:[]}),
this.Trigger(d.PickerEvent.ResultsChanged,{results:[{}]}))};c.prototype.buildDownloadRequestData=function(a){};c.prototype.AddAdditionalHeadersToDownloadFile=function(a,b){};c.prototype.AddChildElementsToTheTabOrder=function(){this._settings.ReadOnly||this._chooseButton.attr("tabindex","0")};c.prototype.RemoveChildElementsFromTheTabOrder=function(){this._settings.ReadOnly||this._chooseButton.attr("tabindex","-1")};c.prototype.ClearResults=function(a){if(a){var b=this.GetFiles();a.forEach(function(a){for(var c=
b.length;c--;)if(b[c].id===a.id){b.splice(c,1);break}});this.SetFiles(b)}};c.prototype.stopPolling=function(){this._checkFileDownloadsCompleteTask&&clearTimeout(this._checkFileDownloadsCompleteTask);this._checkFileDownloadsCompleteTask=null;this._isPolling=!1};return c}(d.ItemPickerBase);d.FilePickerBase=e})(CCL||(CCL={}));(function(d){var e=function(){function d(c){this.settings=c}d.prototype.init=function(){};return d}();d.CommentModuleManager=e})(CCL||(CCL={}));
(function(d){var e=function(e){function c(a){e.call(this,a.DomElementClientId);this._stringToDateRegex=/-?\d+/;this._animationSpeed=200;this._wasControlsCreated=this._wasDataSourceFetchedAtLeastOnce=!1;this._settings=a;this._userData=this._settings.UserData;this._initData=this._settings.DataSource;this._cmm=window[this._settings.CommentModuleManagerName];this._oldestCommentId=this._newestCommentId=-1;this._sending=!1;this._elem.data("CommentModule",this)}__extends(c,e);c.prototype.initCallbacks=function(a,
b,c,d){this._onAddCommentFunction=a;this._onEditCommentFunction=b;this._onDeleteCommentFunction=c;this._onLoadOldCommentsFunction=d};c.prototype.createControls=function(a){"undefined"===typeof a&&(a=!1);this._wasControlsCreated||!this._settings.IsInitiallyVisible&&!a||(this._wasControlsCreated=!0,this._elem.empty().append(this.createLoadMoreLink()).append(this.createCommentList(this._initData.Items)),this._settings.AllowAddComments&&this._elem.append(this.createInputArea()),0<this._initData.Items.length&&
(this._wasDataSourceFetchedAtLeastOnce=!0),this._settings.IsInitiallyVisible&&this.updateLoadMoreLink(this,this._initData.VirtualCount-this._initData.Items.length))};c.prototype.show=function(){var a=this;this._elem.slideDown(this._animationSpeed,function(){0===a.getCommentsCount()&&a.focusInputArea()})};c.prototype.loadAndShow=function(){var a=this;this.createControls(!0);this.loadOldComments(function(){return a.show()})};c.prototype.isVisible=function(){return this._elem.is(":visible")};c.prototype.hide=
function(){this._elem.slideUp(this._animationSpeed)};c.prototype.getCommentsCount=function(){return this._list.children(":data(commentId)").length};c.prototype.loadOldComments=function(a){var b=this;"undefined"===typeof a&&(a=function(){});if(this._onLoadOldCommentsFunction){var c=this._wasDataSourceFetchedAtLeastOnce?0:this._settings.NumberOfPreviouslyReadItemsToDisplay;this._wasDataSourceFetchedAtLeastOnce=!0;this._onLoadOldCommentsFunction(this,this._userData,this._oldestCommentId,this._settings.PageSize,
c,function(c,d){b.loadOldCommentsSuccess(c,d);a()},this.loadOldCommentsFault)}};c.prototype.createLoadMoreLink=function(){var a=this;this._loadMoreLinkContainer=$("<div>").addClass(this._cmm.settings.CssClasses.LoadMoreCommentsLink).hide();this._loadMoreLink=$('<a href="#">').click(function(b){a._loadMoreLink.getIfHyperLinkEnabled()&&(a._loadMoreLink.toggleHyperlink(!1),a.loadOldComments(function(){return a._loadMoreLink.toggleHyperlink(!0)}));b.preventDefault()}).appendTo(this._loadMoreLinkContainer);
return this._loadMoreLinkContainer};c.prototype.createCommentList=function(a){this._list=$("<ul>").addClass(this._cmm.settings.CssClasses.CommentList);this.fillCommentList(a,!0);return this._list};c.prototype.fillCommentList=function(a,b){var c=this;a&&(b||(a=a.reverse()),$.each(a,function(a,d){c.renderComment(d,b,!1);if(-1===c._newestCommentId||d.Id>c._newestCommentId)c._newestCommentId=d.Id;if(-1===c._oldestCommentId||d.Id<c._oldestCommentId)c._oldestCommentId=d.Id}));this._list.toggle(!this._list.is(":empty"))};
c.prototype.renderComment=function(a,b,c){var e=this,f=$("<li>"),k=$("<img>"),m=$("<div>"),n=$("<div>"),q=$(a.ProfileHyperlinkControl?a.ProfileHyperlinkControl:d.CommonFunctions.formatString("<span>{0}</span>",a.UserName)),s=$("<span>"),t=$("<div>"),p=$("<span>"),r=$("<textarea>"),z=$("<div>"),y=$("<span>"),J=a.PictureUrl&&0<a.PictureUrl.length;this._settings.HidePersonPictures||f.append(k);f.append(m,t,p).data("commentId",a.Id);this._settings.HidePersonPictures?f.addClass(this._cmm.settings.CssClasses.CommentListItemNoPersonPicture):
f.addClass(this._cmm.settings.CssClasses.CommentListItem);(this._settings.AllowDeleteComments&&a.AllowDeleteComment||this._settings.AllowEditComments&&a.AllowEditComment)&&this.renderCommentMenu(a,f,r,z,s,t);a.IsRead||f.addClass(this._cmm.settings.CssClasses.UnreadItem);m.append(n).addClass(this._cmm.settings.CssClasses.CommentContent);n.append(q,$("<span>:</span>").addClass(this._cmm.settings.CssClasses.MarginRight5),s);var E=this.encodeText(a.CommentText);this._settings.HidePersonPictures||k.addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",
J?a.PictureUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt","").prop("width",this._cmm.settings.ImageWidth).prop("height",this._cmm.settings.ImageHeight);q.addClass(this._cmm.settings.CssClasses.PersonName);s.addClass(this._cmm.settings.CssClasses.CommentText).data("originalText",E).html(E).linkify();t.addClass(this._cmm.settings.CssClasses.ShowMoreTextLink);n.hide();this.renderShowMoreTextSection(t,m,n,!1);p.addClass(this._cmm.settings.CssClasses.CommentDate).text(a.DateTimeString);a.DateTimeTooltip&&
0<a.DateTimeTooltip.length&&p.prop("title",a.DateTimeTooltip);this._settings.AllowEditComments&&a.AllowEditComment&&(r.data("originalText",a.CommentText).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).val(a.CommentText).keydown(function(a){a.which===d.CommonConstants.keyCodes.escape&&(r.val(r.data("originalText")).trigger("input"),e.toggleEditing(!1,r,z,s,t));return!0}).on("input paste",function(){e.validateTextArea(r,y,f)}).hide(),this.makeTextAreaAutoResizable(r),this.updatePlaceholder(r),
this.renderPostOrEditButtonPanel(z,!1,y,function(){e.tryEditComment(a.Id,r,y,z,s,t)}).hide(),y.hide().addClass(this._cmm.settings.CssClasses.ErrorText),f.append(r,z,y));c?this.getCommentPnlById(this._list,a.Id).replaceWith(f):b?this._list.append(f):this._list.prepend(f);return f};c.prototype.tryEditComment=function(a,b,c,d,e,f){var m;!c.is(":visible")&&0<(m=b.val()).trim().length&&(m!==b.data("originalText")&&this._onEditCommentFunction?this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):
(this._sending=!0,this._onEditCommentFunction(this,this._userData,a,m,this.editCommentSuccess,this.editCommentFault)):this.toggleEditing(!1,b,d,e,f))};c.prototype.renderCommentMenu=function(a,b,c,d,e,f){var m=$('<a href="#">').addClass(this._cmm.settings.CssClasses.ShowMenuLink).attr("aria-label",this._cmm.settings.Resources.ShowMenuLinkAccessibilityText).click(function(a){a.preventDefault()}).appendTo(b);this.renderMenuItems(a,b,m,c,d,e,f)};c.prototype.renderMenuItems=function(a,b,c,d,e,f,m){var n=
$("<div>").addClass(this._cmm.settings.CssClasses.Menu).hide().appendTo(b),q=$("<ul>").appendTo(n);this._settings.AllowEditComments&&a.AllowEditComment&&this.renderCommentEditButton(d,e,f,m).appendTo(q);this._settings.AllowDeleteComments&&a.AllowDeleteComment&&this.renderCommentDeleteButton(a,b).appendTo(q);this.createDropDownMenu(a,c,n)};c.prototype.createDropDownMenu=function(a,b,c){a=new DropDownMenu("CommentMenu"+a.Id,!1);a.settings={showMenuOnHover:!0,isIos:this._cmm.settings.IsIos,closeMenuWhenClickingOnLink:!0,
closeMenuWhenClickingInside:!0,appendToBody:!1,selectedHolderCssClass:"",useTargetPosition:!0,setMinWidthByTarget:!1,horizontalPosition:this._cmm.settings.DropDownMenuPosition,useFixedPosition:!1,zIndex:1E3,autofitHeight:!1};a.initializeControls(c,b,b)};c.prototype.renderCommentEditButton=function(a,b,c,e){var f=this,k=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(d){f.toggleEditing(!0,a,b,c,e);d.preventDefault()}).append($("<img>").prop("src",d.CommonConstants.onePixelTransparentImageSource).prop("alt",
"").addClass(this._cmm.settings.CssClasses.EditButton)).append($("<span>").text(this._cmm.settings.Resources.EditComment)).appendTo(k);return k};c.prototype.toggleEditing=function(a,b,c,d,e){b.add(c).toggle(a);d.toggle(!a);a&&b.focus().trigger("input");e.children().toggle(!a)};c.prototype.renderCommentDeleteButton=function(a,b){var c=this,e=$("<li>");$('<a href="#">').addClass(this._cmm.settings.CssClasses.MenuItemLink).click(function(d){c.deleteComment(a.Id,b);d.preventDefault()}).append($("<img>").prop("src",
d.CommonConstants.onePixelTransparentImageSource).prop("alt","").addClass(this._cmm.settings.CssClasses.DeleteButton)).append($("<span>").text(this._cmm.settings.Resources.DeleteComment)).appendTo(e);return e};c.prototype.renderShowMoreTextSection=function(a,b,c,d){var e=this;0<this._settings.MaxTextHeight&&0<this._settings.CollapsedTextHeight&&setTimeout(function(){var f=e._settings.CollapsedTextHeight,m=e._settings.MaxTextHeight;if(c.height()>m){a.empty();var n=$('<a href="#">').click(function(){e.expandText(e,
n,b,f,!n.data("expanded"));return!1}).appendTo(a);e.expandText(e,n,b,f,d);a.show()}else a.hide(),b.css("max-height","");c.show()},0)};c.prototype.expandText=function(a,b,c,d,e){b.data("expanded",e).text(e?a._cmm.settings.Resources.ShowLessText:a._cmm.settings.Resources.ShowMoreText);c.css("max-height",e?"":d+"px")};c.prototype.createInputArea=function(){var a=this,b=$("<div>");this._settings.HidePersonPictures?b.addClass(this._cmm.settings.CssClasses.InputAreaNoPersonPicture):b.addClass(this._cmm.settings.CssClasses.InputArea);
b.addClass(this._cmm.settings.CssClasses.InputArea);var c=this._cmm.settings.CurrentPersonImageUrl&&0<this._cmm.settings.CurrentPersonImageUrl.length,d=null;this._settings.HidePersonPictures||(d=$("<img>").addClass(this._cmm.settings.CssClasses.PersonImg).prop("src",c?this._cmm.settings.CurrentPersonImageUrl:this._cmm.settings.DefaultPersonImageUrl).prop("alt",this._cmm.settings.CurrentPersonName).prop("width",this._cmm.settings.ImageWidth).prop("height",this._cmm.settings.ImageHeight));var e=$("<span>").hide().addClass(this._cmm.settings.CssClasses.ErrorText);
this._addCommentTextArea=$("<textarea>").prop("rows",1).attr("aria-label",this._cmm.settings.Resources.PostCommentTextAreaWatermark).on("input paste",function(){a.validateTextArea(a._addCommentTextArea,e,b)});this.makeTextAreaAutoResizable(this._addCommentTextArea);this.updatePlaceholder(this._addCommentTextArea);c=this.renderPostOrEditButtonPanel($("<div>"),!0,e,function(){a.tryAddNewComment(e)});this._settings.HidePersonPictures||b.append(d);b.append(this._addCommentTextArea,c,e);return b};c.prototype.renderPostOrEditButtonPanel=
function(a,b,c,d){return a.addClass(this._cmm.settings.CssClasses.PostButtonPanel).append($("<input />").prop("type","submit").addClass(this._cmm.settings.CssClasses.PostButton).val(b?this._cmm.settings.Resources.PostCommentButtonText:this._cmm.settings.Resources.EditCommentButtonText).click(function(a){d();a.preventDefault()}))};c.prototype.tryAddNewComment=function(a){a.is(":visible")||(a=this._addCommentTextArea.val(),0<a.trim().length&&(this.addNewComment(a),this._addCommentTextArea.val("").trigger("change")))};
c.prototype.validateTextArea=function(a,b,c){a=a.val().length;a>this._cmm.settings.CommentMaxLength?(b.text(d.CommonFunctions.formatString(this._cmm.settings.Resources.TextTooLongError,this._cmm.settings.CommentMaxLength,a)),b.show(),c.addClass(this._cmm.settings.CssClasses.ErrorArea)):(c.removeClass(this._cmm.settings.CssClasses.ErrorArea),b.hide())};c.prototype.focusInputArea=function(){this._addCommentTextArea&&this._addCommentTextArea.focus()};c.prototype.updateLoadMoreLink=function(a,b){if(0<
b){var c;c=!a._settings.PageSize||0>=a._settings.PageSize||(a._wasDataSourceFetchedAtLeastOnce||0===a._settings.NumberOfPreviouslyReadItemsToDisplay?a._settings.PageSize:Math.min(a._settings.NumberOfPreviouslyReadItemsToDisplay,a._settings.PageSize))>=b?1===b?a._cmm.settings.Resources.ShowOneMoreComment:d.CommonFunctions.formatString(a._cmm.settings.Resources.ShowXMoreComments,b):a._cmm.settings.Resources.ShowMoreComments;a._loadMoreLink.text(c);a._loadMoreLinkContainer.show()}};c.prototype.addNewComment=
function(a){this._onAddCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):(this._sending=!0,this._onAddCommentFunction(this,this._userData,a,this._newestCommentId,this.addNewCommentSuccess,this.addNewCommentFault)))};c.prototype.addNewCommentSuccess=function(a,b){a._sending=!1;b&&a.fillCommentList(b.Items,!0)};c.prototype.addNewCommentFault=function(a,b){a._sending=!1;alert(a._cmm.settings.Resources.AddCommentError)};c.prototype.editCommentSuccess=function(a,b){a._sending=
!1;b&&a.renderComment(b,!1,!0)};c.prototype.editCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.EditCommentError);b&&(b=a.getCommentPnlById(a._list,b))&&(a=b.find("."+a._cmm.settings.CssClasses.CommentText),a.html(a.data("originalText")),a=b.find("textarea"),a.val(a.data("originalText")))};c.prototype.deleteComment=function(a,b){confirm(this._cmm.settings.Resources.DeleteConfirmation)&&this._onDeleteCommentFunction&&(this._sending?alert(this._cmm.settings.Resources.TooManyRequestError):
(this._sending=!0,this._onDeleteCommentFunction(this,this._userData,a,this.deleteCommentSuccess,this.deleteCommentFault),b.hide()))};c.prototype.deleteCommentSuccess=function(a,b,c){a._sending=!1;b&&(b=a.getCommentPnlById(a._list,b))&&(b.remove(),a._list.toggle(!a._list.is(":empty")))};c.prototype.deleteCommentFault=function(a,b,c){a._sending=!1;alert(a._cmm.settings.Resources.DeleteCommentError);b&&(a=a.getCommentPnlById(a._list,b))&&a.show()};c.prototype.loadOldCommentsSuccess=function(a,b){b&&
(a.fillCommentList(b.Items,!1),a._loadMoreLinkContainer.hide(),a.updateLoadMoreLink(a,b.VirtualCount-b.Items.length))};c.prototype.loadOldCommentsFault=function(a,b){a._sending=!1};c.prototype.makeTextAreaAutoResizable=function(a){setTimeout(function(){a.autogrow()},0)};c.prototype.updatePlaceholder=function(a){var b=this;setTimeout(function(){a.prop("placeholder",b._cmm.settings.Resources.PostCommentTextAreaWatermark)},0)};c.prototype.stringToDate=function(a){return new Date(parseInt(this._stringToDateRegex.exec(a)[0]))};
c.prototype.encodeText=function(a){return d.CommonFunctions.replaceLineBreaksWithBrTags(d.CommonFunctions.htmlEncode(a))};c.prototype.getCommentPnlById=function(a,b){var c=null;a.children(":data(commentId)").each(function(a,d){var e=$(d);if(e.data("commentId")==b)return c=e,!1});return c};return c}(d.DomElementClass);d.CommentModule=e})(CCL||(CCL={}));jQuery.fn.extend({getCommentModuleObject:function(){return this.data("CommentModule")}});
(function(d){var e=function(e){function c(a,b){"undefined"==typeof gapi&&(b.ReadOnly=!0);this._scope=b.Scope;this._clientId=b.ClientId;this._applicationKey=b.ApplicationKey;this._multiselectAllowed=b.MultiselectAllowed;this._allowedFileTypeExtensions=b.AllowedFileTypeExtensions;this._interFrameMessageName=b.InterFrameMessageName;this._downloadUrlTemplate="https://www.googleapis.com/drive/v2/files/{fileid}?key={appkey}";this._chooseButton=$("."+b.PickerControlCssClass);this.googleSheetMimeType="application/vnd.google-apps.spreadsheet";
e.call(this,a,b)}__extends(c,e);c.prototype.Init=function(){var a=this;this._chooseButton.prop("disabled",!0);this._settings.ReadOnly||(this._chooseButton.on("click",function(b){gapi.auth.getToken()?a.showPicker():a.doAuth(!1,function(a){this.showPicker()}.bind(a))}),this._chooseButton.on("keydown",function(b){if(13===b.which||32===b.which)b.preventDefault(),a._chooseButton.click()}),d.CommonFunctions.attachPostMessageEventListener($(window),this._interFrameMessageName,function(a,c){window!=c||a.origin?
(this._origin=a.origin,this._chooseButton.prop("disabled",!1)):this._origin=window.location.protocol+"//"+window.location.host}.bind(this)),gapi.load("picker",{callback:function(){c.prototype.pickerApiLoad.call(this)}.bind(this)}),this.UpdateFileList(this.GetFiles()));this._uploadedFiles=[]};c.prototype.pickerApiLoad=function(){this.doAuth(!0,function(){d.CommonFunctions.makePostMessageCall(window.top,{messageName:this._interFrameMessageName.toString()})}.bind(this))};c.prototype.doAuth=function(a,
b){gapi.auth.authorize({client_id:this._clientId,scope:this._scope,immediate:a},b)};c.prototype.showPicker=function(){var a=gapi.auth.getToken().access_token,a=(new google.picker.PickerBuilder).addViewGroup((new google.picker.ViewGroup(this.preparePickerView(google.picker.ViewId.DOCS))).addView(this.preparePickerView(google.picker.ViewId.DOCS_IMAGES)).addView(this.preparePickerView(google.picker.ViewId.DOCS_VIDEOS)).addView(this.preparePickerView(google.picker.ViewId.DOCUMENTS)).addView(this.preparePickerView(google.picker.ViewId.DRAWINGS)).addView(this.preparePickerView(google.picker.ViewId.FOLDERS)).addView(this.preparePickerView(google.picker.ViewId.PDFS)).addView(this.preparePickerView(google.picker.ViewId.PHOTOS)).addView(this.preparePickerView(google.picker.ViewId.PRESENTATIONS)).addView(this.preparePickerView(google.picker.ViewId.SPREADSHEETS))).setOAuthToken(a).setDeveloperKey(this._applicationKey).setOrigin(this._origin).setCallback(function(a){this.pickerCallback(a)}.bind(this));
this._multiselectAllowed&&a.enableFeature(google.picker.Feature.MULTISELECT_ENABLED);a.build().setVisible(!0)};c.prototype.preparePickerView=function(a){a=new google.picker.DocsView(a);a.setIncludeFolders(!0);a.setParent("root");return a};c.prototype.pickerCallback=function(a){var b=this;if(a[google.picker.Response.ACTION]==google.picker.Action.PICKED){this._selectedFiles=this.ConvertSelectedFiles(a[google.picker.Response.DOCUMENTS]);for(a=this._selectedFiles.length-1;0<=a;a--)this._selectedFiles[a].name=
this.ProcessFileName(this._selectedFiles[a].name);this.UpdateFileList(this._selectedFiles);var c=[];if(0<this._selectedFiles.length){var d={};d.Authorization="Bearer "+gapi.auth.getToken().access_token;this._selectedFiles.forEach(function(a){var e=b.ComposeDownloadUrl(a.fileId);$.support.cors||(e=b._settings.GoogleDriveProxy+encodeURIComponent(e));c.push($.ajax({url:e,type:"GET",data:"",headers:d,success:function(c){var d=!1;if(c.downloadUrl)a.fileUrl=c.downloadUrl+"&"+b._settings.TokenPlaceholderInQuerystring+
"="+gapi.auth.getToken().access_token;else if(c.exportLinks&&c.exportLinks[Object.keys(c.exportLinks)[0]]){d=a.type===b.googleSheetMimeType;a.type=c.exportLinks["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]?"application/vnd.openxmlformats-officedocument.wordprocessingml.document":c.exportLinks["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]?"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":c.exportLinks["image/png"]?"image/png":c.exportLinks["application/vnd.openxmlformats-officedocument.presentationml.presentation"]?
"application/vnd.openxmlformats-officedocument.presentationml.presentation":c.exportLinks["application/pdf"]?"application/pdf":Object.keys(c.exportLinks)[0];a.fileUrl=c.exportLinks[a.type]+"&"+b._settings.TokenPlaceholderInQuerystring+"="+gapi.auth.getToken().access_token;var e=b.getParameterValue(a.fileUrl,"exportFormat");if(e){var f=a.name,e="."+e;a.name.substr(-e.length)!==e&&(a.name+=e);b.UpdateFileName(a,f)}}else a.error=b._settings.UnsupportedDownloadTypeErrorText;a.thumbnailUrl=c.thumbnailLink;
b.checkFileSize(a,d)},error:function(){a.error=b._settings.UploadErrorText}}))});$.when.apply($,c).done(function(){b.ValidateSelectedFiles(b._selectedFiles,b._allowedFileTypeExtensions);b.StartUploadFiles(b._selectedFiles)})}}};c.prototype.checkFileSize=function(a,b){0==a.size&&(a.size=this.getFileSize(a,b),this.UpdateFileSize(a))};c.prototype.getFileSize=function(a,b){var c=0,d=this.getFileUrl(a.fileUrl,b);try{c=this.getContentLength(d)}catch(e){a.error=this._settings.UploadErrorText}return c};c.prototype.getFileUrl=
function(a,b){return b?this._settings.GoogleDriveProxy+encodeURIComponent(a):a};c.prototype.getContentLength=function(a){var b=0,c=new XMLHttpRequest;c.open("HEAD",a,!1);c.send();200==c.status&&(b=parseInt(c.getResponseHeader("Content-Length")));return b};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl+"&"+this._settings.FileRepoFileSizeParam+"="+a.size};c.prototype.AddAdditionalHeadersToDownloadFile=function(a,b){a[this._settings.FileRepoHeaderGoogleDriveFileSize]=
b.size};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{fileId:a[google.picker.Document.ID],name:a[google.picker.Document.NAME],type:a[google.picker.Document.MIME_TYPE],icon:a[google.picker.Document.ICON_URL],size:a.sizeBytes}}):[]};c.prototype.ComposeDownloadUrl=function(a){return this._downloadUrlTemplate.replace("{fileid}",a).replace("{appkey}",this._applicationKey)};c.prototype.ClearResults=function(a){var b=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=
$(this);a.hasClass("clearme")||0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();e.prototype.ClearResults.call(this,a);this.Trigger(d.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};return c}(d.FilePickerBase);d.GoogleDrivePicker=e})(CCL||(CCL={}));
(function(d){d.ControlTabsEvent={Initialized:"ControlTabsInitialized",TabIndexChanged:"ControlTabsSelectedIndexChanged"};var e=function(e){function c(a,b){e.call(this,a);this._settings=b;this.InitControls();this.RunControlInitializationCallback()}__extends(c,e);c.prototype.SetCurrentTab=function(a){this.GetCurrentTab()!==a&&$(this._tabItemLinks[a]).click()};c.prototype.GetCurrentTab=function(){return parseInt(this._selectedTabIndexHolder.val())};c.prototype.GetTabsCount=function(){return this._tabItemLinks.length};
c.prototype.SetTabEnabled=function(a,b){(a=a&&this.IsTabAvailable(b))?($(this._tabItemLinks[b]).removeClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!1)):($(this._tabItemLinks[b]).addClass("disabled"),$(this._mobileSelect.find("> option")[b]).prop("disabled",!0))};c.prototype.SetTabNotAvailable=function(a){$(this._tabItemLinks[a]).addClass("tabIsNotAvailable");this.SetTabEnabled(!1,a)};c.prototype.UpdateTabImageUrl=function(a,b){$(this._tabItemLinks[a]).find("img").attr("src",
b)};c.prototype.IsTabAvailable=function(a){return!$(this._tabItemLinks[a]).hasClass("tabIsNotAvailable")};c.prototype.SetTabToolTip=function(a,b){$(this._tabs[a]).attr("title",b)};c.prototype.InitControls=function(){var a=this;this._tabsList=this._elem.find("ul."+this._settings.TabsCssClass);this._mobileSelect=this._elem.find("select."+this._settings.TabsCssClass);this._selectedTabIndexHolder=this._elem.find("#"+this._settings.TabIndexHolderClientId);this._tabs=this._elem.find("ul > li > h2");this._tabItemLinks=
this._elem.find("ul > li > h2 > a");this._tabItemLinks.each(function(b,c){a.InitTabItem(b,c)});$(this._tabItemLinks[this._settings.CurrentlySelectedTabIndex]).click();this.Trigger(d.ControlTabsEvent.Initialized)};c.prototype.RunControlInitializationCallback=function(){var a=d.Callbacks.GetFunctionByName(this._settings.OnControlInitialization,null);void 0!==a&&null!==a&&a(this)};c.prototype.InitTabItem=function(a,b){var c=this,d=$(b);$(d.data("contentid")).addClass(this._settings.TabContentCssClass).addClass(this._settings.ClearLeftCssClass).hide();
d.on("click",function(a){c.OnTabChanged(a)})};c.prototype.OnTabChanged=function(a){var b=$(a.currentTarget);if(b.hasClass("disabled"))return!1;a=b.closest("li");var b=$(b.data("contentid")),c=a.data("tabitemindex");this._tabsList.find("> li").removeClass(this._settings.ActiveTabCssClass);a.addClass(this._settings.ActiveTabCssClass);this._tabItemLinks.each(function(a,b){$($(b).data("contentid")).hide()});b.show();this._mobileSelect.prop("selectedIndex",c);this._selectedTabIndexHolder.val(c);this.Trigger(d.ControlTabsEvent.TabIndexChanged,
{selectedTab:c});return!1};return c}(d.DomElementClass);d.ControlTabs=e})(CCL||(CCL={}));
(function(d){var e=function(e){function c(a,b){"undefined"==typeof Dropbox&&(b.ReadOnly=!0);e.call(this,a,b)}__extends(c,e);c.prototype.Init=function(){var a=this;this._settings.ReadOnly||(this._chooseButton=$(Dropbox.createChooseButton({success:function(b){if(!(a._elem.hasClass("disabled")||0<a._resultsTable.find("tr").length)){b=a.ConvertSelectedFiles(b);for(var c=b.length-1;0<=c;c--)b[c].name=a.ProcessFileName(b[c].name);a.ValidateSelectedFiles(b,null);a.UpdateFileList(b);0<b.length&&a.StartUploadFiles(b)}},
linkType:"direct",multiselect:this._settings.MultiselectAllowed,extensions:this._settings.AllowedFileTypeExtensions})),this._elem.append(this._chooseButton));this.UpdateFileList(this.GetFiles())};c.prototype.ConvertSelectedFiles=function(a){return a?$.map(a,function(a,c){return{name:a.name,size:a.bytes,thumbnailUrl:a.thumbnailLink,fileUrl:a.link,icon:a.icon}}):[]};c.prototype.ClearResults=function(a){var b=!0;this._resultsTable.find("tbody").find("tr").each(function(){var a=$(this);a.hasClass("clearme")||
0===a.find(".error").length?a.remove():(b=!1,a.addClass("clearme"))});b&&this._chooseButton.show();e.prototype.ClearResults.call(this,a);this.Trigger(d.PickerEvent.ResultsChanged,{results:[]})};c.prototype.AllowHide=function(){return 0===this._resultsTable.find("tbody").find("tr .error").length};c.prototype.buildDownloadRequestData=function(a){return this._settings.FileRepoHeaderDownloadFrom+"="+a.fileUrl};return c}(d.FilePickerBase);d.DropboxPicker=e})(CCL||(CCL={}));
(function(d){var e=function(e){function c(a,b){this._chooseButton=$(".ccl-fileuploader-button").children("input");this.fileUploaderContainer=$(".ccl-fileuploader-container");c.confirmReplaceMessage=b.ConfirmReplaceMessageText;e.call(this,a,b)}__extends(c,e);c.ConfirmReplaceFile=function(){return confirm(c.confirmReplaceMessage)};c.prototype.Init=function(){var a=this;this._chooseButton.focusin(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")}).focusout(function(b){a._chooseButton.parent().toggleClass("ccl-button-color-green-highlight")});
this._elem.on("fileuploadstarted",function(){a.ToggleOkButton(!0);a.Trigger(d.PickerEvent.Started)}).on("fileuploadadd",function(b){for(var c=[],e=0;e<arguments.length-1;e++)c[e]=arguments[e+1];a.Trigger(d.PickerEvent.Added,c[0])}).on("fileuploadstopped",function(b){for(var c=[],e=0;e<arguments.length-1;e++)c[e]=arguments[e+1];c[0].results=a.fileUploaderContainer.fileupload("getUploadedFiles");a.Trigger(d.PickerEvent.Stopped,c[0]);a.ToggleOkButton(!1)}).on("fileuploadresultschanged",function(b){for(var c=
[],e=0;e<arguments.length-1;e++)c[e]=arguments[e+1];a.Trigger(d.PickerEvent.ResultsChanged,c[0])}).on("fileuploadsubmit",function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];c=c[0];c.url=a.GetFileRepoUrlForFileName(a.ProcessFileName(c.files[0].name));c.xhrFields={withCredentials:!0}}).on("fileuploaddestroy",function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];c=c[0];c.url&&(c.url+="&"+a._settings.MethodOverrideQueryStringParam+"=delete");c.type="GET";c.xhrFields=
{withCredentials:!0}}).on("fileuploaddone",function(b){for(var c=[],d=0;d<arguments.length-1;d++)c[d]=arguments[d+1];(c=c[0])&&c.result&&c.result.fileId&&c.result.signature&&(d={deleteUrl:a.GetFileRepoUrl(c.result.signature),fileUrl:a.GetFileRepoUrl(c.result.signature),id:c.result.fileId,signedId:c.result.signature,name:c.result.fileName,size:c.result.fileSize,type:c.result.mimeType,thumbnailUrl:a._settings.DefaultThumbnailUrl,isNew:!0},c.result.files=[d])})};c.prototype.ClearResults=function(){this.fileUploaderContainer.fileupload("clearResults")};
c.prototype.AllowHide=function(){return this.fileUploaderContainer.fileupload("allowHide")};return c}(d.FilePickerBase);d.FilePicker=e})(CCL||(CCL={}));var tmpl,FileRepoUploaderInstance;
(function(d){d.FileRepoUploaderEvent={PickerChanged:"FileRepoUploaderPickerChanged",ResultsChanged:"FileRepoUploaderResultsChanged"};var e=function(e){function c(a,b){var c=this;e.call(this,a);this._pickers=[];this._inlineModeFileList=[];this._inlineModeFileKeys={};this._removedFiles=[];this._changedFiles={};this._settings=b;this._currentTabIndex=-1;FileRepoUploaderInstance=this;$("#"+this._settings.ControlTabsClientId).on(d.ControlTabsEvent.TabIndexChanged,function(a){for(var b=[],e=0;e<arguments.length-
1;e++)b[e]=arguments[e+1];c._currentTabIndex!==b[0].selectedTab&&(c._currentTabIndex=b[0].selectedTab,b=c._pickers[c._currentTabIndex])&&(c.UpdateTabIndex(b),c.Trigger(d.FileRepoUploaderEvent.PickerChanged,{selectedPicker:b}))});this._elem.on(d.PickerEvent.Initialized,function(a){a=d.DomElementClass.GetInstanceForElement(a.target.id);c._pickers.push(a);1==c._pickers.length&&c._settings.IsEmpty&&c.Trigger(d.FileRepoUploaderEvent.PickerChanged,{selectedPicker:c._pickers[0]});c._pickers.length===c.GetControlTabs().GetCurrentTab()+
1?a.AddChildElementsToTheTabOrder():a.RemoveChildElementsFromTheTabOrder()});this._elem.on(d.PickerEvent.ResultsChanged,function(a){for(var b=[],e=0;e<arguments.length-1;e++)b[e]=arguments[e+1];var e=d.DomElementClass.GetInstanceForElement(a.target.id),b=b[0].results,f=c._settings.ReadOnly?c.GetControlTabs().GetCurrentTab():c._pickers.indexOf(e);c.GetControlTabs().SetCurrentTab(f);c.HandleResultsChanges(b,f);c.Trigger(d.FileRepoUploaderEvent.ResultsChanged,{results:b,picker:e})});this._elem.on(d.PickerEvent.Started,
function(a){for(var b=0;b<arguments.length-1;b++);b=d.DomElementClass.GetInstanceForElement(a.target.id);b=c._settings.ReadOnly?c.GetControlTabs().GetCurrentTab():c._pickers.indexOf(b);c.HandleResultsChanges([{}],b)});if(b.InlineMode){this._elem.on(d.PickerEvent.Added,function(a){for(var d=[],e=0;e<arguments.length-1;e++)d[e]=arguments[e+1];(b.UniqueFileNamesOnly||c.CanCheckFileNames())&&d[0].files.forEach(function(a){b.UniqueFileNamesOnly&&c._filesContainer.find("td.name").toArray().forEach(function(d){if(d.innerText===
a.name)if(confirm(b.FileAlreadyExistsDialogText.replace("{0}",a.name))){d=$(d).closest("."+b.FileListRowCssClass);var e=d.find("a."+b.RemoveActionCssClass),e=$(e).data("filekey"),e=c.GetFileByKey(e);c.RemoveFile(e,d)}else a.error=b.FileAlreadyExistsErrorMessage});!a.error&&c.CanCheckFileNames()&&(a.error=c.GetFileNameValidation(a.name))})});this._elem.on(d.PickerEvent.Stopped,function(a){for(var b=[],e=0;e<arguments.length-1;e++)b[e]=arguments[e+1];c.UpdateFileList(b[0].results,!0,null);c.UpdateFileListState(c._inlineModeFileList);
var e=b[0].results&&0<b[0].results.length&&c._expandableContainer.getIsExpandedState(),f=d.DomElementClass.GetInstanceForElement(a.target.id);f.ClearResults(b[0].results);e&&f.AllowHide()&&c._expandableContainer.toggle()});this._elem.on("hybrideditoritemtextupdated",function(a){for(var e=[],f=0;f<arguments.length-1;f++)e[f]=arguments[f+1];var f=$(a.target).closest("."+b.FileListRowCssClass),h=f.find("a."+b.RemoveActionCssClass),h=$(h).data("filekey"),h=c.GetFileByKey(h),e=e[0].value;e||(e="(empty)",
f.find("."+b.FileNameContainerCssClass).text(e));h.rawFilename=e;h.name=h.rawFilename;h.extension&&(h.name+=h.extension);c._changedFiles[h.id]=h;c._changedFilesStateHidden.val(JSON.stringify(c._changedFiles));c.UpdateFileListState(c._inlineModeFileList);e=c._pickers[c.GetControlTabs().GetCurrentTab()];c.Trigger(d.FileRepoUploaderEvent.ResultsChanged,{results:c._inlineModeFileList,picker:e})});this._expandableContainer=new ExpandableContainer(this._elem,{expander:$("#"+this._settings.ExpandableHeaderClientId),
target:$("#"+this._settings.ExpandableContentClientId)});this._filesContainer=$("#"+b.FileListContainerId);this._filesContainer.on("click","."+this._settings.RemoveActionCssClass,function(a){var b=$(a.target).data("filekey"),b=c.GetFileByKey(b);a=$(a.target).closest("."+c._settings.FileListRowCssClass);c.RemoveFile(b,a)});this._filesContainer.on("click","."+this._settings.ViewActionCssClass,function(a){a=$(a.target).data("filekey");a=c.GetFileByKey(a);c.OpenFile(a,!0)});this._filesContainer.on("click",
"."+this._settings.EditActionCssClass,function(a){a=$(a.target).data("filekey");a=c.GetFileByKey(a);c.OpenFile(a,!1)});this._filesContainer.on("click","."+this._settings.DownloadActionCssClass,function(a){a=$(a.target).data("filekey");a=c.GetFileByKey(a);c.DownloadFile(a)});$("#"+this._settings.ViewDialogId).on("click",".ccl-button-ok",function(a){c._openedForEditing&&(a=$(".ccl-cssmodal-modal-iframe").attr("src"),$(".ccl-cssmodal-modal-iframe").attr("src",a))});this._templatesContainer=document.createElement(this._filesContainer.prop("nodeName"));
tmpl&&(this._fileListItemTemplate=tmpl(b.FileListItemTemplateId));this._fileListStateHidden=$("#"+this._settings.FileListHiddenStateClientId);var h=this.ReadFileList();0<h.length&&this.UpdateFileList(h,!1,null);this._changedFilesStateHidden=$("#"+this._settings.ChangedFilesHiddenStateClientId);this._removedFilesStateHidden=$("#"+this._settings.RemovedFilesHiddenStateClientId)}else this._elem.on(d.PickerEvent.Added,function(a){for(var b=[],d=0;d<arguments.length-1;d++)b[d]=arguments[d+1];b=b[0];c.CanCheckFileNames()&&
b.files.forEach(function(a){a.error||(a.error=c.GetFileNameValidation(a.name))})})}__extends(c,e);c.prototype.CanCheckIllegalCharacters=function(){return this._settings.IllegalCharacters&&0<this._settings.IllegalCharacters.length?!0:!1};c.prototype.CanCheckIllegalFileNames=function(){return this._settings.IllegalFileNames&&0<this._settings.IllegalFileNames.length?!0:!1};c.prototype.CanCheckFileNames=function(){return this.CanCheckIllegalCharacters||this.CanCheckIllegalFileNames};c.prototype.GetFileNameValidation=
function(a){var b=[];if(this.CanCheckIllegalCharacters())for(var c=this._settings.IllegalCharacters.length,d=0;d<c;d++)this._settings.IllegalCharacters[d]&&-1<a.indexOf(this._settings.IllegalCharacters[d])&&b.push(this._settings.IllegalCharacters[d]);if(this.CanCheckIllegalFileNames())for(a=a.split(".")[0],c=this._settings.IllegalFileNames.length,d=0;d<c;d++)this._settings.IllegalFileNames[d]&&a.toUpperCase()===this._settings.IllegalFileNames[d].toUpperCase()&&b.push(this._settings.IllegalFileNames[d]);
return 0<b.length?(c=b.filter(function(a,c){return b.indexOf(a)==c}),this._settings.FileNameInvalidErrorMessage.replace("{0}",c.join(" "))):null};c.prototype.AddExternalFile=function(a){var b=[];b.push(JSON.parse(JSON.stringify(a)));this.UpdateFileList(b,!0,null);this.UpdateFileListState(this._inlineModeFileList)};c.prototype.ReplaceExternalFile=function(a,b){var c=[],d=JSON.parse(JSON.stringify(b));c.push(d);d=this._filesContainer.find("[id$="+a+"]").closest("."+this._settings.FileListRowCssClass);
this.UpdateFileList(c,!0,d);this.UpdateFileListState(this._inlineModeFileList);c=this.GetFileByKey(a);this.RemoveFile(c,d)};c.prototype.RemoveFile=function(a,b){a.deleteUrl?$.ajax({url:a.deleteUrl+"&"+this._settings.MethodOverrideQueryStringParam+"=delete",type:"GET",xhrFields:{withCredentials:!0}}):(this._removedFiles.push(a.id),this._removedFilesStateHidden.val(JSON.stringify(this._removedFiles)));this.RemoveFileFromList(a,b)};c.prototype.RemoveFileFromList=function(a,b){b.remove();this._changedFiles[a.id]&&
(delete this._changedFiles[a.id],this._changedFilesStateHidden.val(JSON.stringify(this._changedFiles)));this._inlineModeFileList.splice(this._inlineModeFileList.indexOf(a),1);this.UpdateFileListState(this._inlineModeFileList);var c=this._pickers[this.GetControlTabs().GetCurrentTab()];this.Trigger(d.FileRepoUploaderEvent.ResultsChanged,{results:this._inlineModeFileList,picker:c})};c.prototype.OpenFile=function(a,b){if(!b&&this.ShouldBeEditedUsingDirectEdit(a)){var c=this._settings.DirectEditUrl,c=
c.replace("{fileName}",encodeURIComponent(a.name)),c=c.replace("{fileId}",encodeURIComponent(a.id));window.open(c,"","height = 300, width = 500, toolbar = no, scrollbars = no, status = no, menubars = no, resizable = yes")}else{var c=this._settings.ViewEditUrl,c=c.replace("{fileName}",encodeURIComponent(a.name)),c=c.replace("{viewOnly}",b.toString()),c=c.replace("{fileRepoId}",encodeURIComponent(a.signedId)),d;d=a.modified?new Date(a.modified):new Date;this._openedForEditing=!b;c=c.replace("{uniqueId}",
this.convertToTicks(d).toString());d=this.IsOwasFileType(a.type);var e=0,f=0;if(d){if(this._settings.UseModalForOWASFiles){this.OpenInModalDialog(e,f,a.name,c,d);return}}else if(this._settings.UseModalForFilesDifferentThanOWAS){this.isEmbeddedVideo(a.type)&&(e=400,f=300);this.OpenInModalDialog(e,f,a.name,c,!1);return}this.OpenInWindow(c)}};c.prototype.OpenInWindow=function(a){var b=window.open(a,"","width="+.8*screen.width+", height="+.8*screen.height+",location = 0, directories = 0, toolbar = 0, scrollbars = 0, status = 0, menubars = 0, resizable = 1");
this.CheckIfBrowserIsOldIE&&this.AttachEventForOldIE(b,"onload",function(){$("head",b.document).append('<style type="text/css">html,body{height:100%}html{width:auto;margin-top:-8px;}</style>')})};c.prototype.CheckIfBrowserIsOldIE=function(){var a=navigator.userAgent.toLowerCase();return-1!=a.indexOf("msie")?9>=parseInt(a.split("msie")[1])?!0:!1:!1};c.prototype.AttachEventForOldIE=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent(b,c):a[b]=c};c.prototype.OpenInModalDialog=
function(a,b,c,d,e){var f=this.GetDialog();f.setContentMinSize(a,b);f.setTitle(c);f.setAjaxUrl(d);f.openDialog(e)};c.prototype.IsOwasFileType=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a)};c.prototype.ShouldBeEditedUsingDirectEdit=function(a){return this._settings.UseDirectEdit&&!this.IsEditableOwasFile(a)};c.prototype.IsEditableOwasFile=function(a){return 0<=this._settings.OWASMimeTypes.indexOf(a.type)&&0<=this._settings.EditableMimeTypes.indexOf(a.type)};c.prototype.convertToTicks=
function(a){return 621355968E9+1E4*a.getTime()};c.prototype.DownloadFile=function(a){a=this._settings.DownloadRedirectUrl.replace(this._settings.FileRepoFileIdToken,encodeURIComponent(a.signedId));window.open(a)};c.prototype.IsViewSupported=function(a){return a?0<=this._settings.ViewMimeTypes.indexOf(a):!1};c.prototype.IsEditingAllowed=function(a){return a?0<=this._settings.EditableMimeTypes.indexOf(a)&&this._settings.IsFileEditingAllowed:!1};c.prototype.isEmbeddedVideo=function(a){return a?0<=this._settings.EmbedVideoMimeTypes.indexOf(a):
!1};c.prototype.GetDialog=function(){return window[this._settings.ViewDialogId]};c.prototype.HandleResultsChanges=function(a,b){for(var c=this.GetControlTabs(),d=c.GetTabsCount(),e=a&&0<a.length,f=0;f<d;f++){var m=c.IsTabAvailable(f);c.SetTabEnabled(e?f==b:m,f);c.SetTabToolTip(f,this.GetTooltipForTab(e?b:f,f))}};c.prototype.GetTooltipForTab=function(a,b){return this._settings.DisabledTabTextForPickers.filter(function(b){return b.PickerIndex===a})[0].Tooltips.filter(function(a){return a.PickerIndex===
b})[0].Tooltip};c.prototype.GetControlTabs=function(){this._controlTabsControl||(this._controlTabsControl=d.DomElementClass.GetInstanceForElement(this._settings.ControlTabsClientId));return this._controlTabsControl};c.prototype.ReadFileList=function(){return this._fileListStateHidden&&this._fileListStateHidden.val()?JSON.parse(this._fileListStateHidden.val()):JSON.parse("[]")};c.prototype.GetRemovedFileIds=function(){return this._removedFilesStateHidden&&this._removedFilesStateHidden.val()?JSON.parse(this._removedFilesStateHidden.val()):
JSON.parse("[]")};c.prototype.GetChangedFilesDictionary=function(){return this._changedFilesStateHidden&&this._changedFilesStateHidden.val()?JSON.parse(this._changedFilesStateHidden.val()):JSON.parse("{}")};c.prototype.UpdateFileListState=function(a){this._fileListStateHidden.val(JSON.stringify(a))};c.prototype.UpdateFileList=function(a,b,c){var d=this,e=this;a.forEach(function(a){a.thumbnailUrl=e.GetFileIcon(a.name);d._inlineModeFileList.push(a);d._inlineModeFileKeys[a.id]=a;var b=a.name.split(".");
if(1<b.length){a.rawFilename=b[0];if(2<b.length)for(var c=1;c<=b.length-2;c++)a.rawFilename+="."+b[c];a.extension="."+b[b.length-1]}else a.rawFilename=a.name});a&&0<a.length&&(a=this.RenderTemplate(this._fileListItemTemplate,a,b),c&&0<c.length?c.after(a):a.appendTo(this._filesContainer),b&&DropDownMenu.initialize(),a.find("."+this._settings.ViewActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));return!e.IsViewSupported(a.type)}).closest("li").hide(),this._settings.UseDirectEdit||
a.find("."+this._settings.EditActionCssClass).filter(function(){var a=e.GetFileByKey($(this).data("filekey"));return!e.IsEditingAllowed(a.type)}).closest("li").hide());var f=this;$(".ccl-hybrideditoritem").each(function(){f.fixSize($(this))})};c.prototype.fixSize=function(a){a.css("width","0px");setTimeout(function(){a.css("width","auto")},10)};c.prototype.RenderTemplate=function(a,b,c){if(!a)return $();a=a({files:b,delayMenuInit:c});return a instanceof $?a:$(this._templatesContainer).html(a).children()};
c.prototype.GetFileIcon=function(a){a=this.GetFileExtension(a);if(this._settings.FileTypeIcons)return this._settings.FileTypeIcons[a]||this._settings.DefaultFileIcon};c.prototype.GetFileExtension=function(a){a=a.split(".");return 1>=a.length?"":a.pop().toLowerCase()};c.prototype.GetFileByKey=function(a){return this._inlineModeFileKeys[a]};c.prototype.GetFilenameEditorItemSettings=function(){return{editModeEnabled:"inline",inlineEditorOptions:{blockedCharacters:this._settings.IllegalCharacters,editFieldAutoWidth:!1,
editFieldDisplayInline:!0,editFieldCssClass:this._settings.FileNameEditorCssClass,forceContainerSize:!0,maxLength:255}}};c.prototype.UpdateTabIndex=function(a){this._pickers.forEach(function(b,c){b!=a?b.RemoveChildElementsFromTheTabOrder():b.AddChildElementsToTheTabOrder()})};return c}(d.DomElementClass);d.FileRepoUploader=e})(CCL||(CCL={}));
(function(d){var e=function(){function d(c,a,b){"undefined"===typeof b&&(b=null);this._form=c;this._warningMessage=a;this._options=b;this._textInputs=c.find("input[type=text],textarea");this._hybridEditors=c.find("div.ccl-hybrideditoritem > input[type=hidden]");this._checkboxesRadios=c.find("input[type=checkbox],input[type=radio]");this._selects=c.find("select");this._textInputs.each(function(a,b){var c=$(b);c.data(d.InitialValueDataKey,c.val())});this._hybridEditors.each(function(a,b){var c=$(b);
c.data(d.InitialValueDataKey,c.val())});this._checkboxesRadios.each(function(a,b){var c=$(b);c.data(d.InitialValueDataKey,c.is(":checked"))});this._selects.each(function(a,b){var c=$(b);c.data(d.InitialValueDataKey,c.find(":selected").val())});this.AttachHandler();c.submit($.proxy(this.DetachHandler,this));b&&b.cancelButtonId&&$(document.getElementById(b.cancelButtonId)).click($.proxy(this.DetachHandler,this))}d.prototype.IsDirty=function(){return 1==this._form.data(d.DirtyFormDataKey)};d.prototype.SetDirty=
function(c){c=c?1:0;this._form.data(d.DirtyFormDataKey,c);this._form.trigger("dirtyChanged",c)};d.prototype.AttachHandler=function(){if(!this._isAttached){var c=$.proxy(this.OnBeforeUnloadHandler,this);$(window).on(d.EventBeforeunload,c);this._isAttached=!0}};d.prototype.DetachHandler=function(){if(this._isAttached){var c=$.proxy(this.OnBeforeUnloadHandler,this);$(window).off(d.EventBeforeunload,c);this._isAttached=!1}};d.prototype.OnBeforeUnloadHandler=function(){var c=this.IsDirty();c||this._textInputs.each(function(a,
e){var h=$(e);if(h.is(":visible")&&h.val()!=h.data(d.InitialValueDataKey))return c=!0,!1});c||this._hybridEditors.each(function(a,e){var h=$(e);if(h.val()!=h.data(d.InitialValueDataKey))return c=!0,!1});c||this._checkboxesRadios.each(function(a,e){var h=$(e);if(h.is(":visible")&&h.is(":checked")!=h.data(d.InitialValueDataKey))return c=!0,!1});c||this._selects.each(function(a,e){var h=$(e);if(h.is(":visible")&&h.find(":selected").val()!=h.data(d.InitialValueDataKey))return c=!0,!1});if(!c&&window.CKEDITOR&&
CKEDITOR.instances)for(var a in CKEDITOR.instances)if(isTextEditorDirty(a)){c=!0;break}this.SetDirty(c);if(c)return this._warningMessage};d.EventBeforeunload="beforeunload";d.InitialValueDataKey="InitialValue";d.DirtyFormDataKey="IsDirty";return d}();d.FormCheckBeforeUnload=e})(CCL||(CCL={}));
(function(d){var e=function(e){function c(a,b){var c=this;e.call(this,a,b);this._inputControl=$("#"+b.InputClientId);this._inputLabel=$("#"+b.LabelClientId);this._inputControl.on("keydown keyup change input propertychange",function(){c._inputControl.is(":visible")&&c.NotifyResultChanged()});this.Trigger(d.PickerEvent.Initialized);this.GetResults()&&this.NotifyResultChanged()}__extends(c,e);c.prototype.GetResults=function(){return this._inputControl.val()||this._inputLabel.text()};c.prototype.NotifyResultChanged=
function(){var a=[],b=this.GetResults();b?(a.push({fileUrl:b}),this.isSecure?this.isUrlUnsecure(b)||8>=b.trim().length?$(".checkbox-embed-link-target").hide():$(".checkbox-embed-link-target").show():$(".checkbox-embed-link-target").show()):$(".checkbox-embed-link-target").hide();this.Trigger(d.PickerEvent.ResultsChanged,{results:a})};c.prototype.isUrlUnsecure=function(a){a=a.trim();var b=!0;8<a.length&&(a=this.parseUrl(a)[1],b=!a||"https:"!==a.toLowerCase());return b};c.prototype.parseUrl=function(a){return/^(?:(?:(?:([^:\/#\?]+:)?(?:(?:\/\/)((?:((?:[^:@\/#\?]+)(?:\:(?:[^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((?:\/?(?:[^\/\?#]+\/+)*)(?:[^\?#]*)))?(\?[^#]+)?)(#.*)?/.exec(a)};
c.prototype.AddChildElementsToTheTabOrder=function(){this._inputControl.attr("tabindex","0");this._inputControl.parent().children("input[type=checkbox]").attr("tabindex","0")};c.prototype.RemoveChildElementsFromTheTabOrder=function(){this._inputControl.attr("tabindex","-1");this._inputControl.parent().children("input[type=checkbox]").attr("tabindex","-1")};return c}(d.ItemPickerBase);d.LinkPicker=e})(CCL||(CCL={}));
(function(d){var e=function(){function d(){}d.FormatFileSize=function(c,a,b){return 1048576<=c?(c/1048576).toFixed(2)+" "+b:(c/1024).toFixed(2)+" "+a};return d}();d.Utils=e})(CCL||(CCL={}));
