function dropDrop(e,t){var i=$("#"+e.target.id).attr("type");if($(t.draggable[0]).draggable("option","revert",!0),"multiple"==i){$("#"+e.target.id).attr("depot",$(t.draggable[0]).attr("id"));var s=$("#drop"+e.target.id.substring(5)).val();""!=s&&(s+=";"),s+=$(t.draggable[0]).attr("id")+":"+$(t.draggable[0]).css("left")+":"+$(t.draggable[0]).css("top"),$("#drop"+e.target.id.substring(5)).val(s),$("#"+e.target.id).attr("depot",s),$(t.draggable[0]).draggable("option","revert",!1)}if(""==$("#"+e.target.id).attr("depot")){$("#"+e.target.id).attr("depot",$(t.draggable[0]).attr("id")),$(t.draggable[0]).draggable("option","revert",!1);var s=$(t.draggable[0]).attr("id")+":"+$(t.draggable[0]).css("left")+":"+$(t.draggable[0]).css("top");$("#drop"+e.target.id.substring(5)).val(s),"unique"==$("#"+e.target.id).attr("tentative")&&($("#"+e.target.id).droppable("disable"),$(t.draggable[0]).draggable("disable"))}}function dropOut(e,t){var i=$(t.draggable[0]).attr("id"),s=new RegExp(i,"i"),a=$("#"+e.target.id).attr("depot");if(s.test(a)){for(var o=a.split(";"),n=o,l=0;l<o.length;l++){var r=o[l].split(":");if(r[0]==i){n.splice(l,1);break}}var p=n.join(";");$("#"+e.target.id).attr("depot",p),$("#drop"+e.target.id.substring(5)).val(p),$(t.draggable[0]).css("left","0px").css("top","0px"),$(t.draggable[0]).draggable("option","revert",!0),$(t.draggable[0]).trigger("dragstop")}}function dropChange(e){if(revoirDs||"prof"==statu){var t=$("#"+e.target.id).val();";"==t.substring(0,1)&&(t=t.substring(1)),$("#"+$(e.target).parent().attr("id")).attr("depot",t);for(var i=t.split(";"),s=0;s<i.length;s++){var a=i[s].split(":");$("#"+a[0]).css("left",a[1]).css("top",a[2])}return!0}return!1}function dvDragStop(e){var t=$(e.target).draggable("option");$(e.target).draggable("option",{revert:!1}),t.revert&&$(e.target).css("left","0px").css("top","0px"),$(e.target).draggable("option",{revert:!0})}var dv={modeEbauche:!1,enteteHtml:'<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="content-type"><title>question de type cloze</title><script src="../../API4/jquery.min.js"></script><link rel="stylesheet" href="../../API4/jquery-ui.css"><script src="../../API4/jquery-ui.min.js"></script><link href="../../API4/defaut.css" rel="stylesheet" type="text/css" /><link href="temp.css" rel="stylesheet" type="text/css" /><script src="TypeExo.js"></script><style type="text/css">div { padding-top: 0px; padding-right: 0px; padding-bottom: 0px; padding-left: 0px; margin-top: 0px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px;}.page {position:absolute;}</style></head><body><div id="Q1" style="float: right;padding: 20px;"></div><div class="page choices-border questionid">',piedHtml:"</div></body></html>"},selected=function(){"use strict";this.objets=[],this.returnIds=function(e){if("string"===e){var t="";for(var i in this.objets)t+=" "+$(i).attr("id");return t}return void 0},this.isInObjets=function(e){for(var t=this.objets.length,i=$(e).attr("id"),s=0;t>s;s++)if($(this.objets[s]).attr("id")==i)return!0;return!1},this.addObjet=function(e){this.isInObjets(e)||(this.objets.push(e),$(e).addClass("selected"))},this.removeObjet=function(e){for(var t=this.objets.length,i=$(e).attr("id"),s=0;t>s;s++){if($(this.objets[t-1]).attr("id")==i){this.objets.pop();break}this.objets.unshift(this.objets[t-1]),this.objets.pop()}0==this.objets.length&&($("#menuEbauche").html(maPage.removeUIEbauche()),$("#menuCorrection").html(corrige.removeUI()))},this.removeAll=function(){this.objets=[],$(".selected").removeClass("selected"),$("#menuEbauche").html(maPage.removeUIEbauche()),$("#menuCorrection").html(corrige.removeUI())},this.setOriginalPosition=function(e){for(var t=this.objets.length,i=0;t>i;i++){var s=$(this.objets[i]),a=/(.*)px/.test(s.css("top")),o=parseInt(RegExp.$1);a=/(.*)px/.test(s.css("left"));var n=parseInt(RegExp.$1);s.data("originalPosition",{top:o,left:n})}},this.setDimension=function(e){for(var t=this.objets.length,i=0;t>i;i++){var s=$(this.objets[i]);$("#"+s.attr("id")).css("width",e.width),$("#"+s.attr("id")).css("height",e.height)}},this.align=function(e){for(var t=$(this.objets[0]).parent().attr("id"),i=0;i<this.objets.length;i++)$(this.objets[i]).parent().attr("id")!=t&&($(this.objets[i]).removeClass("selected"),this.removeObjet(this.objets[i]));switch(e){case"left":for(var s=this.objets.length,a=$(this.objets[0]).css("left"),i=1;s>i;i++)$(this.objets[i]).css("left",a);break;case"right":for(var s=this.objets.length,o=parseInt($(this.objets[0]).css("left").replace(/px/,""))+parseInt($(this.objets[0]).css("width").replace(/px/,"")),i=1;s>i;i++){var n=parseInt($(this.objets[i]).css("left").replace(/px/,"")),l=parseInt($(this.objets[i]).css("width").replace(/px/,"")),r=o-(n+l);$(this.objets[i]).css("left",n+r+"px")}break;case"bottom":for(var s=this.objets.length,p=parseInt($(this.objets[0]).css("top").replace(/px/,""))+parseInt($(this.objets[0]).css("height").replace(/px/,"")),i=1;s>i;i++){var c=parseInt($(this.objets[i]).css("top").replace(/px/,"")),d=parseInt($(this.objets[i]).css("height").replace(/px/,"")),r=p-(c+d);$(this.objets[i]).css("top",c+r+"px")}break;case"top":for(var s=this.objets.length,h=$(this.objets[0]).css("top"),i=1;s>i;i++)$(this.objets[i]).css("top",h)}},this.ajust=function(e){for(var t=$(this.objets[0]).parent().attr("id"),i=0;i<this.objets.length;i++)$(this.objets[i]).parent().attr("id")!=t&&($(this.objets[i]).removeClass("selected"),this.removeObjet(this.objets[i]));var s=this.objets.length;if(s>1)switch(e){case"vertical":for(var a=0,o=0,n=0,i=1;s>i;i++)if(parseInt($(this.objets[i]).css("top").replace(/px/,""))<parseInt($(this.objets[i-1]).css("top").replace(/px/,"")))for(var l=parseInt($(this.objets[i]).css("top").replace(/px/,"")),r=0;i>r;r++)if(parseInt($(this.objets[r]).css("top").replace(/px/,""))>l){if(0==r)this.objets.unshift(this.objets[i]),this.objets.splice(i+1,1);else{var p=this.objets.slice(0,r);p.push(this.objets[i]);var c=this.objets.slice(r,i);p=p.concat(c),s-1-i>0&&(c=this.objets.slice(i+1,s),p=p.concat(c)),this.objets=p}break}for(var i=0;s>i;i++)a+=parseInt($(this.objets[i]).css("height").replace(/px/,""));o=parseInt($(this.objets[s-1]).css("height").replace(/px/,""))+parseInt($(this.objets[s-1]).css("top").replace(/px/,""))-parseInt($(this.objets[0]).css("top").replace(/px/,"")),n=Math.round((o-a)/(s-1));for(var d=parseInt($(this.objets[0]).css("top").replace(/px/,""))+parseInt($(this.objets[0]).css("height").replace(/px/,"")),i=1;s-1>i;i++){var h=d+n;$(this.objets[i]).css("top",h+"px"),d=h+parseInt($(this.objets[i]).css("height").replace(/px/,""))}break;case"horizontal":for(var g=0,u=0,n=0,i=1;s>i;i++)if(parseInt($(this.objets[i]).css("left").replace(/px/,""))<parseInt($(this.objets[i-1]).css("left").replace(/px/,"")))for(var l=parseInt($(this.objets[i]).css("left").replace(/px/,"")),r=0;i>r;r++)if(parseInt($(this.objets[r]).css("left").replace(/px/,""))>l){if(0==r)this.objets.unshift(this.objets[i]),this.objets.splice(i+1,1);else{var p=this.objets.slice(0,r);p.push(this.objets[i]);var c=this.objets.slice(r,i);p=p.concat(c),s-1-i>0&&(c=this.objets.slice(i+1,s),p=p.concat(c)),this.objets=p}break}for(var v=0;s>v;v++)g+=parseInt($(this.objets[v]).css("width").replace(/px/,""));u=parseInt($(this.objets[s-1]).css("width").replace(/px/,""))+parseInt($(this.objets[s-1]).css("left").replace(/px/,""))-parseInt($(this.objets[0]).css("left").replace(/px/,"")),n=Math.round((u-g)/(s-1));for(var d=parseInt($(this.objets[0]).css("left").replace(/px/,""))+parseInt($(this.objets[0]).css("width").replace(/px/,"")),i=1;s-1>i;i++){var b=d+n;$(this.objets[i]).css("left",b+"px"),d=b+parseInt($(this.objets[i]).css("width").replace(/px/,""))}}}},selecteur=function(){this.initialW=0,this.initialH=0,this.openSelector=function(e){var t=Math.abs(this.initialW-e.pageX),i=Math.abs(this.initialH-e.pageY);$(".ghost-select").css({width:t,height:i}),e.pageX<=this.initialW&&e.pageY>=this.initialH?$(".ghost-select").css({left:e.pageX}):e.pageY<=this.initialH&&e.pageX>=this.initialW?$(".ghost-select").css({top:e.pageY}):e.pageY<this.initialH&&e.pageX<this.initialW&&$(".ghost-select").css({left:e.pageX,top:e.pageY})},this.doObjectsCollide=function(e,t){var i=e.offset().top,s=e.offset().left,a=t.offset().top,o=t.offset().left;return!(i+e.height()<a||i>a+t.height()||s+e.width()<o||s>o+t.width())},this.selectElements=function(e){var t=e.data.objCreatePage,i=t.selection,s=t.selecteur;$("body").off("mousemove",s.openSelector),$("body").off("mouseup",s.selectElements),$("#page [id*=boite]").each(function(){var e=$(".ghost-select"),t=$(this),a=s.doObjectsCollide(e,t);1==a&&i.addObjet(this)}),$(".ghost-select").removeClass("ghost-active"),$(".ghost-select").width(0).height(0),i.objets.length>0&&maPage.setUIParameters(i.objets[0])}},CreatePage=function(){function i(t,i){e.each(function(){$this=$(this);var e=$this.parent().width(),s=$this.parent().height(),a=$this.data("originalPosition").left,o=$this.data("originalPosition").top,n=a+t,l=o+i,r=s-2-(l+$this.height()),p=e-2-(n+$this.width());n=0>n?0:n,n=0>=p?e-2-$this.width():n,l=0>l?0:l,l=0>=r?s-2-$this.height():l,$this.css("left",n),$this.css("top",l)})}this.index=1,this.firstParent="",this.selection=new selected,this.copy={},this.selecteur=new selecteur;var e,t={containment:"parent",snap:"#regleH,#regleV",snapMode:"outer",zIndex:1e3,start:$.proxy(function(t,i){var s=$(t.target).parent().attr("id");e=$(".selected").filter("[id!="+$(t.target).attr("id")+"]");for(var a=0;a<e.length;a++)$(e[a]).parent().attr("id")!=s&&($(e[a]).removeClass("selected"),this.selection.removeObjet(e[a]));e=$(".selected").filter("[id!="+$(t.target).attr("id")+"]");for(var a=0;a<e.length;a++)$(e[a]).data("originalPosition",$(e[a]).position())},this),drag:function(e,t){var s=$(this).position(),a=t.originalPosition,o=s.left-a.left,n=s.top-a.top;i(o,n)},stop:$.proxy(function(e,t){this.selection.removeAll()},this)};this.init=function(e){this.firstParent=e,this.index=this.returnMaxNumBoite(),$("#menu").sortable({axis:"x",helper:"clone",containment:"#menu",cursor:"eo-resize",revert:!0,cancel:"#bouton0",stop:function(e,t){var i=$("#menu").sortable("toArray");if("bouton0"==i[0])for(var s=1;s<$("#questions [id*=question]").length;s++)if(i[s]!="bouton"+s){var a=i[s].substring(6);$("#question"+(s-1)).after($("#question"+a)),$("#bouton"+(a-1)).after($("#bouton"+a)),$("#questions [id*=question]").each(function(e){$(this).attr("id","question"+e)})}}}),$("body").on("keyup",$.proxy(function(e){e.stopPropagation();var t=!1,i=!1,s=!1,a=!1;if(e.ctrlKey)switch(e.keyCode){case 67:t=!0,this.copy=$(this.selection.objets).clone(),console.log("CTRL + C"),this.selection.removeAll();break;case 88:a=!0,this.copy=$(this.selection.objets).clone();for(var o=0;o<this.selection.objets.length;o++)$(this.selection.objets[o]).remove();this.selection.removeAll(),console.log("CTRL + X");break;case 86:i=!0;for(var n="page",l=$(this.copy).clone(),o=0;o<$(this.copy).length;o++){var r=this.index,p=$(l[o]).attr("id").substring(5);$(l[o]).attr("id","boite"+this.index),this.index++;var c=$(l[o]).attr("title");if(void 0!=c){var d=$(l[o]).html();c=c.replace(p,r);var h=new RegExp(""+p,"g");d=d.replace(h,r),$(l[o]).html(d).attr("title",c)}for(var g=$(l[o]).find("[id*=boite]"),u=0;u<g.length;u++){var v=this.index,b=$(g[u]).attr("id").substring(5);$(g[u]).attr("id","boite"+this.index),this.index++;var c=$(g[u]).attr("title");if(void 0!=c){var d=$(g[u]).html();c=c.replace(b,v);var h=new RegExp(""+b,"g");d=d.replace(h,v),$(g[u]).html(d).attr("title",c)}}$(l[o]).appendTo("#"+n),this.setInteractivite("#boite"+r);for(var f=$("#boite"+r+" [id*=boite]"),m=0;m<f.length;m++)this.setInteractivite("#"+$(f[m]).attr("id"))}this.selection.removeAll(),console.log("CTRL + V");break;case 65:s=!0,console.log("CTRL + A")}},this)),$("#"+this.firstParent+" #page").droppable({hoverClass:"hoverDroppable",tolerance:"fit",greedy:!0,addClass:!1,drop:$.proxy(function(e,t){e.stopPropagation(),this.selection.addObjet(t.draggable[0]);for(var i=0;i<this.selection.objets.length;i++){var s=$(this.selection.objets[i]),a=$(e.target),o=a.offset(),n=s.offset(),l={};for(var r in o)l[r]=n[r]-o[r];s.css(l),a.append(s[0])}},this)}).on("mousedown",$.proxy(function(e){e.ctrlKey?(this.selection.removeAll(),$("#deselected").click()):($(".ghost-select").addClass("ghost-active").css({left:e.pageX,top:e.pageY}),this.selecteur.initialW=e.pageX,this.selecteur.initialH=e.pageY,$("body").on("mouseup",null,{objCreatePage:this},$.proxy(this.selecteur.selectElements,this.selecteur)),$("body").on("mousemove",$.proxy(this.selecteur.openSelector,this.selecteur)))},this)),$("#baliseDiv").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable  construction" style="position:absolute;left:0px;top:0px;width:150px;height:100px"><span></span></div>'},$.proxy(this.addDiv,this)),$("#deselected").on("click",$.proxy(function(e){$(".selected").removeClass("selected"),this.selection.removeAll()},this)),$("#addChekbox").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:150px" title="caseindice"><div class="case"> <input id="caseindice" autocomplete="off" type="checkbox"><label for="caseindice"> </label></div><span style="margin-left: 28px; display: inline-block;">contenu a définir</span></div>'},$.proxy(this.addDiv,this)),$("#addRadio").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable construction" type="radio" style="position:absolute;left:0px;top:0px;width:150px" title="caseindice"><div class="case"> <input id="caseindice" name="groupe" autocomplete="off" type="radio"><label for="caseindice"> </label></div><span style="margin-left: 28px; display: inline-block;">contenu a définir</span></div>'},$.proxy(this.addDiv,this)),$("#addInputText").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="text" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:150px;height:24px"> <input id="Textindice" class="text_eleve" style="width: 85%;text-align:left; height: 70%;" autocomplete="off" type="text"><span style="margin-left: 28px; display: inline-block;"></span><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addTextarea").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" type="text"  class="unselectable construction" style="position:absolute;left:0px;top:0px;width:150px;height:24px"><textarea class="text_eleve" id="Textindice" autocomplete="off" style="width: 85%; height: 90%;"></textarea> <span style="margin-left: 28px; display: inline-block;"></span><correction><boite></boite><if>//i</if><bareme>1</bareme><note></note><view></view><comment></comment><manuel></manuel><code></code></correction></div>'},$.proxy(this.addDiv,this)),$("#addManuel").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable construction" style="position:absolute;left:0px;top:0px;width:24px;height:100px" title="manuelindice"><div id="evalProfindice"><div class="manuel"> <input value="100" name="manuelindice" id="manuelindicea" autocomplete="off" type="radio"> <label for="manuelindicea"> </label></div><div class="manuel"> <input value="75" name="manuelindice" id="manuelindiceb" autocomplete="off" type="radio"> <label for="manuelindiceb"> </label></div><div class="manuel"> <input value="50" name="manuelindice" id="manuelindicec" autocomplete="off" type="radio"> <label for="manuelindicec"> </label></div><div class="manuel"> <input value="25" name="manuelindice" id="manuelindiced" autocomplete="off" type="radio"> <label for="manuelindiced"> </label></div><div class="manuel"> <input value="0" name="manuelindice" id="manuelindicee" autocomplete="off"  type="radio"> <label for="manuelindicee"> </label></div></div><span style="margin-left: 28px; display: inline-block;"></span></div><script>$("[id*=manuelindice]").change(eventEvaluateManuel);</script>'},$.proxy(this.addDiv,this)),$("#addZoneNote").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable construction" style="position:absolute;left:0px;top:0px;width: 75px;height: 61px;" title="qindice"><div id="noteqindice" class="noteExercice"><div class="noteExo"><span id="qindice">0</span></div><div class="noteExoMax"><span id="qindicemax">0</span></div><span class="noteExerciceBarre">/</span></div> <span style="margin-left: 28px; display: inline-block;"></span></div>'},$.proxy(this.addDiv,this)),$("#addImage").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class=" dvimage unselectable  construction" style="position:absolute;left:0px;top:0px;width: 150px;height:150px; right: auto; bottom: auto;"><span></span><input id="clickImgindice" type="hidden" value="none"><script>$("#boiteindice").on("click",function(ev){$("#clickImgindice").val("ok");});</script></div>'},$.proxy(this.addDiv,this)),$("#addCommentaire").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="commentaire unselectable  construction" title="boiteindice" style="position:absolute;left:0px;top:0px;width:150px;height:18px"><span>contenu a définir</span></div>'},$.proxy(this.addDiv,this)),$("#addDrop").on("click",null,{element:"boite",codeHtml:'<div id="boiteindice" class="unselectable  construction" title="dropindice" style="position:absolute;left:0px;top:0px;width:150px;height:150px;border: 1px dashed #999;" depot=""><span></span><input style="display:none" id="dropindice" type="text"><script>$("#boiteindice").droppable({tolerance: "fit", drop: dropDrop ,out: dropOut});$("#dropindice").on("change",null,null,dropChange);</script></div>'},$.proxy(this.addDiv,this)),$("#addDrag").on("click",null,{element:"boite",type:"drag",codeHtml:'<div id="boiteindice" class="unselectable  construction"  style="position:absolute;left:0px;top:0px;width:150px;height:100px;"><div id="dragindice" class="unselectable dvDrag" style="position:absolute;left:0px;top:0px;width:100%;height:100%;cursor:pointer;z-index:10" title="dragindice"><span></span></div><script>$("#dragindice").draggable({containment:"#page", cursor: "pointer",   revert: true, zIndex: 1000,stop:dvDragStop});</script></div>'},$.proxy(this.addDiv,this)),$("#addTextSelectable").on("click",null,{element:"boite",codeHtml:'<div class="unselectable textSelectable construction" id="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;" title="Textindice"><span></span><input id="Textindice" type="text" style="display:none"><script>  $("#boiteindice span span").click(function(event){$(event.target).parent().find(".textSelected").removeClass("textSelected"); $(event.target).addClass("textSelected");	$("#Text"+($(event.target).parent().parent().attr("id")).substring(5)).val($(event.target).text());});$("#Textindice").on("change",function(event){var t=$(this).val();$("#boiteindice span span").removeClass("textSelected").each(function(dd){if($(this).text()==t){$(this).addClass("textSelected")}});});</script></div>'},$.proxy(this.addDiv,this)),$("#addMath").on("click",null,{element:"boite",codeHtml:'<div class="unselectable construction" id="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;"><span style="display:none" class="math"></span><div id="renduMathindice"></div><script> $("#boiteindice .math").on("changeMath",function(event){katex.render($("#boiteindice .math").text(), $("#renduMathindice")[0]);});</script></div>'},$.proxy(this.addDiv,this)),$("#addDialog").on("click",null,{element:"boite",type:"dialog",codeHtml:'<div class="unselectable construction dvdialog" id="boiteindice" title="boiteindice" titre="titre" style="position: relative; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 45px;overflow: hidden;" origine="#questionX .page"><span></span></div><script class="dvDialog"> $("#boiteindice").dialog({appendTo:"body",resizable:false,width:parseInt($("#boiteindice").prop("scrollWidth")),height:parseInt($("#boiteindice").prop("scrollHeight")+34),autoOpen: false,title:$("#boiteindice").attr("titre")});$("#boiteindice").css({top:"0px",left:"0px"}); $("#boiteindice script").each(function(){eval($(this).text())});</script>'},$.proxy(this.addDiv,this)),$("#addTabConv").on("click",null,{element:"boite",codeHtml:'<div style="background-color: #ffffcc; margin: 0px; width: 670px; height: 200px;box-shadow: 3px 3px 3px 3px rgb(153, 153, 153);border-radius: 10px;" id="boiteindice" class="unselectable" title="Tableau de conversion"><style type="text/css">span.convEntete {padding-top: 10px;padding-left: 0px;padding-right: 0px;padding-bottom: 10px;background-color: rgb(204, 204, 204);margin: 0px;border: 1px dashed grey;width: 50px;height: 28px;display: inline-block;color: rgba(255, 0, 0, 1);position: relative;text-align: center;vertical-align: middle;font-size: 0.8em;}span.convEntete input {width: 46px;text-align: center;font-size: 0.8em;}.convEntete:hover {      cursor: pointer;} </style><div id="tabConvindice" style="font-size: xx-large;position:relative;top: 10px;"><img style="left: 50px; position: relative;" src="https://coursdesciences.fr/devoir/API4/outils/img/tab_conv.png"> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; left: 50px; top: 150px;" class="move">0</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 80px;" class="move">1</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 110px;" class="move">2</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="position: absolute; top: 150px; left: 140px;" class="move">3</span> <span style="top: 150px; left: 170px; position: absolute;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 170px;" class="move">4</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 200px;" class="move">5</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 230px;" class="move">6</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 260px;" class="move">7</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 290px;" class="move">8</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 320px;" class="move">9</span> <span style="position: absolute; top: 150px; left: 350px;" class="move">,</span> <div style="float: right; margin-right: 10px;"><span class="convEntete"></span><span class="convEntete"></span><span class="convEntete"></span><span class="convEntete"></span></div></div><textarea id="inputHtmlindice" class="savable" style="display:none"></textarea><script class="boiteindice">$("#inputHtmlindice").on("change",function(event){var t=this.id.substring(9);$("#tabConv"+t).html($(this).val());var ddtemp=\'<input class="convEnteteInput" type="text"></input>\';eval(\'$("#tabConvindice .convEntete").draggable({containment: "#boiteindice",cursor: "pointer"});$("#tabConvindice [class*=move]").draggable({containment: "#boiteindice",        cursor:"pointer"}).hover(function () {$(this).css("cursor", "pointer")});$("#tabConvindice .convEntete").on("click", function (event) {var text = $(this).text();      $(this).html(ddtemp).children().on("click", function (event) {event.stopPropagation();}).on("focusout", function (event) {$(this).parent().html($(this).val());}).val(text).focus();});\')}).on("save",function(event){var t=this.id.substring(9);$(this).val($("#tabConv"+t).html());});$("#tabConvindice .convEntete").draggable({containment: "#boiteindice",cursor: "pointer"});$("#tabConvindice [class*=move]").draggable({containment: "#boiteindice",        cursor:"pointer"}).hover(function () {$(this).css("cursor", "pointer")});$("#tabConvindice .convEntete").on("click", function (event) {var text = $(this).text();      $(this).html(\'<input class="convEnteteInput" type="text"></input>\').children().on("click", function (event) {event.stopPropagation();}).on("focusout", function (event) {$(this).parent().html($(this).val());}).val(text).focus();});</script></div>'},$.proxy(this.addDiv,this)),$("#addVolet").on("click",null,{element:"boite",codeHtml:'<div class="unselectable construction" id="boiteindice" title="boiteindice" style="position: absolute; left: 0px; top: 0px; width: 200px; z-indice: auto; right: auto; bottom: auto; height: 85px;"><span></span><div id="voletindice" style="height:100%;width:100%;background-color:rgba(206,206,206,0.7)"></div> <textarea id="inputHtmlindice" class="savable" style="display:none"></textarea><script class="ebauche">$("#voletindice").css("height", "100%").css("width", "100%").css("left","0px").css("top","0px");</script>    <script class="boiteindice interactivite">        $("#voletindice").resizable({handles: "e"});</script><script>$("#inputHtmlindice").change(function (event) {$("#voletindice").attr("style",$("#inputHtmlindice").val()); eval($("script.boiteindice").text());}).on("save", function (event) { $("#inputHtmlindice").val($("#voletindice").attr("style"));});</script></div>'},$.proxy(this.addDiv,this)),$("#addCloze").on("click",null,{element:"boite",codeHtml:'<div class="unselectable construction" id="boiteindice" title="clozeindice" style="position: absolute; left: 0px; top: 0px; width: 400px;height:200px; z-indice: auto; right: auto; bottom: auto;"><span id="clozeindice" class="cloze" style="display:none;"></span> <div id="renduClozeindice"></div> <textarea id="inputHtmlindice" class="savable" style="display:none"></textarea> <script> question_cloze["clozeindice"] = new cloze("#clozeindice", "#renduClozeindice");  question_cloze["clozeindice"].init(); $("#clozeindice").on("changeCloze", function (event) { $("#renduClozeindice").html(""); question_cloze["clozeindice"].init();});$("#inputHtmlindice").change(function (event) {            $("#renduClozeindice").html($("#inputHtmlindice").val()); question_cloze["clozeindice"].setInteractivite();$("#renduClozeindice .clozeInput").each(function(ev){$(this).val($(this).attr("depot").replace(/&apos;/g, "\'"));});}).on("save", function (event) { $("#renduClozeindice .clozeInput").each(function(ev){ $(this).attr("depot",$(this).val().replace(/\'/g, "&apos;")); });$("#inputHtmlindice").val($("#renduClozeindice").html());});</script></div>'},$.proxy(this.addDiv,this)),$("#layerUp").on("click",$.proxy(function(e){var t=this.selection.objets[0];$(t).insertAfter($(t).next()),$(t).parent().children().each(function(e){$(this).css("z-index",e)})},this)),$("#layerDown").on("click",$.proxy(function(e){var t=this.selection.objets[0];$(t).insertBefore($(t).prev()),$(t).parent().children().each(function(e){$(this).css("z-index",e)})},this)),$("#leftAlign").on("click",null,{},$.proxy(function(e){this.selection.align("left")},this)),$("#topAlign").on("click",null,{},$.proxy(function(e){this.selection.align("top")},this)),$("#rightAlign").on("click",null,{},$.proxy(function(e){this.selection.align("right")},this)),$("#bottomAlign").on("click",null,{},$.proxy(function(e){this.selection.align("bottom")},this)),$("#verticalAjust").on("click",null,{},$.proxy(function(e){this.selection.ajust("vertical")},this)),$("#horizontalAjust").on("click",null,{},$.proxy(function(e){this.selection.ajust("horizontal")},this)),
$("body").append('<div id="regleH" class="regle"></div><div id="regleV" class="regle"></div>'),$("#regleV").css("height",$(window).height()),$("#regleH").css("width",$(window).width()),$("#regleH").draggable({axis:"y"}).droppable({tolerance:"touch"}),$("#regleV").draggable({axis:"x"}).droppable({tolerance:"touch"}),$("#repere").on("click",null,{},function(e){$("#regleH,#regleV").toggleClass("regle")}),$("#addQuestion").on("click",$.proxy(this.createPartie,this)),$("#save").on("click",$.proxy(this.saveAllQuestions,this)),$("#open").on("click",$.proxy(this.openHtml,this)),$("#textModif").dialog({appendTo:"body",autoOpen:!1,closeOnEscape:!0,draggable:!1,height:"auto",hide:!0,modal:!0,resizable:!0,show:!0,width:"500px"}),CKEDITOR.replace("modifTextarea",{enterMode:CKEDITOR.ENTER_BR,entities:!1,entities_additional:"",entities_greek:!1,extraPlugins:"dynamicinsertmenu,ckeditor_wiris,itslimageprop,previewmedia,longtouchcontextmenu,editextension,collapsetoolbar,fakemedia",font_names:"Arial;Comic Sans MS;Courier New;Helvetica;Tahoma;Times New Roman;Verdana;Palatino Linotype",fontSize_sizes:"smaller/smaller;larger/larger;xx-small/xx-small;x-small/x-small;small/small;medium/medium;large/large;x-large/x-large;xx-large/xx-large",height:"300",htmlEncodeOutput:!0,language:"fr-fr",removePlugins:"",smiley_columns:14,smiley_descriptions:["smile","sad","wink","big smile","confused","cheeky","embaressed","surprised","speechless","angry","angel","cool","devil","cry","lightbulb","thumbs down","thumbs up","broken heart","kiss","envelope","airplane","alarm","apple","banana","basketball","bookmark","boxing gloves blue","boxing gloves red","bull","candle","certificate","check","chest","clock","cloud","cloud dark","cow","delete","die","die gold","dog","error","extinguisher","eye","fish","flashlight","flower blue","flower red","flower white","flower yellow","goblet bronze","goblet gold","goblet silver","guitar","hand red card","hand yellow card","hat green","hat red","heart","icecream","lemon","lifebelt","lightbulb","magic-wand","medal","moon","palm","pig","pin green","pin red","pineapple","rubberstamp","ship","snowflake","soccer ball","spider","spider","star blue","star green","star red","star yellow","step","stop","stopwatch","sun","sun and cloud","target","target","trafficlight green","trafficlight red","tree","view","violin"],smiley_images:["regular_smile.gif","sad_smile.gif","wink_smile.gif","teeth_smile.gif","confused_smile.gif","tounge_smile.gif","embaressed_smile.gif","omg_smile.gif","whatchutalkingabout_smile.gif","angry_smile.gif","angel_smile.gif","shades_smile.gif","devil_smile.gif","cry_smile.gif","lightbulb.gif","thumbs_down.gif","thumbs_up.gif","broken_heart.gif","kiss.gif","envelope.gif","airplane.png","alarm.png","apple.png","banana.png","basketball.png","bookmark.png","boxing_gloves_blue.png","boxing_gloves_red.png","bull.png","candle.png","certificate.png","check2.png","chest.png","clock.png","cloud.png","cloud_dark.png","cow.png","delete2.png","die.png","die_gold.png","dog.png","error.png","extinguisher.png","eye.png","fish.png","flashlight.png","flower_blue.png","flower_red.png","flower_white.png","flower_yellow.png","goblet_bronze.png","goblet_gold.png","goblet_silver.png","guitar.png","hand_red_card.png","hand_yellow_card.png","hat_green.png","hat_red.png","heart.png","icecream.png","lemon.png","lifebelt.png","lightbulb.png","magic-wand.png","medal.png","moon.png","palm.png","pig.png","pin_green.png","pin_red.png","pineapple.png","rubberstamp.png","ship2.png","snowflake.png","soccer_ball.png","spider.png","spider2.png","star_blue.png","star_green.png","star_red.png","star_yellow.png","step.png","stop.png","stopwatch.png","sun.png","sun_and_cloud.png","target2.png","target3.png","trafficlight_green.png","trafficlight_red.png","tree.png","view.png","violin.png"],smiley_path:"/ui/controls/editor/FCK/editor/images/smiley/itslearning/",toolbar:[["Font","FontSize",""],["Bold","Italic","Underline",""],["Undo","Redo","-","Cut","Copy","Paste","PasteText","PasteFromWord",""],["dynamicinsertmenu",""],["Link",""],["TextColor","BGColor","SpecialChar","-","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock",""],["Subscript","Superscript","-","Outdent","Indent","-","NumberedList","BulletedList","-","Table",""],["Source",""],["ckeditor_wiris_formulaEditor",""],["Smiley",""],["Maximize",""],["collapsetoolbar"],["image","forms",""]],toolbarCanCollapse:!1,uiColor:"#ffffff",allowedContent:!0,dynamicinsertmenu:{Items:[{DialogSrc:"/FileExplorer/ViewFiles.aspx?Function=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:670,DialogWidth:615,Text:"Image",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/image16.png",IframeCssClass:null,Id:"itslimage"},{DialogSrc:"/Editor/InsertRecording.aspx?PageTab=0&RecordingType=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:665,DialogWidth:600,Text:"Enregistrement vidéo",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/videorecorder16.png",IframeCssClass:null,Id:"itslvideorecorder"},{DialogSrc:"/Editor/InsertRecording.aspx?PageTab=0&RecordingType=2",Command:null,IsEditorDialogTransparent:!1,DialogHeight:530,DialogWidth:600,Text:"Enregistrement audio",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/audiorecorder16.png",IframeCssClass:null,Id:"itslaudiorecorder"},{DialogSrc:"/Editor/treelink.aspx",Command:null,IsEditorDialogTransparent:!1,DialogHeight:320,DialogWidth:600,Text:"Lien vers l'arborescence",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/treelink16.png",IframeCssClass:null,Id:"treelink"},{DialogSrc:"/FileExplorer/BrowseFiles.aspx?Type=2&Function=2&PopUp=1",Command:null,IsEditorDialogTransparent:!1,DialogHeight:570,DialogWidth:750,Text:"Fichier du répertoire 'Vos fichiers Web'",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/element_resource16.png",IframeCssClass:null,Id:"itslfile"},{DialogSrc:"/Editor/Web2Content.aspx",Command:null,IsEditorDialogTransparent:!1,DialogHeight:660,DialogWidth:760,Text:"Contenu Web 2.0",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/web2content16.png",IframeCssClass:null,Id:"web2cont"},{DialogSrc:"/Editor/Extensions/BrowseExtensions.aspx?ItslExtensionPlacementArea=1&DisableExpandInLibrary=False",Command:null,IsEditorDialogTransparent:!0,DialogHeight:595,DialogWidth:892,Text:"Parcourir la bibliothèque d'application",EditText:null,IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/tools16.png",IframeCssClass:null,Id:"itslbrowseextensions"}],LabelText:"Insérer",TitleText:"Insérer du contenu",Id:"dynamicinsertmenu"},fakemedia:{PluginSettings:{supportedVideoFormats:["mp4","m4v","ogv","webm","webmv","flv"],mediaContentAttribute:"mediacontent",mediaTypes:{auto:0,forceAudio:1,forceVideo:2},dataMemberNames:{mediaType:"mediaType",fileName:"fileName"},cssClasses:{audio:"cke_fakemedia_audio",video:"cke_fakemedia_video"}},Id:"fakemedia"},previewmedia:{ExtraSettings:{mediaContentAttribute:"mediacontent",cssClasses:{fakeAudio:"cke_fakemedia_audio",fakeVideo:"cke_fakemedia_video"}},DialogSrc:"/FileExplorer/PreviewMediaFile.aspx?ViewOnly=True&Type=2&File={filePath}&FileName={fileName}&PlayerMediaType={playerMediaType}",Command:null,IsEditorDialogTransparent:!1,DialogHeight:470,DialogWidth:550,Text:"Prévisualisation",EditText:"Prévisualisation",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/url_preview16.png",IframeCssClass:null,Id:"previewmedia"},collapsetoolbar:{DialogSrc:null,Command:null,IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:null,EditText:null,IconSrc:null,IframeCssClass:null,Id:"collapsetoolbar"},itslimageprop:{DialogSrc:"/FileExplorer/InsertImageUrl.aspx?Function=1&imageurl={src}&alt={alt}&border={border}&align={align}&className={class}&width={width}&height={height}",Command:null,IsEditorDialogTransparent:!1,DialogHeight:355,DialogWidth:400,Text:"Propriétés de l'image",EditText:"Propriétés de l'image",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/image16.png",IframeCssClass:null,Id:"itslimageprop"},ckeditor_wiris:{DialogSrc:"https://leducdenormandie.itslearning.com/Services/CommonService.asmx/MeasureKpi?measureSection=kpiMeasureSection&measurement=kpiMeasurement&measureContext=kpiMeasureContext",Command:null,IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:"Éditeur WIRIS",EditText:"Modifier l'équation",IconSrc:null,IframeCssClass:null,Id:"ckeditor_wiris"},editextension:{DialogSrc:null,Command:"window.open( 'https://leducdenormandie.itslearning.com/editor/PluginHandler.aspx?ExtensionId=-1&EditorClientInstanceId={editorId}', '__extensionPopup_-1', 'resizable=yes,scrollbars=yes,status=yes'); ",IsEditorDialogTransparent:!1,DialogHeight:0,DialogWidth:0,Text:"Remplacer un plug-in",EditText:"Modifier un plug-in",IconSrc:"https://cdn.itslearning.com/v3.52.0.20/icons/xp/tools16.png",IframeCssClass:null,Id:"editextension"},title:!1,longtouchcontextmenu:{Delay:1e3,DistanceThreshold:5,Id:"longtouchcontextmenu"},entities_processNumerical:!1})},this.addDiv=function(e){var t=!1,i=e.data.element,s=e.data.codeHtml;0==this.selection.objets.length&&(this.selection.objets.push($("#"+this.firstParent+" [id=page]").get(0)),t=!0);for(var a=this.selection.objets.length,o=0;a>o;o++){var n=$(this.selection.objets[o]),l=s.replace(/indice/g,this.index);e.data.dvData&&(l=l.replace(/dvData/g,$("#"+e.data.dvData).val())),"dialog"==e.data.type&&(l=l.replace(/questionX/g,"question"+pageActuelle)),$("#"+this.firstParent+" [id="+$(n).attr("id")+"]").append(l),"dialog"==e.data.type&&$("[aria-describedby=boite"+this.index+"]").remove(),"drag"==e.data.type&&($("#drag"+this.index).draggable("destroy"),this.setInteractivite("#drag"+this.index)),this.setInteractivite("#"+i+this.index),this.index++}t&&this.selection.removeAll()},this.createPartie=function(e){var t=$(".question").length,i='<div id="question'+t+'" class="question choices-border"><div class="page questionid"></div></div>';$("#questions").append(i);var s='<span class="bouton" id="bouton'+t+'" onclick="afficheQuestion('+t+')"> </span>';$("#menu").append(s),$("#bouton"+t).click(),$("#addZoneNote").click()},this.createHtml=function(e){this.selection.removeAll(),$("[id*=boite]").resizable("destroy").draggable("destroy").off("click").removeClass("construction");var t=dv.enteteHtml+$("#page").html()+dv.piedHtml,i=document.createElement("a");i.href="data:attachment/html,"+encodeURIComponent(t),i.target="_blank",i.download="question.html",document.body.appendChild(i),i.click(),$.proxy(this.setInteractivite("[id*=boite]"),this),$("[id*=boite]").addClass("construction")},this.openHtml=function(e){$.ajax({url:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/devoir/API4/prof/findAllVersion.php",type:"POST",dataType:"json",data:"&path="+window.location.pathname,success:$.proxy(function(e){},this)})},this.openHtmlOld=function(e){var t=$("#fichier").val();$.get(t,$.proxy(function(e){var t=$("<div/>").append(e),i=t.find("[class*=question]");$("[id*=question]").html(i),$("[class*=question]").attr("id","page"),$.proxy(this.setInteractivite("[id*=boite]"),this),$("[id*=boite]").addClass("construction"),this.index=this.returnMaxNumBoite()+1,$("#"+this.firstParent+" #page").droppable({hoverClass:"hoverDroppable",tolerance:"fit",greedy:!0,addClass:!1,drop:$.proxy(function(e,t){e.stopPropagation(),this.selection.addObjet(t.draggable[0]);for(var i=0;i<this.selection.objets.length;i++){var s=$(this.selection.objets[i]),a=$(e.target),o=a.offset(),n=s.offset(),l={};for(var r in o)l[r]=n[r]-o[r];s.css(l),a.append(s[0])}},this)})},this),"html")},this.returnMaxNumBoite=function(){for(var e=$("[id*=boite]"),t=1,i=0;i<e.length;i++){var s=parseInt($(e[i]).attr("id").replace(/boite/g,""));s>t&&(t=s)}return t+1},this.setInteractivite=function(e){$(e).droppable({hoverClass:"hoverDroppable",tolerance:"fit",greedy:!0,addClass:!1,drop:$.proxy(function(e,t){e.stopPropagation(),this.selection.addObjet(t.draggable[0]);for(var i=0;i<this.selection.objets.length;i++){var s=$(this.selection.objets[i]),a=$(e.target);if(("boite"==a.attr("id").substring(0,5)||"drag"==a.attr("id").substring(0,4))&&"DIV"==s[0].tagName){var o=a.offset(),n=s.offset(),l={};for(var r in o)l[r]=n[r]-o[r];s.css(l),a.append(s[0])}}},this)}).on("dblclick",function(e){e.stopPropagation(),dv.boiteID=this.id,CKEDITOR.instances.modifTextarea.document.$.body.innerHTML=$(this).find("span")[0].innerHTML,$("#textModif").dialog("option","position",{my:"center center",at:"center center",of:document}),$("#textModif").dialog("option","buttons",[{text:"Ok",click:function(){var e=$("#"+dv.boiteID+" span");e[0].innerHTML=CKEDITOR.instances.modifTextarea.document.$.body.innerHTML,e=$("#"+dv.boiteID).css("height","");var t=e[0].scrollHeight;e.css("height",t+"px"),$("#"+dv.boiteID+" span.math").trigger("changeMath"),$("#"+dv.boiteID+" span.cloze").trigger("changeCloze"),$(this).dialog("close")}}]).dialog("open")});var i=e;i=i.substring(1,5),"drag"!=i&&$(e).draggable(t).resizable({alsoResize:".selected",resize:$.proxy(function(e,t){e.stopPropagation();var s=(e.target,t.size.width),a=t.size.height;this.selection.setDimension({width:s,height:a})},this),stop:$.proxy(function(e,t){this.selection.removeAll()},this)}).on("click",{obj:this.selection,firstParent:this.firstParent},function(e){e.stopPropagation(),dv.modeEbauche&&(e.stopPropagation(),$(this).hasClass("selected")?($(this).removeClass("selected"),e.data.obj.removeObjet(this),e.ctrlKey&&$(this).remove()):($(".selected").not($(this).siblings(".selected")).removeClass("selected"),$(this).addClass("selected"),$(".selected").each(function(t,i){0==t&&e.data.obj.removeAll(),e.data.obj.addObjet(this)})),maPage.setUIParameters(e.data.obj.objets[0]))}).on("mousedown",function(e){e.stopPropagation()})},this.setUIParameters=function(e){var t=$(e).attr("type");switch(t){case"radio":var i='<h1>Le bouton de type Radio</h1><input id="param1" class="text_eleve" type="text" value="'+$(e).find("input").attr("name")+'" style="float: right;margin-top: 10px;"><div>Définir le nom du groupe des boutons radio sélectionnés:</div><script>$("#param1").on("change",function(a){var n=[$(this).val()];$(maPage.selection.objets).each(function(){$(this).find("input").attr("name",n[0])},n)});</script>';$("#menuEbauche").html(i);break;case"text":var s=$(e).find("input").attr("style"),a=new RegExp(".*text-align *: *(\\w+).*","i");a.exec(s);var o=RegExp.$1,i='<h1>La zone type Texte</h1><select id="param1" style="float:right;background: rgb(255, 255, 255) none repeat scroll 0% 0%; width: 120px;"><option value="left">à gauche</option><option value="center">au centre</option><option value="right">à droite</option></select><div>Définir le positionnement du text dans la saisie:</div><script>$("#param1").on("change",function(a){var t=[$(this).val()];$(maPage.selection.objets).each(function(){var a=$(this).find("input").attr("style"),e=new RegExp("^(.*)text-align *: *(\\\\w+)\\\\s*(;.*)$","i");e.exec(a);var n=RegExp.$1,i=RegExp.$3,r=n+"text-align:"+t[0]+i;$(this).find("input").attr("style",r)},t)});</script>';$("#menuEbauche").html(i),$("#param1").val(o);corrige.setUI(e)}},this.saveAllQuestions=function(){$("#page [id*=boite][class*=construction]").off("click dblclick mousedown"),$("#page [id*=boite][class*=resizable]").resizable("destroy"),$("#page [id*=boite][class*=draggable]").draggable("destroy"),$("#page [id*=boite][class*=droppable]").droppable("destroy"),$("#page [id*=boite][class*=construction]").removeClass("construction"),$("#page [id*=drag]").each(function(){$.proxy(maPage.delInteractivite(this.id),maPage),$(this).removeClass("construction")}),$("#page").removeAttr("id"),$(".commentaire").hide(),$(".question").hide(),$("#question0").show();var e=encodeURIComponent($("#questions").html());e.length;$.ajax({url:location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+"/devoir/API4/saveQuestions.php",type:"POST",dataType:"html",data:"code="+e+"&path="+window.location.pathname,success:$.proxy(function(e){$("#question"+pageActuelle+" .page").attr("id","page"),$.proxy(this.setInteractivite("#page [id*=boite]"),this),$(".commentaire").show(),$("#page [id*=boite]").addClass("construction").parent().show()},this)})},this.delInteractivite=function(e){$(e).off("click dblclick mousedown"),$(e+" [class*=resizable]").resizable("destroy"),$(e+" [class*=draggable]").draggable("destroy"),$(e+" [class*=droppable]").droppable("destroy"),$(e).removeClass("construction")},this.removeUIEbauche=function(){return'<div style="font-size: 1.5em;text-align: center;">Gestion des paramètres liés aux élements</div><div style="position: relative;top: 50px;left: 50px;font-size: 1.2em;font-weight:bold;">Sélectionner un élément...</div>'}},maPage;maPage=new CreatePage;var corrige=new Correction(maPage);